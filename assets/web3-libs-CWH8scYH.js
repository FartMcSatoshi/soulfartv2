const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/embedded-wallet-D6RqQgWx.js","assets/if-defined-CemL2qSm.js","assets/index-D6sRbpV9.js","assets/index-CASfriZ_.js","assets/ref-B_BLFkaE.js","assets/index-smxtHXFl.js","assets/index-D91zsuD8.js","assets/index-kMWdJ4E9.js","assets/index-BAWHCcZB.js","assets/index-D-FLxoDn.js","assets/index-D7TiUfiD.js","assets/index-CYC8yU5Y.js","assets/react-vendor-BRma4tE0.js","assets/react-query-xO9mIliO.js","assets/email-BDfQSpmP.js","assets/index-YCCtjcY2.js","assets/socials-5og5eXfm.js","assets/index-CAhKMkLy.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-Bn1IdNjl.js","assets/index-1smp-IWY.js","assets/index-CiGU-3pZ.js","assets/index-Ck-ClO5v.js","assets/swaps-CdQZGYE2.js","assets/index-RB6bBVJu.js","assets/index-DqdoLKdh.js","assets/index-Kygd5YIi.js","assets/send-C9TLTwAW.js","assets/index-oE73Qfjp.js","assets/index-CPHKg2Wp.js","assets/receive-D-i9oQLV.js","assets/index-Dje8ymY8.js","assets/onramp-DUYDvF77.js","assets/index-DaiYSHO6.js","assets/index-DHSGDtrJ.js","assets/transactions-CV5JtzvR.js","assets/index-Ds76PJFG.js","assets/index-CYC82quD.js","assets/index-B6wdkcI7.js","assets/index-Bu7xlabp.js","assets/index-I3vnO5iZ.js","assets/w3m-modal-CcFW0Fke.js","assets/wallet-standard-C4sVwx6N.js","assets/index-C-4Cg_QM.js"])))=>i.map(i=>d[i]);
import{g as Ii,b as b0,a as Br}from"./react-vendor-BRma4tE0.js";import{r as Z3,u as J3}from"./react-query-xO9mIliO.js";const X3="modulepreload",Q3=function(t){return"/"+t},iE={},Or=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let c=function(u){return Promise.all(u.map(l=>Promise.resolve(l).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");s=c(n.map(u=>{if(u=Q3(u),u in iE)return;iE[u]=!0;const l=u.endsWith(".css"),d=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const h=document.createElement("link");if(h.rel=l?"stylesheet":X3,l||(h.as="script"),h.crossOrigin="",h.href=u,a&&h.setAttribute("nonce",a),document.head.appendChild(h),l)return new Promise((f,y)=>{h.addEventListener("load",f),h.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};function e8(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var XI={exports:{}},Tn=XI.exports={},Mi,Li;function Jy(){throw new Error("setTimeout has not been defined")}function Xy(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Mi=setTimeout:Mi=Jy}catch{Mi=Jy}try{typeof clearTimeout=="function"?Li=clearTimeout:Li=Xy}catch{Li=Xy}})();function QI(t){if(Mi===setTimeout)return setTimeout(t,0);if((Mi===Jy||!Mi)&&setTimeout)return Mi=setTimeout,setTimeout(t,0);try{return Mi(t,0)}catch{try{return Mi.call(null,t,0)}catch{return Mi.call(this,t,0)}}}function t8(t){if(Li===clearTimeout)return clearTimeout(t);if((Li===Xy||!Li)&&clearTimeout)return Li=clearTimeout,clearTimeout(t);try{return Li(t)}catch{try{return Li.call(null,t)}catch{return Li.call(this,t)}}}var So=[],Uu=!1,ec,Zf=-1;function n8(){!Uu||!ec||(Uu=!1,ec.length?So=ec.concat(So):Zf=-1,So.length&&eS())}function eS(){if(!Uu){var t=QI(n8);Uu=!0;for(var e=So.length;e;){for(ec=So,So=[];++Zf<e;)ec&&ec[Zf].run();Zf=-1,e=So.length}ec=null,Uu=!1,t8(t)}}Tn.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];So.push(new tS(t,e)),So.length===1&&!Uu&&QI(eS)};function tS(t,e){this.fun=t,this.array=e}tS.prototype.run=function(){this.fun.apply(null,this.array)};Tn.title="browser";Tn.browser=!0;Tn.env={};Tn.argv=[];Tn.version="";Tn.versions={};function Ho(){}Tn.on=Ho;Tn.addListener=Ho;Tn.once=Ho;Tn.off=Ho;Tn.removeListener=Ho;Tn.removeAllListeners=Ho;Tn.emit=Ho;Tn.prependListener=Ho;Tn.prependOnceListener=Ho;Tn.listeners=function(t){return[]};Tn.binding=function(t){throw new Error("process.binding is not supported")};Tn.cwd=function(){return"/"};Tn.chdir=function(t){throw new Error("process.chdir is not supported")};Tn.umask=function(){return 0};var r8=XI.exports;const tr=e8(r8),s8=Symbol(),Xb=Symbol(),td="a",nS="f",oE="p",rS="c",sS="t",Qb="h",dd="w",e1="o",t1="k";let i8=(t,e)=>new Proxy(t,e);const Qy=Object.getPrototypeOf,ew=new WeakMap,iS=t=>t&&(ew.has(t)?ew.get(t):Qy(t)===Object.prototype||Qy(t)===Array.prototype),Ep=t=>typeof t=="object"&&t!==null,o8=t=>Object.values(Object.getOwnPropertyDescriptors(t)).some(e=>!e.configurable&&!e.writable),a8=t=>{if(Array.isArray(t))return Array.from(t);const e=Object.getOwnPropertyDescriptors(t);return Object.values(e).forEach(n=>{n.configurable=!0}),Object.create(Qy(t),e)},c8=(t,e)=>{const n={[nS]:e};let r=!1;const s=(a,c)=>{if(!r){let u=n[td].get(t);if(u||(u={},n[td].set(t,u)),a===dd)u[dd]=!0;else{let l=u[a];l||(l=new Set,u[a]=l),l.add(c)}}},i=()=>{r=!0,n[td].delete(t)},o={get(a,c){return c===Xb?t:(s(t1,c),oS(Reflect.get(a,c),n[td],n[rS],n[sS]))},has(a,c){return c===s8?(i(),!0):(s(Qb,c),Reflect.has(a,c))},getOwnPropertyDescriptor(a,c){return s(e1,c),Reflect.getOwnPropertyDescriptor(a,c)},ownKeys(a){return s(dd),Reflect.ownKeys(a)}};return e&&(o.set=o.deleteProperty=()=>!1),[o,n]},n1=t=>t[Xb]||t,oS=(t,e,n,r)=>{if(!iS(t))return t;let s=r&&r.get(t);if(!s){const c=n1(t);o8(c)?s=[c,a8(c)]:s=[c],r?.set(t,s)}const[i,o]=s;let a=n&&n.get(i);return(!a||a[1][nS]!==!!o)&&(a=c8(i,!!o),a[1][oE]=i8(o||i,a[0]),n&&n.set(i,a)),a[1][td]=e,a[1][rS]=n,a[1][sS]=r,a[1][oE]},u8=(t,e)=>{const n=Reflect.ownKeys(t),r=Reflect.ownKeys(e);return n.length!==r.length||n.some((s,i)=>s!==r[i])},aS=(t,e,n,r,s=Object.is)=>{if(s(t,e))return!1;if(!Ep(t)||!Ep(e))return!0;const i=n.get(n1(t));if(!i)return!0;if(r){if(r.get(t)===e)return!1;r.set(t,e)}let o=null;for(const a of i[Qb]||[])if(o=Reflect.has(t,a)!==Reflect.has(e,a),o)return o;if(i[dd]===!0){if(o=u8(t,e),o)return o}else for(const a of i[e1]||[]){const c=!!Reflect.getOwnPropertyDescriptor(t,a),u=!!Reflect.getOwnPropertyDescriptor(e,a);if(o=c!==u,o)return o}for(const a of i[t1]||[])if(o=aS(t[a],e[a],n,r,s),o)return o;if(o===null)throw new Error("invalid used");return o},l8=t=>iS(t)&&t[Xb]||null,aE=(t,e=!0)=>{ew.set(t,e)},d8=(t,e,n)=>{const r=[],s=new WeakSet,i=(o,a)=>{var c,u,l;if(s.has(o))return;Ep(o)&&s.add(o);const d=Ep(o)&&e.get(n1(o));if(d){if((c=d[Qb])===null||c===void 0||c.forEach(h=>{const f=`:has(${String(h)})`;r.push(a?[...a,f]:[f])}),d[dd]===!0){const h=":ownKeys";r.push(a?[...a,h]:[h])}else(u=d[e1])===null||u===void 0||u.forEach(h=>{const f=`:hasOwn(${String(h)})`;r.push(a?[...a,f]:[f])});(l=d[t1])===null||l===void 0||l.forEach(h=>{"value"in(Object.getOwnPropertyDescriptor(o,h)||{})&&i(o[h],a?[...a,h]:[h])})}else a&&r.push(a)};return i(t),r},_p={},r1=t=>typeof t=="object"&&t!==null,h8=t=>r1(t)&&!xh.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),cS=(t,e)=>{const n=tw.get(t);if(n?.[0]===e)return n[1];const r=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return aE(r,!0),tw.set(t,[e,r]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(xh.has(i))aE(i,!1);else if(ka.has(i)){const[c,u]=ka.get(i);a.value=cS(c,u())}Object.defineProperty(r,s,a)}),Object.preventExtensions(r)},f8=(t,e,n,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);n(i);const a=Reflect.deleteProperty(s,i);return a&&r(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),u=Reflect.get(s,i,a);if(c&&(cE(u,o)||Nd.has(o)&&cE(u,Nd.get(o))))return!0;n(i),r1(o)&&(o=l8(o)||o);const l=!ka.has(o)&&g8(o)?Dt(o):o;return e(i,l),Reflect.set(s,i,l,a),r(["set",[i],o,u]),!0}}),ka=new WeakMap,xh=new WeakSet,tw=new WeakMap,nd=[1,1],Nd=new WeakMap;let cE=Object.is,p8=(t,e)=>new Proxy(t,e),g8=h8,m8=cS,y8=f8;function Dt(t={}){if(!r1(t))throw new Error("object required");const e=Nd.get(t);if(e)return e;let n=nd[0];const r=new Set,s=(v,T=++nd[0])=>{n!==T&&(n=T,r.forEach(O=>O(v,T)))};let i=nd[1];const o=(v=++nd[1])=>(i!==v&&!r.size&&(i=v,c.forEach(([T])=>{const O=T[1](v);O>n&&(n=O)})),n),a=v=>(T,O)=>{const A=[...T];A[1]=[v,...A[1]],s(A,O)},c=new Map,u=(v,T)=>{const O=!xh.has(T)&&ka.get(T);if(O){if((_p?"production":void 0)!=="production"&&c.has(v))throw new Error("prop listener already exists");if(r.size){const A=O[2](a(v));c.set(v,[O,A])}else c.set(v,[O])}},l=v=>{var T;const O=c.get(v);O&&(c.delete(v),(T=O[1])==null||T.call(O))},d=v=>(r.add(v),r.size===1&&c.forEach(([O,A],M)=>{if((_p?"production":void 0)!=="production"&&A)throw new Error("remove already exists");const P=O[2](a(M));c.set(M,[O,P])}),()=>{r.delete(v),r.size===0&&c.forEach(([O,A],M)=>{A&&(A(),c.set(M,[O]))})});let h=!0;const f=y8(()=>h,u,l,s),y=p8(t,f);Nd.set(t,y);const m=[t,o,d];return ka.set(y,m),Reflect.ownKeys(t).forEach(v=>{const T=Object.getOwnPropertyDescriptor(t,v);"value"in T&&T.writable&&(y[v]=t[v])}),h=!1,y}function In(t,e,n){const r=ka.get(t);(_p?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let a=!1;const u=o(l=>{i.push(l),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,u()}}function vc(t){const e=ka.get(t);(_p?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[n,r]=e;return m8(n,r())}function Oa(t){return xh.add(t),t}function w8(){return{proxyStateMap:ka,refSet:xh,snapCache:tw,versionHolder:nd,proxyCache:Nd}}function Nn(t,e,n,r){let s=t[e];return In(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}const{proxyStateMap:b8,snapCache:v8}=w8(),lf=t=>b8.has(t);function E8(t){const e=[];let n=0;const r=new Map,s=new WeakMap,i=()=>{const u=v8.get(a),l=u?.[1];if(l&&!s.has(l)){const d=new Map(r);s.set(l,d)}},o=u=>s.get(u)||r,a={data:e,index:n,epoch:0,get size(){return lf(this)||i(),o(this).size},get(u){const d=o(this).get(u);if(d===void 0){this.epoch;return}return this.data[d]},has(u){const l=o(this);return this.epoch,l.has(u)},set(u,l){if(!lf(this))throw new Error("Cannot perform mutations on a snapshot");const d=r.get(u);return d===void 0?(r.set(u,this.index),this.data[this.index++]=l):this.data[d]=l,this.epoch++,this},delete(u){if(!lf(this))throw new Error("Cannot perform mutations on a snapshot");const l=r.get(u);return l===void 0?!1:(delete this.data[l],r.delete(u),this.epoch++,!0)},clear(){if(!lf(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(u){this.epoch,o(this).forEach((d,h)=>{u(this.data[d],h,this)})},*entries(){this.epoch;const u=o(this);for(const[l,d]of u)yield[l,this.data[d]]},*keys(){this.epoch;const u=o(this);for(const l of u.keys())yield l},*values(){this.epoch;const u=o(this);for(const l of u.values())yield this.data[l]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=Dt(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}var Jf={exports:{}},_8=Jf.exports,uE;function C8(){return uE||(uE=1,function(t,e){(function(n,r){t.exports=r()})(_8,function(){var n=1e3,r=6e4,s=36e5,i="millisecond",o="second",a="minute",c="hour",u="day",l="week",d="month",h="quarter",f="year",y="date",m="Invalid Date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,T=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,O={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(p){var g=["th","st","nd","rd"],w=p%100;return"["+p+(g[(w-20)%10]||g[w]||g[0])+"]"}},A=function(p,g,w){var _=String(p);return!_||_.length>=g?p:""+Array(g+1-_.length).join(w)+p},M={s:A,z:function(p){var g=-p.utcOffset(),w=Math.abs(g),_=Math.floor(w/60),C=w%60;return(g<=0?"+":"-")+A(_,2,"0")+":"+A(C,2,"0")},m:function p(g,w){if(g.date()<w.date())return-p(w,g);var _=12*(w.year()-g.year())+(w.month()-g.month()),C=g.clone().add(_,d),L=w-C<0,z=g.clone().add(_+(L?-1:1),d);return+(-(_+(w-C)/(L?C-z:z-C))||0)},a:function(p){return p<0?Math.ceil(p)||0:Math.floor(p)},p:function(p){return{M:d,y:f,w:l,d:u,D:y,h:c,m:a,s:o,ms:i,Q:h}[p]||String(p||"").toLowerCase().replace(/s$/,"")},u:function(p){return p===void 0}},P="en",I={};I[P]=O;var F="$isDayjsObject",W=function(p){return p instanceof N||!(!p||!p[F])},D=function p(g,w,_){var C;if(!g)return P;if(typeof g=="string"){var L=g.toLowerCase();I[L]&&(C=L),w&&(I[L]=w,C=L);var z=g.split("-");if(!C&&z.length>1)return p(z[0])}else{var q=g.name;I[q]=g,C=q}return!_&&C&&(P=C),C||!_&&P},k=function(p,g){if(W(p))return p.clone();var w=typeof g=="object"?g:{};return w.date=p,w.args=arguments,new N(w)},B=M;B.l=D,B.i=W,B.w=function(p,g){return k(p,{locale:g.$L,utc:g.$u,x:g.$x,$offset:g.$offset})};var N=function(){function p(w){this.$L=D(w.locale,null,!0),this.parse(w),this.$x=this.$x||w.x||{},this[F]=!0}var g=p.prototype;return g.parse=function(w){this.$d=function(_){var C=_.date,L=_.utc;if(C===null)return new Date(NaN);if(B.u(C))return new Date;if(C instanceof Date)return new Date(C);if(typeof C=="string"&&!/Z$/i.test(C)){var z=C.match(v);if(z){var q=z[2]-1||0,b=(z[7]||"0").substring(0,3);return L?new Date(Date.UTC(z[1],q,z[3]||1,z[4]||0,z[5]||0,z[6]||0,b)):new Date(z[1],q,z[3]||1,z[4]||0,z[5]||0,z[6]||0,b)}}return new Date(C)}(w),this.init()},g.init=function(){var w=this.$d;this.$y=w.getFullYear(),this.$M=w.getMonth(),this.$D=w.getDate(),this.$W=w.getDay(),this.$H=w.getHours(),this.$m=w.getMinutes(),this.$s=w.getSeconds(),this.$ms=w.getMilliseconds()},g.$utils=function(){return B},g.isValid=function(){return this.$d.toString()!==m},g.isSame=function(w,_){var C=k(w);return this.startOf(_)<=C&&C<=this.endOf(_)},g.isAfter=function(w,_){return k(w)<this.startOf(_)},g.isBefore=function(w,_){return this.endOf(_)<k(w)},g.$g=function(w,_,C){return B.u(w)?this[_]:this.set(C,w)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(w,_){var C=this,L=!!B.u(_)||_,z=B.p(w),q=function(he,Oe){var Re=B.w(C.$u?Date.UTC(C.$y,Oe,he):new Date(C.$y,Oe,he),C);return L?Re:Re.endOf(u)},b=function(he,Oe){return B.w(C.toDate()[he].apply(C.toDate("s"),(L?[0,0,0,0]:[23,59,59,999]).slice(Oe)),C)},E=this.$W,j=this.$M,K=this.$D,X="set"+(this.$u?"UTC":"");switch(z){case f:return L?q(1,0):q(31,11);case d:return L?q(1,j):q(0,j+1);case l:var re=this.$locale().weekStart||0,de=(E<re?E+7:E)-re;return q(L?K-de:K+(6-de),j);case u:case y:return b(X+"Hours",0);case c:return b(X+"Minutes",1);case a:return b(X+"Seconds",2);case o:return b(X+"Milliseconds",3);default:return this.clone()}},g.endOf=function(w){return this.startOf(w,!1)},g.$set=function(w,_){var C,L=B.p(w),z="set"+(this.$u?"UTC":""),q=(C={},C[u]=z+"Date",C[y]=z+"Date",C[d]=z+"Month",C[f]=z+"FullYear",C[c]=z+"Hours",C[a]=z+"Minutes",C[o]=z+"Seconds",C[i]=z+"Milliseconds",C)[L],b=L===u?this.$D+(_-this.$W):_;if(L===d||L===f){var E=this.clone().set(y,1);E.$d[q](b),E.init(),this.$d=E.set(y,Math.min(this.$D,E.daysInMonth())).$d}else q&&this.$d[q](b);return this.init(),this},g.set=function(w,_){return this.clone().$set(w,_)},g.get=function(w){return this[B.p(w)]()},g.add=function(w,_){var C,L=this;w=Number(w);var z=B.p(_),q=function(j){var K=k(L);return B.w(K.date(K.date()+Math.round(j*w)),L)};if(z===d)return this.set(d,this.$M+w);if(z===f)return this.set(f,this.$y+w);if(z===u)return q(1);if(z===l)return q(7);var b=(C={},C[a]=r,C[c]=s,C[o]=n,C)[z]||1,E=this.$d.getTime()+w*b;return B.w(E,this)},g.subtract=function(w,_){return this.add(-1*w,_)},g.format=function(w){var _=this,C=this.$locale();if(!this.isValid())return C.invalidDate||m;var L=w||"YYYY-MM-DDTHH:mm:ssZ",z=B.z(this),q=this.$H,b=this.$m,E=this.$M,j=C.weekdays,K=C.months,X=C.meridiem,re=function(Oe,Re,Ve,kt){return Oe&&(Oe[Re]||Oe(_,L))||Ve[Re].slice(0,kt)},de=function(Oe){return B.s(q%12||12,Oe,"0")},he=X||function(Oe,Re,Ve){var kt=Oe<12?"AM":"PM";return Ve?kt.toLowerCase():kt};return L.replace(T,function(Oe,Re){return Re||function(Ve){switch(Ve){case"YY":return String(_.$y).slice(-2);case"YYYY":return B.s(_.$y,4,"0");case"M":return E+1;case"MM":return B.s(E+1,2,"0");case"MMM":return re(C.monthsShort,E,K,3);case"MMMM":return re(K,E);case"D":return _.$D;case"DD":return B.s(_.$D,2,"0");case"d":return String(_.$W);case"dd":return re(C.weekdaysMin,_.$W,j,2);case"ddd":return re(C.weekdaysShort,_.$W,j,3);case"dddd":return j[_.$W];case"H":return String(q);case"HH":return B.s(q,2,"0");case"h":return de(1);case"hh":return de(2);case"a":return he(q,b,!0);case"A":return he(q,b,!1);case"m":return String(b);case"mm":return B.s(b,2,"0");case"s":return String(_.$s);case"ss":return B.s(_.$s,2,"0");case"SSS":return B.s(_.$ms,3,"0");case"Z":return z}return null}(Oe)||z.replace(":","")})},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(w,_,C){var L,z=this,q=B.p(_),b=k(w),E=(b.utcOffset()-this.utcOffset())*r,j=this-b,K=function(){return B.m(z,b)};switch(q){case f:L=K()/12;break;case d:L=K();break;case h:L=K()/3;break;case l:L=(j-E)/6048e5;break;case u:L=(j-E)/864e5;break;case c:L=j/s;break;case a:L=j/r;break;case o:L=j/n;break;default:L=j}return C?L:B.a(L)},g.daysInMonth=function(){return this.endOf(d).$D},g.$locale=function(){return I[this.$L]},g.locale=function(w,_){if(!w)return this.$L;var C=this.clone(),L=D(w,_,!0);return L&&(C.$L=L),C},g.clone=function(){return B.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},p}(),R=N.prototype;return k.prototype=R,[["$ms",i],["$s",o],["$m",a],["$H",c],["$W",u],["$M",d],["$y",f],["$D",y]].forEach(function(p){R[p[1]]=function(g){return this.$g(g,p[0],p[1])}}),k.extend=function(p,g){return p.$i||(p(g,N,k),p.$i=!0),k},k.locale=D,k.isDayjs=W,k.unix=function(p){return k(1e3*p)},k.en=I[P],k.Ls=I,k.p={},k})}(Jf)),Jf.exports}var A8=C8();const Mu=Ii(A8);var Xf={exports:{}},I8=Xf.exports,lE;function S8(){return lE||(lE=1,function(t,e){(function(n,r){t.exports=r()})(I8,function(){return{name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(n){var r=["th","st","nd","rd"],s=n%100;return"["+n+(r[(s-20)%10]||r[s]||r[0])+"]"}}})}(Xf)),Xf.exports}var x8=S8();const T8=Ii(x8);var Qf={exports:{}},N8=Qf.exports,dE;function R8(){return dE||(dE=1,function(t,e){(function(n,r){t.exports=r()})(N8,function(){return function(n,r,s){n=n||{};var i=r.prototype,o={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function a(u,l,d,h){return i.fromToBase(u,l,d,h)}s.en.relativeTime=o,i.fromToBase=function(u,l,d,h,f){for(var y,m,v,T=d.$locale().relativeTime||o,O=n.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],A=O.length,M=0;M<A;M+=1){var P=O[M];P.d&&(y=h?s(u).diff(d,P.d,!0):d.diff(u,P.d,!0));var I=(n.rounding||Math.round)(Math.abs(y));if(v=y>0,I<=P.r||!P.r){I<=1&&M>0&&(P=O[M-1]);var F=T[P.l];f&&(I=f(""+I)),m=typeof F=="string"?F.replace("%d",I):F(I,l,P.l,v);break}}if(l)return m;var W=v?T.future:T.past;return typeof W=="function"?W(m):W.replace("%s",m)},i.to=function(u,l){return a(u,l,this,!0)},i.from=function(u,l){return a(u,l,this)};var c=function(u){return u.$u?s.utc():s()};i.toNow=function(u){return this.to(c(this),u)},i.fromNow=function(u){return this.from(c(this),u)}}})}(Qf)),Qf.exports}var P8=R8();const k8=Ii(P8);var ep={exports:{}},O8=ep.exports,hE;function B8(){return hE||(hE=1,function(t,e){(function(n,r){t.exports=r()})(O8,function(){return function(n,r,s){s.updateLocale=function(i,o){var a=s.Ls[i];if(a)return(o?Object.keys(o):[]).forEach(function(c){a[c]=o[c]}),a}}})}(ep)),ep.exports}var $8=B8();const D8=Ii($8);Mu.extend(k8);Mu.extend(D8);const U8={...T8,name:"en-web3-modal",relativeTime:{future:"in %s",past:"%s ago",s:"%d sec",m:"1 min",mm:"%d min",h:"1 hr",hh:"%d hrs",d:"1 d",dd:"%d d",M:"1 mo",MM:"%d mo",y:"1 yr",yy:"%d yr"}},M8=["January","February","March","April","May","June","July","August","September","October","November","December"];Mu.locale("en-web3-modal",U8);const fE={getMonthNameByIndex(t){return M8[t]},getYear(t=new Date().toISOString()){return Mu(t).year()},getRelativeDateFromNow(t){return Mu(t).locale("en-web3-modal").fromNow(!0)},formatDate(t,e="DD MMM"){return Mu(t).format(e)}};var pE={};const ne={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof tr<"u"&&typeof pE<"u"?pE.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},Rd={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return t?.filter(n=>n.chainNamespace===e)||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){if(!e)return;const n=t.find(s=>s.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return ne.CHAIN_NAME_MAP?.[r]||void 0}};var L8=20,F8=1,Ec=1e6,gE=1e6,j8=-7,q8=21,z8=!1,Th="[big.js] ",Uc=Th+"Invalid ",v0=Uc+"decimal places",W8=Uc+"rounding mode",uS=Th+"Division by zero",zt={},Vi=void 0,H8=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function lS(){function t(e){var n=this;if(!(n instanceof t))return e===Vi?lS():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(Uc+"value");e=e===0&&1/e<0?"-0":String(e)}V8(n,e)}n.constructor=t}return t.prototype=zt,t.DP=L8,t.RM=F8,t.NE=j8,t.PE=q8,t.strict=z8,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function V8(t,e){var n,r,s;if(!H8.test(e))throw Error(Uc+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function Mc(t,e,n,r){var s=t.c;if(n===Vi&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(W8);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==Vi))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==Vi||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function Lc(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}zt.abs=function(){var t=new this.constructor(this);return t.s=1,t};zt.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};zt.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>Ec)throw Error(v0);if(!s[0])throw Error(uS);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,u,l,d,h=s.slice(),f=a=s.length,y=r.length,m=r.slice(0,a),v=m.length,T=t,O=T.c=[],A=0,M=o+(T.e=e.e-t.e)+1;for(T.s=i,i=M<0?0:M,h.unshift(0);v++<a;)m.push(0);do{for(u=0;u<10;u++){if(a!=(v=m.length))l=a>v?1:-1;else for(d=-1,l=0;++d<a;)if(s[d]!=m[d]){l=s[d]>m[d]?1:-1;break}if(l<0){for(c=v==a?s:h;v;){if(m[--v]<c[v]){for(d=v;d&&!m[--d];)m[d]=9;--m[d],m[v]+=10}m[v]-=c[v]}for(;!m[0];)m.shift()}else break}O[A++]=l?u:++u,m[0]&&l?m[v]=r[f]||0:m=[r[f]]}while((f++<y||m[0]!==Vi)&&i--);return!O[0]&&A!=1&&(O.shift(),T.e--,M--),A>M&&Mc(T,M,n.RM,m[0]!==Vi),T};zt.eq=function(t){return this.cmp(t)===0};zt.gt=function(t){return this.cmp(t)>0};zt.gte=function(t){return this.cmp(t)>-1};zt.lt=function(t){return this.cmp(t)<0};zt.lte=function(t){return this.cmp(t)<1};zt.minus=zt.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var u=i.c.slice(),l=i.e,d=t.c,h=t.e;if(!u[0]||!d[0])return d[0]?t.s=-c:u[0]?t=new o(i):t.s=1,t;if(a=l-h){for((s=a<0)?(a=-a,r=u):(h=l,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=u.length<d.length)?u:d).length,a=c=0;c<n;c++)if(u[c]!=d[c]){s=u[c]<d[c];break}if(s&&(r=u,u=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=u.length))>0)for(;c--;)u[e++]=0;for(c=e;n>a;){if(u[--n]<d[n]){for(e=n;e&&!u[--e];)u[e]=9;--u[e],u[n]+=10}u[n]-=d[n]}for(;u[--c]===0;)u.pop();for(;u[0]===0;)u.shift(),--h;return u[0]||(t.s=1,u=[h=0]),t.c=u,t.e=h,t};zt.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(uS);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};zt.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};zt.plus=zt.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,u=t.c;if(!a[0]||!u[0])return u[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=u):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-u.length<0&&(r=u,u=a,a=r),e=u.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+u[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};zt.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-gE||t>gE)throw Error(Uc+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};zt.prec=function(t,e){if(t!==~~t||t<1||t>Ec)throw Error(Uc+"precision");return Mc(new this.constructor(this),t,e)};zt.round=function(t,e){if(t===Vi)t=0;else if(t!==~~t||t<-Ec||t>Ec)throw Error(v0);return Mc(new this.constructor(this),t+this.e+1,e)};zt.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(Th+"No square root");i=Math.sqrt(+Lc(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return Mc(t,(s.DP-=4)+t.e+1,s.RM)};zt.times=zt.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,u=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+u,o<a&&(e=s,s=i,i=e,u=o,o=a,a=u),e=new Array(u=o+a);u--;)e[u]=0;for(c=a;c--;){for(a=0,u=o+c;u>c;)a=e[u]+i[c]*s[u-c-1]+a,e[u--]=a%10,a=a/10|0;e[u]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};zt.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==Vi){if(t!==~~t||t<0||t>Ec)throw Error(v0);for(n=Mc(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return Lc(n,!0,!!r)};zt.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==Vi){if(t!==~~t||t<0||t>Ec)throw Error(v0);for(n=Mc(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return Lc(n,!1,!!r)};zt[Symbol.for("nodejs.util.inspect.custom")]=zt.toJSON=zt.toString=function(){var t=this,e=t.constructor;return Lc(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};zt.toNumber=function(){var t=+Lc(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(Th+"Imprecise conversion");return t};zt.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==Vi){if(t!==~~t||t<1||t>Ec)throw Error(Uc+"precision");for(n=Mc(new r(n),t,e);n.c.length<t;)n.c.push(0)}return Lc(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};zt.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(Th+"valueOf disallowed");return Lc(t,t.e<=e.NE||t.e>=e.PE,!0)};var Rl=lS();const nn={bigNumber(t){return t?new Rl(t):new Rl(0)},multiply(t,e){if(t===void 0||e===void 0)return new Rl(0);const n=new Rl(t),r=new Rl(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},uce={numericInputKeyDown(t,e,n){const r=["Backspace","Meta","Ctrl","a","A","c","C","x","X","v","V","ArrowLeft","ArrowRight","Tab"],s=t.metaKey||t.ctrlKey,i=t.key,o=i.toLocaleLowerCase(),a=o==="a",c=o==="c",u=o==="v",l=o==="x",d=i===",",h=i===".",f=i>="0"&&i<="9";!s&&(a||c||u||l)&&t.preventDefault(),e==="0"&&!d&&!h&&i==="0"&&t.preventDefault(),e==="0"&&f&&(n(i),t.preventDefault()),(d||h)&&(e||(n("0."),t.preventDefault()),(e?.includes(".")||e?.includes(","))&&t.preventDefault()),!f&&!r.includes(i)&&!h&&!d&&t.preventDefault()}},K8=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],G8=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],Y8=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],Z8={getERC20Abi:t=>ne.USDT_CONTRACT_ADDRESSES.includes(t)?Y8:K8,getSwapAbi:()=>G8},lce={URLS:{FAQ:"https://walletconnect.com/faq"}},Mr={validateCaipAddress(t){if(t.split(":")?.length!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},rt={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function Yg(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const Xe={setItem(t,e){rd()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(rd())return localStorage.getItem(t)||void 0},removeItem(t){rd()&&localStorage.removeItem(t)},clear(){rd()&&localStorage.clear()}};function rd(){return typeof window<"u"&&typeof localStorage<"u"}function xo(t,e){return e==="light"?{"--w3m-accent":t?.["--w3m-accent"]||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":t?.["--w3m-accent"]||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var mE={};const Zg=(typeof tr<"u"&&typeof mE<"u"?mE.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",dS=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],J8="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",At={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:Zg,SECURE_SITE_DASHBOARD:`${Zg}/dashboard`,SECURE_SITE_FAVICON:`${Zg}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:[ne.CHAIN.EVM,ne.CHAIN.SOLANA],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:[ne.CHAIN.EVM],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:[ne.CHAIN.EVM,ne.CHAIN.SOLANA],ACTIVITY_ENABLED_CHAIN_NAMESPACES:[ne.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:[ne.CHAIN.EVM,ne.CHAIN.SOLANA],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0,multiWallet:!1},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},ye={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=ye.getActiveNamespace(),e=ye.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{Xe.setItem(rt.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=Xe.getItem(rt.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{Xe.removeItem(rt.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{Xe.setItem(rt.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{Xe.setItem(rt.ACTIVE_CAIP_NETWORK_ID,t),ye.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return Xe.getItem(rt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{Xe.removeItem(rt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=Yg(t);Xe.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=ye.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),Xe.setItem(rt.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=Xe.getItem(rt.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=Yg(t);Xe.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return Xe.getItem(rt.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=Yg(t);return Xe.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{Xe.setItem(rt.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return Xe.getItem(rt.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{Xe.removeItem(rt.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return Xe.getItem(rt.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){return Xe.getItem(rt.ACTIVE_CAIP_NETWORK_ID)?.split(":")?.[1]},setConnectionStatus(t){try{Xe.setItem(rt.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return Xe.getItem(rt.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=Xe.getItem(rt.CONNECTED_NAMESPACES);return t?.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));Xe.setItem(rt.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=ye.getConnectedNamespaces();e.includes(t)||(e.push(t),ye.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=ye.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),ye.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return Xe.getItem(rt.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{Xe.setItem(rt.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{Xe.removeItem(rt.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=Xe.getItem(rt.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=ye.getBalanceCache();Xe.setItem(rt.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=ye.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;ye.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=ye.getBalanceCache();e[t.caipAddress]=t,Xe.setItem(rt.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=Xe.getItem(rt.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=ye.getBalanceCache();Xe.setItem(rt.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=ye.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),ye.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=ye.getNativeBalanceCache();e[t.caipAddress]=t,Xe.setItem(rt.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=Xe.getItem(rt.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=ye.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;ye.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=ye.getEnsCache();e[t.address]=t,Xe.setItem(rt.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=ye.getEnsCache();Xe.setItem(rt.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=Xe.getItem(rt.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=ye.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;ye.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=ye.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},Xe.setItem(rt.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=ye.getIdentityCache();Xe.setItem(rt.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{Xe.removeItem(rt.PORTFOLIO_CACHE),Xe.removeItem(rt.NATIVE_BALANCE_CACHE),Xe.removeItem(rt.ENS_CACHE),Xe.removeItem(rt.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{Xe.setItem(rt.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=Xe.getItem(rt.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=ye.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===ne.CONNECTOR_ID.AUTH;if(a&&!c){const u=new Set(a.accounts.map(d=>d.address.toLowerCase())),l=o.accounts.filter(d=>!u.has(d.address.toLowerCase()));a.accounts.push(...l)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};Xe.setItem(rt.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=Xe.getItem(rt.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=ye.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),Xe.setItem(rt.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=Xe.getItem(rt.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=ye.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),Xe.setItem(rt.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=ye.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),Xe.setItem(rt.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(ye.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},ke={isMobile(){return this.isClient()?!!(window?.matchMedia&&typeof window.matchMedia=="function"&&window.matchMedia("(pointer:coarse)")?.matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t?.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window?.navigator.userAgent.toLowerCase();return ke.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window?.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window?.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=At.TEN_SEC_MS:!0},isAllowedRetry(t,e=At.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return window?.self!==window?.top}catch{return!1}},isSafeApp(){if(ke.isClient()&&window.self!==window.top)try{const t=window?.location?.ancestorOrigins?.[0],e="https://app.safe.global";if(t){const n=new URL(t),r=new URL(e);return n.hostname===r.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+At.FOUR_MINUTES_MS},getNetworkId(t){return t?.split(":")[1]},getPlainAddress(t){return t?.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(ke.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!s?.endsWith("/")&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!ke.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?ye.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window?.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window?.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){if(typeof window>"u")return!1;const t=window?.matchMedia&&typeof window.matchMedia=="function"?window.matchMedia("(display-mode: standalone)")?.matches:!1,e=window?.navigator?.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,ke.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){let n;if(t==="0")n="0";else if(typeof t=="string"){const r=Number(t);r&&(n=r.toString().match(/^-?\d+(?:\.\d{0,3})?/u)?.[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return ne.W3M_API_URL},getBlockchainApiUrl(){return ne.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return ne.PULSE_API_URL},getUUID(){return crypto?.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){return typeof t=="string"?t:typeof t?.issues?.[0]?.message=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?At.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in ne.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window?.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window?.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),u=t.substring(s),l=c+n;return a+l+u}};async function Pl(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class Nh{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await Pl(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await Pl(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Pl(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Pl(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Pl(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const X8={getFeatureValue(t,e){const n=e?.[t];return n===void 0?At.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(ke.isTelegram()){if(ke.isIos())return t.filter(e=>e!=="google");if(ke.isMac())return t.filter(e=>e!=="x");if(ke.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},qe=Dt({features:At.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:At.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),pe={state:qe,subscribeKey(t,e){return Nn(qe,t,e)},setOptions(t){Object.assign(qe,t)},setRemoteFeatures(t){if(!t)return;const e={...qe.remoteFeatures,...t};qe.remoteFeatures=e,qe.remoteFeatures?.socials&&(qe.remoteFeatures.socials=X8.filterSocialsByPlatform(qe.remoteFeatures.socials)),qe.features?.pay&&(qe.remoteFeatures.email=!1,qe.remoteFeatures.socials=!1)},setFeatures(t){if(!t)return;qe.features||(qe.features=At.DEFAULT_FEATURES);const e={...qe.features,...t};qe.features=e,qe.features?.pay&&qe.remoteFeatures&&(qe.remoteFeatures.email=!1,qe.remoteFeatures.socials=!1)},setProjectId(t){qe.projectId=t},setCustomRpcUrls(t){qe.customRpcUrls=t},setAllWallets(t){qe.allWallets=t},setIncludeWalletIds(t){qe.includeWalletIds=t},setExcludeWalletIds(t){qe.excludeWalletIds=t},setFeaturedWalletIds(t){qe.featuredWalletIds=t},setTokens(t){qe.tokens=t},setTermsConditionsUrl(t){qe.termsConditionsUrl=t},setPrivacyPolicyUrl(t){qe.privacyPolicyUrl=t},setCustomWallets(t){qe.customWallets=t},setIsSiweEnabled(t){qe.isSiweEnabled=t},setIsUniversalProvider(t){qe.isUniversalProvider=t},setSdkVersion(t){qe.sdkVersion=t},setMetadata(t){qe.metadata=t},setDisableAppend(t){qe.disableAppend=t},setEIP6963Enabled(t){qe.enableEIP6963=t},setDebug(t){qe.debug=t},setEnableWalletConnect(t){qe.enableWalletConnect=t},setEnableWalletGuide(t){qe.enableWalletGuide=t},setEnableAuthLogger(t){qe.enableAuthLogger=t},setEnableWallets(t){qe.enableWallets=t},setPreferUniversalLinks(t){qe.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,n]of Object.entries(At.SIWX_DEFAULTS))t[e]??=n;qe.siwx=t},setConnectMethodsOrder(t){qe.features={...qe.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){qe.features={...qe.features,walletFeaturesOrder:t}},setSocialsOrder(t){qe.remoteFeatures={...qe.remoteFeatures,socials:t}},setCollapseWallets(t){qe.features={...qe.features,collapseWallets:t}},setEnableEmbedded(t){qe.enableEmbedded=t},setAllowUnsupportedChain(t){qe.allowUnsupportedChain=t},setManualWCControl(t){qe.manualWCControl=t},setEnableNetworkSwitch(t){qe.enableNetworkSwitch=t},setEnableReconnect(t){qe.enableReconnect=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(qe.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){qe.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return qe.universalProviderConfigOverride},getSnapshot(){return vc(qe)}},Q8=Object.freeze({enabled:!0,events:[]}),eR=new Nh({baseUrl:ke.getAnalyticsUrl(),clientId:null}),tR=5,nR=60*1e3,Jo=Dt({...Q8}),rR={state:Jo,subscribeKey(t,e){return Nn(Jo,t,e)},async sendError(t,e){if(!Jo.enabled)return;const n=Date.now();if(Jo.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<nR}).length>=tR)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};Jo.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=pe.state;await eR.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:ke.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){Jo.enabled=!0},disable(){Jo.enabled=!1},clearEvents(){Jo.events=[]}};class Yu extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,Yu.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,Yu):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function yE(t,e){const n=t instanceof Yu?t:new Yu(t instanceof Error?t.message:String(t),e,t);throw rR.sendError(n,n.category),n}function Vr(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return yE(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return yE(a,e)}},n[r]=i}else n[r]=s}),n}var Zu={};const sR="https://secure.walletconnect.org/sdk",iR=(typeof tr<"u"&&typeof Zu<"u"?Zu.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||sR,oR=(typeof tr<"u"&&typeof Zu<"u"?Zu.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",aR=(typeof tr<"u"&&typeof Zu<"u"?Zu.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Ue={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},An={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Fi={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},cR={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===Fi.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Fi.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===Fi.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Fi.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===ne.CHAIN.SOLANA&&t===Fi.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Fi.COINBASE.url}/dapp?cb_url=${r}`)}},ms=Dt({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),uR={state:ms,subscribeNetworkImages(t){return In(ms.networkImages,()=>t(ms.networkImages))},subscribeKey(t,e){return Nn(ms,t,e)},subscribe(t){return In(ms,()=>t(ms))},setWalletImage(t,e){ms.walletImages[t]=e},setNetworkImage(t,e){ms.networkImages[t]=e},setChainImage(t,e){ms.chainImages[t]=e},setConnectorImage(t,e){ms.connectorImages={...ms.connectorImages,[t]:e}},setTokenImage(t,e){ms.tokenImages[t]=e},setCurrencyImage(t,e){ms.currencyImages[t]=e}},js=Vr(uR),lR={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},Jg=Dt({networkImagePromises:{}}),hS={async fetchWalletImage(t){if(t)return await Ke._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(Jg.networkImagePromises[t]||(Jg.networkImagePromises[t]=Ke._fetchNetworkImage(t)),await Jg.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return js.state.walletImages[t]},getWalletImage(t){if(t?.image_url)return t?.image_url;if(t?.image_id)return js.state.walletImages[t.image_id]},getNetworkImage(t){if(t?.assets?.imageUrl)return t?.assets?.imageUrl;if(t?.assets?.imageId)return js.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return js.state.networkImages[t]},getConnectorImage(t){if(t?.imageUrl)return t.imageUrl;if(t?.info?.icon)return t.info.icon;if(t?.imageId)return js.state.connectorImages[t.imageId]},getChainImage(t){return js.state.networkImages[lR[t]]}},Xo=Dt({message:"",variant:"info",open:!1}),dR={state:Xo,subscribeKey(t,e){return Nn(Xo,t,e)},open(t,e){const{debug:n}=pe.state,{shortMessage:r,longMessage:s}=t;n&&(Xo.message=r,Xo.variant=e,Xo.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){Xo.open=!1,Xo.message="",Xo.variant="info"}},Jt=Vr(dR),hR=ke.getAnalyticsUrl(),fR=new Nh({baseUrl:hR,clientId:null}),pR=["MODAL_CREATED"],so=Dt({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),Nt={state:so,subscribe(t){return In(so,()=>t(so))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=pe.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=Me.state.address;if(pR.includes(t.data.event)||typeof window>"u")return;await fR.post({path:"/e",params:Nt.getSdkProperties(),body:{eventId:ke.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),so.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===ne.HTTP_STATUS_CODES.FORBIDDEN&&!so.reportedErrors.FORBIDDEN&&(Jt.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${rd()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),so.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){so.timestamp=Date.now(),so.data=t,(pe.state.features?.analytics||t.event==="INITIALIZE")&&Nt._sendAnalyticsEvent(so)}},gR=ke.getApiUrl(),Kr=new Nh({baseUrl:gR,clientId:null}),mR=40,wE=4,yR=20,ct=Dt({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),Ke={state:ct,subscribeKey(t,e){return Nn(ct,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=pe.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return pe.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Kr.baseUrl}/getWalletImage/${t}`,n=await Kr.getBlob({path:e,params:Ke._getSdkProperties()});js.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Kr.baseUrl}/public/getAssetImage/${t}`,n=await Kr.getBlob({path:e,params:Ke._getSdkProperties()});js.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Kr.baseUrl}/public/getAssetImage/${t}`,n=await Kr.getBlob({path:e,params:Ke._getSdkProperties()});js.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Kr.baseUrl}/public/getCurrencyImage/${t}`,n=await Kr.getBlob({path:e,params:Ke._getSdkProperties()});js.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Kr.baseUrl}/public/getTokenImage/${t}`,n=await Kr.getBlob({path:e,params:Ke._getSdkProperties()});js.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return ke.isMobile()?t?.filter(n=>n.mobile_link||n.id===Fi.COINBASE.id?!0:Y.state.activeChain==="solana"&&(n.id===Fi.SOLFLARE.id||n.id===Fi.PHANTOM.id)):t},async fetchProjectConfig(){return(await Kr.get({path:"/appkit/v1/config",params:Ke._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Kr.get({path:"/projects/v1/origins",params:Ke._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===ne.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=ne.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const e=Y.getAllRequestedCaipNetworks()?.map(({assets:n})=>n?.imageId).filter(Boolean).filter(n=>!hS.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>Ke._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=ve.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>Ke._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>Ke._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>Ke._fetchTokenImage(e)))},async fetchWallets(t){const e=t.exclude??[];Ke._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Fi).map(i=>i.id));const r=await Kr.get({path:"/getWallets",params:{...Ke._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:t.include?.join(","),exclude:e.join(",")}});return{data:Ke._filterWalletsByPlatform(r?.data)||[],count:r?.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=pe.state;if(t?.length){const e={...Ke._getSdkProperties(),page:1,entries:t?.length??wE,include:t},{data:n}=await Ke.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>Ke._fetchWalletImage(i))),ct.featured=r,ct.allFeatured=r}},async fetchRecommendedWallets(){try{ct.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=pe.state,r=[...e??[],...n??[]].filter(Boolean),s=Y.getRequestedCaipNetworkIds().join(","),i={page:1,entries:wE,include:t,exclude:r,chains:s},{data:o,count:a}=await Ke.fetchWallets(i),c=ye.getRecentWallets(),u=o.map(d=>d.image_id).filter(Boolean),l=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...u,...l].map(d=>Ke._fetchWalletImage(d))),ct.recommended=o,ct.allRecommended=o,ct.count=a??0}catch{}finally{ct.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=pe.state,s=Y.getRequestedCaipNetworkIds().join(","),i=[...ct.recommended.map(({id:l})=>l),...n??[],...r??[]].filter(Boolean),o={page:t,entries:mR,include:e,exclude:i,chains:s},{data:a,count:c}=await Ke.fetchWallets(o),u=a.slice(0,yR).map(l=>l.image_id).filter(Boolean);await Promise.allSettled(u.map(l=>Ke._fetchWalletImage(l))),ct.wallets=ke.uniqueBy([...ct.wallets,...Ke._filterOutExtensions(a)],"id").filter(l=>l.chains?.some(d=>s.includes(d))),ct.count=c>ct.count?c:ct.count,ct.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await Ke.fetchWallets(e);n&&n.forEach(r=>{ct.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=pe.state,s=Y.getRequestedCaipNetworkIds().join(",");ct.search=[];const i={page:1,entries:100,search:t?.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await Ke.fetchWallets(i);Nt.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>Ke._fetchWalletImage(c)),ke.wait(300)]),ct.search=Ke._filterOutExtensions(o)},initPromise(t,e){const n=ct.promises[t];return n||(ct.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&Ke.initPromise("connectorImages",Ke.fetchConnectorImages),e&&Ke.initPromise("featuredWallets",Ke.fetchFeaturedWallets),n&&Ke.initPromise("recommendedWallets",Ke.fetchRecommendedWallets),r&&Ke.initPromise("networkImages",Ke.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){pe.state.features?.analytics&&Ke.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Kr.get({path:"/getAnalyticsConfig",params:Ke._getSdkProperties()});pe.setFeatures({analytics:t})}catch{pe.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!t?.length){ct.featured=ct.allFeatured,ct.recommended=ct.allRecommended;return}const e=Y.getRequestedCaipNetworkIds().join(",");ct.featured=ct.allFeatured.filter(n=>n.chains?.some(r=>e.includes(r))),ct.recommended=ct.allRecommended.filter(n=>n.chains?.some(r=>e.includes(r))),ct.filteredWallets=ct.wallets.filter(n=>n.chains?.some(r=>e.includes(r)))},clearFilterByNamespaces(){ct.filteredWallets=[]},setFilterByNamespace(t){if(!t){ct.featured=ct.allFeatured,ct.recommended=ct.allRecommended;return}const e=Y.getRequestedCaipNetworkIds().join(",");ct.featured=ct.allFeatured.filter(n=>n.chains?.some(r=>e.includes(r))),ct.recommended=ct.allRecommended.filter(n=>n.chains?.some(r=>e.includes(r))),ct.filteredWallets=ct.wallets.filter(n=>n.chains?.some(r=>e.includes(r)))}},Ht=Dt({view:"Connect",history:["Connect"],transactionStack:[]}),wR={state:Ht,subscribeKey(t,e){return Nn(Ht,t,e)},pushTransactionStack(t){Ht.transactionStack.push(t)},popTransactionStack(t){const e=Ht.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n?.();break;case"error":r?.(),Fe.goBack();break;case"cancel":s?.(),Fe.goBack();break}},push(t,e){t!==Ht.view&&(Ht.view=t,Ht.history.push(t),Ht.data=e)},reset(t,e){Ht.view=t,Ht.history=[t],Ht.data=e},replace(t,e){Ht.history.at(-1)===t||(Ht.view=t,Ht.history[Ht.history.length-1]=t,Ht.data=e)},goBack(){const t=Y.state.activeCaipAddress,e=Fe.state.view==="ConnectingFarcaster",n=!t&&e;if(Ht.history.length>1){Ht.history.pop();const[r]=Ht.history.slice(-1);r&&(t&&r==="Connect"?Ht.view="Account":Ht.view=r)}else Et.close();Ht.data?.wallet&&(Ht.data.wallet=void 0),setTimeout(()=>{if(n){Me.setFarcasterUrl(void 0,Y.state.activeChain);const r=ve.getAuthConnector();r?.provider?.reload();const s=vc(pe.state);r?.provider?.syncDappData?.({metadata:s.metadata,sdkVersion:s.sdkVersion,projectId:s.projectId,sdkType:s.sdkType})}},100)},goBackToIndex(t){if(Ht.history.length>1){Ht.history=Ht.history.slice(0,t+1);const[e]=Ht.history.slice(-1);e&&(Ht.view=e)}},goBackOrCloseModal(){Fe.state.history.length>1?Fe.goBack():Et.close()}},Fe=Vr(wR),io=Dt({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),nw={state:io,subscribe(t){return In(io,()=>t(io))},setThemeMode(t){io.themeMode=t;try{const e=ve.getAuthConnector();if(e){const n=nw.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:xo(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){io.themeVariables={...io.themeVariables,...t};try{const e=ve.getAuthConnector();if(e){const n=nw.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:xo(io.themeVariables,io.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return vc(io)}},ns=Vr(nw),fS={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},It=Dt({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...fS},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),bR={state:It,subscribe(t){return In(It,()=>{t(It)})},subscribeKey(t,e){return Nn(It,t,e)},initialize(t){t.forEach(e=>{const n=ye.getConnectedConnectorId(e);n&&ve.setConnectorId(n,e)})},setActiveConnector(t){t&&(It.activeConnector=Oa(t))},setConnectors(t){t.filter(s=>!It.allConnectors.some(i=>i.id===s.id&&ve.getConnectorName(i.name)===ve.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&It.allConnectors.push(Oa(s))});const n=ve.getEnabledNamespaces(),r=ve.getEnabledConnectors(n);It.connectors=ve.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(It.filterByNamespaceMap).forEach(e=>{It.filterByNamespaceMap[e]=!1}),t.forEach(e=>{It.filterByNamespaceMap[e]=!0}),ve.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){It.filterByNamespaceMap[t]=e,ve.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=ve.getEnabledNamespaces(),e=ve.getEnabledConnectors(t),n=ve.areAllNamespacesEnabled();It.connectors=ve.mergeMultiChainConnectors(e),n?Ke.clearFilterByNamespaces():Ke.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(It.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return It.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(It.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=ve.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=s?.id===ne.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:s?.id||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=ve.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){if(t.id===ne.CONNECTOR_ID.AUTH){const e=t,n=vc(pe.state),r=ns.getSnapshot().themeMode,s=ns.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:n.metadata,sdkVersion:n.sdkVersion,projectId:n.projectId,sdkType:n.sdkType}),e?.provider?.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:xo(s,r)}),ve.setConnectors([t])}else ve.setConnectors([t])},getAuthConnector(t){const e=t||Y.state.activeChain,n=It.connectors.find(r=>r.id===ne.CONNECTOR_ID.AUTH);if(n)return n?.connectors?.length?n.connectors.find(s=>s.chain===e):n},getAnnouncedConnectorRdns(){return It.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>t.info?.rdns)},getConnectorById(t){return It.allConnectors.find(e=>e.id===t)},getConnector(t,e){return It.allConnectors.filter(r=>r.chain===Y.state.activeChain).find(r=>r.explorerId===t||r.info?.rdns===e)},syncIfAuthConnector(t){if(t.id!=="ID_AUTH")return;const e=t,n=vc(pe.state),r=ns.getSnapshot().themeMode,s=ns.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:xo(s,r)})},getConnectorsByNamespace(t){const e=It.allConnectors.filter(n=>n.chain===t);return ve.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return Y.checkIfSmartAccountEnabled()&&gr(t)===An.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=ve.getConnector(t.id,t.rdns);cR.handleMobileDeeplinkRedirect(e?.explorerId||t.id,Y.state.activeChain),e?Fe.push("ConnectingExternal",{connector:e,wallet:t}):Fe.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?ve.getConnectorsByNamespace(t):ve.mergeMultiChainConnectors(It.allConnectors)},setFilterByNamespace(t){It.filterByNamespace=t,It.connectors=ve.getConnectors(t),Ke.setFilterByNamespace(t)},setConnectorId(t,e){t&&(It.activeConnectorIds={...It.activeConnectorIds,[e]:t},ye.setConnectedConnectorId(e,t))},removeConnectorId(t){It.activeConnectorIds={...It.activeConnectorIds,[t]:void 0},ye.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return It.activeConnectorIds[t]},isConnected(t){return t?!!It.activeConnectorIds[t]:Object.values(It.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){It.activeConnectorIds={...fS}}},ve=Vr(bR),vR=1e3,kl={checkNamespaceConnectorId(t,e){return ve.getConnectorId(t)===e},isSocialProvider(t){return At.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&ve.setActiveConnector(e),s?.(ke.isMobile()&&t),r){const u=Et.subscribeKey("open",l=>{l||(Fe.state.view!==r&&Fe.replace(r),u(),a(new Error("Modal closed")))})}const c=Y.subscribeKey("activeCaipAddress",u=>{u&&(i?.(),n&&Et.close(),c(),o(Mr.parseCaipAddress(u)))})})},connectExternal(t){return new Promise((e,n)=>{const r=Y.subscribeKey("activeCaipAddress",s=>{s&&(Et.close(),r(),e(Mr.parseCaipAddress(s)))});Ae.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=Me.state.socialWindow,i=Me.state.socialProvider,o=!1,a=null;const c=Y.subscribeKey("activeCaipAddress",u=>{u&&(e&&Et.close(),c())});return new Promise((u,l)=>{async function d(f){if(f.data?.resultUri)if(f.origin===ne.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",d,!1);try{const y=ve.getAuthConnector();if(y&&!o){s&&(s.close(),Me.setSocialWindow(void 0,Y.state.activeChain),s=Me.state.socialWindow),o=!0;const m=f.data.resultUri;if(i&&Nt.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}}),i){ye.setConnectedSocialProvider(i),await Ae.connectExternal({id:y.id,type:y.type,socialUri:m},y.chain);const v=Y.state.activeCaipAddress;if(!v){l(new Error("Failed to connect"));return}u(Mr.parseCaipAddress(v)),Nt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i,caipNetworkId:Y.getActiveCaipNetwork()?.caipNetworkId}})}}}catch{i&&Nt.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),l(new Error("Failed to connect"))}}else i&&Nt.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function h(){if(t&&(Me.setSocialProvider(t,Y.state.activeChain),i=Me.state.socialProvider,Nt.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n?.();const f=Et.subscribeKey("open",m=>{!m&&t==="farcaster"&&(l(new Error("Popup closed")),r?.(),f())}),y=ve.getAuthConnector();if(y&&!Me.state.farcasterUrl)try{const{url:m}=await y.provider.getFarcasterUri();Me.setFarcasterUrl(m,Y.state.activeChain)}catch{l(new Error("Failed to connect to farcaster"))}}else{const f=ve.getAuthConnector();a=ke.returnOpenHref(`${ne.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(f&&i){const{uri:y}=await f.provider.getSocialRedirectUri({provider:i});if(a&&y){Me.setSocialWindow(a,Y.state.activeChain),s=Me.state.socialWindow,a.location.href=y;const m=setInterval(()=>{s?.closed&&!o&&(l(new Error("Popup closed")),clearInterval(m))},1e3);window.addEventListener("message",d,!1)}else a?.close(),l(new Error("Failed to initiate social connection"))}}catch{l(new Error("Failed to initiate social connection")),a?.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n?.(),e){const a=Et.subscribeKey("open",c=>{c||(Fe.state.view!==e&&Fe.replace(e),a(),i(new Error("Modal closed")))})}const o=Y.subscribeKey("activeCaipAddress",a=>{a&&(r?.(),t&&Et.close(),o(),s(Mr.parseCaipAddress(a)))})})},async updateEmail(){const t=ye.getConnectedConnectorId(Y.state.activeChain),e=ve.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==ne.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return Fe.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(Et.close(),clearInterval(i),o(),r({email:a}))},vR),o=Et.subscribeKey("open",a=>{a||(Fe.state.view!=="Connect"&&Fe.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return Y.checkIfSmartAccountEnabled()&&gr(t)===An.ACCOUNT_TYPES.EOA}};function s1(){const t=Y.state.activeCaipNetwork?.chainNamespace||"eip155",e=Y.state.activeCaipNetwork?.id||1,n=At.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}function gr(t){return Y.getAccountData(t)?.preferredAccountType}const Cp={getConnectionStatus(t,e){const n=ve.state.activeConnectorIds[e],r=Ae.getConnections(e);return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){const e=!!pe.state.remoteFeatures?.multiWallet,n=ve.state.activeConnectorIds[t],r=Ae.getConnections(t),i=(Ae.state.recentConnections.get(t)??[]).filter(a=>ve.getConnectorById(a.connectorId)),o=Cp.excludeExistingConnections([...r.map(a=>a.connectorId),...n?[n]:[]],i);return e?{connections:r,recentConnections:o}:{connections:r.filter(a=>a.connectorId.toLowerCase()===n?.toLowerCase()),recentConnections:[]}}},Ya=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Ln=Dt({...Ya}),ER={state:Ln,subscribeKey(t,e){return Nn(Ln,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=ke.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){Ln.message=Ya.message,Ln.variant=Ya.variant,Ln.svg=Ya.svg,Ln.open=Ya.open,Ln.autoClose=Ya.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=Ya.autoClose}){Ln.open?(Ln.open=!1,setTimeout(()=>{Ln.message=t,Ln.variant=n,Ln.svg=e,Ln.open=!0,Ln.autoClose=r},150)):(Ln.message=t,Ln.variant=n,Ln.svg=e,Ln.open=!0,Ln.autoClose=r)}},vn=ER,ln=Dt({transactions:[],transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),_R={state:ln,subscribe(t){return In(ln,()=>t(ln))},setLastNetworkInView(t){ln.lastNetworkInView=t},async fetchTransactions(t){if(!t)throw new Error("Transactions can't be fetched without an accountAddress");ln.loading=!0;try{const e=await We.fetchTransactions({account:t,cursor:ln.next,chainId:Y.state.activeCaipNetwork?.caipNetworkId}),n=tp.filterSpamTransactions(e.data),r=tp.filterByConnectedChain(n),s=[...ln.transactions,...r];ln.loading=!1,ln.transactions=s,ln.transactionsByYear=tp.groupTransactionsByYearAndMonth(ln.transactionsByYear,r),ln.empty=s.length===0,ln.next=e.next?e.next:void 0}catch{const n=Y.state.activeChain;Nt.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:pe.state.projectId,cursor:ln.next,isSmartAccount:gr(n)===An.ACCOUNT_TYPES.SMART_ACCOUNT}}),vn.showError("Failed to fetch transactions"),ln.loading=!1,ln.empty=!0,ln.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(u=>u.id!==r.id);n[s]={...o,[i]:[...c,r].sort((u,l)=>new Date(l.metadata.minedAt).getTime()-new Date(u.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>r.nft_info?.flags.is_spam===!0))},filterByConnectedChain(t){const e=Y.state.activeCaipNetwork?.caipNetworkId;return t.filter(r=>r.metadata.chain===e)},clearCursor(){ln.next=void 0},resetTransactions(){ln.transactions=[],ln.transactionsByYear={},ln.lastNetworkInView=void 0,ln.loading=!1,ln.empty=!1,ln.next=void 0}},tp=Vr(_R,"API_ERROR"),St=Dt({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let ja;const CR={state:St,subscribe(t){return In(St,()=>t(St))},subscribeKey(t,e){return Nn(St,t,e)},_getClient(){return St._client},setClient(t){St._client=Oa(t)},initialize(t){const e=t.filter(n=>!!n.namespace).map(n=>n.namespace);Ae.syncStorageConnections(e)},syncStorageConnections(t){const e=ye.getConnections(),n=t??Array.from(Y.state.chains.keys());for(const r of n){const s=e[r]??[],i=new Map(St.recentConnections);i.set(r,s),St.recentConnections=i}},getConnections(t){return t?St.connections.get(t)??[]:[]},hasAnyConnection(t){const e=Ae.state.connections;return Array.from(e.values()).flatMap(n=>n).some(({connectorId:n})=>n===t)},async connectWalletConnect(){if(ke.isTelegram()||ke.isSafari()&&ke.isIos()){if(ja){await ja,ja=void 0;return}if(!ke.isPairingExpired(St?.wcPairingExpiry)){const t=St.wcUri;St.wcUri=t;return}ja=Ae._getClient()?.connectWalletConnect?.().catch(()=>{}),Ae.state.status="connecting",await ja,ja=void 0,St.wcPairingExpiry=void 0,Ae.state.status="connected"}else await Ae._getClient()?.connectWalletConnect?.()},async connectExternal(t,e,n=!0){const r=await Ae._getClient()?.connectExternal?.(t);return n&&Y.setActiveNamespace(e),r},async reconnectExternal(t){await Ae._getClient()?.reconnectExternal?.(t);const e=t.chain||Y.state.activeChain;e&&ve.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){if(!e)return;Et.setLoading(!0,Y.state.activeChain);const n=ve.getAuthConnector();n&&(Me.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),ye.setPreferredAccountTypes(Object.entries(Y.state.chains).reduce((r,[s,i])=>{const o=s,a=gr(o);return a!==void 0&&(r[o]=a),r},{})),await Ae.reconnectExternal(n),Et.setLoading(!1,Y.state.activeChain),Nt.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:Y.state.activeCaipNetwork?.caipNetworkId||""}}))},async signMessage(t){return Ae._getClient()?.signMessage(t)},parseUnits(t,e){return Ae._getClient()?.parseUnits(t,e)},formatUnits(t,e){return Ae._getClient()?.formatUnits(t,e)},async sendTransaction(t){return Ae._getClient()?.sendTransaction(t)},async getCapabilities(t){return Ae._getClient()?.getCapabilities(t)},async grantPermissions(t){return Ae._getClient()?.grantPermissions(t)},async walletGetAssets(t){return Ae._getClient()?.walletGetAssets(t)??{}},async estimateGas(t){return Ae._getClient()?.estimateGas(t)},async writeContract(t){return Ae._getClient()?.writeContract(t)},async getEnsAddress(t){return Ae._getClient()?.getEnsAddress(t)},async getEnsAvatar(t){return Ae._getClient()?.getEnsAvatar(t)},checkInstalled(t){return Ae._getClient()?.checkInstalled?.(t)||!1},resetWcConnection(){St.wcUri=void 0,St.wcPairingExpiry=void 0,St.wcLinking=void 0,St.recentWallet=void 0,St.status="disconnected",tp.resetTransactions(),ye.deleteWalletConnectDeepLink()},resetUri(){St.wcUri=void 0,St.wcPairingExpiry=void 0,ja=void 0},finalizeWcConnection(){const{wcLinking:t,recentWallet:e}=Ae.state;t&&ye.setWalletConnectDeepLink(t),e&&ye.setAppKitRecent(e),Nt.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:Fe.state.data?.wallet?.name||"Unknown",caipNetworkId:Y.getActiveCaipNetwork()?.caipNetworkId}})},setWcBasic(t){St.wcBasic=t},setUri(t){St.wcUri=t,St.wcPairingExpiry=ke.getPairingExpiry()},setWcLinking(t){St.wcLinking=t},setWcError(t){St.wcError=t,St.buffering=!1},setRecentWallet(t){St.recentWallet=t},setBuffering(t){St.buffering=t},setStatus(t){St.status=t},setIsSwitchingConnection(t){St.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:n}={}){try{await Ae._getClient()?.disconnect({id:t,chainNamespace:e,initialDisconnect:n})}catch(r){throw new Yu("Failed to disconnect","INTERNAL_SDK_ERROR",r)}},setConnections(t,e){const n=new Map(St.connections);n.set(e,t),St.connections=n},async handleAuthAccountSwitch({address:t,namespace:e}){const n=Me.state.user?.accounts?.find(s=>s.type==="smartAccount"),r=n&&n.address.toLowerCase()===t.toLowerCase()&&kl.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await Ae.setPreferredAccountType(r,e)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=ve.getConnectorById(t.connectorId),s=t.connectorId===ne.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)s&&n&&await Ae.handleAuthAccountSwitch({address:n,namespace:e});else return(await Ae.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e))?.address;return n},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){const s=ve.getConnectorById(t.connectorId),i=t.auth?.name?.toLowerCase(),o=t.connectorId===ne.CONNECTOR_ID.AUTH,a=t.connectorId===ne.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&kl.isSocialProvider(i)){const{address:u}=await kl.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){Et.open({view:"ConnectingFarcaster"})},onConnect(){Fe.replace("ProfileWallets")}});c=u}else{const{address:u}=await kl.connectEmail({closeModalOnConnect:r,onOpen(){Et.open({view:"EmailLogin"})},onConnect(){Fe.replace("ProfileWallets")}});c=u}else if(a){const{address:u}=await kl.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(l){Et.open({view:l?"AllWallets":"ConnectingWalletConnect"})},onConnect(){Fe.replace("ProfileWallets")}});c=u}else{const u=await Ae.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);u&&(c=u.address)}return o&&n&&await Ae.handleAuthAccountSwitch({address:n,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){let i;const o=Me.getCaipAddress(n);if(o){const{address:c}=Mr.parseCaipAddress(o);i=c}const a=Cp.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await Ae.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const u=c.toLowerCase()!==i.toLowerCase();s?.({address:c,namespace:n,hasSwitchedAccount:u,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await Ae.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&s?.({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0});break}default:throw new Error(`Invalid connection status: ${a}`)}}},Ae=Vr(CR),Jc=Dt({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),li={state:Jc,subscribe(t){return In(Jc,()=>t(Jc))},subscribeOpen(t){return Nn(Jc,"open",t)},set(t){Object.assign(Jc,{...Jc,...t})}},sd={async getTokenList(){const t=Y.state.activeCaipNetwork;return(await We.fetchSwapTokens({chainId:t?.caipNetworkId}))?.tokens?.map(r=>({...r,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0}))||[]},async fetchGasPrice(){const t=Y.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const e=(await Ae?.estimateGas({chainNamespace:"solana"}))?.toString();return{standard:e,fast:e,instant:e};case"eip155":default:return await We.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await We.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s?.allowance&&n&&r){const i=Ae.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await W0.getMyTokensWithBalance(t);return Me.setTokenBalance(e,Y.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return t?.map(e=>({...e,address:e?.address?e.address:s1(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1}))||[]}},jt=Dt({tokenBalances:[],loading:!1}),AR={state:jt,subscribe(t){return In(jt,()=>t(jt))},subscribeKey(t,e){return Nn(jt,t,e)},setToken(t){t&&(jt.token=Oa(t))},setTokenAmount(t){jt.sendTokenAmount=t},setReceiverAddress(t){jt.receiverAddress=t},setReceiverProfileImageUrl(t){jt.receiverProfileImageUrl=t},setReceiverProfileName(t){jt.receiverProfileName=t},setNetworkBalanceInUsd(t){jt.networkBalanceInUSD=t},setLoading(t){jt.loading=t},async sendToken(){try{switch($t.setLoading(!0),Y.state.activeCaipNetwork?.chainNamespace){case"eip155":await $t.sendEvmToken();return;case"solana":await $t.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{$t.setLoading(!1)}},async sendEvmToken(){const t=Y.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=gr(t);if(!$t.state.sendTokenAmount||!$t.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!$t.state.token)throw new Error("A token is required");$t.state.token?.address?(Nt.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===An.ACCOUNT_TYPES.SMART_ACCOUNT,token:$t.state.token.address,amount:$t.state.sendTokenAmount,network:Y.state.activeCaipNetwork?.caipNetworkId||""}}),await $t.sendERC20Token({receiverAddress:$t.state.receiverAddress,tokenAddress:$t.state.token.address,sendTokenAmount:$t.state.sendTokenAmount,decimals:$t.state.token.quantity.decimals})):(Nt.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===An.ACCOUNT_TYPES.SMART_ACCOUNT,token:$t.state.token.symbol||"",amount:$t.state.sendTokenAmount,network:Y.state.activeCaipNetwork?.caipNetworkId||""}}),await $t.sendNativeToken({receiverAddress:$t.state.receiverAddress,sendTokenAmount:$t.state.sendTokenAmount,decimals:$t.state.token.quantity.decimals}))},async fetchTokenBalance(t){jt.loading=!0;const e=Y.state.activeCaipNetwork?.caipNetworkId,n=Y.state.activeCaipNetwork?.chainNamespace,r=Y.state.activeCaipAddress,s=r?ke.getPlainAddress(r):void 0;if(jt.lastRetry&&!ke.isAllowedRetry(jt.lastRetry,30*At.ONE_SEC_MS))return jt.loading=!1,[];try{if(s&&e&&n){const i=await W0.getMyTokensWithBalance();return jt.tokenBalances=i,jt.lastRetry=void 0,i}}catch(i){jt.lastRetry=Date.now(),t?.(i),vn.showError("Token Balance Unavailable")}finally{jt.loading=!1}return[]},fetchNetworkBalance(){if(jt.tokenBalances.length===0)return;const t=sd.mapBalancesToSwapTokens(jt.tokenBalances);if(!t)return;const e=t.find(n=>n.address===s1());e&&(jt.networkBalanceInUSD=e?nn.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){Fe.pushTransactionStack({});const e=t.receiverAddress,n=Me.state.address,r=Ae.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await Ae.sendTransaction({chainNamespace:ne.CHAIN.EVM,to:e,address:n,data:"0x",value:r??BigInt(0)}),Nt.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:gr("eip155")===An.ACCOUNT_TYPES.SMART_ACCOUNT,token:$t.state.token?.symbol||"",amount:t.sendTokenAmount,network:Y.state.activeCaipNetwork?.caipNetworkId||""}}),Ae._getClient()?.updateBalance("eip155"),$t.resetSend()},async sendERC20Token(t){Fe.pushTransactionStack({onSuccess(){Fe.replace("Account")}});const e=Ae.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(Me.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=ke.getPlainAddress(t.tokenAddress);if(!n)throw new Error("SendController:sendERC20Token - tokenAddress is required");await Ae.writeContract({fromAddress:Me.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:Z8.getERC20Abi(n),chainNamespace:ne.CHAIN.EVM}),$t.resetSend()}},async sendSolanaToken(){if(!$t.state.sendTokenAmount||!$t.state.receiverAddress)throw new Error("An amount and receiver address are required");Fe.pushTransactionStack({onSuccess(){Fe.replace("Account")}}),await Ae.sendTransaction({chainNamespace:"solana",to:$t.state.receiverAddress,value:$t.state.sendTokenAmount}),Ae._getClient()?.updateBalance("solana"),$t.resetSend()},resetSend(){jt.token=void 0,jt.sendTokenAmount=void 0,jt.receiverAddress=void 0,jt.receiverProfileImageUrl=void 0,jt.receiverProfileName=void 0,jt.loading=!1,jt.tokenBalances=[]}},$t=Vr(AR),Xg={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},df={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Se=Dt({chains:E8(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),IR={state:Se,subscribe(t){return In(Se,()=>{t(Se)})},subscribeKey(t,e){return Nn(Se,t,e)},subscribeChainProp(t,e,n){let r;return In(Se.chains,()=>{const s=n||Se.activeChain;if(s){const i=Se.chains.get(s)?.[t];r!==i&&(r=i,e(i))}})},initialize(t,e,n){const{chainId:r,namespace:s}=ye.getActiveNetworkProps(),i=e?.find(l=>l.id.toString()===r?.toString()),a=t.find(l=>l?.namespace===s)||t?.[0],c=t.map(l=>l.namespace).filter(l=>l!==void 0),u=pe.state.enableEmbedded?new Set([...c]):new Set([...e?.map(l=>l.chainNamespace)??[]]);(t?.length===0||!a)&&(Se.noAdapters=!0),Se.noAdapters||(Se.activeChain=a?.namespace,Se.activeCaipNetwork=i,Y.setChainNetworkData(a?.namespace,{caipNetwork:i}),Se.activeChain&&li.set({activeChain:a?.namespace})),u.forEach(l=>{const d=e?.filter(y=>y.chainNamespace===l),h=ye.getPreferredAccountTypes()||{},f={...pe.state.defaultAccountTypes,...h};Y.state.chains.set(l,{namespace:l,networkState:Dt({...df,caipNetwork:d?.[0]}),accountState:Dt({...Xg,preferredAccountType:f[l]}),caipNetworks:d??[],...n}),Y.setRequestedCaipNetworks(d??[],l)})},removeAdapter(t){if(Se.activeChain===t){const e=Array.from(Se.chains.entries()).find(([n])=>n!==t);if(e){const n=e[1]?.caipNetworks?.[0];n&&Y.setActiveCaipNetwork(n)}}Se.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");Se.chains.set(t.namespace,{namespace:t.namespace,networkState:{...df,caipNetwork:r[0]},accountState:Xg,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),Y.setRequestedCaipNetworks(r?.filter(s=>s.chainNamespace===t.namespace)??[],t.namespace)},addNetwork(t){const e=Se.chains.get(t.chainNamespace);if(e){const n=[...e.caipNetworks||[]];e.caipNetworks?.find(r=>r.id===t.id)||n.push(t),Se.chains.set(t.chainNamespace,{...e,caipNetworks:n}),Y.setRequestedCaipNetworks(n,t.chainNamespace),ve.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){const n=Se.chains.get(t);if(n){const r=Se.activeCaipNetwork?.id===e,s=[...n.caipNetworks?.filter(i=>i.id!==e)||[]];r&&n?.caipNetworks?.[0]&&Y.setActiveCaipNetwork(n.caipNetworks[0]),Se.chains.set(t,{...n,caipNetworks:s}),Y.setRequestedCaipNetworks(s||[],t),s.length===0&&ve.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Se.chains.get(t);n&&(n.networkState={...n.networkState||df,...e},Se.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=Se.chains.get(t);if(r){const s={...r.accountState||Xg,...e};Se.chains.set(t,{...r,accountState:s}),(Se.chains.size===1||Se.activeChain===t)&&(e.caipAddress&&(Se.activeCaipAddress=e.caipAddress),Me.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=Se.chains.get(t);if(n){const r={...n.networkState||df,...e};Se.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){Y.setChainAccountData(n,{[t]:e},r)},setActiveNamespace(t){Se.activeChain=t;const e=t?Se.chains.get(t):void 0,n=e?.networkState?.caipNetwork;n?.id&&t&&(Se.activeCaipAddress=e?.accountState?.caipAddress,Se.activeCaipNetwork=n,Y.setChainNetworkData(t,{caipNetwork:n}),ye.setActiveCaipNetworkId(n?.caipNetworkId),li.set({activeChain:t,selectedNetworkId:n?.caipNetworkId}))},setActiveCaipNetwork(t){if(!t)return;Se.activeChain!==t.chainNamespace&&Y.setIsSwitchingNamespace(!0);const e=Se.chains.get(t.chainNamespace);Se.activeChain=t.chainNamespace,Se.activeCaipNetwork=t,Y.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),e?.accountState?.address?Se.activeCaipAddress=`${t.chainNamespace}:${t.id}:${e?.accountState?.address}`:Se.activeCaipAddress=void 0,Y.setAccountProp("caipAddress",Se.activeCaipAddress,t.chainNamespace),e&&Me.replaceState(e.accountState),$t.resetSend(),li.set({activeChain:Se.activeChain,selectedNetworkId:Se.activeCaipNetwork?.caipNetworkId}),ye.setActiveCaipNetworkId(t.caipNetworkId),!Y.checkIfSupportedNetwork(t.chainNamespace)&&pe.state.enableNetworkSwitch&&!pe.state.allowUnsupportedChain&&!Ae.state.wcBasic&&Y.showUnsupportedChainUI()},addCaipNetwork(t){if(!t)return;const e=Se.chains.get(t.chainNamespace);e&&e?.caipNetworks?.push(t)},async switchActiveNamespace(t){if(!t)return;const e=t!==Y.state.activeChain,n=Y.getNetworkData(t)?.caipNetwork,r=Y.getCaipNetworkByNamespace(t,n?.id);e&&r&&await Y.switchActiveNetwork(r)},async switchActiveNetwork(t){const e=Y.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const r=!Y.state.chains.get(e)?.caipNetworks?.some(i=>i.id===Se.activeCaipNetwork?.id),s=Y.getNetworkControllerClient(t.chainNamespace);if(s){try{await s.switchCaipNetwork(t),r&&Et.close()}catch{Fe.goBack()}Nt.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Se.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const n=Se.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Se.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Se.chains.get(e);if(!n?.connectionControllerClient)throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){let n=Se.activeChain;if(e&&(n=e),!n)return;const r=Se.chains.get(n)?.accountState;if(r)return r[t]},getNetworkProp(t,e){const n=Se.chains.get(e)?.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Se.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=e?.networkState||{};return ke.sortRequestedNetworks(n,r).filter(o=>o?.id)},getAllRequestedCaipNetworks(){const t=[];return Se.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const n=Y.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){Y.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=Y.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));ve.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Se.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const n=Y.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(t){return t?Se.chains.get(t)?.networkState?.caipNetwork:Se.activeCaipNetwork},getActiveCaipAddress(){return Se.activeCaipAddress},getApprovedCaipNetworkIds(t){return Se.chains.get(t)?.networkState?.approvedCaipNetworkIds||[]},async setApprovedCaipNetworksData(t){const n=await Y.getNetworkControllerClient()?.getApprovedCaipNetworksData();Y.setAdapterNetworkState(t,{approvedCaipNetworkIds:n?.approvedCaipNetworkIds,supportsAllNetworks:n?.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||Se.activeCaipNetwork?.caipNetworkId,r=Y.getRequestedCaipNetworks(t);return r.length?r?.some(s=>s.caipNetworkId===n):!0},checkIfSupportedChainId(t){return Se.activeChain?Y.getRequestedCaipNetworks(Se.activeChain)?.some(n=>n.id===t):!0},setSmartAccountEnabledNetworks(t,e){Y.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){const t=Rd.caipNetworkIdToNumber(Se.activeCaipNetwork?.caipNetworkId),e=Se.activeChain;return!e||!t?!1:!!Y.getNetworkProp("smartAccountEnabledNetworks",e)?.includes(Number(t))},showUnsupportedChainUI(){Et.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Se.activeCaipNetwork;return!!(t?.chainNamespace&&At.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){Y.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");const n=pe.state.defaultAccountTypes[e],r=Y.getAccountProp("preferredAccountType",e);Se.activeCaipAddress=void 0,Y.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:n||r,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),ve.removeConnectorId(e)},setIsSwitchingNamespace(t){Se.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){const t=[];let e;if(Se.chains.forEach(n=>{ne.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(r=>r===n.namespace)&&n.namespace&&t.push(n.namespace)}),t.length>0){const n=t[0];return e=n?Se.chains.get(n)?.caipNetworks?.[0]:void 0,e}},getAccountData(t){return t?Y.state.chains.get(t)?.accountState:Me.state},getNetworkData(t){const e=t||Se.activeChain;if(e)return Y.state.chains.get(e)?.networkState},getCaipNetworkByNamespace(t,e){if(!t)return;const n=Y.state.chains.get(t),r=n?.caipNetworks?.find(s=>s.id===e);return r||n?.networkState?.caipNetwork||n?.caipNetworks?.[0]},getRequestedCaipNetworkIds(){const t=ve.state.filterByNamespace;return(t?[Se.chains.get(t)]:Array.from(Se.chains.values())).flatMap(n=>n?.caipNetworks||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?Y.getRequestedCaipNetworks(t):Y.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){Se.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return Se.lastConnectedSIWECaipNetwork}},Y=Vr(IR),SR={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},pS=ke.getBlockchainApiUrl(),Gr=Dt({clientId:null,api:new Nh({baseUrl:pS,clientId:null}),supportedChains:{http:[],ws:[]}}),We={state:Gr,async get(t){const{st:e,sv:n}=We.getSdkProperties(),r=pe.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Gr.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=pe.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Gr.supportedChains.http.length||await We.getSupportedNetworks()}catch{return!1}return Gr.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await We.get({path:"v1/supported-chains"});return Gr.supportedChains=t,t}catch{return Gr.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await We.isNetworkSupported(e))return{avatar:"",name:""};const r=ye.getIdentityFromCacheForAddress(t);if(r)return r;const s=await We.get({path:`/v1/identity/${t}`,params:{sender:Y.state.activeCaipAddress?ke.getPlainAddress(Y.state.activeCaipAddress):void 0}});return ye.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,signal:n,cache:r,chainId:s}){return await We.isNetworkSupported(Y.state.activeCaipNetwork?.caipNetworkId)?We.get({path:`/v1/account/${t}/history`,params:{cursor:e,chainId:s},signal:n,cache:r}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){return await We.isNetworkSupported(Y.state.activeCaipNetwork?.caipNetworkId)?We.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){return await We.isNetworkSupported(Y.state.activeCaipNetwork?.caipNetworkId)?We.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){return await We.isNetworkSupported(Y.state.activeCaipNetwork?.caipNetworkId)?Gr.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:pe.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){return await We.isNetworkSupported(Y.state.activeCaipNetwork?.caipNetworkId)?We.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){const{st:e,sv:n}=We.getSdkProperties();if(!await We.isNetworkSupported(Y.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Gas Price");return We.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){if(!await We.isNetworkSupported(Y.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return Gr.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:At.CONVERT_SLIPPAGE_TOLERANCE},projectId:pe.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){const{st:r,sv:s}=We.getSdkProperties();if(!await We.isNetworkSupported(Y.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return We.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){const{st:r,sv:s}=We.getSdkProperties();if(!await We.isNetworkSupported(Y.state.activeCaipNetwork?.caipNetworkId))return vn.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=ye.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await We.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return ye.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){return await We.isNetworkSupported(Y.state.activeCaipNetwork?.caipNetworkId)?We.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){return await We.isNetworkSupported(Y.state.activeCaipNetwork?.caipNetworkId)?We.get({path:`/v1/profile/reverse/${t}`,params:{sender:Me.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){return await We.isNetworkSupported(Y.state.activeCaipNetwork?.caipNetworkId)?We.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){return await We.isNetworkSupported(Y.state.activeCaipNetwork?.caipNetworkId)?Gr.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){return await We.isNetworkSupported(Y.state.activeCaipNetwork?.caipNetworkId)?(await Gr.api.post({path:"/v1/generators/onrampurl",params:{projectId:pe.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){if(!await We.isNetworkSupported(Y.state.activeCaipNetwork?.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await We.get({path:"/v1/onramp/options"})}catch{return SR}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){try{return await We.isNetworkSupported(Y.state.activeCaipNetwork?.caipNetworkId)?await Gr.api.post({path:"/v1/onramp/quote",params:{projectId:pe.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){return await We.isNetworkSupported(Y.state.activeCaipNetwork?.caipNetworkId)?We.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){return await We.isNetworkSupported(Y.state.activeCaipNetwork?.caipNetworkId)?Gr.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:pe.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Gr.clientId=t,Gr.api=new Nh({baseUrl:pS,clientId:t})}},xR="1.1.0";let hs=class rw extends Error{constructor(e,n={}){const r=n.cause instanceof rw?n.cause.details:n.cause?.message?n.cause.message:n.details,s=n.cause instanceof rw&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${xR}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function Vo(t,e){return t.exec(e)?.groups}const gS=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,mS=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,yS=/^\(.+?\).*?$/,bE=/^tuple(?<array>(\[(\d*)\])*)$/;function sw(t){let e=t.type;if(bE.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=sw(i),s<n-1&&(e+=", ")}const r=Vo(bE,t.type);return e+=`)${r?.array??""}`,sw({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function Cu(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=sw(s),r!==n-1&&(e+=", ")}return e}function Ap(t){return t.type==="function"?`function ${t.name}(${Cu(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${t.outputs?.length?` returns (${Cu(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${Cu(t.inputs)})`:t.type==="error"?`error ${t.name}(${Cu(t.inputs)})`:t.type==="constructor"?`constructor(${Cu(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const wS=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function TR(t){return wS.test(t)}function NR(t){return Vo(wS,t)}const bS=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function RR(t){return bS.test(t)}function PR(t){return Vo(bS,t)}const vS=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function kR(t){return vS.test(t)}function OR(t){return Vo(vS,t)}const ES=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function E0(t){return ES.test(t)}function BR(t){return Vo(ES,t)}const _S=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function $R(t){return _S.test(t)}function DR(t){return Vo(_S,t)}const CS=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function UR(t){return CS.test(t)}function MR(t){return Vo(CS,t)}const LR=/^receive\(\) external payable$/;function FR(t){return LR.test(t)}const vE=new Set(["memory","indexed","storage","calldata"]),jR=new Set(["indexed"]),iw=new Set(["calldata","memory","storage"]);class qR extends hs{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class zR extends hs{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class WR extends hs{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class HR extends hs{constructor({params:e}){super("Failed to parse ABI parameters.",{details:`parseAbiParameters(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiparameters-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiParametersError"})}}class VR extends hs{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class KR extends hs{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class GR extends hs{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class YR extends hs{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class ZR extends hs{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class fl extends hs{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class JR extends hs{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class XR extends hs{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class QR extends hs{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class eP extends hs{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function tP(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const Qg=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function ow(t,e={}){if(kR(t))return nP(t,e);if(RR(t))return rP(t,e);if(TR(t))return sP(t,e);if($R(t))return iP(t,e);if(UR(t))return oP(t);if(FR(t))return{type:"receive",stateMutability:"payable"};throw new JR({signature:t})}function nP(t,e={}){const n=OR(t);if(!n)throw new fl({signature:t,type:"function"});const r=As(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(Do(r[a],{modifiers:iw,structs:e,type:"function"}));const o=[];if(n.returns){const a=As(n.returns),c=a.length;for(let u=0;u<c;u++)o.push(Do(a[u],{modifiers:iw,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function rP(t,e={}){const n=PR(t);if(!n)throw new fl({signature:t,type:"event"});const r=As(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Do(r[o],{modifiers:jR,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function sP(t,e={}){const n=NR(t);if(!n)throw new fl({signature:t,type:"error"});const r=As(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Do(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function iP(t,e={}){const n=DR(t);if(!n)throw new fl({signature:t,type:"constructor"});const r=As(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Do(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function oP(t){const e=MR(t);if(!e)throw new fl({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const aP=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*(?:\spayable)?)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,cP=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,uP=/^u?int$/;function Do(t,e){const n=tP(t,e?.type,e?.structs);if(Qg.has(n))return Qg.get(n);const r=yS.test(t),s=Vo(r?cP:aP,t);if(!s)throw new VR({param:t});if(s.name&&dP(s.name))throw new KR({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=e?.structs??{};let c,u={};if(r){c="tuple";const d=As(s.type),h=[],f=d.length;for(let y=0;y<f;y++)h.push(Do(d[y],{structs:a}));u={components:h}}else if(s.type in a)c="tuple",u={components:a[s.type]};else if(uP.test(s.type))c=`${s.type}256`;else if(s.type==="address payable")c="address";else if(c=s.type,e?.type!=="struct"&&!AS(c))throw new WR({type:c});if(s.modifier){if(!e?.modifiers?.has?.(s.modifier))throw new GR({param:t,type:e?.type,modifier:s.modifier});if(iw.has(s.modifier)&&!hP(c,!!s.array))throw new YR({param:t,type:e?.type,modifier:s.modifier})}const l={type:`${c}${s.array??""}`,...i,...o,...u};return Qg.set(n,l),l}function As(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?As(a,[...e,n.trim()]):As(a,e,`${n}${o}`,r);case"(":return As(a,e,`${n}${o}`,r+1);case")":return As(a,e,`${n}${o}`,r-1);default:return As(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new eP({current:n,depth:r});return e.push(n.trim()),e}function AS(t){return t==="address"||t==="bool"||t==="function"||t==="string"||gS.test(t)||mS.test(t)}const lP=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function dP(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||gS.test(t)||mS.test(t)||lP.test(t)}function hP(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function i1(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!E0(a))continue;const c=BR(a);if(!c)throw new fl({signature:a,type:"struct"});const u=c.properties.split(";"),l=[],d=u.length;for(let h=0;h<d;h++){const y=u[h].trim();if(!y)continue;const m=Do(y,{type:"struct"});l.push(m)}if(!l.length)throw new XR({signature:a});e[c.name]=l}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=IS(c,e)}return r}const fP=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function IS(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(yS.test(o.type))r.push(o);else{const c=Vo(fP,o.type);if(!c?.type)throw new ZR({abiParameter:o});const{array:u,type:l}=c;if(l in e){if(n.has(l))throw new QR({type:l});r.push({...o,type:`tuple${u??""}`,components:IS(e[l]??[],e,new Set([...n,l]))})}else if(AS(l))r.push(o);else throw new zR({type:l})}}return r}function SS(t){const e=i1(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];E0(i)||n.push(ow(i,e))}return n}function EE(t){let e;if(typeof t=="string")e=ow(t);else{const n=i1(t),r=t.length;for(let s=0;s<r;s++){const i=t[s];if(!E0(i)){e=ow(i,n);break}}}if(!e)throw new qR({signature:t});return e}function _E(t){const e=[];if(typeof t=="string"){const n=As(t),r=n.length;for(let s=0;s<r;s++)e.push(Do(n[s],{modifiers:vE}))}else{const n=i1(t),r=t.length;for(let s=0;s<r;s++){const i=t[s];if(E0(i))continue;const o=As(i),a=o.length;for(let c=0;c<a;c++)e.push(Do(o[c],{modifiers:vE,structs:n}))}}if(e.length===0)throw new HR({params:t});return e}function He(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}function mi(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new AP(t.type);return`${t.name}(${_0(t.inputs,{includeName:e})})`}function _0(t,{includeName:e=!1}={}){return t?t.map(n=>pP(n,{includeName:e})).join(e?", ":","):""}function pP(t,{includeName:e}){return t.type.startsWith("tuple")?`(${_0(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}function yi(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function Cn(t){return yi(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const xS="2.37.6";let em={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${xS}`},fe=class aw extends Error{constructor(e,n={}){const r=n.cause instanceof aw?n.cause.details:n.cause?.message?n.cause.message:n.details,s=n.cause instanceof aw&&n.cause.docsPath||n.docsPath,i=em.getDocsUrl?.({...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...em.version?[`Version: ${em.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=xS}walk(e){return TS(this,e)}};function TS(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?TS(t.cause,e):e?null:t}class gP extends fe{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class CE extends fe{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class NS extends fe{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${_0(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class Rh extends fe{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class mP extends fe{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class yP extends fe{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Cn(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class RS extends fe{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class wP extends fe{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class AE extends fe{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class PS extends fe{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class bP extends fe{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class kS extends fe{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class IE extends fe{constructor(e,{docsPath:n}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class Ju extends fe{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class OS extends fe{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class vP extends fe{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class EP extends fe{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${mi(e.abiItem)}\`, and`,`\`${n.type}\` in \`${mi(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}let BS=class extends fe{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}};class Pd extends fe{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${_0(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class C0 extends fe{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${mi(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class _P extends fe{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class CP extends fe{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}let $S=class extends fe{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}};class AP extends fe{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class IP extends fe{constructor(e){super(`Type "${e}" is not supported for packed encoding.`,{name:"UnsupportedPackedAbiType"})}}class SP extends fe{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}let DS=class extends fe{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},US=class extends fe{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class SE extends fe{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function Ro(t,{dir:e,size:n=32}={}){return typeof t=="string"?Sa(t,{dir:e,size:n}):xP(t,{dir:e,size:n})}function Sa(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new US({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function xP(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new US({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}let MS=class extends fe{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}},TP=class extends fe{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}};class NP extends fe{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let RP=class extends fe{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function Ki(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}function Zs(t,{size:e}){if(Cn(t)>e)throw new RP({givenSize:Cn(t),maxSize:e})}function Hs(t,e={}){const{signed:n}=e;e.size&&Zs(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function PP(t,e={}){let n=t;if(e.size&&(Zs(n,{size:e.size}),n=Ki(n)),Ki(n)==="0x00")return!1;if(Ki(n)==="0x01")return!0;throw new NP(n)}function wi(t,e={}){return Number(Hs(t,e))}function LS(t,e={}){let n=Vs(t);return e.size&&(Zs(n,{size:e.size}),n=Ki(n,{dir:"right"})),new TextDecoder().decode(n)}const kP=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function bi(t,e={}){return typeof t=="number"||typeof t=="bigint"?je(t,e):typeof t=="string"?_c(t,e):typeof t=="boolean"?o1(t,e):Hn(t,e)}function o1(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Zs(n,{size:e.size}),Ro(n,{size:e.size})):n}function Hn(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=kP[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Zs(r,{size:e.size}),Ro(r,{dir:"right",size:e.size})):r}function je(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new MS({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Ro(a,{size:r}):a}const OP=new TextEncoder;function _c(t,e={}){const n=OP.encode(t);return Hn(n,e)}const BP=new TextEncoder;function pl(t,e={}){return typeof t=="number"||typeof t=="bigint"?DP(t,e):typeof t=="boolean"?$P(t,e):yi(t)?Vs(t,e):fc(t,e)}function $P(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Zs(n,{size:e.size}),Ro(n,{size:e.size})):n}const oo={zero:48,nine:57,A:65,F:70,a:97,f:102};function xE(t){if(t>=oo.zero&&t<=oo.nine)return t-oo.zero;if(t>=oo.A&&t<=oo.F)return t-(oo.A-10);if(t>=oo.a&&t<=oo.f)return t-(oo.a-10)}function Vs(t,e={}){let n=t;e.size&&(Zs(n,{size:e.size}),n=Ro(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=xE(r.charCodeAt(a++)),u=xE(r.charCodeAt(a++));if(c===void 0||u===void 0)throw new fe(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+u}return i}function DP(t,e){const n=je(t,e);return Vs(n)}function fc(t,e={}){const n=BP.encode(t);return typeof e.size=="number"?(Zs(n,{size:e.size}),Ro(n,{dir:"right",size:e.size})):n}const hf=BigInt(2**32-1),TE=BigInt(32);function UP(t,e=!1){return e?{h:Number(t&hf),l:Number(t>>TE&hf)}:{h:Number(t>>TE&hf)|0,l:Number(t&hf)|0}}function FS(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=UP(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const NE=(t,e,n)=>t>>>n,RE=(t,e,n)=>t<<32-n|e>>>n,Xc=(t,e,n)=>t>>>n|e<<32-n,Qc=(t,e,n)=>t<<32-n|e>>>n,ff=(t,e,n)=>t<<64-n|e>>>n-32,pf=(t,e,n)=>t>>>n-32|e<<64-n,MP=(t,e,n)=>t<<n|e>>>32-n,LP=(t,e,n)=>e<<n|t>>>32-n,FP=(t,e,n)=>e<<n-32|t>>>64-n,jP=(t,e,n)=>t<<n-32|e>>>64-n;function ao(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const qP=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),zP=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,WP=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),HP=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,VP=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),KP=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,eu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ip(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Xu(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function zr(t,...e){if(!Ip(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function jS(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Xu(t.outputLen),Xu(t.blockLen)}function Qu(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function qS(t,e){zr(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function GP(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Ba(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function tm(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function xi(t,e){return t<<32-e|t>>>e}const YP=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function ZP(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function JP(t){for(let e=0;e<t.length;e++)t[e]=ZP(t[e]);return t}const PE=YP?t=>t:JP,zS=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",XP=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function pc(t){if(zr(t),zS)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=XP[t[n]];return e}const co={_0:48,_9:57,A:65,F:70,a:97,f:102};function kE(t){if(t>=co._0&&t<=co._9)return t-co._0;if(t>=co.A&&t<=co.F)return t-(co.A-10);if(t>=co.a&&t<=co.f)return t-(co.a-10)}function Sp(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(zS)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=kE(t.charCodeAt(i)),a=kE(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function QP(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function A0(t){return typeof t=="string"&&(t=QP(t)),zr(t),t}function Wi(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];zr(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}class a1{}function I0(t){const e=r=>t().update(A0(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function c1(t=32){if(eu&&typeof eu.getRandomValues=="function")return eu.getRandomValues(new Uint8Array(t));if(eu&&typeof eu.randomBytes=="function")return Uint8Array.from(eu.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const ek=BigInt(0),Ol=BigInt(1),tk=BigInt(2),nk=BigInt(7),rk=BigInt(256),sk=BigInt(113),WS=[],HS=[],VS=[];for(let t=0,e=Ol,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],WS.push(2*(5*r+n)),HS.push((t+1)*(t+2)/2%64);let s=ek;for(let i=0;i<7;i++)e=(e<<Ol^(e>>nk)*sk)%rk,e&tk&&(s^=Ol<<(Ol<<BigInt(i))-Ol);VS.push(s)}const KS=FS(VS,!0),ik=KS[0],ok=KS[1],OE=(t,e,n)=>n>32?FP(t,e,n):MP(t,e,n),BE=(t,e,n)=>n>32?jP(t,e,n):LP(t,e,n);function ak(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=n[c],l=n[c+1],d=OE(u,l,1)^n[a],h=BE(u,l,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=HS[o],c=OE(s,i,a),u=BE(s,i,a),l=WS[o];s=t[l],i=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=ik[r],t[1]^=ok[r]}Ba(n)}class u1 extends a1{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,Xu(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=GP(this.state)}clone(){return this._cloneInto()}keccak(){PE(this.state32),ak(this.state32,this.rounds),PE(this.state32),this.posOut=0,this.pos=0}update(e){Qu(this),e=A0(e),zr(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,(n&128)!==0&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Qu(this,!1),zr(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Xu(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(qS(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Ba(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new u1(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const ck=(t,e,n)=>I0(()=>new u1(e,t,n)),GS=ck(1,136,256/8);function pr(t,e){const n=e||"hex",r=GS(yi(t,{strict:!1})?pl(t):t);return n==="bytes"?r:bi(r)}const uk=t=>pr(pl(t));function lk(t){return uk(t)}function dk(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new fe("Unable to normalize signature.");return s}const hk=t=>{const e=typeof t=="string"?t:Ap(t);return dk(e)};function YS(t){return lk(hk(t))}const S0=YS;let Uo=class extends fe{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},Ph=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const nm=new Ph(8192);function x0(t,e){if(nm.has(`${t}.${e}`))return nm.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=pr(fc(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return nm.set(`${t}.${e}`,i),i}function To(t,e){if(!Ss(t,{strict:!1}))throw new Uo({address:t});return x0(t,e)}const fk=/^0x[a-fA-F0-9]{40}$/,rm=new Ph(8192);function Ss(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(rm.has(r))return rm.get(r);const s=fk.test(t)?t.toLowerCase()===t?!0:n?x0(t)===t:!0:!1;return rm.set(r,s),s}function vi(t){return typeof t[0]=="string"?Ko(t):pk(t)}function pk(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function Ko(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function el(t,e,n,{strict:r}={}){return yi(t,{strict:!1})?cw(t,e,n,{strict:r}):XS(t,e,n,{strict:r})}function ZS(t,e){if(typeof e=="number"&&e>0&&e>Cn(t)-1)throw new DS({offset:e,position:"start",size:Cn(t)})}function JS(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Cn(t)!==n-e)throw new DS({offset:n,position:"end",size:Cn(t)})}function XS(t,e,n,{strict:r}={}){ZS(t,e);const s=t.slice(e,n);return r&&JS(s,e,n),s}function cw(t,e,n,{strict:r}={}){ZS(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&JS(s,e,n),s}const gk=/^(.*)\[([0-9]*)\]$/,QS=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,l1=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Go(t,e){if(t.length!==e.length)throw new RS({expectedLength:t.length,givenLength:e.length});const n=mk({params:t,values:e}),r=h1(n);return r.length===0?"0x":r}function mk({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(d1({param:t[r],value:e[r]}));return n}function d1({param:t,value:e}){const n=f1(t.type);if(n){const[r,s]=n;return wk(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return Ck(e,{param:t});if(t.type==="address")return yk(e);if(t.type==="bool")return vk(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=l1.exec(t.type)??[];return Ek(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return bk(e,{param:t});if(t.type==="string")return _k(e);throw new _P(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function h1(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=Cn(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(je(e+s,{size:32})),r.push(a),s+=Cn(a)):n.push(a)}return vi([...n,...r])}function yk(t){if(!Ss(t))throw new Uo({address:t});return{dynamic:!1,encoded:Sa(t.toLowerCase())}}function wk(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new $S(t);if(!r&&t.length!==e)throw new mP({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=d1({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=h1(i);if(r){const a=je(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?vi([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:vi(i.map(({encoded:o})=>o))}}function bk(t,{param:e}){const[,n]=e.type.split("bytes"),r=Cn(t);if(!n){let s=t;return r%32!==0&&(s=Sa(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:vi([Sa(je(r,{size:32})),s])}}if(r!==Number.parseInt(n,10))throw new yP({expectedSize:Number.parseInt(n,10),value:t});return{dynamic:!1,encoded:Sa(t,{dir:"right"})}}function vk(t){if(typeof t!="boolean")throw new fe(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Sa(o1(t))}}function Ek(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new MS({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:je(t,{size:32,signed:e})}}function _k(t){const e=_c(t),n=Math.ceil(Cn(e)/32),r=[];for(let s=0;s<n;s++)r.push(Sa(el(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:vi([Sa(je(Cn(e),{size:32})),...r])}}function Ck(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=d1({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?h1(r):vi(r.map(({encoded:s})=>s))}}function f1(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const kh=t=>el(YS(t),0,4);function Fc(t){const{abi:e,args:n=[],name:r}=t,s=yi(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?kh(a)===r:a.type==="event"?S0(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((u,l)=>{const d="inputs"in a&&a.inputs[l];return d?uw(u,d):!1})){if(o&&"inputs"in o&&o.inputs){const u=e5(a.inputs,o.inputs,n);if(u)throw new EP({abiItem:a,type:u[0]},{abiItem:o,type:u[1]})}o=a}}return o||i[0]}function uw(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Ss(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>uw(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>uw(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function e5(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return e5(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Ss(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Ss(n[r],{strict:!1}):!1)return o}}const $E="/docs/contract/encodeEventTopics";function Oh(t){const{abi:e,eventName:n,args:r}=t;let s=e[0];if(n){const c=Fc({abi:e,name:n});if(!c)throw new IE(n,{docsPath:$E});s=c}if(s.type!=="event")throw new IE(void 0,{docsPath:$E});const i=mi(s),o=S0(i);let a=[];if(r&&"inputs"in s){const c=s.inputs?.filter(l=>"indexed"in l&&l.indexed),u=Array.isArray(r)?r:Object.values(r).length>0?c?.map(l=>r[l.name])??[]:[];u.length>0&&(a=c?.map((l,d)=>Array.isArray(u[d])?u[d].map((h,f)=>DE({param:l,value:u[d][f]})):typeof u[d]<"u"&&u[d]!==null?DE({param:l,value:u[d]}):null)??[])}return[o,...a]}function DE({param:t,value:e}){if(t.type==="string"||t.type==="bytes")return pr(pl(e));if(t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/))throw new SP(t.type);return Go([t],[e])}function T0(t,{method:e}){const n={};return t.transport.type==="fallback"&&t.transport.onResponse?.(({method:r,response:s,status:i,transport:o})=>{i==="success"&&e===r&&(n[s]=o.request)}),r=>n[r]||t.request}async function t5(t,e){const{address:n,abi:r,args:s,eventName:i,fromBlock:o,strict:a,toBlock:c}=e,u=T0(t,{method:"eth_newFilter"}),l=i?Oh({abi:r,args:s,eventName:i}):void 0,d=await t.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof o=="bigint"?je(o):o,toBlock:typeof c=="bigint"?je(c):c,topics:l}]});return{abi:r,args:s,eventName:i,id:d,request:u(d),strict:!!a,type:"event"}}function yr(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}const UE="/docs/contract/encodeFunctionData";function Ak(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=Fc({abi:e,args:n,name:r});if(!i)throw new Ju(r,{docsPath:UE});s=i}if(s.type!=="function")throw new Ju(void 0,{docsPath:UE});return{abi:[s],functionName:kh(mi(s))}}function Js(t){const{args:e}=t,{abi:n,functionName:r}=t.abi.length===1&&t.functionName?.startsWith("0x")?t:Ak(t),s=n[0],i=r,o="inputs"in s&&s.inputs?Go(s.inputs,e??[]):void 0;return Ko([i,o??"0x"])}const Ik={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},n5={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},Sk={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};let ME=class extends fe{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}},r5=class extends fe{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}},xk=class extends fe{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}};const Tk={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new xk({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new r5({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new ME({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new ME({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function p1(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(Tk);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function Nk(t,e={}){typeof e.size<"u"&&Zs(t,{size:e.size});const n=Hn(t,e);return Hs(n,e)}function Rk(t,e={}){let n=t;if(typeof e.size<"u"&&(Zs(n,{size:e.size}),n=Ki(n)),n.length>1||n[0]>1)throw new TP(n);return!!n[0]}function Po(t,e={}){typeof e.size<"u"&&Zs(t,{size:e.size});const n=Hn(t,e);return wi(n,e)}function Pk(t,e={}){let n=t;return typeof e.size<"u"&&(Zs(n,{size:e.size}),n=Ki(n,{dir:"right"})),new TextDecoder().decode(n)}function Bh(t,e){const n=typeof e=="string"?Vs(e):e,r=p1(n);if(Cn(n)===0&&t.length>0)throw new Rh;if(Cn(e)&&Cn(e)<32)throw new NS({data:typeof e=="string"?e:Hn(e),params:t,size:Cn(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,u]=Lu(r,a,{staticPosition:0});s+=u,i.push(c)}return i}function Lu(t,e,{staticPosition:n}){const r=f1(e.type);if(r){const[s,i]=r;return Ok(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return Uk(t,e,{staticPosition:n});if(e.type==="address")return kk(t);if(e.type==="bool")return Bk(t);if(e.type.startsWith("bytes"))return $k(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return Dk(t,e);if(e.type==="string")return Mk(t,{staticPosition:n});throw new CP(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const LE=32,lw=32;function kk(t){const e=t.readBytes(32);return[x0(Hn(XS(e,-20))),32]}function Ok(t,e,{length:n,staticPosition:r}){if(!n){const o=Po(t.readBytes(lw)),a=r+o,c=a+LE;t.setPosition(a);const u=Po(t.readBytes(LE)),l=kd(e);let d=0;const h=[];for(let f=0;f<u;++f){t.setPosition(c+(l?f*32:d));const[y,m]=Lu(t,e,{staticPosition:c});d+=m,h.push(y)}return t.setPosition(r+32),[h,32]}if(kd(e)){const o=Po(t.readBytes(lw)),a=r+o,c=[];for(let u=0;u<n;++u){t.setPosition(a+u*32);const[l]=Lu(t,e,{staticPosition:a});c.push(l)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=Lu(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function Bk(t){return[Rk(t.readBytes(32),{size:32}),32]}function $k(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=Po(t.readBytes(32));t.setPosition(n+o);const a=Po(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[Hn(c),32]}return[Hn(t.readBytes(Number.parseInt(s,10),32)),32]}function Dk(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256",10),s=t.readBytes(32);return[r>48?Nk(s,{signed:n}):Po(s,{signed:n}),32]}function Uk(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(kd(e)){const o=Po(t.readBytes(lw)),a=n+o;for(let c=0;c<e.components.length;++c){const u=e.components[c];t.setPosition(a+i);const[l,d]=Lu(t,u,{staticPosition:a});i+=d,s[r?c:u?.name]=l}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,u]=Lu(t,a,{staticPosition:n});s[r?o:a?.name]=c,i+=u}return[s,i]}function Mk(t,{staticPosition:e}){const n=Po(t.readBytes(32)),r=e+n;t.setPosition(r);const s=Po(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=Pk(Ki(i));return t.setPosition(e+32),[o,32]}function kd(t){const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return t.components?.some(kd);const n=f1(t.type);return!!(n&&kd({...t,type:n[1]}))}function s5(t){const{abi:e,data:n}=t,r=el(n,0,4);if(r==="0x")throw new Rh;const i=[...e||[],n5,Sk].find(o=>o.type==="error"&&r===kh(mi(o)));if(!i)throw new PS(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?Bh(i.inputs,el(n,4)):void 0,errorName:i.name}}const Un=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n);function i5({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?Un(e[i]):e[i]}`).join(", ")})`}const Lk={gwei:9,wei:18},Fk={ether:-9,wei:9},jk={ether:-18,gwei:-9};function gl(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function g1(t,e="wei"){return gl(t,Lk[e])}function ls(t,e="wei"){return gl(t,Fk[e])}class qk extends fe{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class zk extends fe{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function FE(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function Wk(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=FE(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=FE(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function $h(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class Hk extends fe{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class Vk extends fe{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",$h(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class Kk extends fe{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:d,value:h}){const f=$h({chain:s&&`${s?.name} (id: ${s?.id})`,from:n?.address,to:d,value:typeof h<"u"&&`${g1(h)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${ls(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ls(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${ls(u)} gwei`,nonce:l});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class o5 extends fe{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class a5 extends fe{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class Gk extends fe{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const Yk=t=>t,Dh=t=>t;class c5 extends fe{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:d,value:h,stateOverride:f}){const y=n?yr(n):void 0;let m=$h({from:y?.address,to:d,value:typeof h<"u"&&`${g1(h)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${ls(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ls(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${ls(u)} gwei`,nonce:l});f&&(m+=`
${Wk(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",m].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class m1 extends fe{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=Fc({abi:n,args:r,name:o}),u=c?i5({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,l=c?mi(c,{includeName:!0}):void 0,d=$h({address:s&&Yk(s),function:l,args:u&&u!=="()"&&`${[...Array(o?.length??0).keys()].map(()=>" ").join("")}${u}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class dw extends fe{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=s5({abi:e,data:n});const{abiItem:l,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=Ik[f]}else{const f=l?mi(l,{includeName:!0}):void 0,y=l&&h?i5({abiItem:l,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[f?`Error: ${f}`:"",y&&y!=="()"?`       ${[...Array(d?.length??0).keys()].map(()=>" ").join("")}${y}`:""]}}catch(l){i=l}else s&&(c=s);let u;i instanceof PS&&(u=i.signature,a=[`Unable to decode signature "${u}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${u}.`]),super(c&&c!=="execution reverted"||u?[`The contract function "${r}" reverted with the following ${u?"signature":"reason"}:`,c||u].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=u}}class Zk extends fe{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class Jk extends fe{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class N0 extends fe{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}class gc extends fe{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${Dh(o)}`,e&&`Request body: ${Un(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class y1 extends fe{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${Dh(r)}`,`Request body: ${Un(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class jE extends fe{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${Dh(n)}`,`Request body: ${Un(e)}`],name:"TimeoutError"})}}const Xk=-1;class fs extends fe{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||e?.metaMessages,name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof y1?e.code:n??Xk}}class Ns extends fs{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class Od extends fs{constructor(e){super(e,{code:Od.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(Od,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Bd extends fs{constructor(e){super(e,{code:Bd.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Bd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class $d extends fs{constructor(e,{method:n}={}){super(e,{code:$d.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty($d,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Dd extends fs{constructor(e){super(e,{code:Dd.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Dd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Cc extends fs{constructor(e){super(e,{code:Cc.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Cc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Ac extends fs{constructor(e){super(e,{code:Ac.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Ac,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class Ud extends fs{constructor(e){super(e,{code:Ud.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(Ud,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class xa extends fs{constructor(e){super(e,{code:xa.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(xa,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class tl extends fs{constructor(e){super(e,{code:tl.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(tl,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class tc extends fs{constructor(e,{method:n}={}){super(e,{code:tc.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(tc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class nl extends fs{constructor(e){super(e,{code:nl.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(nl,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Md extends fs{constructor(e){super(e,{code:Md.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(Md,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class zn extends Ns{constructor(e){super(e,{code:zn.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(zn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class Ld extends Ns{constructor(e){super(e,{code:Ld.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(Ld,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Fd extends Ns{constructor(e,{method:n}={}){super(e,{code:Fd.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(Fd,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class jd extends Ns{constructor(e){super(e,{code:jd.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(jd,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class qd extends Ns{constructor(e){super(e,{code:qd.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(qd,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Ji extends Ns{constructor(e){super(e,{code:Ji.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Ji,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class zd extends Ns{constructor(e){super(e,{code:zd.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(zd,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class Wd extends Ns{constructor(e){super(e,{code:Wd.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(Wd,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class Hd extends Ns{constructor(e){super(e,{code:Hd.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(Hd,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class Vd extends Ns{constructor(e){super(e,{code:Vd.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(Vd,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class Kd extends Ns{constructor(e){super(e,{code:Kd.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(Kd,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class Gd extends Ns{constructor(e){super(e,{code:Gd.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(Gd,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class Yd extends Ns{constructor(e){super(e,{code:Yd.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(Yd,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class Qk extends fs{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const eO=3;function Ic(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof N0?t:t instanceof fe?t.walk(y=>"data"in y)||t.walk():{},{code:c,data:u,details:l,message:d,shortMessage:h}=a,f=t instanceof Rh?new Zk({functionName:i}):[eO,Cc.code].includes(c)&&(u||l||d||h)?new dw({abi:e,data:typeof u=="object"?u.data:u,functionName:i,message:a instanceof y1?l:h??d}):t;return new m1(f,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}function tO(t){const e=pr(`0x${t.substring(4)}`).substring(26);return x0(`0x${e}`)}async function nO({hash:t,signature:e}){const n=yi(t)?t:bi(t),{secp256k1:r}=await Or(async()=>{const{secp256k1:o}=await Promise.resolve().then(()=>W$);return{secp256k1:o}},void 0);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:u,s:l,v:d,yParity:h}=e,f=Number(h??d),y=qE(f);return new r.Signature(Hs(u),Hs(l)).addRecoveryBit(y)}const o=yi(e)?e:bi(e);if(Cn(o)!==65)throw new Error("invalid signature length");const a=wi(`0x${o.slice(130)}`),c=qE(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function qE(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function w1({hash:t,signature:e}){return tO(await nO({hash:t,signature:e}))}function rO(t,e="hex"){const n=u5(t),r=p1(new Uint8Array(n.length));return n.encode(r),e==="hex"?Hn(r.bytes):r.bytes}function u5(t){return Array.isArray(t)?sO(t.map(e=>u5(e))):iO(t)}function sO(t){const e=t.reduce((s,i)=>s+i.length,0),n=l5(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function iO(t){const e=typeof t=="string"?Vs(t):t,n=l5(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function l5(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new fe("Length is too large.")}function oO(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=pr(Ko(["0x05",rO([e?je(e):"0x",s,n?je(n):"0x"])]));return r==="bytes"?Vs(i):i}async function b1(t){const{authorization:e,signature:n}=t;return w1({hash:oO(e),signature:n??e})}class aO extends fe{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:d,value:h}){const f=$h({from:n?.address,to:d,value:typeof h<"u"&&`${g1(h)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${ls(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ls(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${ls(u)} gwei`,nonce:l});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class nc extends fe{constructor({cause:e,message:n}={}){const r=n?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(nc,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(nc,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class xp extends fe{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${ls(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(xp,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class hw extends fe{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${ls(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(hw,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class fw extends fe{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(fw,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class pw extends fe{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(pw,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class gw extends fe{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(gw,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class mw extends fe{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(mw,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class yw extends fe{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(yw,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class ww extends fe{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(ww,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class bw extends fe{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(bw,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class Tp extends fe{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${ls(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${ls(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(Tp,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class Uh extends fe{constructor({cause:e}){super(`An error occurred while executing: ${e?.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function R0(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof fe?t.walk(s=>s?.code===nc.code):t;return r instanceof fe?new nc({cause:t,message:r.details}):nc.nodeMessage.test(n)?new nc({cause:t,message:t.details}):xp.nodeMessage.test(n)?new xp({cause:t,maxFeePerGas:e?.maxFeePerGas}):hw.nodeMessage.test(n)?new hw({cause:t,maxFeePerGas:e?.maxFeePerGas}):fw.nodeMessage.test(n)?new fw({cause:t,nonce:e?.nonce}):pw.nodeMessage.test(n)?new pw({cause:t,nonce:e?.nonce}):gw.nodeMessage.test(n)?new gw({cause:t,nonce:e?.nonce}):mw.nodeMessage.test(n)?new mw({cause:t}):yw.nodeMessage.test(n)?new yw({cause:t,gas:e?.gas}):ww.nodeMessage.test(n)?new ww({cause:t,gas:e?.gas}):bw.nodeMessage.test(n)?new bw({cause:t}):Tp.nodeMessage.test(n)?new Tp({cause:t,maxFeePerGas:e?.maxFeePerGas,maxPriorityFeePerGas:e?.maxPriorityFeePerGas}):new Uh({cause:t})}function cO(t,{docsPath:e,...n}){const r=(()=>{const s=R0(t,n);return s instanceof Uh?t:s})();return new aO(r,{docsPath:e,...n})}function P0(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}const uO={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function Mh(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=lO(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>Hn(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=je(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=je(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=je(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=je(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=je(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=je(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=uO[t.type]),typeof t.value<"u"&&(e.value=je(t.value)),e}function lO(t){return t.map(e=>({address:e.address,r:e.r?je(BigInt(e.r)):e.r,s:e.s?je(BigInt(e.s)):e.s,chainId:je(e.chainId),nonce:je(e.nonce),...typeof e.yParity<"u"?{yParity:je(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:je(e.v)}:{}}))}function zE(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new SE({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new SE({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function dO(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=je(e)),n!==void 0&&(o.nonce=je(n)),r!==void 0&&(o.state=zE(r)),s!==void 0){if(o.state)throw new zk;o.stateDiff=zE(s)}return o}function v1(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!Ss(n,{strict:!1}))throw new Uo({address:n});if(e[n])throw new qk({address:n});e[n]=dO(r)}return e}const hO=2n**256n-1n;function ml(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?yr(e):void 0;if(o&&!Ss(o.address))throw new Uo({address:o.address});if(i&&!Ss(i))throw new Uo({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new Hk;if(r&&r>hO)throw new xp({maxFeePerGas:r});if(s&&r&&s>r)throw new Tp({maxFeePerGas:r,maxPriorityFeePerGas:s})}class fO extends fe{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class E1 extends fe{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class pO extends fe{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${ls(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class d5 extends fe{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const h5={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function f5(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?wi(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?wi(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?h5[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=gO(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function gO(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function p5(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:f5(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function Hi(t,{blockHash:e,blockNumber:n,blockTag:r=t.experimental_blockTag??"latest",includeTransactions:s}={}){const i=s??!1,o=n!==void 0?je(n):void 0;let a=null;if(e?a=await t.request({method:"eth_getBlockByHash",params:[e,i]},{dedupe:!0}):a=await t.request({method:"eth_getBlockByNumber",params:[o||r,i]},{dedupe:!!o}),!a)throw new d5({blockHash:e,blockNumber:n});return(t.chain?.formatters?.block?.format||p5)(a)}async function _1(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function mO(t,e){return g5(t,e)}async function g5(t,e){const{block:n,chain:r=t.chain,request:s}=e||{};try{const i=r?.fees?.maxPriorityFeePerGas??r?.fees?.defaultPriorityFee;if(typeof i=="function"){const a=n||await He(t,Hi,"getBlock")({}),c=await i({block:a,client:t,request:s});if(c===null)throw new Error;return c}if(typeof i<"u")return i;const o=await t.request({method:"eth_maxPriorityFeePerGas"});return Hs(o)}catch{const[i,o]=await Promise.all([n?Promise.resolve(n):He(t,Hi,"getBlock")({}),He(t,_1,"getGasPrice")({})]);if(typeof i.baseFeePerGas!="bigint")throw new E1;const a=o-i.baseFeePerGas;return a<0n?0n:a}}async function yO(t,e){return vw(t,e)}async function vw(t,e){const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>typeof r?.fees?.baseFeeMultiplier=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):r?.fees?.baseFeeMultiplier??1.2)();if(o<1)throw new fO;const c=10**(o.toString().split(".")[1]?.length??0),u=h=>h*BigInt(Math.ceil(o*c))/BigInt(c),l=n||await He(t,Hi,"getBlock")({});if(typeof r?.fees?.estimateFeesPerGas=="function"){const h=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:u,request:s,type:i});if(h!==null)return h}if(i==="eip1559"){if(typeof l.baseFeePerGas!="bigint")throw new E1;const h=typeof s?.maxPriorityFeePerGas=="bigint"?s.maxPriorityFeePerGas:await g5(t,{block:l,chain:r,request:s}),f=u(l.baseFeePerGas);return{maxFeePerGas:s?.maxFeePerGas??f+h,maxPriorityFeePerGas:h}}return{gasPrice:s?.gasPrice??u(await He(t,_1,"getGasPrice")({}))}}async function C1(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?je(r):n]},{dedupe:!!r});return wi(s)}function m5(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>Vs(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>Hn(i))}function y5(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>Vs(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>Vs(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>Hn(o))}function wO(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}function bO(t,e,n){return t&e^~t&n}function vO(t,e,n){return t&e^t&n^e&n}class w5 extends a1{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=tm(this.buffer)}update(e){Qu(this),e=A0(e),zr(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=tm(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Qu(this),qS(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,Ba(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;wO(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=tm(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const Qo=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),_r=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Cr=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),EO=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ea=new Uint32Array(64);class _O extends w5{constructor(e=32){super(64,e,8,!1),this.A=Qo[0]|0,this.B=Qo[1]|0,this.C=Qo[2]|0,this.D=Qo[3]|0,this.E=Qo[4]|0,this.F=Qo[5]|0,this.G=Qo[6]|0,this.H=Qo[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)ea[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=ea[d-15],f=ea[d-2],y=xi(h,7)^xi(h,18)^h>>>3,m=xi(f,17)^xi(f,19)^f>>>10;ea[d]=m+ea[d-7]+y+ea[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){const h=xi(a,6)^xi(a,11)^xi(a,25),f=l+h+bO(a,c,u)+EO[d]+ea[d]|0,m=(xi(r,2)^xi(r,13)^xi(r,22))+vO(r,s,i)|0;l=u,u=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+m|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,s,i,o,a,c,u,l)}roundClean(){Ba(ea)}destroy(){this.set(0,0,0,0,0,0,0,0),Ba(this.buffer)}}const b5=FS(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),CO=b5[0],AO=b5[1],ta=new Uint32Array(80),na=new Uint32Array(80);class v5 extends w5{constructor(e=64){super(128,e,16,!1),this.Ah=Cr[0]|0,this.Al=Cr[1]|0,this.Bh=Cr[2]|0,this.Bl=Cr[3]|0,this.Ch=Cr[4]|0,this.Cl=Cr[5]|0,this.Dh=Cr[6]|0,this.Dl=Cr[7]|0,this.Eh=Cr[8]|0,this.El=Cr[9]|0,this.Fh=Cr[10]|0,this.Fl=Cr[11]|0,this.Gh=Cr[12]|0,this.Gl=Cr[13]|0,this.Hh=Cr[14]|0,this.Hl=Cr[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:d,Fl:h,Gh:f,Gl:y,Hh:m,Hl:v}=this;return[e,n,r,s,i,o,a,c,u,l,d,h,f,y,m,v]}set(e,n,r,s,i,o,a,c,u,l,d,h,f,y,m,v){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=y|0,this.Hh=m|0,this.Hl=v|0}process(e,n){for(let A=0;A<16;A++,n+=4)ta[A]=e.getUint32(n),na[A]=e.getUint32(n+=4);for(let A=16;A<80;A++){const M=ta[A-15]|0,P=na[A-15]|0,I=Xc(M,P,1)^Xc(M,P,8)^NE(M,P,7),F=Qc(M,P,1)^Qc(M,P,8)^RE(M,P,7),W=ta[A-2]|0,D=na[A-2]|0,k=Xc(W,D,19)^ff(W,D,61)^NE(W,D,6),B=Qc(W,D,19)^pf(W,D,61)^RE(W,D,6),N=WP(F,B,na[A-7],na[A-16]),R=HP(N,I,k,ta[A-7],ta[A-16]);ta[A]=R|0,na[A]=N|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:d,El:h,Fh:f,Fl:y,Gh:m,Gl:v,Hh:T,Hl:O}=this;for(let A=0;A<80;A++){const M=Xc(d,h,14)^Xc(d,h,18)^ff(d,h,41),P=Qc(d,h,14)^Qc(d,h,18)^pf(d,h,41),I=d&f^~d&m,F=h&y^~h&v,W=VP(O,P,F,AO[A],na[A]),D=KP(W,T,M,I,CO[A],ta[A]),k=W|0,B=Xc(r,s,28)^ff(r,s,34)^ff(r,s,39),N=Qc(r,s,28)^pf(r,s,34)^pf(r,s,39),R=r&i^r&a^i&a,p=s&o^s&c^o&c;T=m|0,O=v|0,m=f|0,v=y|0,f=d|0,y=h|0,{h:d,l:h}=ao(u|0,l|0,D|0,k|0),u=a|0,l=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const g=qP(k,N,p);r=zP(g,D,B,R),s=g|0}({h:r,l:s}=ao(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=ao(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=ao(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=ao(this.Dh|0,this.Dl|0,u|0,l|0),{h:d,l:h}=ao(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:y}=ao(this.Fh|0,this.Fl|0,f|0,y|0),{h:m,l:v}=ao(this.Gh|0,this.Gl|0,m|0,v|0),{h:T,l:O}=ao(this.Hh|0,this.Hl|0,T|0,O|0),this.set(r,s,i,o,a,c,u,l,d,h,f,y,m,v,T,O)}roundClean(){Ba(ta,na)}destroy(){Ba(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class IO extends v5{constructor(){super(48),this.Ah=_r[0]|0,this.Al=_r[1]|0,this.Bh=_r[2]|0,this.Bl=_r[3]|0,this.Ch=_r[4]|0,this.Cl=_r[5]|0,this.Dh=_r[6]|0,this.Dl=_r[7]|0,this.Eh=_r[8]|0,this.El=_r[9]|0,this.Fh=_r[10]|0,this.Fl=_r[11]|0,this.Gh=_r[12]|0,this.Gl=_r[13]|0,this.Hh=_r[14]|0,this.Hl=_r[15]|0}}const A1=I0(()=>new _O),SO=I0(()=>new v5),Cce=I0(()=>new IO),Ew=A1;function xO(t,e){return Ew(yi(t,{strict:!1})?pl(t):t)}function TO(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=xO(e);return s.set([n],0),r==="bytes"?s:Hn(s)}function NO(t){const{commitments:e,version:n}=t,r=t.to,s=[];for(const i of e)s.push(TO({commitment:i,to:r,version:n}));return s}const WE=6,E5=32,I1=4096,_5=E5*I1,HE=_5*WE-1-1*I1*WE;class RO extends fe{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class PO extends fe{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function kO(t){const e=typeof t.data=="string"?Vs(t.data):t.data,n=Cn(e);if(!n)throw new PO;if(n>HE)throw new RO({maxSize:HE,size:n});const r=[];let s=!0,i=0;for(;s;){const o=p1(new Uint8Array(_5));let a=0;for(;a<I1;){const c=e.slice(i,i+(E5-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),s=!1;break}a++,i+=31}r.push(o)}return r.map(o=>Hn(o.bytes))}function OO(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??kO({data:e}),i=t.commitments??m5({blobs:s,kzg:n,to:r}),o=t.proofs??y5({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function BO(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new Vk({transaction:t})}async function k0(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return wi(e)}const C5=["blobVersionedHashes","chainId","fees","gas","nonce","type"],VE=new Map;async function O0(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:u=C5,type:l}=e,d=n&&yr(n),h={...e,...d?{from:d?.address}:{}};let f;async function y(){return f||(f=await He(t,Hi,"getBlock")({blockTag:"latest"}),f)}let m;async function v(){return m||(s?s.id:typeof e.chainId<"u"?e.chainId:(m=await He(t,k0,"getChainId")({}),m))}if(u.includes("nonce")&&typeof a>"u"&&d)if(c){const T=await v();h.nonce=await c.consume({address:d.address,chainId:T,client:t})}else h.nonce=await He(t,C1,"getTransactionCount")({address:d.address,blockTag:"pending"});if((u.includes("blobVersionedHashes")||u.includes("sidecars"))&&r&&o){const T=m5({blobs:r,kzg:o});if(u.includes("blobVersionedHashes")){const O=NO({commitments:T,to:"hex"});h.blobVersionedHashes=O}if(u.includes("sidecars")){const O=y5({blobs:r,commitments:T,kzg:o}),A=OO({blobs:r,commitments:T,proofs:O,to:"hex"});h.sidecars=A}}if(u.includes("chainId")&&(h.chainId=await v()),(u.includes("fees")||u.includes("type"))&&typeof l>"u")try{h.type=BO(h)}catch{let T=VE.get(t.uid);typeof T>"u"&&(T=typeof(await y())?.baseFeePerGas=="bigint",VE.set(t.uid,T)),h.type=T?"eip1559":"legacy"}if(u.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const T=await y(),{maxFeePerGas:O,maxPriorityFeePerGas:A}=await vw(t,{block:T,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<A)throw new pO({maxPriorityFeePerGas:A});h.maxPriorityFeePerGas=A,h.maxFeePerGas=O}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new E1;if(typeof e.gasPrice>"u"){const T=await y(),{gasPrice:O}=await vw(t,{block:T,chain:s,request:h,type:"legacy"});h.gasPrice=O}}return u.includes("gas")&&typeof i>"u"&&(h.gas=await He(t,B0,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),ml(h),delete h.parameters,h}async function S1(t,{address:e,blockNumber:n,blockTag:r=t.experimental_blockTag??"latest"}){const s=typeof n=="bigint"?je(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function B0(t,e){const{account:n=t.account}=e,r=n?yr(n):void 0;try{let B=function(R){const{block:p,request:g,rpcStateOverride:w}=R;return t.request({method:"eth_estimateGas",params:w?[g,p??t.experimental_blockTag??"latest",w]:p?[g,p]:[g]})};const{accessList:s,authorizationList:i,blobs:o,blobVersionedHashes:a,blockNumber:c,blockTag:u,data:l,gas:d,gasPrice:h,maxFeePerBlobGas:f,maxFeePerGas:y,maxPriorityFeePerGas:m,nonce:v,value:T,stateOverride:O,...A}=await O0(t,{...e,parameters:r?.type==="local"?void 0:["blobVersionedHashes"]}),P=(typeof c=="bigint"?je(c):void 0)||u,I=v1(O),F=await(async()=>{if(A.to)return A.to;if(i&&i.length>0)return await b1({authorization:i[0]}).catch(()=>{throw new fe("`to` is required. Could not infer from `authorizationList`")})})();ml(e);const W=t.chain?.formatters?.transactionRequest?.format,k=(W||Mh)({...P0(A,{format:W}),from:r?.address,accessList:s,authorizationList:i,blobs:o,blobVersionedHashes:a,data:l,gas:d,gasPrice:h,maxFeePerBlobGas:f,maxFeePerGas:y,maxPriorityFeePerGas:m,nonce:v,to:F,value:T});let N=BigInt(await B({block:P,request:k,rpcStateOverride:I}));if(i){const R=await S1(t,{address:k.from}),p=await Promise.all(i.map(async g=>{const{address:w}=g,_=await B({block:P,request:{authorizationList:void 0,data:l,from:r?.address,to:w,value:je(R)},rpcStateOverride:I}).catch(()=>100000n);return 2n*BigInt(_)}));N+=p.reduce((g,w)=>g+w,0n)}return N}catch(s){throw cO(s,{...e,account:r,chain:t.chain})}}async function $O(t,e){const{abi:n,address:r,args:s,functionName:i,dataSuffix:o,...a}=e,c=Js({abi:n,args:s,functionName:i});try{return await He(t,B0,"estimateGas")({data:`${c}${o?o.replace("0x",""):""}`,to:r,...a})}catch(u){const l=a.account?yr(a.account):void 0;throw Ic(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:i,sender:l?.address})}}function yl(t,e){if(!Ss(t,{strict:!1}))throw new Uo({address:t});if(!Ss(e,{strict:!1}))throw new Uo({address:e});return t.toLowerCase()===e.toLowerCase()}const KE="/docs/contract/decodeEventLog";function x1(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new bP({docsPath:KE});const c=e.find(m=>m.type==="event"&&o===S0(mi(m)));if(!(c&&"name"in c)||c.type!=="event")throw new kS(o,{docsPath:KE});const{name:u,inputs:l}=c,d=l?.some(m=>!("name"in m&&m.name)),h=d?[]:{},f=l.map((m,v)=>[m,v]).filter(([m])=>"indexed"in m&&m.indexed);for(let m=0;m<f.length;m++){const[v,T]=f[m],O=a[m];if(!O)throw new C0({abiItem:c,param:v});h[d?T:v.name||T]=DO({param:v,value:O})}const y=l.filter(m=>!("indexed"in m&&m.indexed));if(y.length>0){if(n&&n!=="0x")try{const m=Bh(y,n);if(m)if(d)for(let v=0;v<l.length;v++)h[v]=h[v]??m.shift();else for(let v=0;v<y.length;v++)h[y[v].name]=m[v]}catch(m){if(i)throw m instanceof NS||m instanceof r5?new Pd({abiItem:c,data:n,params:y,size:Cn(n)}):m}else if(i)throw new Pd({abiItem:c,data:"0x",params:y,size:0})}return{eventName:u,args:Object.values(h).length>0?h:void 0}}function DO({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(Bh([t],e)||[])[0]}function T1(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{try{const a=e.find(u=>u.type==="event"&&o.topics[0]===S0(u));if(!a)return null;const c=x1({...o,abi:[a],strict:s});return i&&!i.includes(c.eventName)||!UO({args:c.args,inputs:a.inputs,matchArgs:n})?null:{...c,...o}}catch(a){let c,u;if(a instanceof kS)return null;if(a instanceof Pd||a instanceof C0){if(s)return null;c=a.abiItem.name,u=a.abiItem.inputs?.some(l=>!("name"in l&&l.name))}return{...o,args:u?[]:{},eventName:c}}}).filter(Boolean)}function UO(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?yl(o,a):i.type==="string"||i.type==="bytes"?pr(pl(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(u=>s(a,u,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(u=>u.name===i);return a?(Array.isArray(o)?o:[o]).some(u=>s(a,u,e[i])):!1}):!1}function Mo(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function N1(t,{address:e,blockHash:n,fromBlock:r,toBlock:s,event:i,events:o,args:a,strict:c}={}){const u=c??!1,l=o??(i?[i]:void 0);let d=[];l&&(d=[l.flatMap(m=>Oh({abi:[m],eventName:m.name,args:o?void 0:a}))],i&&(d=d[0]));let h;n?h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,blockHash:n}]}):h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,fromBlock:typeof r=="bigint"?je(r):r,toBlock:typeof s=="bigint"?je(s):s}]});const f=h.map(y=>Mo(y));return l?T1({abi:l,args:a,logs:f,strict:u}):f}async function A5(t,e){const{abi:n,address:r,args:s,blockHash:i,eventName:o,fromBlock:a,toBlock:c,strict:u}=e,l=o?Fc({abi:n,name:o}):void 0,d=l?void 0:n.filter(h=>h.type==="event");return He(t,N1,"getLogs")({address:r,args:s,blockHash:i,event:l,events:d,fromBlock:a,toBlock:c,strict:u})}const sm="/docs/contract/decodeFunctionResult";function jc(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=Fc({abi:e,args:n,name:r});if(!a)throw new Ju(r,{docsPath:sm});i=a}if(i.type!=="function")throw new Ju(void 0,{docsPath:sm});if(!i.outputs)throw new OS(i.name,{docsPath:sm});const o=Bh(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const R1=BigInt(0),_w=BigInt(1);function Lh(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function P1(t){if(!Lh(t))throw new Error("Uint8Array expected")}function Zd(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function gf(t){const e=t.toString(16);return e.length&1?"0"+e:e}function I5(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?R1:BigInt("0x"+t)}const S5=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",MO=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Jd(t){if(P1(t),S5)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=MO[t[n]];return e}const uo={_0:48,_9:57,A:65,F:70,a:97,f:102};function GE(t){if(t>=uo._0&&t<=uo._9)return t-uo._0;if(t>=uo.A&&t<=uo.F)return t-(uo.A-10);if(t>=uo.a&&t<=uo.f)return t-(uo.a-10)}function Np(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(S5)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=GE(t.charCodeAt(i)),a=GE(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function mc(t){return I5(Jd(t))}function x5(t){return P1(t),I5(Jd(Uint8Array.from(t).reverse()))}function Fh(t,e){return Np(t.toString(16).padStart(e*2,"0"))}function T5(t,e){return Fh(t,e).reverse()}function Us(t,e,n){let r;if(typeof e=="string")try{r=Np(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(Lh(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function Rp(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];P1(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const im=t=>typeof t=="bigint"&&R1<=t;function k1(t,e,n){return im(t)&&im(e)&&im(n)&&e<=t&&t<n}function Fu(t,e,n,r){if(!k1(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function LO(t){let e;for(e=0;t>R1;t>>=_w,e+=1);return e}const $0=t=>(_w<<BigInt(t))-_w,om=t=>new Uint8Array(t),YE=t=>Uint8Array.from(t);function FO(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=om(t),s=om(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...d)=>n(s,r,...d),c=(d=om(0))=>{s=a(YE([0]),d),r=a(),d.length!==0&&(s=a(YE([1]),d),r=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<e;){r=a();const f=r.slice();h.push(f),d+=r.length}return Rp(...h)};return(d,h)=>{o(),c(d);let f;for(;!(f=h(u()));)c();return o(),f}}const jO={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Lh(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function D0(t,e,n={}){const r=(s,i,o)=>{const a=jO[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function ZE(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const qO="0.1.1";function zO(){return qO}let _t=class Cw extends Error{constructor(e,n={}){const r=(()=>{if(n.cause instanceof Cw){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:n.cause?.message?n.cause.message:n.details})(),s=n.cause instanceof Cw&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${zO()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return N5(this,e)}};function N5(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?N5(t.cause,e):e?null:t}function jh(t,e){if(Ru(t)>e)throw new o4({givenSize:Ru(t),maxSize:e})}const lo={zero:48,nine:57,A:65,F:70,a:97,f:102};function JE(t){if(t>=lo.zero&&t<=lo.nine)return t-lo.zero;if(t>=lo.A&&t<=lo.F)return t-(lo.A-10);if(t>=lo.a&&t<=lo.f)return t-(lo.a-10)}function WO(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new a4({size:t.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let i=0;i<r;i++){const o=n==="right";s[o?i:r-i-1]=t[o?i:t.length-i-1]}return s}function R5(t,e={}){const{dir:n="left"}=e;let r=t,s=0;for(let i=0;i<r.length-1&&r[n==="left"?i:r.length-i-1].toString()==="0";i++)s++;return r=n==="left"?r.slice(s):r.slice(0,r.length-s),r}function U0(t,e){if(xs(t)>e)throw new f4({givenSize:xs(t),maxSize:e})}function HO(t,e){if(typeof e=="number"&&e>0&&e>xs(t)-1)throw new L5({offset:e,position:"start",size:xs(t)})}function VO(t,e,n){if(typeof e=="number"&&typeof n=="number"&&xs(t)!==n-e)throw new L5({offset:n,position:"end",size:xs(t)})}function P5(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new p4({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const KO="#__bigint";function k5(t,e,n){return JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString()+KO:s,n)}const GO=new TextDecoder,YO=new TextEncoder;function ZO(t){return t instanceof Uint8Array?t:typeof t=="string"?O5(t):JO(t)}function JO(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function O5(t,e={}){const{size:n}=e;let r=t;n&&(U0(t,n),r=xc(t,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,o=new Uint8Array(i);for(let a=0,c=0;a<i;a++){const u=JE(s.charCodeAt(c++)),l=JE(s.charCodeAt(c++));if(u===void 0||l===void 0)throw new _t(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);o[a]=u*16+l}return o}function XO(t,e={}){const{size:n}=e,r=YO.encode(t);return typeof n=="number"?(jh(r,n),QO(r,n)):r}function QO(t,e){return WO(t,{dir:"right",size:e})}function Ru(t){return t.length}function e4(t,e,n,r={}){const{strict:s}=r;return t.slice(e,n)}function t4(t,e={}){const{size:n}=e;typeof n<"u"&&jh(t,n);const r=_i(t,e);return D5(r,e)}function n4(t,e={}){const{size:n}=e;let r=t;if(typeof n<"u"&&(jh(r,n),r=B5(r)),r.length>1||r[0]>1)throw new i4(r);return!!r[0]}function ko(t,e={}){const{size:n}=e;typeof n<"u"&&jh(t,n);const r=_i(t,e);return U5(r,e)}function r4(t,e={}){const{size:n}=e;let r=t;return typeof n<"u"&&(jh(r,n),r=s4(r)),GO.decode(r)}function B5(t){return R5(t,{dir:"left"})}function s4(t){return R5(t,{dir:"right"})}class i4 extends _t{constructor(e){super(`Bytes value \`${e}\` is not a valid boolean.`,{metaMessages:["The bytes array must contain a single byte of either a `0` or `1` value."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesBooleanError"})}}let o4=class extends _t{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},a4=class extends _t{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const c4=new TextEncoder,u4=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function l4(t,e={}){const{strict:n=!1}=e;if(!t)throw new XE(t);if(typeof t!="string")throw new XE(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new QE(t);if(!t.startsWith("0x"))throw new QE(t)}function Ei(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function d4(t){return t instanceof Uint8Array?_i(t):Array.isArray(t)?_i(new Uint8Array(t)):t}function $5(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(U0(n,e.size),Sc(n,e.size)):n}function _i(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=u4[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(U0(r,e.size),xc(r,e.size)):r}function Lr(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const u=typeof t=="bigint"?"n":"";throw new M5({max:i?`${i}${u}`:void 0,min:`${o}${u}`,signed:n,size:r,value:`${t}${u}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Sc(c,r):c}function O1(t,e={}){return _i(c4.encode(t),e)}function Sc(t,e){return P5(t,{dir:"left",size:e})}function xc(t,e){return P5(t,{dir:"right",size:e})}function Gi(t,e,n,r={}){const{strict:s}=r;HO(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&VO(i,e,n),i}function xs(t){return Math.ceil((t.length-2)/2)}function D5(t,e={}){const{signed:n}=e;e.size&&U0(t,e.size);const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n)-1n,o=i>>1n;return r<=o?r:r-i-1n}function U5(t,e={}){const{signed:n,size:r}=e;return Number(!n&&!r?t:D5(t,e))}function h4(t,e={}){const{strict:n=!1}=e;try{return l4(t,{strict:n}),!0}catch{return!1}}class M5 extends _t{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class XE extends _t{constructor(e){super(`Value \`${typeof e=="object"?k5(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class QE extends _t{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}class f4 extends _t{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class L5 extends _t{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}class p4 extends _t{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}function g4(t){return{address:t.address,amount:Lr(t.amount),index:Lr(t.index),validatorIndex:Lr(t.validatorIndex)}}function F5(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:Lr(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:Lr(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:Lr(t.gasLimit)},...typeof t.number=="bigint"&&{number:Lr(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:Lr(t.prevRandao)},...typeof t.time=="bigint"&&{time:Lr(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(g4)}}}const Pp=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentBlockTimestamp",outputs:[{internalType:"uint256",name:"timestamp",type:"uint256"}],stateMutability:"view",type:"function"}],Aw=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],j5=[{inputs:[{name:"dns",type:"bytes"}],name:"DNSDecodingFailed",type:"error"},{inputs:[{name:"ens",type:"string"}],name:"DNSEncodingFailed",type:"error"},{inputs:[],name:"EmptyAddress",type:"error"},{inputs:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"HttpError",type:"error"},{inputs:[],name:"InvalidBatchGatewayResponse",type:"error"},{inputs:[{name:"errorData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{name:"name",type:"bytes"},{name:"resolver",type:"address"}],name:"ResolverNotContract",type:"error"},{inputs:[{name:"name",type:"bytes"}],name:"ResolverNotFound",type:"error"},{inputs:[{name:"primary",type:"string"},{name:"primaryAddress",type:"bytes"}],name:"ReverseAddressMismatch",type:"error"},{inputs:[{internalType:"bytes4",name:"selector",type:"bytes4"}],name:"UnsupportedResolverProfile",type:"error"}],q5=[...j5,{name:"resolveWithGateways",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],m4=[...j5,{name:"reverseWithGateways",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"uint256",name:"coinType"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolver"},{type:"address",name:"reverseResolver"}]}],e2=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],t2=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],z5=[{name:"isValidSignature",type:"function",stateMutability:"view",inputs:[{name:"hash",type:"bytes32"},{name:"signature",type:"bytes"}],outputs:[{name:"",type:"bytes4"}]}],n2=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],Sce=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],y4="0x82ad56cb",W5="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",w4="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",b4="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572",B1="0x608060405234801561001057600080fd5b506115b9806100206000396000f3fe6080604052600436106100f35760003560e01c80634d2301cc1161008a578063a8b0574e11610059578063a8b0574e14610325578063bce38bd714610350578063c3077fa914610380578063ee82ac5e146103b2576100f3565b80634d2301cc1461026257806372425d9d1461029f57806382ad56cb146102ca57806386d516e8146102fa576100f3565b80633408e470116100c65780633408e470146101af578063399542e9146101da5780633e64a6961461020c57806342cbb15c14610237576100f3565b80630f28c97d146100f8578063174dea7114610123578063252dba421461015357806327e86d6e14610184575b600080fd5b34801561010457600080fd5b5061010d6103ef565b60405161011a9190610c0a565b60405180910390f35b61013d60048036038101906101389190610c94565b6103f7565b60405161014a9190610e94565b60405180910390f35b61016d60048036038101906101689190610f0c565b610615565b60405161017b92919061101b565b60405180910390f35b34801561019057600080fd5b506101996107ab565b6040516101a69190611064565b60405180910390f35b3480156101bb57600080fd5b506101c46107b7565b6040516101d19190610c0a565b60405180910390f35b6101f460048036038101906101ef91906110ab565b6107bf565b6040516102039392919061110b565b60405180910390f35b34801561021857600080fd5b506102216107e1565b60405161022e9190610c0a565b60405180910390f35b34801561024357600080fd5b5061024c6107e9565b6040516102599190610c0a565b60405180910390f35b34801561026e57600080fd5b50610289600480360381019061028491906111a7565b6107f1565b6040516102969190610c0a565b60405180910390f35b3480156102ab57600080fd5b506102b4610812565b6040516102c19190610c0a565b60405180910390f35b6102e460048036038101906102df919061122a565b61081a565b6040516102f19190610e94565b60405180910390f35b34801561030657600080fd5b5061030f6109e4565b60405161031c9190610c0a565b60405180910390f35b34801561033157600080fd5b5061033a6109ec565b6040516103479190611286565b60405180910390f35b61036a600480360381019061036591906110ab565b6109f4565b6040516103779190610e94565b60405180910390f35b61039a60048036038101906103959190610f0c565b610ba6565b6040516103a99392919061110b565b60405180910390f35b3480156103be57600080fd5b506103d960048036038101906103d491906112cd565b610bca565b6040516103e69190611064565b60405180910390f35b600042905090565b60606000808484905090508067ffffffffffffffff81111561041c5761041b6112fa565b5b60405190808252806020026020018201604052801561045557816020015b610442610bd5565b81526020019060019003908161043a5790505b5092503660005b828110156105c957600085828151811061047957610478611329565b5b6020026020010151905087878381811061049657610495611329565b5b90506020028101906104a89190611367565b925060008360400135905080860195508360000160208101906104cb91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16818580606001906104f2919061138f565b604051610500929190611431565b60006040518083038185875af1925050503d806000811461053d576040519150601f19603f3d011682016040523d82523d6000602084013e610542565b606091505b5083600001846020018290528215151515815250505081516020850135176105bc577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260846000fd5b826001019250505061045c565b5082341461060c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610603906114a7565b60405180910390fd5b50505092915050565b6000606043915060008484905090508067ffffffffffffffff81111561063e5761063d6112fa565b5b60405190808252806020026020018201604052801561067157816020015b606081526020019060019003908161065c5790505b5091503660005b828110156107a157600087878381811061069557610694611329565b5b90506020028101906106a791906114c7565b92508260000160208101906106bc91906111a7565b73ffffffffffffffffffffffffffffffffffffffff168380602001906106e2919061138f565b6040516106f0929190611431565b6000604051808303816000865af19150503d806000811461072d576040519150601f19603f3d011682016040523d82523d6000602084013e610732565b606091505b5086848151811061074657610745611329565b5b60200260200101819052819250505080610795576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161078c9061153b565b60405180910390fd5b81600101915050610678565b5050509250929050565b60006001430340905090565b600046905090565b6000806060439250434091506107d68686866109f4565b905093509350939050565b600048905090565b600043905090565b60008173ffffffffffffffffffffffffffffffffffffffff16319050919050565b600044905090565b606060008383905090508067ffffffffffffffff81111561083e5761083d6112fa565b5b60405190808252806020026020018201604052801561087757816020015b610864610bd5565b81526020019060019003908161085c5790505b5091503660005b828110156109db57600084828151811061089b5761089a611329565b5b602002602001015190508686838181106108b8576108b7611329565b5b90506020028101906108ca919061155b565b92508260000160208101906108df91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060400190610905919061138f565b604051610913929190611431565b6000604051808303816000865af19150503d8060008114610950576040519150601f19603f3d011682016040523d82523d6000602084013e610955565b606091505b5082600001836020018290528215151515815250505080516020840135176109cf577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260646000fd5b8160010191505061087e565b50505092915050565b600045905090565b600041905090565b606060008383905090508067ffffffffffffffff811115610a1857610a176112fa565b5b604051908082528060200260200182016040528015610a5157816020015b610a3e610bd5565b815260200190600190039081610a365790505b5091503660005b82811015610b9c576000848281518110610a7557610a74611329565b5b60200260200101519050868683818110610a9257610a91611329565b5b9050602002810190610aa491906114c7565b9250826000016020810190610ab991906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060200190610adf919061138f565b604051610aed929190611431565b6000604051808303816000865af19150503d8060008114610b2a576040519150601f19603f3d011682016040523d82523d6000602084013e610b2f565b606091505b508260000183602001829052821515151581525050508715610b90578060000151610b8f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b869061153b565b60405180910390fd5b5b81600101915050610a58565b5050509392505050565b6000806060610bb7600186866107bf565b8093508194508295505050509250925092565b600081409050919050565b6040518060400160405280600015158152602001606081525090565b6000819050919050565b610c0481610bf1565b82525050565b6000602082019050610c1f6000830184610bfb565b92915050565b600080fd5b600080fd5b600080fd5b600080fd5b600080fd5b60008083601f840112610c5457610c53610c2f565b5b8235905067ffffffffffffffff811115610c7157610c70610c34565b5b602083019150836020820283011115610c8d57610c8c610c39565b5b9250929050565b60008060208385031215610cab57610caa610c25565b5b600083013567ffffffffffffffff811115610cc957610cc8610c2a565b5b610cd585828601610c3e565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b60008115159050919050565b610d2281610d0d565b82525050565b600081519050919050565b600082825260208201905092915050565b60005b83811015610d62578082015181840152602081019050610d47565b83811115610d71576000848401525b50505050565b6000601f19601f8301169050919050565b6000610d9382610d28565b610d9d8185610d33565b9350610dad818560208601610d44565b610db681610d77565b840191505092915050565b6000604083016000830151610dd96000860182610d19565b5060208301518482036020860152610df18282610d88565b9150508091505092915050565b6000610e0a8383610dc1565b905092915050565b6000602082019050919050565b6000610e2a82610ce1565b610e348185610cec565b935083602082028501610e4685610cfd565b8060005b85811015610e825784840389528151610e638582610dfe565b9450610e6e83610e12565b925060208a01995050600181019050610e4a565b50829750879550505050505092915050565b60006020820190508181036000830152610eae8184610e1f565b905092915050565b60008083601f840112610ecc57610ecb610c2f565b5b8235905067ffffffffffffffff811115610ee957610ee8610c34565b5b602083019150836020820283011115610f0557610f04610c39565b5b9250929050565b60008060208385031215610f2357610f22610c25565b5b600083013567ffffffffffffffff811115610f4157610f40610c2a565b5b610f4d85828601610eb6565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b6000610f918383610d88565b905092915050565b6000602082019050919050565b6000610fb182610f59565b610fbb8185610f64565b935083602082028501610fcd85610f75565b8060005b858110156110095784840389528151610fea8582610f85565b9450610ff583610f99565b925060208a01995050600181019050610fd1565b50829750879550505050505092915050565b60006040820190506110306000830185610bfb565b81810360208301526110428184610fa6565b90509392505050565b6000819050919050565b61105e8161104b565b82525050565b60006020820190506110796000830184611055565b92915050565b61108881610d0d565b811461109357600080fd5b50565b6000813590506110a58161107f565b92915050565b6000806000604084860312156110c4576110c3610c25565b5b60006110d286828701611096565b935050602084013567ffffffffffffffff8111156110f3576110f2610c2a565b5b6110ff86828701610eb6565b92509250509250925092565b60006060820190506111206000830186610bfb565b61112d6020830185611055565b818103604083015261113f8184610e1f565b9050949350505050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061117482611149565b9050919050565b61118481611169565b811461118f57600080fd5b50565b6000813590506111a18161117b565b92915050565b6000602082840312156111bd576111bc610c25565b5b60006111cb84828501611192565b91505092915050565b60008083601f8401126111ea576111e9610c2f565b5b8235905067ffffffffffffffff81111561120757611206610c34565b5b60208301915083602082028301111561122357611222610c39565b5b9250929050565b6000806020838503121561124157611240610c25565b5b600083013567ffffffffffffffff81111561125f5761125e610c2a565b5b61126b858286016111d4565b92509250509250929050565b61128081611169565b82525050565b600060208201905061129b6000830184611277565b92915050565b6112aa81610bf1565b81146112b557600080fd5b50565b6000813590506112c7816112a1565b92915050565b6000602082840312156112e3576112e2610c25565b5b60006112f1848285016112b8565b91505092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600080fd5b600080fd5b600080fd5b60008235600160800383360303811261138357611382611358565b5b80830191505092915050565b600080833560016020038436030381126113ac576113ab611358565b5b80840192508235915067ffffffffffffffff8211156113ce576113cd61135d565b5b6020830192506001820236038313156113ea576113e9611362565b5b509250929050565b600081905092915050565b82818337600083830152505050565b600061141883856113f2565b93506114258385846113fd565b82840190509392505050565b600061143e82848661140c565b91508190509392505050565b600082825260208201905092915050565b7f4d756c746963616c6c333a2076616c7565206d69736d61746368000000000000600082015250565b6000611491601a8361144a565b915061149c8261145b565b602082019050919050565b600060208201905081810360008301526114c081611484565b9050919050565b6000823560016040038336030381126114e3576114e2611358565b5b80830191505092915050565b7f4d756c746963616c6c333a2063616c6c206661696c6564000000000000000000600082015250565b600061152560178361144a565b9150611530826114ef565b602082019050919050565b6000602082019050818103600083015261155481611518565b9050919050565b60008235600160600383360303811261157757611576611358565b5b8083019150509291505056fea264697066735822122020c1bc9aacf8e4a6507193432a895a8e77094f45a1395583f07b24e860ef06cd64736f6c634300080c0033";class Iw extends fe{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class v4 extends fe{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id} – ${e.name}`],name:"ChainMismatchError"})}}class E4 extends fe{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class H5 extends fe{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}const am="/docs/contract/encodeDeployData";function $1(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new gP({docsPath:am});if(!("inputs"in s))throw new CE({docsPath:am});if(!s.inputs||s.inputs.length===0)throw new CE({docsPath:am});const i=Go(s.inputs,n);return Ko([r,i])}function wl({blockNumber:t,chain:e,contract:n}){const r=e?.contracts?.[n];if(!r)throw new Iw({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new Iw({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}function V5(t,{docsPath:e,...n}){const r=(()=>{const s=R0(t,n);return s instanceof Uh?t:s})();return new c5(r,{docsPath:e,...n})}function D1(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const cm=new Map;function K5({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const l=c();o();const d=l.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<l.length;f++){const{resolve:y}=l[f];y?.([h[f],h])}}).catch(h=>{for(let f=0;f<l.length;f++){const{reject:y}=l[f];y?.(h)}})},o=()=>cm.delete(e),a=()=>c().map(({args:l})=>l),c=()=>cm.get(e)||[],u=l=>cm.set(e,[...c(),l]);return{flush:o,async schedule(l){const{promise:d,resolve:h,reject:f}=D1();return n?.([...a(),l])&&i(),c().length>0?(u({args:l,resolve:h,reject:f}),d):(u({args:l,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function bl(t,e){const{account:n=t.account,authorizationList:r,batch:s=!!t.batch?.multicall,blockNumber:i,blockTag:o=t.experimental_blockTag??"latest",accessList:a,blobs:c,blockOverrides:u,code:l,data:d,factory:h,factoryData:f,gas:y,gasPrice:m,maxFeePerBlobGas:v,maxFeePerGas:T,maxPriorityFeePerGas:O,nonce:A,to:M,value:P,stateOverride:I,...F}=e,W=n?yr(n):void 0;if(l&&(h||f))throw new fe("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(l&&M)throw new fe("Cannot provide both `code` & `to` as parameters.");const D=l&&d,k=h&&f&&M&&d,B=D||k,N=D?G5({code:l,data:d}):k?A4({data:d,factory:h,factoryData:f,to:M}):d;try{ml(e);const p=(typeof i=="bigint"?je(i):void 0)||o,g=u?F5(u):void 0,w=v1(I),_=t.chain?.formatters?.transactionRequest?.format,L=(_||Mh)({...P0(F,{format:_}),from:W?.address,accessList:a,authorizationList:r,blobs:c,data:N,gas:y,gasPrice:m,maxFeePerBlobGas:v,maxFeePerGas:T,maxPriorityFeePerGas:O,nonce:A,to:B?void 0:M,value:P});if(s&&_4({request:L})&&!w&&!g)try{return await C4(t,{...L,blockNumber:i,blockTag:o})}catch(b){if(!(b instanceof H5)&&!(b instanceof Iw))throw b}const z=(()=>{const b=[L,p];return w&&g?[...b,w,g]:w?[...b,w]:g?[...b,{},g]:b})(),q=await t.request({method:"eth_call",params:z});return q==="0x"?{data:void 0}:{data:q}}catch(R){const p=I4(R),{offchainLookup:g,offchainLookupSignature:w}=await Or(async()=>{const{offchainLookup:_,offchainLookupSignature:C}=await Promise.resolve().then(()=>TB);return{offchainLookup:_,offchainLookupSignature:C}},void 0);if(t.ccipRead!==!1&&p?.slice(0,10)===w&&M)return{data:await g(t,{data:p,to:M})};throw B&&p?.slice(0,10)==="0x101bb98d"?new Jk({factory:h}):V5(R,{...e,account:W,chain:t.chain})}}function _4({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(y4)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function C4(t,e){const{batchSize:n=1024,deployless:r=!1,wait:s=0}=typeof t.batch?.multicall=="object"?t.batch.multicall:{},{blockNumber:i,blockTag:o=t.experimental_blockTag??"latest",data:a,to:c}=e,u=(()=>{if(r)return null;if(e.multicallAddress)return e.multicallAddress;if(t.chain)return wl({blockNumber:i,chain:t.chain,contract:"multicall3"});throw new H5})(),d=(typeof i=="bigint"?je(i):void 0)||o,{schedule:h}=K5({id:`${t.uid}.${d}`,wait:s,shouldSplitBatch(m){return m.reduce((T,{data:O})=>T+(O.length-2),0)>n*2},fn:async m=>{const v=m.map(A=>({allowFailure:!0,callData:A.data,target:A.to})),T=Js({abi:Pp,args:[v],functionName:"aggregate3"}),O=await t.request({method:"eth_call",params:[{...u===null?{data:G5({code:B1,data:T})}:{to:u,data:T}},d]});return jc({abi:Pp,args:[v],functionName:"aggregate3",data:O||"0x"})}}),[{returnData:f,success:y}]=await h({data:a,to:c});if(!y)throw new N0({data:f});return f==="0x"?{data:void 0}:{data:f}}function G5(t){const{code:e,data:n}=t;return $1({abi:SS(["constructor(bytes, bytes)"]),bytecode:W5,args:[e,n]})}function A4(t){const{data:e,factory:n,factoryData:r,to:s}=t;return $1({abi:SS(["constructor(address, bytes, address, bytes)"]),bytecode:w4,args:[s,e,n,r]})}function I4(t){if(!(t instanceof fe))return;const e=t.walk();return typeof e?.data=="object"?e.data?.data:e.data}async function Ks(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=Js({abi:n,args:s,functionName:i});try{const{data:c}=await He(t,bl,"call")({...o,data:a,to:r});return jc({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw Ic(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function S4(t,e){const{abi:n,address:r,args:s,dataSuffix:i,functionName:o,...a}=e,c=a.account?yr(a.account):t.account,u=Js({abi:n,args:s,functionName:o});try{const{data:l}=await He(t,bl,"call")({batch:!1,data:`${u}${i?i.replace("0x",""):""}`,to:r,...a,account:c}),d=jc({abi:n,args:s,functionName:o,data:l||"0x"}),h=n.filter(f=>"name"in f&&f.name===e.functionName);return{result:d,request:{abi:h,address:r,args:s,dataSuffix:i,functionName:o,...a,account:c}}}catch(l){throw Ic(l,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:o,sender:c?.address})}}const um=new Map,r2=new Map;let x4=0;function Lo(t,e,n){const r=++x4,s=()=>um.get(t)||[],i=()=>{const l=s();um.set(t,l.filter(d=>d.id!==r))},o=()=>{const l=s();if(!l.some(h=>h.id===r))return;const d=r2.get(t);if(l.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}i()},a=s();if(um.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const l in e)c[l]=(...d)=>{const h=s();if(h.length!==0)for(const f of h)f.fns[l]?.(...d)};const u=n(c);return typeof u=="function"&&r2.set(t,u),o}async function kp(t){return new Promise(e=>setTimeout(e,t))}function vl(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await n?.(a)??r;await kp(c);const u=async()=>{s&&(await t({unpoll:i}),await kp(r),u())};u()})(),i}const T4=new Map,N4=new Map;function R4(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,T4),r=e(t,N4);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function P4(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=R4(e),s=r.response.get();if(s&&n>0&&Date.now()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const k4=t=>`blockNumber.${t}`;async function qh(t,{cacheTime:e=t.cacheTime}={}){const n=await P4(()=>t.request({method:"eth_blockNumber"}),{cacheKey:k4(t.uid),cacheTime:e});return BigInt(n)}async function M0(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>Mo(i));return!("abi"in e)||!e.abi?s:T1({abi:e.abi,logs:s,strict:n})}async function L0(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function O4(t,e){const{abi:n,address:r,args:s,batch:i=!0,eventName:o,fromBlock:a,onError:c,onLogs:u,poll:l,pollingInterval:d=t.pollingInterval,strict:h}=e;return(typeof l<"u"?l:typeof a=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")))?(()=>{const v=h??!1,T=Un(["watchContractEvent",r,s,i,t.uid,o,d,v,a]);return Lo(T,{onLogs:u,onError:c},O=>{let A;a!==void 0&&(A=a-1n);let M,P=!1;const I=vl(async()=>{if(!P){try{M=await He(t,t5,"createContractEventFilter")({abi:n,address:r,args:s,eventName:o,strict:v,fromBlock:a})}catch{}P=!0;return}try{let F;if(M)F=await He(t,M0,"getFilterChanges")({filter:M});else{const W=await He(t,qh,"getBlockNumber")({});A&&A<W?F=await He(t,A5,"getContractEvents")({abi:n,address:r,args:s,eventName:o,fromBlock:A+1n,toBlock:W,strict:v}):F=[],A=W}if(F.length===0)return;if(i)O.onLogs(F);else for(const W of F)O.onLogs([W])}catch(F){M&&F instanceof Ac&&(P=!1),O.onError?.(F)}},{emitOnBegin:!0,interval:d});return async()=>{M&&await He(t,L0,"uninstallFilter")({filter:M}),I()}})})():(()=>{const v=h??!1,T=Un(["watchContractEvent",r,s,i,t.uid,o,d,v]);let O=!0,A=()=>O=!1;return Lo(T,{onLogs:u,onError:c},M=>((async()=>{try{const P=(()=>{if(t.transport.type==="fallback"){const W=t.transport.transports.find(D=>D.config.type==="webSocket"||D.config.type==="ipc");return W?W.value:t.transport}return t.transport})(),I=o?Oh({abi:n,eventName:o,args:s}):[],{unsubscribe:F}=await P.subscribe({params:["logs",{address:r,topics:I}],onData(W){if(!O)return;const D=W.result;try{const{eventName:k,args:B}=x1({abi:n,data:D.data,topics:D.topics,strict:h}),N=Mo(D,{args:B,eventName:k});M.onLogs([N])}catch(k){let B,N;if(k instanceof Pd||k instanceof C0){if(h)return;B=k.abiItem.name,N=k.abiItem.inputs?.some(p=>!("name"in p&&p.name))}const R=Mo(D,{args:N?[]:{},eventName:B});M.onLogs([R])}},onError(W){M.onError?.(W)}});A=F,O||A()}catch(P){c?.(P)}})(),()=>A()))})()}class F0 extends fe{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class lm extends fe{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function B4({chain:t,currentChainId:e}){if(!t)throw new E4;if(e!==t.id)throw new v4({chain:t,currentChainId:e})}function $4(t,{docsPath:e,...n}){const r=(()=>{const s=R0(t,n);return s instanceof Uh?t:s})();return new Kk(r,{docsPath:e,...n})}async function Y5(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const dm=new Ph(128);async function Z5(t,e){const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:u,maxFeePerBlobGas:l,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,type:y,value:m,...v}=e;if(typeof n>"u")throw new F0({docsPath:"/docs/actions/wallet/sendTransaction"});const T=n?yr(n):null;try{ml(e);const O=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await b1({authorization:i[0]}).catch(()=>{throw new fe("`to` is required. Could not infer from `authorizationList`.")})})();if(T?.type==="json-rpc"||T===null){let A;r!==null&&(A=await He(t,k0,"getChainId")({}),B4({currentChainId:A,chain:r}));const M=t.chain?.formatters?.transactionRequest?.format,I=(M||Mh)({...P0(v,{format:M}),accessList:s,authorizationList:i,blobs:o,chainId:A,data:a,from:T?.address,gas:c,gasPrice:u,maxFeePerBlobGas:l,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,to:O,type:y,value:m}),F=dm.get(t.uid),W=F?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:W,params:[I]},{retryCount:0})}catch(D){if(F===!1)throw D;const k=D;if(k.name==="InvalidInputRpcError"||k.name==="InvalidParamsRpcError"||k.name==="MethodNotFoundRpcError"||k.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[I]},{retryCount:0}).then(B=>(dm.set(t.uid,!0),B)).catch(B=>{const N=B;throw N.name==="MethodNotFoundRpcError"||N.name==="MethodNotSupportedRpcError"?(dm.set(t.uid,!1),k):N});throw k}}if(T?.type==="local"){const A=await He(t,O0,"prepareTransactionRequest")({account:T,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:u,maxFeePerBlobGas:l,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,nonceManager:T.nonceManager,parameters:[...C5,"sidecars"],type:y,value:m,...v,to:O}),M=r?.serializers?.transaction,P=await T.signTransaction(A,{serializer:M});return await He(t,Y5,"sendRawTransaction")({serializedTransaction:P})}throw T?.type==="smart"?new lm({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new lm({docsPath:"/docs/actions/wallet/sendTransaction",type:T?.type})}catch(O){throw O instanceof lm?O:$4(O,{...e,account:T,chain:e.chain||void 0})}}async function D4(t,e){const{abi:n,account:r=t.account,address:s,args:i,dataSuffix:o,functionName:a,...c}=e;if(typeof r>"u")throw new F0({docsPath:"/docs/contract/writeContract"});const u=r?yr(r):null,l=Js({abi:n,args:i,functionName:a});try{return await He(t,Z5,"sendTransaction")({data:`${l}${o?o.replace("0x",""):""}`,to:s,account:u,...c})}catch(d){throw Ic(d,{abi:n,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:u?.address})}}class U4 extends fe{constructor(e){super(`Call bundle failed with status: ${e.statusCode}`,{name:"BundleFailedError"}),Object.defineProperty(this,"result",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.result=e}}function Xd(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:u})=>{const l=typeof e=="function"?e({count:a,error:u}):e;l&&await kp(l),o({count:a+1})};try{const u=await t();s(u)}catch(u){if(a<n&&await r({count:a,error:u}))return c({error:u});i(u)}};o()})}const J5={"0x0":"reverted","0x1":"success"};function M4(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>Mo(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?wi(t.transactionIndex):null,status:t.status?J5[t.status]:null,type:t.type?h5[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}const L4="0x5792579257925792579257925792579257925792579257925792579257925792",F4=je(0,{size:32});async function j4(t,e){async function n(l){if(l.endsWith(L4.slice(2))){const h=Ki(cw(l,-64,-32)),f=cw(l,0,-64).slice(2).match(/.{1,64}/g),y=await Promise.all(f.map(v=>F4.slice(2)!==v?t.request({method:"eth_getTransactionReceipt",params:[`0x${v}`]},{dedupe:!0}):void 0)),m=y.some(v=>v===null)?100:y.every(v=>v?.status==="0x1")?200:y.every(v=>v?.status==="0x0")?500:600;return{atomic:!1,chainId:wi(h),receipts:y.filter(Boolean),status:m,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[l]})}const{atomic:r=!1,chainId:s,receipts:i,version:o="2.0.0",...a}=await n(e.id),[c,u]=(()=>{const l=a.status;return l>=100&&l<200?["pending",l]:l>=200&&l<300?["success",l]:l>=300&&l<700?["failure",l]:l==="CONFIRMED"?["success",200]:l==="PENDING"?["pending",100]:[void 0,l]})();return{...a,atomic:r,chainId:s?wi(s):void 0,receipts:i?.map(l=>({...l,blockNumber:Hs(l.blockNumber),gasUsed:Hs(l.gasUsed),status:J5[l.status]}))??[],statusCode:u,status:c,version:o}}async function xce(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:s=({statusCode:m})=>m===200||m>=300,retryCount:i=4,retryDelay:o=({count:m})=>~~(1<<m)*200,timeout:a=6e4,throwOnFailure:c=!1}=e,u=Un(["waitForCallsStatus",t.uid,n]),{promise:l,resolve:d,reject:h}=D1();let f;const y=Lo(u,{resolve:d,reject:h},m=>{const v=vl(async()=>{const T=O=>{clearTimeout(f),v(),O(),y()};try{const O=await Xd(async()=>{const A=await He(t,j4,"getCallsStatus")({id:n});if(c&&A.status==="failure")throw new U4(A);return A},{retryCount:i,delay:o});if(!s(O))return;T(()=>m.resolve(O))}catch(O){T(()=>m.reject(O))}},{interval:r,emitOnBegin:!0});return v});return f=a?setTimeout(()=>{y(),clearTimeout(f),h(new q4({id:n}))},a):void 0,await l}class q4 extends fe{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}const Sw=256;let mf=Sw,yf;function X5(t=11){if(!yf||mf+t>Sw*2){yf="",mf=0;for(let e=0;e<Sw;e++)yf+=(256+Math.random()*256|0).toString(16).substring(1)}return yf.substring(mf,mf+++t)}function U1(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=t.experimental_blockTag??(typeof n?.experimental_preconfirmationTime=="number"?"pending":void 0),c=n?.blockTime??12e3,u=Math.min(Math.max(Math.floor(c/2),500),4e3),l=t.pollingInterval??u,d=t.cacheTime??l,h=t.account?yr(t.account):void 0,{config:f,request:y,value:m}=t.transport({chain:n,pollingInterval:l}),v={...f,...m},T={account:h,batch:e,cacheTime:d,ccipRead:r,chain:n,key:s,name:i,pollingInterval:l,request:y,transport:v,type:o,uid:X5(),...a?{experimental_blockTag:a}:{}};function O(A){return M=>{const P=M(A);for(const F in T)delete P[F];const I={...A,...P};return Object.assign(I,{extend:O(I)})}}return Object.assign(T,{extend:O(T)})}function M1(t){if(!(t instanceof fe))return!1;const e=t.walk(n=>n instanceof dw);return e instanceof dw?e.data?.errorName==="HttpError"||e.data?.errorName==="ResolverError"||e.data?.errorName==="ResolverNotContract"||e.data?.errorName==="ResolverNotFound"||e.data?.errorName==="ReverseAddressMismatch"||e.data?.errorName==="UnsupportedResolverProfile":!1}function z4(t){const{abi:e,data:n}=t,r=el(n,0,4),s=e.find(i=>i.type==="function"&&r===kh(mi(i)));if(!s)throw new vP(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?Bh(s.inputs,el(n,4)):void 0}}const hm="/docs/contract/encodeErrorResult";function s2(t){const{abi:e,errorName:n,args:r}=t;let s=e[0];if(n){const c=Fc({abi:e,args:r,name:n});if(!c)throw new AE(n,{docsPath:hm});s=c}if(s.type!=="error")throw new AE(void 0,{docsPath:hm});const i=mi(s),o=kh(i);let a="0x";if(r&&r.length>0){if(!s.inputs)throw new wP(s.name,{docsPath:hm});a=Go(s.inputs,r)}return Ko([o,a])}const fm="/docs/contract/encodeFunctionResult";function W4(t){const{abi:e,functionName:n,result:r}=t;let s=e[0];if(n){const o=Fc({abi:e,name:n});if(!o)throw new Ju(n,{docsPath:fm});s=o}if(s.type!=="function")throw new Ju(void 0,{docsPath:fm});if(!s.outputs)throw new OS(s.name,{docsPath:fm});const i=(()=>{if(s.outputs.length===0)return[];if(s.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new $S(r)})();return Go(s.outputs,i)}const zh="x-batch-gateway:true";async function Q5(t){const{data:e,ccipRequest:n}=t,{args:[r]}=z4({abi:Aw,data:e}),s=[],i=[];return await Promise.all(r.map(async(o,a)=>{try{i[a]=o.urls.includes(zh)?await Q5({data:o.data,ccipRequest:n}):await n(o),s[a]=!1}catch(c){s[a]=!0,i[a]=H4(c)}})),W4({abi:Aw,functionName:"query",result:[s,i]})}function H4(t){return t.name==="HttpRequestError"&&t.status?s2({abi:Aw,errorName:"HttpError",args:[t.status,t.shortMessage]}):s2({abi:[n5],errorName:"Error",args:["shortMessage"in t?t.shortMessage:t.message]})}function e6(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return yi(e)?e:null}function xw(t){let e=new Uint8Array(32).fill(0);if(!t)return Hn(e);const n=t.split(".");for(let r=n.length-1;r>=0;r-=1){const s=e6(n[r]),i=s?pl(s):pr(fc(n[r]),"bytes");e=pr(vi([e,i]),"bytes")}return Hn(e)}function V4(t){return`[${t.slice(2)}]`}function K4(t){const e=new Uint8Array(32).fill(0);return t?e6(t)||pr(fc(t)):Hn(e)}function L1(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(fc(e).byteLength+2);let r=0;const s=e.split(".");for(let i=0;i<s.length;i++){let o=fc(s[i]);o.byteLength>255&&(o=fc(V4(K4(s[i])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}async function G4(t,e){const{blockNumber:n,blockTag:r,coinType:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,u=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return wl({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),l=c?.ensTlds;if(l&&!l.some(h=>i.endsWith(h)))return null;const d=s!=null?[xw(i),BigInt(s)]:[xw(i)];try{const h=Js({abi:t2,functionName:"addr",args:d}),f={address:u,abi:q5,functionName:"resolveWithGateways",args:[bi(L1(i)),h,o??[zh]],blockNumber:n,blockTag:r},m=await He(t,Ks,"readContract")(f);if(m[0]==="0x")return null;const v=jc({abi:t2,args:d,functionName:"addr",data:m[0]});return v==="0x"||Ki(v)==="0x00"?null:v}catch(h){if(a)throw h;if(M1(h))return null;throw h}}class Y4 extends fe{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class Bl extends fe{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class F1 extends fe{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class Z4 extends fe{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const J4=/(?<protocol>https?:\/\/[^/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,X4=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,Q4=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,eB=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function tB(t){try{const e=await fetch(t,{method:"HEAD"});return e.status===200?e.headers.get("content-type")?.startsWith("image/"):!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!Object.hasOwn(globalThis,"Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=t})}}function i2(t,e){return t?t.endsWith("/")?t.slice(0,-1):t:e}function t6({uri:t,gatewayUrls:e}){const n=Q4.test(t);if(n)return{uri:t,isOnChain:!0,isEncoded:n};const r=i2(e?.ipfs,"https://ipfs.io"),s=i2(e?.arweave,"https://arweave.net"),i=t.match(J4),{protocol:o,subpath:a,target:c,subtarget:u=""}=i?.groups||{},l=o==="ipns:/"||a==="ipns/",d=o==="ipfs:/"||a==="ipfs/"||X4.test(t);if(t.startsWith("http")&&!l&&!d){let f=t;return e?.arweave&&(f=t.replace(/https:\/\/arweave.net/g,e?.arweave)),{uri:f,isOnChain:!1,isEncoded:!1}}if((l||d)&&c)return{uri:`${r}/${l?"ipns":"ipfs"}/${c}${u}`,isOnChain:!1,isEncoded:!1};if(o==="ar:/"&&c)return{uri:`${s}/${c}${u||""}`,isOnChain:!1,isEncoded:!1};let h=t.replace(eB,"");if(h.startsWith("<svg")&&(h=`data:image/svg+xml;base64,${btoa(h)}`),h.startsWith("data:")||h.startsWith("{"))return{uri:h,isOnChain:!0,isEncoded:!1};throw new F1({uri:t})}function n6(t){if(typeof t!="object"||!("image"in t)&&!("image_url"in t)&&!("image_data"in t))throw new Y4({data:t});return t.image||t.image_url||t.image_data}async function nB({gatewayUrls:t,uri:e}){try{const n=await fetch(e).then(s=>s.json());return await j1({gatewayUrls:t,uri:n6(n)})}catch{throw new F1({uri:e})}}async function j1({gatewayUrls:t,uri:e}){const{uri:n,isOnChain:r}=t6({uri:e,gatewayUrls:t});if(r||await tB(n))return n;throw new F1({uri:e})}function rB(t){let e=t;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=e.split("/"),[i,o]=n.split(":"),[a,c]=r.split(":");if(!i||i.toLowerCase()!=="eip155")throw new Bl({reason:"Only EIP-155 supported"});if(!o)throw new Bl({reason:"Chain ID not found"});if(!c)throw new Bl({reason:"Contract address not found"});if(!s)throw new Bl({reason:"Token ID not found"});if(!a)throw new Bl({reason:"ERC namespace not found"});return{chainID:Number.parseInt(o,10),namespace:a.toLowerCase(),contractAddress:c,tokenID:s}}async function sB(t,{nft:e}){if(e.namespace==="erc721")return Ks(t,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return Ks(t,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new Z4({namespace:e.namespace})}async function iB(t,{gatewayUrls:e,record:n}){return/eip155:/i.test(n)?oB(t,{gatewayUrls:e,record:n}):j1({uri:n,gatewayUrls:e})}async function oB(t,{gatewayUrls:e,record:n}){const r=rB(n),s=await sB(t,{nft:r}),{uri:i,isOnChain:o,isEncoded:a}=t6({uri:s,gatewayUrls:e});if(o&&(i.includes("data:application/json;base64,")||i.startsWith("{"))){const u=a?atob(i.replace("data:application/json;base64,","")):i,l=JSON.parse(u);return j1({uri:n6(l),gatewayUrls:e})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),nB({gatewayUrls:e,uri:i.replace(/(?:0x)?{id}/,c)})}async function r6(t,e){const{blockNumber:n,blockTag:r,key:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,u=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return wl({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),l=c?.ensTlds;if(l&&!l.some(d=>i.endsWith(d)))return null;try{const d={address:u,abi:q5,args:[bi(L1(i)),Js({abi:e2,functionName:"text",args:[xw(i),s]}),o??[zh]],functionName:"resolveWithGateways",blockNumber:n,blockTag:r},f=await He(t,Ks,"readContract")(d);if(f[0]==="0x")return null;const y=jc({abi:e2,functionName:"text",data:f[0]});return y===""?null:y}catch(d){if(a)throw d;if(M1(d))return null;throw d}}async function aB(t,{blockNumber:e,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:i,strict:o,universalResolverAddress:a}){const c=await He(t,r6,"getEnsText")({blockNumber:e,blockTag:n,key:"avatar",name:s,universalResolverAddress:a,gatewayUrls:i,strict:o});if(!c)return null;try{return await iB(t,{record:c,gatewayUrls:r})}catch{return null}}async function cB(t,e){const{address:n,blockNumber:r,blockTag:s,coinType:i=60n,gatewayUrls:o,strict:a}=e,{chain:c}=t,u=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return wl({blockNumber:r,chain:c,contract:"ensUniversalResolver"})})();try{const l={address:u,abi:m4,args:[n,i,o??[zh]],functionName:"reverseWithGateways",blockNumber:r,blockTag:s},d=He(t,Ks,"readContract"),[h]=await d(l);return h||null}catch(l){if(a)throw l;if(M1(l))return null;throw l}}async function uB(t,e){const{blockNumber:n,blockTag:r,name:s}=e,{chain:i}=t,o=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!i)throw new Error("client chain not configured. universalResolverAddress is required.");return wl({blockNumber:n,chain:i,contract:"ensUniversalResolver"})})(),a=i?.ensTlds;if(a&&!a.some(u=>s.endsWith(u)))throw new Error(`${s} is not a valid ENS TLD (${a?.join(", ")}) for chain "${i.name}" (id: ${i.id}).`);const[c]=await He(t,Ks,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"},{type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[bi(L1(s))],blockNumber:n,blockTag:r});return c}async function s6(t,e){const{account:n=t.account,blockNumber:r,blockTag:s="latest",blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:l,maxPriorityFeePerGas:d,to:h,value:f,...y}=e,m=n?yr(n):void 0;try{ml(e);const T=(typeof r=="bigint"?je(r):void 0)||s,O=t.chain?.formatters?.transactionRequest?.format,M=(O||Mh)({...P0(y,{format:O}),from:m?.address,blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:l,maxPriorityFeePerGas:d,to:h,value:f}),P=await t.request({method:"eth_createAccessList",params:[M,T]});return{accessList:P.accessList,gasUsed:BigInt(P.gasUsed)}}catch(v){throw V5(v,{...e,account:m,chain:t.chain})}}async function lB(t){const e=T0(t,{method:"eth_newBlockFilter"}),n=await t.request({method:"eth_newBlockFilter"});return{id:n,request:e(n),type:"block"}}async function i6(t,{address:e,args:n,event:r,events:s,fromBlock:i,strict:o,toBlock:a}={}){const c=s??(r?[r]:void 0),u=T0(t,{method:"eth_newFilter"});let l=[];c&&(l=[c.flatMap(f=>Oh({abi:[f],eventName:f.name,args:n}))],r&&(l=l[0]));const d=await t.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof i=="bigint"?je(i):i,toBlock:typeof a=="bigint"?je(a):a,...l.length?{topics:l}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:i,id:d,request:u(d),strict:!!o,toBlock:a,type:"event"}}async function o6(t){const e=T0(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}async function dB(t){const e=await t.request({method:"eth_blobBaseFee"});return BigInt(e)}async function hB(t,{blockHash:e,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?je(n):void 0;let i;return e?i=await t.request({method:"eth_getBlockTransactionCountByHash",params:[e]},{dedupe:!0}):i=await t.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),wi(i)}async function Tw(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?je(n):void 0,i=await t.request({method:"eth_getCode",params:[e,s||r]},{dedupe:!!s});if(i!=="0x")return i}class fB extends fe{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function pB(t,e){const{address:n,factory:r,factoryData:s}=e;try{const[i,o,a,c,u,l,d]=await He(t,Ks,"readContract")({abi:gB,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:o,version:a,chainId:Number(c),verifyingContract:u,salt:l},extensions:d,fields:i}}catch(i){const o=i;throw o.name==="ContractFunctionExecutionError"&&o.cause.name==="ContractFunctionZeroDataError"?new fB({address:n}):o}}const gB=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function mB(t){return{baseFeePerGas:t.baseFeePerGas.map(e=>BigInt(e)),gasUsedRatio:t.gasUsedRatio,oldestBlock:BigInt(t.oldestBlock),reward:t.reward?.map(e=>e.map(n=>BigInt(n)))}}async function yB(t,{blockCount:e,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const i=typeof n=="bigint"?je(n):void 0,o=await t.request({method:"eth_feeHistory",params:[je(e),i||r,s]},{dedupe:!!i});return mB(o)}async function wB(t,{filter:e}){const n=e.strict??!1,s=(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(i=>Mo(i));return e.abi?T1({abi:e.abi,logs:s,strict:n}):s}function Tce(t,e){if(t.length!==e.length)throw new RS({expectedLength:t.length,givenLength:e.length});const n=[];for(let r=0;r<t.length;r++){const s=t[r],i=e[r];n.push(a6(s,i))}return Ko(n)}function a6(t,e,n=!1){if(t==="address"){const o=e;if(!Ss(o))throw new Uo({address:o});return Ro(o.toLowerCase(),{size:n?32:null})}if(t==="string")return _c(e);if(t==="bytes")return e;if(t==="bool")return Ro(o1(e),{size:n?32:1});const r=t.match(l1);if(r){const[o,a,c="256"]=r,u=Number.parseInt(c,10)/8;return je(e,{size:n?32:u,signed:a==="int"})}const s=t.match(QS);if(s){const[o,a]=s;if(Number.parseInt(a,10)!==(e.length-2)/2)throw new BS({expectedSize:Number.parseInt(a,10),givenSize:(e.length-2)/2});return Ro(e,{dir:"right",size:n?32:null})}const i=t.match(gk);if(i&&Array.isArray(e)){const[o,a]=i,c=[];for(let u=0;u<e.length;u++)c.push(a6(a,e[u],!0));return c.length===0?"0x":Ko(c)}throw new IP(t)}async function bB({address:t,authorization:e,signature:n}){return yl(To(t),await b1({authorization:e,signature:n}))}const wf=new Ph(8192);function vB(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(wf.get(n))return wf.get(n);const r=t().finally(()=>wf.delete(n));return wf.set(n,r),r}function EB(t,e={}){return async(n,r={})=>{const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:u}=n;if(i?.exclude?.includes(u))throw new tc(new Error("method not supported"),{method:u});if(i?.include&&!i.include.includes(u))throw new tc(new Error("method not supported"),{method:u});const l=s?_c(`${c}.${Un(n)}`):void 0;return vB(()=>Xd(async()=>{try{return await t(n)}catch(d){const h=d;switch(h.code){case Od.code:throw new Od(h);case Bd.code:throw new Bd(h);case $d.code:throw new $d(h,{method:n.method});case Dd.code:throw new Dd(h);case Cc.code:throw new Cc(h);case Ac.code:throw new Ac(h);case Ud.code:throw new Ud(h);case xa.code:throw new xa(h);case tl.code:throw new tl(h);case tc.code:throw new tc(h,{method:n.method});case nl.code:throw new nl(h);case Md.code:throw new Md(h);case zn.code:throw new zn(h);case Ld.code:throw new Ld(h);case Fd.code:throw new Fd(h);case jd.code:throw new jd(h);case qd.code:throw new qd(h);case Ji.code:throw new Ji(h);case zd.code:throw new zd(h);case Wd.code:throw new Wd(h);case Hd.code:throw new Hd(h);case Vd.code:throw new Vd(h);case Kd.code:throw new Kd(h);case Gd.code:throw new Gd(h);case Yd.code:throw new Yd(h);case 5e3:throw new zn(h);default:throw d instanceof fe?d:new Qk(h)}}},{delay:({count:d,error:h})=>{if(h&&h instanceof gc){const f=h?.headers?.get("Retry-After");if(f?.match(/\d/))return Number.parseInt(f,10)*1e3}return~~(1<<d)*o},retryCount:a,shouldRetry:({error:d})=>_B(d)}),{enabled:s,id:l})}}function _B(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===nl.code||t.code===Cc.code:t instanceof gc&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}class CB extends fe{constructor({callbackSelector:e,cause:n,data:r,extraData:s,sender:i,urls:o}){super(n.shortMessage||"An error occurred while fetching for an offchain result.",{cause:n,metaMessages:[...n.metaMessages||[],n.metaMessages?.length?"":[],"Offchain Gateway Call:",o&&["  Gateway URL(s):",...o.map(a=>`    ${Dh(a)}`)],`  Sender: ${i}`,`  Data: ${r}`,`  Callback selector: ${e}`,`  Extra data: ${s}`].flat(),name:"OffchainLookupError"})}}class AB extends fe{constructor({result:e,url:n}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:[`Gateway URL: ${Dh(n)}`,`Response: ${Un(e)}`],name:"OffchainLookupResponseMalformedError"})}}class IB extends fe{constructor({sender:e,to:n}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:[`Contract address: ${n}`,`OffchainLookup sender address: ${e}`],name:"OffchainLookupSenderMismatchError"})}}const SB="0x556f1830",c6={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]};async function xB(t,{blockNumber:e,blockTag:n,data:r,to:s}){const{args:i}=s5({data:r,abi:[c6]}),[o,a,c,u,l]=i,{ccipRead:d}=t,h=d&&typeof d?.request=="function"?d.request:u6;try{if(!yl(s,o))throw new IB({sender:o,to:s});const f=a.includes(zh)?await Q5({data:c,ccipRequest:h}):await h({data:c,sender:o,urls:a}),{data:y}=await bl(t,{blockNumber:e,blockTag:n,data:vi([u,Go([{type:"bytes"},{type:"bytes"}],[f,l])]),to:s});return y}catch(f){throw new CB({callbackSelector:u,cause:f,data:r,extraData:l,sender:o,urls:a})}}async function u6({data:t,sender:e,urls:n}){let r=new Error("An unknown error occurred.");for(let s=0;s<n.length;s++){const i=n[s],o=i.includes("{data}")?"GET":"POST",a=o==="POST"?{data:t,sender:e}:void 0,c=o==="POST"?{"Content-Type":"application/json"}:{};try{const u=await fetch(i.replace("{sender}",e.toLowerCase()).replace("{data}",t),{body:JSON.stringify(a),headers:c,method:o});let l;if(u.headers.get("Content-Type")?.startsWith("application/json")?l=(await u.json()).data:l=await u.text(),!u.ok){r=new gc({body:a,details:l?.error?Un(l.error):u.statusText,headers:u.headers,status:u.status,url:i});continue}if(!yi(l)){r=new AB({result:l,url:i});continue}return l}catch(u){r=new gc({body:a,details:u.message,url:i})}}throw r}const TB=Object.freeze(Object.defineProperty({__proto__:null,ccipRequest:u6,offchainLookup:xB,offchainLookupAbiItem:c6,offchainLookupSignature:SB},Symbol.toStringTag,{value:"Module"}));function l6(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function Nce(t){const{source:e}=t,n=new Map,r=new Ph(8192),s=new Map,i=({address:o,chainId:a})=>`${o}.${a}`;return{async consume({address:o,chainId:a,client:c}){const u=i({address:o,chainId:a}),l=this.get({address:o,chainId:a,client:c});this.increment({address:o,chainId:a});const d=await l;return await e.set({address:o,chainId:a},d),r.set(u,d),d},async increment({address:o,chainId:a}){const c=i({address:o,chainId:a}),u=n.get(c)??0;n.set(c,u+1)},async get({address:o,chainId:a,client:c}){const u=i({address:o,chainId:a});let l=s.get(u);return l||(l=(async()=>{try{const h=await e.get({address:o,chainId:a,client:c}),f=r.get(u)??0;return f>0&&h<=f?f+1:(r.delete(u),h)}finally{this.reset({address:o,chainId:a})}})(),s.set(u,l)),(n.get(u)??0)+await l},reset({address:o,chainId:a}){const c=i({address:o,chainId:a});n.delete(c),s.delete(c)}}}function d6(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:a?.signal||null}))}catch(a){a?.name==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function NB(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const o2=NB();function RB(t,e={}){return{async request(n){const{body:r,fetchFn:s=e.fetchFn??fetch,onRequest:i=e.onRequest,onResponse:o=e.onResponse,timeout:a=e.timeout??1e4}=n,c={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:u,method:l,signal:d}=c;try{const h=await d6(async({signal:y})=>{const m={...c,body:Array.isArray(r)?Un(r.map(A=>({jsonrpc:"2.0",id:A.id??o2.take(),...A}))):Un({jsonrpc:"2.0",id:r.id??o2.take(),...r}),headers:{"Content-Type":"application/json",...u},method:l||"POST",signal:d||(a>0?y:null)},v=new Request(t,m),T=await i?.(v,m)??{...m,url:t};return await s(T.url??t,T)},{errorInstance:new jE({body:r,url:t}),timeout:a,signal:!0});o&&await o(h);let f;if(h.headers.get("Content-Type")?.startsWith("application/json"))f=await h.json();else{f=await h.text();try{f=JSON.parse(f||"{}")}catch(y){if(h.ok)throw y;f={error:f}}}if(!h.ok)throw new gc({body:r,details:Un(f.error)||h.statusText,headers:h.headers,status:h.status,url:t});return f}catch(h){throw h instanceof gc||h instanceof jE?h:new gc({body:r,cause:h,url:t})}}}}const PB=`Ethereum Signed Message:
`;function kB(t){const e=typeof t=="string"?_c(t):typeof t.raw=="string"?t.raw:Hn(t.raw),n=_c(`${PB}${Cn(e)}`);return vi([n,e])}function h6(t,e){return pr(kB(t),e)}class OB extends fe{constructor({domain:e}){super(`Invalid domain "${Un(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class BB extends fe{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class $B extends fe{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function DB(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(o,a)=>{for(const c of o){const{name:u,type:l}=c,d=a[u],h=l.match(l1);if(h&&(typeof d=="number"||typeof d=="bigint")){const[m,v,T]=h;je(d,{signed:v==="int",size:Number.parseInt(T,10)/8})}if(l==="address"&&typeof d=="string"&&!Ss(d))throw new Uo({address:d});const f=l.match(QS);if(f){const[m,v]=f;if(v&&Cn(d)!==Number.parseInt(v,10))throw new BS({expectedSize:Number.parseInt(v,10),givenSize:Cn(d)})}const y=s[l];y&&(MB(l),i(y,d))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new OB({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new BB({primaryType:r,types:s})}function UB({domain:t}){return[typeof t?.name=="string"&&{name:"name",type:"string"},t?.version&&{name:"version",type:"string"},(typeof t?.chainId=="number"||typeof t?.chainId=="bigint")&&{name:"chainId",type:"uint256"},t?.verifyingContract&&{name:"verifyingContract",type:"address"},t?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function MB(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new $B({type:t})}function LB(t){const{domain:e={},message:n,primaryType:r}=t,s={EIP712Domain:UB({domain:e}),...t.types};DB({domain:e,message:n,primaryType:r,types:s});const i=["0x1901"];return e&&i.push(FB({domain:e,types:s})),r!=="EIP712Domain"&&i.push(f6({data:n,primaryType:r,types:s})),pr(vi(i))}function FB({domain:t,types:e}){return f6({data:t,primaryType:"EIP712Domain",types:e})}function f6({data:t,primaryType:e,types:n}){const r=p6({data:t,primaryType:e,types:n});return pr(r)}function p6({data:t,primaryType:e,types:n}){const r=[{type:"bytes32"}],s=[jB({primaryType:e,types:n})];for(const i of n[e]){const[o,a]=m6({types:n,name:i.name,type:i.type,value:t[i.name]});r.push(o),s.push(a)}return Go(r,s)}function jB({primaryType:t,types:e}){const n=bi(qB({primaryType:t,types:e}));return pr(n)}function qB({primaryType:t,types:e}){let n="";const r=g6({primaryType:t,types:e});r.delete(t);const s=[t,...Array.from(r).sort()];for(const i of s)n+=`${i}(${e[i].map(({name:o,type:a})=>`${a} ${o}`).join(",")})`;return n}function g6({primaryType:t,types:e},n=new Set){const s=t.match(/^\w*/u)?.[0];if(n.has(s)||e[s]===void 0)return n;n.add(s);for(const i of e[s])g6({primaryType:i.type,types:e},n);return n}function m6({types:t,name:e,type:n,value:r}){if(t[n]!==void 0)return[{type:"bytes32"},pr(p6({data:r,primaryType:n,types:t}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},pr(r)];if(n==="string")return[{type:"bytes32"},pr(bi(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),i=r.map(o=>m6({name:e,type:s,types:t,value:o}));return[{type:"bytes32"},pr(Go(i.map(([o])=>o),i.map(([,o])=>o)))]}return[{type:n},r]}const zB="0x6492649264926492649264926492649264926492649264926492649264926492";class WB extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const HB={checksum:new WB(8192)},pm=HB.checksum;function y6(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=GS(ZO(t));return n==="Bytes"?r:_i(r)}const VB=/^0x[a-fA-F0-9]{40}$/;function j0(t,e={}){const{strict:n=!0}=e;if(!VB.test(t))throw new a2({address:t,cause:new KB});if(n){if(t.toLowerCase()===t)return;if(w6(t)!==t)throw new a2({address:t,cause:new GB})}}function w6(t){if(pm.has(t))return pm.get(t);j0(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=y6(XO(e),{as:"Bytes"}),r=e.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&r[i]&&(r[i]=r[i].toUpperCase()),(n[i>>1]&15)>=8&&r[i+1]&&(r[i+1]=r[i+1].toUpperCase());const s=`0x${r.join("")}`;return pm.set(t,s),s}function Nw(t,e={}){const{strict:n=!0}=e??{};try{return j0(t,{strict:n}),!0}catch{return!1}}class a2 extends _t{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class KB extends _t{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class GB extends _t{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}const YB=/^(.*)\[([0-9]*)\]$/,ZB=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,b6=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,c2=2n**256n-1n;function ju(t,e,n){const{checksumAddress:r,staticPosition:s}=n,i=W1(e.type);if(i){const[o,a]=i;return XB(t,{...e,type:a},{checksumAddress:r,length:o,staticPosition:s})}if(e.type==="tuple")return n$(t,e,{checksumAddress:r,staticPosition:s});if(e.type==="address")return JB(t,{checksum:r});if(e.type==="bool")return QB(t);if(e.type.startsWith("bytes"))return e$(t,e,{staticPosition:s});if(e.type.startsWith("uint")||e.type.startsWith("int"))return t$(t,e);if(e.type==="string")return r$(t,{staticPosition:s});throw new V1(e.type)}const u2=32,Rw=32;function JB(t,e={}){const{checksum:n=!1}=e,r=t.readBytes(32);return[(i=>n?w6(i):i)(_i(e4(r,-20))),32]}function XB(t,e,n){const{checksumAddress:r,length:s,staticPosition:i}=n;if(!s){const c=ko(t.readBytes(Rw)),u=i+c,l=u+u2;t.setPosition(u);const d=ko(t.readBytes(u2)),h=Qd(e);let f=0;const y=[];for(let m=0;m<d;++m){t.setPosition(l+(h?m*32:f));const[v,T]=ju(t,e,{checksumAddress:r,staticPosition:l});f+=T,y.push(v)}return t.setPosition(i+32),[y,32]}if(Qd(e)){const c=ko(t.readBytes(Rw)),u=i+c,l=[];for(let d=0;d<s;++d){t.setPosition(u+d*32);const[h]=ju(t,e,{checksumAddress:r,staticPosition:u});l.push(h)}return t.setPosition(i+32),[l,32]}let o=0;const a=[];for(let c=0;c<s;++c){const[u,l]=ju(t,e,{checksumAddress:r,staticPosition:i+o});o+=l,a.push(u)}return[a,o]}function QB(t){return[n4(t.readBytes(32),{size:32}),32]}function e$(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=ko(t.readBytes(32));t.setPosition(n+o);const a=ko(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[_i(c),32]}return[_i(t.readBytes(Number.parseInt(s,10),32)),32]}function t$(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256",10),s=t.readBytes(32);return[r>48?t4(s,{signed:n}):ko(s,{signed:n}),32]}function n$(t,e,n){const{checksumAddress:r,staticPosition:s}=n,i=e.components.length===0||e.components.some(({name:c})=>!c),o=i?[]:{};let a=0;if(Qd(e)){const c=ko(t.readBytes(Rw)),u=s+c;for(let l=0;l<e.components.length;++l){const d=e.components[l];t.setPosition(u+a);const[h,f]=ju(t,d,{checksumAddress:r,staticPosition:u});a+=f,o[i?l:d?.name]=h}return t.setPosition(s+32),[o,32]}for(let c=0;c<e.components.length;++c){const u=e.components[c],[l,d]=ju(t,u,{checksumAddress:r,staticPosition:s});o[i?c:u?.name]=l,a+=d}return[o,a]}function r$(t,{staticPosition:e}){const n=ko(t.readBytes(32)),r=e+n;t.setPosition(r);const s=ko(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=r4(B5(i));return t.setPosition(e+32),[o,32]}function s$({checksumAddress:t,parameters:e,values:n}){const r=[];for(let s=0;s<e.length;s++)r.push(q1({checksumAddress:t,parameter:e[s],value:n[s]}));return r}function q1({checksumAddress:t=!1,parameter:e,value:n}){const r=e,s=W1(r.type);if(s){const[i,o]=s;return o$(n,{checksumAddress:t,length:i,parameter:{...r,type:o}})}if(r.type==="tuple")return d$(n,{checksumAddress:t,parameter:r});if(r.type==="address")return i$(n,{checksum:t});if(r.type==="bool")return c$(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const i=r.type.startsWith("int"),[,,o="256"]=b6.exec(r.type)??[];return u$(n,{signed:i,size:Number(o)})}if(r.type.startsWith("bytes"))return a$(n,{type:r.type});if(r.type==="string")return l$(n);throw new V1(r.type)}function z1(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=xs(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(Lr(e+s,{size:32})),r.push(a),s+=xs(a)):n.push(a)}return Ei(...n,...r)}function i$(t,e){const{checksum:n=!1}=e;return j0(t,{strict:n}),{dynamic:!1,encoded:Sc(t.toLowerCase())}}function o$(t,e){const{checksumAddress:n,length:r,parameter:s}=e,i=r===null;if(!Array.isArray(t))throw new v$(t);if(!i&&t.length!==r)throw new b$({expectedLength:r,givenLength:t.length,type:`${s.type}[${r}]`});let o=!1;const a=[];for(let c=0;c<t.length;c++){const u=q1({checksumAddress:n,parameter:s,value:t[c]});u.dynamic&&(o=!0),a.push(u)}if(i||o){const c=z1(a);if(i){const u=Lr(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?Ei(u,c):u}}if(o)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:Ei(...a.map(({encoded:c})=>c))}}function a$(t,{type:e}){const[,n]=e.split("bytes"),r=xs(t);if(!n){let s=t;return r%32!==0&&(s=xc(s,Math.ceil((t.length-2)/2/32)*32)),{dynamic:!0,encoded:Ei(Sc(Lr(r,{size:32})),s)}}if(r!==Number.parseInt(n,10))throw new E6({expectedSize:Number.parseInt(n,10),value:t});return{dynamic:!1,encoded:xc(t)}}function c$(t){if(typeof t!="boolean")throw new _t(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Sc($5(t))}}function u$(t,{signed:e,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new M5({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:Lr(t,{size:32,signed:e})}}function l$(t){const e=O1(t),n=Math.ceil(xs(e)/32),r=[];for(let s=0;s<n;s++)r.push(xc(Gi(e,s*32,(s+1)*32)));return{dynamic:!0,encoded:Ei(xc(Lr(xs(e),{size:32})),...r)}}function d$(t,e){const{checksumAddress:n,parameter:r}=e;let s=!1;const i=[];for(let o=0;o<r.components.length;o++){const a=r.components[o],c=Array.isArray(t)?o:a.name,u=q1({checksumAddress:n,parameter:a,value:t[c]});i.push(u),u.dynamic&&(s=!0)}return{dynamic:s,encoded:s?z1(i):Ei(...i.map(({encoded:o})=>o))}}function W1(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function Qd(t){const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return t.components?.some(Qd);const n=W1(t.type);return!!(n&&Qd({...t,type:n[1]}))}const h$={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new g$({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new p$({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new l2({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new l2({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function f$(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(h$);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}class l2 extends _t{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.NegativeOffsetError"})}}class p$ extends _t{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.PositionOutOfBoundsError"})}}class g$ extends _t{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.RecursiveReadLimitExceededError"})}}function m$(t,e,n={}){const{as:r="Array",checksumAddress:s=!1}=n,i=typeof e=="string"?O5(e):e,o=f$(i);if(Ru(i)===0&&t.length>0)throw new w$;if(Ru(i)&&Ru(i)<32)throw new y$({data:typeof e=="string"?e:_i(e),parameters:t,size:Ru(i)});let a=0;const c=r==="Array"?[]:{};for(let u=0;u<t.length;++u){const l=t[u];o.setPosition(a);const[d,h]=ju(o,l,{checksumAddress:s,staticPosition:0});a+=h,r==="Array"?c.push(d):c[l.name??u]=d}return c}function H1(t,e,n){const{checksumAddress:r=!1}={};if(t.length!==e.length)throw new _6({expectedLength:t.length,givenLength:e.length});const s=s$({checksumAddress:r,parameters:t,values:e}),i=z1(s);return i.length===0?"0x":i}function Pw(t,e){if(t.length!==e.length)throw new _6({expectedLength:t.length,givenLength:e.length});const n=[];for(let r=0;r<t.length;r++){const s=t[r],i=e[r];n.push(Pw.encode(s,i))}return Ei(...n)}(function(t){function e(n,r,s=!1){if(n==="address"){const c=r;return j0(c),Sc(c.toLowerCase(),s?32:0)}if(n==="string")return O1(r);if(n==="bytes")return r;if(n==="bool")return Sc($5(r),s?32:1);const i=n.match(b6);if(i){const[c,u,l="256"]=i,d=Number.parseInt(l,10)/8;return Lr(r,{size:s?32:d,signed:u==="int"})}const o=n.match(ZB);if(o){const[c,u]=o;if(Number.parseInt(u,10)!==(r.length-2)/2)throw new E6({expectedSize:Number.parseInt(u,10),value:r});return xc(r,s?32:0)}const a=n.match(YB);if(a&&Array.isArray(r)){const[c,u]=a,l=[];for(let d=0;d<r.length;d++)l.push(e(u,r[d],!0));return l.length===0?"0x":Ei(...l)}throw new V1(n)}t.encode=e})(Pw||(Pw={}));function v6(t){return Array.isArray(t)&&typeof t[0]=="string"||typeof t=="string"?_E(t):t}class y$ extends _t{constructor({data:e,parameters:n,size:r}){super(`Data size of ${r} bytes is too small for given parameters.`,{metaMessages:[`Params: (${Cu(n)})`,`Data:   ${e} (${r} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.DataSizeTooSmallError"})}}class w$ extends _t{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ZeroDataError"})}}class b$ extends _t{constructor({expectedLength:e,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${e}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class E6 extends _t{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${xs(n)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class _6 extends _t{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class v$ extends _t{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class V1 extends _t{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}class C6 extends a1{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,jS(e);const r=A0(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Ba(i)}update(e){return Qu(this),this.iHash.update(e),this}digestInto(e){Qu(this),zr(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const K1=(t,e,n)=>new C6(t,e).update(n).digest();K1.create=(t,e)=>new C6(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const as=BigInt(0),Fr=BigInt(1),rc=BigInt(2),E$=BigInt(3),A6=BigInt(4),I6=BigInt(5),S6=BigInt(8);function ss(t,e){const n=t%e;return n>=as?n:e+n}function Rs(t,e,n){let r=t;for(;e-- >as;)r*=r,r%=n;return r}function kw(t,e){if(t===as)throw new Error("invert: expected non-zero number");if(e<=as)throw new Error("invert: expected positive modulus, got "+e);let n=ss(t,e),r=e,s=as,i=Fr;for(;n!==as;){const a=r/n,c=r%n,u=s-i*a;r=n,n=c,s=i,i=u}if(r!==Fr)throw new Error("invert: does not exist");return ss(s,e)}function x6(t,e){const n=(t.ORDER+Fr)/A6,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function _$(t,e){const n=(t.ORDER-I6)/S6,r=t.mul(e,rc),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,rc),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function C$(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Fr,n=0;for(;e%rc===as;)e/=rc,n++;let r=rc;const s=G1(t);for(;d2(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return x6;let i=s.pow(r,e);const o=(e+Fr)/rc;return function(c,u){if(c.is0(u))return u;if(d2(c,u)!==1)throw new Error("Cannot find square root");let l=n,d=c.mul(c.ONE,i),h=c.pow(u,e),f=c.pow(u,o);for(;!c.eql(h,c.ONE);){if(c.is0(h))return c.ZERO;let y=1,m=c.sqr(h);for(;!c.eql(m,c.ONE);)if(y++,m=c.sqr(m),y===l)throw new Error("Cannot find square root");const v=Fr<<BigInt(l-y-1),T=c.pow(d,v);l=y,d=c.sqr(T),h=c.mul(h,d),f=c.mul(f,T)}return f}}function A$(t){return t%A6===E$?x6:t%S6===I6?_$:C$(t)}const I$=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function S$(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=I$.reduce((r,s)=>(r[s]="function",r),e);return D0(t,n)}function x$(t,e,n){if(n<as)throw new Error("invalid exponent, negatives unsupported");if(n===as)return t.ONE;if(n===Fr)return e;let r=t.ONE,s=e;for(;n>as;)n&Fr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Fr;return r}function T6(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function d2(t,e){const n=(t.ORDER-Fr)/rc,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function N6(t,e){e!==void 0&&Xu(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function G1(t,e,n=!1,r={}){if(t<=as)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=N6(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:$0(s),ZERO:as,ONE:Fr,create:c=>ss(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return as<=c&&c<t},is0:c=>c===as,isOdd:c=>(c&Fr)===Fr,neg:c=>ss(-c,t),eql:(c,u)=>c===u,sqr:c=>ss(c*c,t),add:(c,u)=>ss(c+u,t),sub:(c,u)=>ss(c-u,t),mul:(c,u)=>ss(c*u,t),pow:(c,u)=>x$(a,c,u),div:(c,u)=>ss(c*kw(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>kw(c,t),sqrt:r.sqrt||(c=>(o||(o=A$(t)),o(a,c))),toBytes:c=>n?T5(c,i):Fh(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?x5(c):mc(c)},invertBatch:c=>T6(a,c),cmov:(c,u,l)=>l?u:c});return Object.freeze(a)}function R6(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function P6(t){const e=R6(t);return e+Math.ceil(e/2)}function T$(t,e,n=!1){const r=t.length,s=R6(e),i=P6(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?x5(t):mc(t),a=ss(o,e-Fr)+Fr;return n?T5(a,s):Fh(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const h2=BigInt(0),Ow=BigInt(1);function gm(t,e){const n=e.negate();return t?n:e}function k6(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function mm(t,e){k6(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=$0(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function f2(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=Ow);const u=e*r,l=u+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:l,isZero:d,isNeg:h,isNegF:f,offsetF:u}}function N$(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function R$(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const ym=new WeakMap,O6=new WeakMap;function wm(t){return O6.get(t)||1}function P$(t,e){return{constTimeNegate:gm,hasPrecomputes(n){return wm(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>h2;)r&Ow&&(s=s.add(i)),i=i.double(),r>>=Ow;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=mm(r,e),o=[];let a=n,c=a;for(let u=0;u<s;u++){c=a,o.push(c);for(let l=1;l<i;l++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=mm(n,e);for(let c=0;c<a.windows;c++){const{nextN:u,offset:l,isZero:d,isNeg:h,isNegF:f,offsetF:y}=f2(s,c,a);s=u,d?o=o.add(gm(f,r[y])):i=i.add(gm(h,r[l]))}return{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=mm(n,e);for(let a=0;a<o.windows&&s!==h2;a++){const{nextN:c,offset:u,isZero:l,isNeg:d}=f2(s,a,o);if(s=c,!l){const h=r[u];i=i.add(d?h.negate():h)}}return i},getPrecomputes(n,r,s){let i=ym.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&ym.set(r,s(i))),i},wNAFCached(n,r,s){const i=wm(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=wm(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){k6(r,e),O6.set(n,r),ym.delete(n)}}}function k$(t,e,n,r){N$(n,t),R$(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=LO(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=$0(c),l=new Array(Number(u)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){l.fill(o);for(let m=0;m<i;m++){const v=r[m],T=Number(v>>BigInt(f)&u);l[T]=l[T].add(n[m])}let y=o;for(let m=l.length-1,v=o;m>0;m--)v=v.add(l[m]),y=y.add(v);if(h=h.add(y),f!==0)for(let m=0;m<c;m++)h=h.double()}return h}function B6(t){return S$(t.Fp),D0(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...N6(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function p2(t){t.lowS!==void 0&&Zd("lowS",t.lowS),t.prehash!==void 0&&Zd("prehash",t.prehash)}function O$(t){const e=B6(t);D0(e,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...e})}let B$=class extends Error{constructor(e=""){super(e)}};const vo={Err:B$,_tlv:{encode:(t,e)=>{const{Err:n}=vo;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=gf(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?gf(s.length/2|128):"";return gf(t)+i+s+e},decode(t,e){const{Err:n}=vo;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const u=e.subarray(r,r+c);if(u.length!==c)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const l of u)o=o<<8|l;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=vo;if(t<Co)throw new e("integer: negative integers are not allowed");let n=gf(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=vo;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return mc(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=vo,s=Us("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:u,l}=r.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(u)}},hexFromSig(t){const{_tlv:e,_int:n}=vo,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}};function bm(t,e){return Jd(Fh(t,e))}const Co=BigInt(0),Yn=BigInt(1);BigInt(2);const vm=BigInt(3),$$=BigInt(4);function D$(t){const e=O$(t),{Fp:n}=e,r=G1(e.n,e.nBitLength),s=e.toBytes||((A,M,P)=>{const I=M.toAffine();return Rp(Uint8Array.from([4]),n.toBytes(I.x),n.toBytes(I.y))}),i=e.fromBytes||(A=>{const M=A.subarray(1),P=n.fromBytes(M.subarray(0,n.BYTES)),I=n.fromBytes(M.subarray(n.BYTES,2*n.BYTES));return{x:P,y:I}});function o(A){const{a:M,b:P}=e,I=n.sqr(A),F=n.mul(I,A);return n.add(n.add(F,n.mul(A,M)),P)}function a(A,M){const P=n.sqr(M),I=o(A);return n.eql(P,I)}if(!a(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const c=n.mul(n.pow(e.a,vm),$$),u=n.mul(n.sqr(e.b),BigInt(27));if(n.is0(n.add(c,u)))throw new Error("bad curve params: a or b");function l(A){return k1(A,Yn,e.n)}function d(A){const{allowedPrivateKeyLengths:M,nByteLength:P,wrapPrivateKey:I,n:F}=e;if(M&&typeof A!="bigint"){if(Lh(A)&&(A=Jd(A)),typeof A!="string"||!M.includes(A.length))throw new Error("invalid private key");A=A.padStart(P*2,"0")}let W;try{W=typeof A=="bigint"?A:mc(Us("private key",A,P))}catch{throw new Error("invalid private key, expected hex or "+P+" bytes, got "+typeof A)}return I&&(W=ss(W,F)),Fu("private key",W,Yn,F),W}function h(A){if(!(A instanceof m))throw new Error("ProjectivePoint expected")}const f=ZE((A,M)=>{const{px:P,py:I,pz:F}=A;if(n.eql(F,n.ONE))return{x:P,y:I};const W=A.is0();M==null&&(M=W?n.ONE:n.inv(F));const D=n.mul(P,M),k=n.mul(I,M),B=n.mul(F,M);if(W)return{x:n.ZERO,y:n.ZERO};if(!n.eql(B,n.ONE))throw new Error("invZ was invalid");return{x:D,y:k}}),y=ZE(A=>{if(A.is0()){if(e.allowInfinityPoint&&!n.is0(A.py))return;throw new Error("bad point: ZERO")}const{x:M,y:P}=A.toAffine();if(!n.isValid(M)||!n.isValid(P))throw new Error("bad point: x or y not FE");if(!a(M,P))throw new Error("bad point: equation left != right");if(!A.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class m{constructor(M,P,I){if(M==null||!n.isValid(M))throw new Error("x required");if(P==null||!n.isValid(P)||n.is0(P))throw new Error("y required");if(I==null||!n.isValid(I))throw new Error("z required");this.px=M,this.py=P,this.pz=I,Object.freeze(this)}static fromAffine(M){const{x:P,y:I}=M||{};if(!M||!n.isValid(P)||!n.isValid(I))throw new Error("invalid affine point");if(M instanceof m)throw new Error("projective point not allowed");const F=W=>n.eql(W,n.ZERO);return F(P)&&F(I)?m.ZERO:new m(P,I,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(M){const P=T6(n,M.map(I=>I.pz));return M.map((I,F)=>I.toAffine(P[F])).map(m.fromAffine)}static fromHex(M){const P=m.fromAffine(i(Us("pointHex",M)));return P.assertValidity(),P}static fromPrivateKey(M){return m.BASE.multiply(d(M))}static msm(M,P){return k$(m,r,M,P)}_setWindowSize(M){O.setWindowSize(this,M)}assertValidity(){y(this)}hasEvenY(){const{y:M}=this.toAffine();if(n.isOdd)return!n.isOdd(M);throw new Error("Field doesn't support isOdd")}equals(M){h(M);const{px:P,py:I,pz:F}=this,{px:W,py:D,pz:k}=M,B=n.eql(n.mul(P,k),n.mul(W,F)),N=n.eql(n.mul(I,k),n.mul(D,F));return B&&N}negate(){return new m(this.px,n.neg(this.py),this.pz)}double(){const{a:M,b:P}=e,I=n.mul(P,vm),{px:F,py:W,pz:D}=this;let k=n.ZERO,B=n.ZERO,N=n.ZERO,R=n.mul(F,F),p=n.mul(W,W),g=n.mul(D,D),w=n.mul(F,W);return w=n.add(w,w),N=n.mul(F,D),N=n.add(N,N),k=n.mul(M,N),B=n.mul(I,g),B=n.add(k,B),k=n.sub(p,B),B=n.add(p,B),B=n.mul(k,B),k=n.mul(w,k),N=n.mul(I,N),g=n.mul(M,g),w=n.sub(R,g),w=n.mul(M,w),w=n.add(w,N),N=n.add(R,R),R=n.add(N,R),R=n.add(R,g),R=n.mul(R,w),B=n.add(B,R),g=n.mul(W,D),g=n.add(g,g),R=n.mul(g,w),k=n.sub(k,R),N=n.mul(g,p),N=n.add(N,N),N=n.add(N,N),new m(k,B,N)}add(M){h(M);const{px:P,py:I,pz:F}=this,{px:W,py:D,pz:k}=M;let B=n.ZERO,N=n.ZERO,R=n.ZERO;const p=e.a,g=n.mul(e.b,vm);let w=n.mul(P,W),_=n.mul(I,D),C=n.mul(F,k),L=n.add(P,I),z=n.add(W,D);L=n.mul(L,z),z=n.add(w,_),L=n.sub(L,z),z=n.add(P,F);let q=n.add(W,k);return z=n.mul(z,q),q=n.add(w,C),z=n.sub(z,q),q=n.add(I,F),B=n.add(D,k),q=n.mul(q,B),B=n.add(_,C),q=n.sub(q,B),R=n.mul(p,z),B=n.mul(g,C),R=n.add(B,R),B=n.sub(_,R),R=n.add(_,R),N=n.mul(B,R),_=n.add(w,w),_=n.add(_,w),C=n.mul(p,C),z=n.mul(g,z),_=n.add(_,C),C=n.sub(w,C),C=n.mul(p,C),z=n.add(z,C),w=n.mul(_,z),N=n.add(N,w),w=n.mul(q,z),B=n.mul(L,B),B=n.sub(B,w),w=n.mul(L,_),R=n.mul(q,R),R=n.add(R,w),new m(B,N,R)}subtract(M){return this.add(M.negate())}is0(){return this.equals(m.ZERO)}wNAF(M){return O.wNAFCached(this,M,m.normalizeZ)}multiplyUnsafe(M){const{endo:P,n:I}=e;Fu("scalar",M,Co,I);const F=m.ZERO;if(M===Co)return F;if(this.is0()||M===Yn)return this;if(!P||O.hasPrecomputes(this))return O.wNAFCachedUnsafe(this,M,m.normalizeZ);let{k1neg:W,k1:D,k2neg:k,k2:B}=P.splitScalar(M),N=F,R=F,p=this;for(;D>Co||B>Co;)D&Yn&&(N=N.add(p)),B&Yn&&(R=R.add(p)),p=p.double(),D>>=Yn,B>>=Yn;return W&&(N=N.negate()),k&&(R=R.negate()),R=new m(n.mul(R.px,P.beta),R.py,R.pz),N.add(R)}multiply(M){const{endo:P,n:I}=e;Fu("scalar",M,Yn,I);let F,W;if(P){const{k1neg:D,k1:k,k2neg:B,k2:N}=P.splitScalar(M);let{p:R,f:p}=this.wNAF(k),{p:g,f:w}=this.wNAF(N);R=O.constTimeNegate(D,R),g=O.constTimeNegate(B,g),g=new m(n.mul(g.px,P.beta),g.py,g.pz),F=R.add(g),W=p.add(w)}else{const{p:D,f:k}=this.wNAF(M);F=D,W=k}return m.normalizeZ([F,W])[0]}multiplyAndAddUnsafe(M,P,I){const F=m.BASE,W=(k,B)=>B===Co||B===Yn||!k.equals(F)?k.multiplyUnsafe(B):k.multiply(B),D=W(this,P).add(W(M,I));return D.is0()?void 0:D}toAffine(M){return f(this,M)}isTorsionFree(){const{h:M,isTorsionFree:P}=e;if(M===Yn)return!0;if(P)return P(m,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:M,clearCofactor:P}=e;return M===Yn?this:P?P(m,this):this.multiplyUnsafe(e.h)}toRawBytes(M=!0){return Zd("isCompressed",M),this.assertValidity(),s(m,this,M)}toHex(M=!0){return Zd("isCompressed",M),Jd(this.toRawBytes(M))}}m.BASE=new m(e.Gx,e.Gy,n.ONE),m.ZERO=new m(n.ZERO,n.ONE,n.ZERO);const{endo:v,nBitLength:T}=e,O=P$(m,v?Math.ceil(T/2):T);return{CURVE:e,ProjectivePoint:m,normPrivateKeyToScalar:d,weierstrassEquation:o,isWithinCurveOrder:l}}function U$(t){const e=B6(t);return D0(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function M$(t){const e=U$(t),{Fp:n,n:r,nByteLength:s,nBitLength:i}=e,o=n.BYTES+1,a=2*n.BYTES+1;function c(g){return ss(g,r)}function u(g){return kw(g,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:d,weierstrassEquation:h,isWithinCurveOrder:f}=D$({...e,toBytes(g,w,_){const C=w.toAffine(),L=n.toBytes(C.x),z=Rp;return Zd("isCompressed",_),_?z(Uint8Array.from([w.hasEvenY()?2:3]),L):z(Uint8Array.from([4]),L,n.toBytes(C.y))},fromBytes(g){const w=g.length,_=g[0],C=g.subarray(1);if(w===o&&(_===2||_===3)){const L=mc(C);if(!k1(L,Yn,n.ORDER))throw new Error("Point is not on curve");const z=h(L);let q;try{q=n.sqrt(z)}catch(j){const K=j instanceof Error?": "+j.message:"";throw new Error("Point is not on curve"+K)}const b=(q&Yn)===Yn;return(_&1)===1!==b&&(q=n.neg(q)),{x:L,y:q}}else if(w===a&&_===4){const L=n.fromBytes(C.subarray(0,n.BYTES)),z=n.fromBytes(C.subarray(n.BYTES,2*n.BYTES));return{x:L,y:z}}else{const L=o,z=a;throw new Error("invalid Point, expected length of "+L+", or uncompressed "+z+", got "+w)}}});function y(g){const w=r>>Yn;return g>w}function m(g){return y(g)?c(-g):g}const v=(g,w,_)=>mc(g.slice(w,_));class T{constructor(w,_,C){Fu("r",w,Yn,r),Fu("s",_,Yn,r),this.r=w,this.s=_,C!=null&&(this.recovery=C),Object.freeze(this)}static fromCompact(w){const _=s;return w=Us("compactSignature",w,_*2),new T(v(w,0,_),v(w,_,2*_))}static fromDER(w){const{r:_,s:C}=vo.toSig(Us("DER",w));return new T(_,C)}assertValidity(){}addRecoveryBit(w){return new T(this.r,this.s,w)}recoverPublicKey(w){const{r:_,s:C,recovery:L}=this,z=F(Us("msgHash",w));if(L==null||![0,1,2,3].includes(L))throw new Error("recovery id invalid");const q=L===2||L===3?_+e.n:_;if(q>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const b=(L&1)===0?"02":"03",E=l.fromHex(b+bm(q,n.BYTES)),j=u(q),K=c(-z*j),X=c(C*j),re=l.BASE.multiplyAndAddUnsafe(E,K,X);if(!re)throw new Error("point at infinify");return re.assertValidity(),re}hasHighS(){return y(this.s)}normalizeS(){return this.hasHighS()?new T(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return Np(this.toDERHex())}toDERHex(){return vo.hexFromSig(this)}toCompactRawBytes(){return Np(this.toCompactHex())}toCompactHex(){const w=s;return bm(this.r,w)+bm(this.s,w)}}const O={isValidPrivateKey(g){try{return d(g),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const g=P6(e.n);return T$(e.randomBytes(g),e.n)},precompute(g=8,w=l.BASE){return w._setWindowSize(g),w.multiply(BigInt(3)),w}};function A(g,w=!0){return l.fromPrivateKey(g).toRawBytes(w)}function M(g){if(typeof g=="bigint")return!1;if(g instanceof l)return!0;const _=Us("key",g).length,C=n.BYTES,L=C+1,z=2*C+1;if(!(e.allowedPrivateKeyLengths||s===L))return _===L||_===z}function P(g,w,_=!0){if(M(g)===!0)throw new Error("first arg must be private key");if(M(w)===!1)throw new Error("second arg must be public key");return l.fromHex(w).multiply(d(g)).toRawBytes(_)}const I=e.bits2int||function(g){if(g.length>8192)throw new Error("input is too large");const w=mc(g),_=g.length*8-i;return _>0?w>>BigInt(_):w},F=e.bits2int_modN||function(g){return c(I(g))},W=$0(i);function D(g){return Fu("num < 2^"+i,g,Co,W),Fh(g,s)}function k(g,w,_=B){if(["recovered","canonical"].some(he=>he in _))throw new Error("sign() legacy options not supported");const{hash:C,randomBytes:L}=e;let{lowS:z,prehash:q,extraEntropy:b}=_;z==null&&(z=!0),g=Us("msgHash",g),p2(_),q&&(g=Us("prehashed msgHash",C(g)));const E=F(g),j=d(w),K=[D(j),D(E)];if(b!=null&&b!==!1){const he=b===!0?L(n.BYTES):b;K.push(Us("extraEntropy",he))}const X=Rp(...K),re=E;function de(he){const Oe=I(he);if(!f(Oe))return;const Re=u(Oe),Ve=l.BASE.multiply(Oe).toAffine(),kt=c(Ve.x);if(kt===Co)return;const dt=c(Re*c(re+kt*j));if(dt===Co)return;let ht=(Ve.x===kt?0:2)|Number(Ve.y&Yn),nr=dt;return z&&y(dt)&&(nr=m(dt),ht^=1),new T(kt,nr,ht)}return{seed:X,k2sig:de}}const B={lowS:e.lowS,prehash:!1},N={lowS:e.lowS,prehash:!1};function R(g,w,_=B){const{seed:C,k2sig:L}=k(g,w,_),z=e;return FO(z.hash.outputLen,z.nByteLength,z.hmac)(C,L)}l.BASE._setWindowSize(8);function p(g,w,_,C=N){const L=g;w=Us("msgHash",w),_=Us("publicKey",_);const{lowS:z,prehash:q,format:b}=C;if(p2(C),"strict"in C)throw new Error("options.strict was renamed to lowS");if(b!==void 0&&b!=="compact"&&b!=="der")throw new Error("format must be compact or der");const E=typeof L=="string"||Lh(L),j=!E&&!b&&typeof L=="object"&&L!==null&&typeof L.r=="bigint"&&typeof L.s=="bigint";if(!E&&!j)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let K,X;try{if(j&&(K=new T(L.r,L.s)),E){try{b!=="compact"&&(K=T.fromDER(L))}catch(ht){if(!(ht instanceof vo.Err))throw ht}!K&&b!=="der"&&(K=T.fromCompact(L))}X=l.fromHex(_)}catch{return!1}if(!K||z&&K.hasHighS())return!1;q&&(w=e.hash(w));const{r:re,s:de}=K,he=F(w),Oe=u(de),Re=c(he*Oe),Ve=c(re*Oe),kt=l.BASE.multiplyAndAddUnsafe(X,Re,Ve)?.toAffine();return kt?c(kt.x)===re:!1}return{CURVE:e,getPublicKey:A,getSharedSecret:P,sign:R,verify:p,ProjectivePoint:l,Signature:T,utils:O}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function L$(t){return{hash:t,hmac:(e,...n)=>K1(t,e,Wi(...n)),randomBytes:c1}}function F$(t,e){const n=r=>M$({...t,...L$(r)});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $6=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),g2=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),j$=BigInt(0),q$=BigInt(1),Bw=BigInt(2),m2=(t,e)=>(t+e/Bw)/e;function z$(t){const e=$6,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=t*t*t%e,l=u*u*t%e,d=Rs(l,n,e)*l%e,h=Rs(d,n,e)*l%e,f=Rs(h,Bw,e)*u%e,y=Rs(f,s,e)*f%e,m=Rs(y,i,e)*y%e,v=Rs(m,a,e)*m%e,T=Rs(v,c,e)*v%e,O=Rs(T,a,e)*m%e,A=Rs(O,n,e)*l%e,M=Rs(A,o,e)*y%e,P=Rs(M,r,e)*u%e,I=Rs(P,Bw,e);if(!$w.eql($w.sqr(I),t))throw new Error("Cannot find square root");return I}const $w=G1($6,void 0,void 0,{sqrt:z$}),Y1=F$({a:j$,b:BigInt(7),Fp:$w,n:g2,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=g2,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-q$*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=m2(i*t,e),c=m2(-r*t,e);let u=ss(t-a*n-c*s,e),l=ss(-a*r-c*i,e);const d=u>o,h=l>o;if(d&&(u=e-u),h&&(l=e-l),u>o||l>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:u,k2neg:h,k2:l}}}},A1),W$=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:Y1},Symbol.toStringTag,{value:"Module"}));function D6(t,e={}){const{recovered:n}=e;if(typeof t.r>"u")throw new Em({signature:t});if(typeof t.s>"u")throw new Em({signature:t});if(n&&typeof t.yParity>"u")throw new Em({signature:t});if(t.r<0n||t.r>c2)throw new J$({value:t.r});if(t.s<0n||t.s>c2)throw new X$({value:t.s});if(typeof t.yParity=="number"&&t.yParity!==0&&t.yParity!==1)throw new J1({value:t.yParity})}function H$(t){return U6(_i(t))}function U6(t){if(t.length!==130&&t.length!==132)throw new Z$({signature:t});const e=BigInt(Gi(t,0,32)),n=BigInt(Gi(t,32,64)),r=(()=>{const s=+`0x${t.slice(130)}`;if(!Number.isNaN(s))try{return Z1(s)}catch{throw new J1({value:s})}})();return typeof r>"u"?{r:e,s:n}:{r:e,s:n,yParity:r}}function V$(t){if(!(typeof t.r>"u")&&!(typeof t.s>"u"))return K$(t)}function K$(t){const e=typeof t=="string"?U6(t):t instanceof Uint8Array?H$(t):typeof t.r=="string"?Y$(t):t.v?G$(t):{r:t.r,s:t.s,...typeof t.yParity<"u"?{yParity:t.yParity}:{}};return D6(e),e}function G$(t){return{r:t.r,s:t.s,yParity:Z1(t.v)}}function Y$(t){const e=(()=>{const n=t.v?Number(t.v):void 0;let r=t.yParity?Number(t.yParity):void 0;if(typeof n=="number"&&typeof r!="number"&&(r=Z1(n)),typeof r!="number")throw new J1({value:t.yParity});return r})();return{r:BigInt(t.r),s:BigInt(t.s),yParity:e}}function Z1(t){if(t===0||t===27)return 0;if(t===1||t===28)return 1;if(t>=35)return t%2===0?1:0;throw new Q$({value:t})}class Z$ extends _t{constructor({signature:e}){super(`Value \`${e}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${xs(d4(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class Em extends _t{constructor({signature:e}){super(`Signature \`${k5(e)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}}class J$ extends _t{constructor({value:e}){super(`Value \`${e}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}}class X$ extends _t{constructor({value:e}){super(`Value \`${e}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}}class J1 extends _t{constructor({value:e}){super(`Value \`${e}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class Q$ extends _t{constructor({value:e}){super(`Value \`${e}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}function eD(t,e={}){return typeof t.chainId=="string"?tD(t):{...t,...e.signature}}function tD(t){const{address:e,chainId:n,nonce:r}=t,s=V$(t);return{address:e,chainId:Number(n),nonce:BigInt(r),...s}}const nD="0x8010801080108010801080108010801080108010801080108010801080108010",rD=v6("(uint256 chainId, address delegation, uint256 nonce, uint8 yParity, uint256 r, uint256 s), address to, bytes data");function M6(t){if(typeof t=="string"){if(Gi(t,-32)!==nD)throw new oD(t)}else D6(t.authorization)}function sD(t){M6(t);const e=U5(Gi(t,-64,-32)),n=Gi(t,-e-64,-64),r=Gi(t,0,-e-64),[s,i,o]=m$(rD,n);return{authorization:eD({address:s.delegation,chainId:Number(s.chainId),nonce:s.nonce,yParity:s.yParity,r:s.r,s:s.s}),signature:r,...o&&o!=="0x"?{data:o,to:i}:{}}}function iD(t){try{return M6(t),!0}catch{return!1}}let oD=class extends _t{constructor(e){super(`Value \`${e}\` is an invalid ERC-8010 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc8010.InvalidWrappedSignatureError"})}};function kce(t){const{address:e,data:n,signature:r,to:s="hex"}=t,i=Ko([Go([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,n,r]),zB]);return s==="hex"?i:Vs(i)}class aD extends fe{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function cD(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new aD({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}function uD(t){return t.map(e=>({...e,value:BigInt(e.value)}))}function lD(t){return{...t,balance:t.balance?BigInt(t.balance):void 0,nonce:t.nonce?wi(t.nonce):void 0,storageProof:t.storageProof?uD(t.storageProof):void 0}}async function dD(t,{address:e,blockNumber:n,blockTag:r,storageKeys:s}){const i=r??"latest",o=n!==void 0?je(n):void 0,a=await t.request({method:"eth_getProof",params:[e,s,o||i]});return lD(a)}async function hD(t,{address:e,blockNumber:n,blockTag:r="latest",slot:s}){const i=n!==void 0?je(n):void 0;return await t.request({method:"eth_getStorageAt",params:[e,s,i||r]})}async function q0(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){const o=r||"latest",a=n!==void 0?je(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,je(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,je(i)]},{dedupe:!!a}),!c)throw new o5({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(t.chain?.formatters?.transaction?.format||f5)(c)}async function fD(t,{hash:e,transactionReceipt:n}){const[r,s]=await Promise.all([He(t,qh,"getBlockNumber")({}),e?He(t,q0,"getTransaction")({hash:e}):void 0]),i=n?.blockNumber||s?.blockNumber;return i?r-i+1n:0n}async function np(t,{hash:e}){const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new a5({hash:e});return(t.chain?.formatters?.transactionReceipt?.format||M4)(n)}async function L6(t,e){const{account:n,authorizationList:r,allowFailure:s=!0,blockNumber:i,blockOverrides:o,blockTag:a,stateOverride:c}=e,u=e.contracts,{batchSize:l=e.batchSize??1024,deployless:d=e.deployless??!1}=typeof t.batch?.multicall=="object"?t.batch.multicall:{},h=(()=>{if(e.multicallAddress)return e.multicallAddress;if(d)return null;if(t.chain)return wl({blockNumber:i,chain:t.chain,contract:"multicall3"});throw new Error("client chain not configured. multicallAddress is required.")})(),f=[[]];let y=0,m=0;for(let O=0;O<u.length;O++){const{abi:A,address:M,args:P,functionName:I}=u[O];try{const F=Js({abi:A,args:P,functionName:I});m+=(F.length-2)/2,l>0&&m>l&&f[y].length>0&&(y++,m=(F.length-2)/2,f[y]=[]),f[y]=[...f[y],{allowFailure:!0,callData:F,target:M}]}catch(F){const W=Ic(F,{abi:A,address:M,args:P,docsPath:"/docs/contract/multicall",functionName:I,sender:n});if(!s)throw W;f[y]=[...f[y],{allowFailure:!0,callData:"0x",target:M}]}}const v=await Promise.allSettled(f.map(O=>He(t,Ks,"readContract")({...h===null?{code:B1}:{address:h},abi:Pp,account:n,args:[O],authorizationList:r,blockNumber:i,blockOverrides:o,blockTag:a,functionName:"aggregate3",stateOverride:c}))),T=[];for(let O=0;O<v.length;O++){const A=v[O];if(A.status==="rejected"){if(!s)throw A.reason;for(let P=0;P<f[O].length;P++)T.push({status:"failure",error:A.reason,result:void 0});continue}const M=A.value;for(let P=0;P<M.length;P++){const{returnData:I,success:F}=M[P],{callData:W}=f[O][P],{abi:D,address:k,functionName:B,args:N}=u[T.length];try{if(W==="0x")throw new Rh;if(!F)throw new N0({data:I});const R=jc({abi:D,args:N,data:I,functionName:B});T.push(s?{result:R,status:"success"}:R)}catch(R){const p=Ic(R,{abi:D,address:k,args:N,docsPath:"/docs/contract/multicall",functionName:B});if(!s)throw p;T.push({error:p,result:void 0,status:"failure"})}}}if(T.length!==u.length)throw new fe("multicall results mismatch");return T}async function Dw(t,e){const{blockNumber:n,blockTag:r=t.experimental_blockTag??"latest",blocks:s,returnFullTransactions:i,traceTransfers:o,validation:a}=e;try{const c=[];for(const h of s){const f=h.blockOverrides?F5(h.blockOverrides):void 0,y=h.calls.map(v=>{const T=v,O=T.account?yr(T.account):void 0,A=T.abi?Js(T):T.data,M={...T,data:T.dataSuffix?vi([A||"0x",T.dataSuffix]):A,from:T.from??O?.address};return ml(M),Mh(M)}),m=h.stateOverrides?v1(h.stateOverrides):void 0;c.push({blockOverrides:f,calls:y,stateOverrides:m})}const l=(typeof n=="bigint"?je(n):void 0)||r;return(await t.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:i,traceTransfers:o,validation:a},l]})).map((h,f)=>({...p5(h),calls:h.calls.map((y,m)=>{const{abi:v,args:T,functionName:O,to:A}=s[f].calls[m],M=y.error?.data??y.returnData,P=BigInt(y.gasUsed),I=y.logs?.map(k=>Mo(k)),F=y.status==="0x1"?"success":"failure",W=v&&F==="success"&&M!=="0x"?jc({abi:v,data:M,functionName:O}):null,D=(()=>{if(F==="success")return;let k;if(y.error?.data==="0x"?k=new Rh:y.error&&(k=new N0(y.error)),!!k)return Ic(k,{abi:v??[],address:A??"0x",args:T,functionName:O??"<unknown>"})})();return{data:M,gasUsed:P,logs:I,status:F,...F==="success"?{result:W}:{error:D}}})}))}catch(c){const u=c,l=R0(u,{});throw l instanceof Uh?u:l}}function Uw(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function","error",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new _t("Unable to normalize signature.");return s}function Mw(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Nw(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>Mw(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>Mw(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function F6(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return F6(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Nw(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Nw(n[r],{strict:!1}):!1)return o}}function j6(t,e={}){const{prepare:n=!0}=e,r=Array.isArray(t)||typeof t=="string"?EE(t):t;return{...r,...n?{hash:Pu(r)}:{}}}function pD(t,e,n){const{args:r=[],prepare:s=!0}=n??{},i=h4(e,{strict:!1}),o=t.filter(u=>i?u.type==="function"||u.type==="error"?q6(u)===Gi(e,0,4):u.type==="event"?Pu(u)===e:!1:"name"in u&&u.name===e);if(o.length===0)throw new Lw({name:e});if(o.length===1)return{...o[0],...s?{hash:Pu(o[0])}:{}};let a;for(const u of o){if(!("inputs"in u))continue;if(!r||r.length===0){if(!u.inputs||u.inputs.length===0)return{...u,...s?{hash:Pu(u)}:{}};continue}if(!u.inputs||u.inputs.length===0||u.inputs.length!==r.length)continue;if(r.every((d,h)=>{const f="inputs"in u&&u.inputs[h];return f?Mw(d,f):!1})){if(a&&"inputs"in a&&a.inputs){const d=F6(u.inputs,a.inputs,r);if(d)throw new mD({abiItem:u,type:d[0]},{abiItem:a,type:d[1]})}a=u}}const c=(()=>{if(a)return a;const[u,...l]=o;return{...u,overloads:l}})();if(!c)throw new Lw({name:e});return{...c,...s?{hash:Pu(c)}:{}}}function q6(t){return Gi(Pu(t),0,4)}function gD(t){const e=typeof t=="string"?t:Ap(t);return Uw(e)}function Pu(t){return typeof t!="string"&&"hash"in t&&t.hash?t.hash:y6(O1(gD(t)))}class mD extends _t{constructor(e,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${Uw(Ap(e.abiItem))}\`, and`,`\`${n.type}\` in \`${Uw(Ap(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class Lw extends _t{constructor({name:e,data:n,type:r="item"}){const s=e?` with name "${e}"`:n?` with data "${n}"`:"";super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}function yD(t,e){const{bytecode:n,args:r}=e;return Ei(n,t.inputs?.length&&r?.length?H1(t.inputs,r):"0x")}function wD(t){return j6(t)}function bD(t,...e){const{overloads:n}=t,r=n?vD([t,...n],t.name,{args:e[0]}):t,s=ED(r),i=e.length>0?H1(r.inputs,e[0]):void 0;return i?Ei(s,i):s}function tu(t,e={}){return j6(t,e)}function vD(t,e,n){const r=pD(t,e,n);if(r.type!=="function")throw new Lw({name:e,type:"function"});return r}function ED(t){return q6(t)}const _D="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",Ti="0x0000000000000000000000000000000000000000",CD="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function AD(t,e){const{blockNumber:n,blockTag:r,calls:s,stateOverrides:i,traceAssetChanges:o,traceTransfers:a,validation:c}=e,u=e.account?yr(e.account):void 0;if(o&&!u)throw new fe("`account` is required when `traceAssetChanges` is true");const l=u?yD(wD("constructor(bytes, bytes)"),{bytecode:W5,args:[CD,bD(tu("function getBalance(address)"),[u.address])]}):void 0,d=o?await Promise.all(e.calls.map(async C=>{if(!C.data&&!C.abi)return;const{accessList:L}=await s6(t,{account:u.address,...C,data:C.abi?Js(C):C.data});return L.map(({address:z,storageKeys:q})=>q.length>0?z:null)})).then(C=>C.flat().filter(Boolean)):[],h=await Dw(t,{blockNumber:n,blockTag:r,blocks:[...o?[{calls:[{data:l}],stateOverrides:i},{calls:d.map((C,L)=>({abi:[tu("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:C,from:Ti,nonce:L})),stateOverrides:[{address:Ti,nonce:0}]}]:[],{calls:[...s,{}].map(C=>({...C,from:u?.address})),stateOverrides:i},...o?[{calls:[{data:l}]},{calls:d.map((C,L)=>({abi:[tu("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:C,from:Ti,nonce:L})),stateOverrides:[{address:Ti,nonce:0}]},{calls:d.map((C,L)=>({to:C,abi:[tu("function decimals() returns (uint256)")],functionName:"decimals",from:Ti,nonce:L})),stateOverrides:[{address:Ti,nonce:0}]},{calls:d.map((C,L)=>({to:C,abi:[tu("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:Ti,nonce:L})),stateOverrides:[{address:Ti,nonce:0}]},{calls:d.map((C,L)=>({to:C,abi:[tu("function symbol() returns (string)")],functionName:"symbol",from:Ti,nonce:L})),stateOverrides:[{address:Ti,nonce:0}]}]:[]],traceTransfers:a,validation:c}),f=o?h[2]:h[0],[y,m,,v,T,O,A,M]=o?h:[],{calls:P,...I}=f,F=P.slice(0,-1)??[],W=y?.calls??[],D=m?.calls??[],k=[...W,...D].map(C=>C.status==="success"?Hs(C.data):null),B=v?.calls??[],N=T?.calls??[],R=[...B,...N].map(C=>C.status==="success"?Hs(C.data):null),p=(O?.calls??[]).map(C=>C.status==="success"?C.result:null),g=(M?.calls??[]).map(C=>C.status==="success"?C.result:null),w=(A?.calls??[]).map(C=>C.status==="success"?C.result:null),_=[];for(const[C,L]of R.entries()){const z=k[C];if(typeof L!="bigint"||typeof z!="bigint")continue;const q=p[C-1],b=g[C-1],E=w[C-1],j=C===0?{address:_D,decimals:18,symbol:"ETH"}:{address:d[C-1],decimals:E||q?Number(q??1):void 0,symbol:b??void 0};_.some(K=>K.token.address===j.address)||_.push({token:j,value:{pre:z,post:L,diff:L-z}})}return{assetChanges:_,block:I,results:F}}const z6="0x6492649264926492649264926492649264926492649264926492649264926492";function ID(t){if(Gi(t,-32)!==z6)throw new TD(t)}function SD(t){const{data:e,signature:n,to:r}=t;return Ei(H1(v6("address, bytes, bytes"),[r,e,n]),z6)}function xD(t){try{return ID(t),!0}catch{return!1}}class TD extends _t{constructor(e){super(`Value \`${e}\` is an invalid ERC-6492 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc6492.InvalidWrappedSignatureError"})}}function ND({r:t,s:e,to:n="hex",v:r,yParity:s}){const i=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),o=`0x${new Y1.Signature(Hs(t),Hs(e)).toCompactHex()}${i===0?"1b":"1c"}`;return n==="hex"?o:Vs(o)}async function z0(t,e){const{address:n,hash:r,erc6492VerifierAddress:s=e.universalSignatureVerifierAddress??t.chain?.contracts?.erc6492Verifier?.address,multicallAddress:i=e.multicallAddress??t.chain?.contracts?.multicall3?.address}=e,o=(()=>{const a=e.signature;return yi(a)?a:typeof a=="object"&&"r"in a&&"s"in a?ND(a):Hn(a)})();try{return iD(o)?await RD(t,{...e,multicallAddress:i,signature:o}):await PD(t,{...e,verifierAddress:s,signature:o})}catch(a){try{if(yl(To(n),await w1({hash:r,signature:o})))return!0}catch{}if(a instanceof Tc)return!1;throw a}}async function RD(t,e){const{address:n,blockNumber:r,blockTag:s,hash:i,multicallAddress:o}=e,{authorization:a,data:c,signature:u,to:l}=sD(e.signature);if(await Tw(t,{address:n,blockNumber:r,blockTag:s})===Ko(["0xef0100",a.address]))return await kD(t,{address:n,blockNumber:r,blockTag:s,hash:i,signature:u});const h={address:a.address,chainId:Number(a.chainId),nonce:Number(a.nonce),r:je(a.r,{size:32}),s:je(a.s,{size:32}),yParity:a.yParity};if(!await bB({address:n,authorization:h}))throw new Tc;const y=await He(t,Ks,"readContract")({...o?{address:o}:{code:B1},authorizationList:[h],abi:Pp,blockNumber:r,blockTag:"pending",functionName:"aggregate3",args:[[...c?[{allowFailure:!0,target:l??n,callData:c}]:[],{allowFailure:!0,target:n,callData:Js({abi:z5,functionName:"isValidSignature",args:[i,u]})}]]});if(y[y.length-1]?.returnData?.startsWith("0x1626ba7e"))return!0;throw new Tc}async function PD(t,e){const{address:n,factory:r,factoryData:s,hash:i,signature:o,verifierAddress:a,...c}=e,u=await(async()=>!r&&!s||xD(o)?o:SD({data:s,signature:o,to:r}))(),l=a?{to:a,data:Js({abi:n2,functionName:"isValidSig",args:[n,i,u]}),...c}:{data:$1({abi:n2,args:[n,i,u],bytecode:b4}),...c},{data:d}=await He(t,bl,"call")(l).catch(h=>{throw h instanceof c5?new Tc:h});if(PP(d??"0x0"))return!0;throw new Tc}async function kD(t,e){const{address:n,blockNumber:r,blockTag:s,hash:i,signature:o}=e;if((await He(t,Ks,"readContract")({address:n,abi:z5,args:[i,o],blockNumber:r,blockTag:s,functionName:"isValidSignature"}).catch(c=>{throw c instanceof m1?new Tc:c})).startsWith("0x1626ba7e"))return!0;throw new Tc}class Tc extends Error{}async function OD(t,{address:e,message:n,factory:r,factoryData:s,signature:i,...o}){const a=h6(n);return z0(t,{address:e,factory:r,factoryData:s,hash:a,signature:i,...o})}async function BD(t,e){const{address:n,factory:r,factoryData:s,signature:i,message:o,primaryType:a,types:c,domain:u,...l}=e,d=LB({message:o,primaryType:a,types:c,domain:u});return z0(t,{address:n,factory:r,factoryData:s,hash:d,signature:i,...l})}function W6(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=Un(["watchBlockNumber",t.uid,e,n,o]);return Lo(d,{onBlockNumber:r,onError:s},h=>vl(async()=>{try{const f=await He(t,qh,"getBlockNumber")({cacheTime:0});if(c!==void 0){if(f===c)return;if(f-c>1&&n)for(let y=c+1n;y<f;y++)h.onBlockNumber(y,c),c=y}(c===void 0||f>c)&&(h.onBlockNumber(f,c),c=f)}catch(f){h.onError?.(f)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=Un(["watchBlockNumber",t.uid,e,n]);return Lo(d,{onBlockNumber:r,onError:s},h=>{let f=!0,y=()=>f=!1;return(async()=>{try{const m=(()=>{if(t.transport.type==="fallback"){const T=t.transport.transports.find(O=>O.config.type==="webSocket"||O.config.type==="ipc");return T?T.value:t.transport}return t.transport})(),{unsubscribe:v}=await m.subscribe({params:["newHeads"],onData(T){if(!f)return;const O=Hs(T.result?.number);h.onBlockNumber(O,c),c=O},onError(T){h.onError?.(T)}});y=v,f||y()}catch(m){s?.(m)}})(),()=>y()})})()}async function H6(t,e){const{checkReplacement:n=!0,confirmations:r=1,hash:s,onReplaced:i,retryCount:o=6,retryDelay:a=({count:P})=>~~(1<<P)*200,timeout:c=18e4}=e,u=Un(["waitForTransactionReceipt",t.uid,s]),l=e.pollingInterval?e.pollingInterval:t.chain?.experimental_preconfirmationTime?t.chain.experimental_preconfirmationTime:t.pollingInterval;let d,h,f,y=!1,m,v;const{promise:T,resolve:O,reject:A}=D1(),M=c?setTimeout(()=>{v?.(),m?.(),A(new Gk({hash:s}))},c):void 0;return m=Lo(u,{onReplaced:i,resolve:O,reject:A},async P=>{if(f=await He(t,np,"getTransactionReceipt")({hash:s}).catch(()=>{}),f&&r<=1){clearTimeout(M),P.resolve(f),m?.();return}v=He(t,W6,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:l,async onBlockNumber(I){const F=D=>{clearTimeout(M),v?.(),D(),m?.()};let W=I;if(!y)try{if(f){if(r>1&&(!f.blockNumber||W-f.blockNumber+1n<r))return;F(()=>P.resolve(f));return}if(n&&!d&&(y=!0,await Xd(async()=>{d=await He(t,q0,"getTransaction")({hash:s}),d.blockNumber&&(W=d.blockNumber)},{delay:a,retryCount:o}),y=!1),f=await He(t,np,"getTransactionReceipt")({hash:s}),r>1&&(!f.blockNumber||W-f.blockNumber+1n<r))return;F(()=>P.resolve(f))}catch(D){if(D instanceof o5||D instanceof a5){if(!d){y=!1;return}try{h=d,y=!0;const k=await Xd(()=>He(t,Hi,"getBlock")({blockNumber:W,includeTransactions:!0}),{delay:a,retryCount:o,shouldRetry:({error:R})=>R instanceof d5});y=!1;const B=k.transactions.find(({from:R,nonce:p})=>R===h.from&&p===h.nonce);if(!B||(f=await He(t,np,"getTransactionReceipt")({hash:B.hash}),r>1&&(!f.blockNumber||W-f.blockNumber+1n<r)))return;let N="replaced";B.to===h.to&&B.value===h.value&&B.input===h.input?N="repriced":B.from===B.to&&B.value===0n&&(N="cancelled"),F(()=>{P.onReplaced?.({reason:N,replacedTransaction:h,transaction:B,transactionReceipt:f}),P.resolve(f)})}catch(k){F(()=>P.reject(k))}}else F(()=>P.reject(D))}}})}),T}function $D(t,{blockTag:e=t.experimental_blockTag??"latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:i,includeTransactions:o,poll:a,pollingInterval:c=t.pollingInterval}){const u=typeof a<"u"?a:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),l=o??!1;let d;return u?(()=>{const y=Un(["watchBlocks",t.uid,e,n,r,l,c]);return Lo(y,{onBlock:s,onError:i},m=>vl(async()=>{try{const v=await He(t,Hi,"getBlock")({blockTag:e,includeTransactions:l});if(v.number!==null&&d?.number!=null){if(v.number===d.number)return;if(v.number-d.number>1&&n)for(let T=d?.number+1n;T<v.number;T++){const O=await He(t,Hi,"getBlock")({blockNumber:T,includeTransactions:l});m.onBlock(O,d),d=O}}(d?.number==null||e==="pending"&&v?.number==null||v.number!==null&&v.number>d.number)&&(m.onBlock(v,d),d=v)}catch(v){m.onError?.(v)}},{emitOnBegin:r,interval:c}))})():(()=>{let y=!0,m=!0,v=()=>y=!1;return(async()=>{try{r&&He(t,Hi,"getBlock")({blockTag:e,includeTransactions:l}).then(A=>{y&&m&&(s(A,void 0),m=!1)}).catch(i);const T=(()=>{if(t.transport.type==="fallback"){const A=t.transport.transports.find(M=>M.config.type==="webSocket"||M.config.type==="ipc");return A?A.value:t.transport}return t.transport})(),{unsubscribe:O}=await T.subscribe({params:["newHeads"],async onData(A){if(!y)return;const M=await He(t,Hi,"getBlock")({blockNumber:A.result?.number,includeTransactions:l}).catch(()=>{});y&&(s(M,d),m=!1,d=M)},onError(A){i?.(A)}});v=O,y||v()}catch(T){i?.(T)}})(),()=>v()})()}function DD(t,{address:e,args:n,batch:r=!0,event:s,events:i,fromBlock:o,onError:a,onLogs:c,poll:u,pollingInterval:l=t.pollingInterval,strict:d}){const h=typeof u<"u"?u:typeof o=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),f=d??!1;return h?(()=>{const v=Un(["watchEvent",e,n,r,t.uid,s,l,o]);return Lo(v,{onLogs:c,onError:a},T=>{let O;o!==void 0&&(O=o-1n);let A,M=!1;const P=vl(async()=>{if(!M){try{A=await He(t,i6,"createEventFilter")({address:e,args:n,event:s,events:i,strict:f,fromBlock:o})}catch{}M=!0;return}try{let I;if(A)I=await He(t,M0,"getFilterChanges")({filter:A});else{const F=await He(t,qh,"getBlockNumber")({});O&&O!==F?I=await He(t,N1,"getLogs")({address:e,args:n,event:s,events:i,fromBlock:O+1n,toBlock:F}):I=[],O=F}if(I.length===0)return;if(r)T.onLogs(I);else for(const F of I)T.onLogs([F])}catch(I){A&&I instanceof Ac&&(M=!1),T.onError?.(I)}},{emitOnBegin:!0,interval:l});return async()=>{A&&await He(t,L0,"uninstallFilter")({filter:A}),P()}})})():(()=>{let v=!0,T=()=>v=!1;return(async()=>{try{const O=(()=>{if(t.transport.type==="fallback"){const I=t.transport.transports.find(F=>F.config.type==="webSocket"||F.config.type==="ipc");return I?I.value:t.transport}return t.transport})(),A=i??(s?[s]:void 0);let M=[];A&&(M=[A.flatMap(F=>Oh({abi:[F],eventName:F.name,args:n}))],s&&(M=M[0]));const{unsubscribe:P}=await O.subscribe({params:["logs",{address:e,topics:M}],onData(I){if(!v)return;const F=I.result;try{const{eventName:W,args:D}=x1({abi:A??[],data:F.data,topics:F.topics,strict:f}),k=Mo(F,{args:D,eventName:W});c([k])}catch(W){let D,k;if(W instanceof Pd||W instanceof C0){if(d)return;D=W.abiItem.name,k=W.abiItem.inputs?.some(N=>!("name"in N&&N.name))}const B=Mo(F,{args:k?[]:{},eventName:D});c([B])}},onError(I){a?.(I)}});T=P,v||T()}catch(O){a?.(O)}})(),()=>T()})()}function V6(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const u=Un(["watchPendingTransactions",t.uid,e,i]);return Lo(u,{onTransactions:r,onError:n},l=>{let d;const h=vl(async()=>{try{if(!d)try{d=await He(t,o6,"createPendingTransactionFilter")({});return}catch(y){throw h(),y}const f=await He(t,M0,"getFilterChanges")({filter:d});if(f.length===0)return;if(e)l.onTransactions(f);else for(const y of f)l.onTransactions([y])}catch(f){l.onError?.(f)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await He(t,L0,"uninstallFilter")({filter:d}),h()}})})():(()=>{let u=!0,l=()=>u=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!u)return;const f=h.result;r([f])},onError(h){n?.(h)}});l=d,u||l()}catch(d){n?.(d)}})(),()=>l()})()}function UD(t){const{scheme:e,statement:n,...r}=t.match(MD)?.groups??{},{chainId:s,expirationTime:i,issuedAt:o,notBefore:a,requestId:c,...u}=t.match(LD)?.groups??{},l=t.split("Resources:")[1]?.split(`
- `).slice(1);return{...r,...u,...s?{chainId:Number(s)}:{},...i?{expirationTime:new Date(i)}:{},...o?{issuedAt:new Date(o)}:{},...a?{notBefore:new Date(a)}:{},...c?{requestId:c}:{},...l?{resources:l}:{},...e?{scheme:e}:{},...n?{statement:n}:{}}}const MD=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,LD=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function FD(t){const{address:e,domain:n,message:r,nonce:s,scheme:i,time:o=new Date}=t;if(n&&r.domain!==n||s&&r.nonce!==s||i&&r.scheme!==i||r.expirationTime&&o>=r.expirationTime||r.notBefore&&o<r.notBefore)return!1;try{if(!r.address||!Ss(r.address,{strict:!1})||e&&!yl(r.address,e))return!1}catch{return!1}return!0}async function jD(t,e){const{address:n,domain:r,message:s,nonce:i,scheme:o,signature:a,time:c=new Date,...u}=e,l=UD(s);if(!l.address||!FD({address:n,domain:r,message:l,nonce:i,scheme:o,time:c}))return!1;const h=h6(s);return z0(t,{address:l.address,hash:h,signature:a,...u})}function qD(t){return{call:e=>bl(t,e),createAccessList:e=>s6(t,e),createBlockFilter:()=>lB(t),createContractEventFilter:e=>t5(t,e),createEventFilter:e=>i6(t,e),createPendingTransactionFilter:()=>o6(t),estimateContractGas:e=>$O(t,e),estimateGas:e=>B0(t,e),getBalance:e=>S1(t,e),getBlobBaseFee:()=>dB(t),getBlock:e=>Hi(t,e),getBlockNumber:e=>qh(t,e),getBlockTransactionCount:e=>hB(t,e),getBytecode:e=>Tw(t,e),getChainId:()=>k0(t),getCode:e=>Tw(t,e),getContractEvents:e=>A5(t,e),getEip712Domain:e=>pB(t,e),getEnsAddress:e=>G4(t,e),getEnsAvatar:e=>aB(t,e),getEnsName:e=>cB(t,e),getEnsResolver:e=>uB(t,e),getEnsText:e=>r6(t,e),getFeeHistory:e=>yB(t,e),estimateFeesPerGas:e=>yO(t,e),getFilterChanges:e=>M0(t,e),getFilterLogs:e=>wB(t,e),getGasPrice:()=>_1(t),getLogs:e=>N1(t,e),getProof:e=>dD(t,e),estimateMaxPriorityFeePerGas:e=>mO(t,e),getStorageAt:e=>hD(t,e),getTransaction:e=>q0(t,e),getTransactionConfirmations:e=>fD(t,e),getTransactionCount:e=>C1(t,e),getTransactionReceipt:e=>np(t,e),multicall:e=>L6(t,e),prepareTransactionRequest:e=>O0(t,e),readContract:e=>Ks(t,e),sendRawTransaction:e=>Y5(t,e),simulate:e=>Dw(t,e),simulateBlocks:e=>Dw(t,e),simulateCalls:e=>AD(t,e),simulateContract:e=>S4(t,e),verifyHash:e=>z0(t,e),verifyMessage:e=>OD(t,e),verifySiweMessage:e=>jD(t,e),verifyTypedData:e=>BD(t,e),uninstallFilter:e=>L0(t,e),waitForTransactionReceipt:e=>H6(t,e),watchBlocks:e=>$D(t,e),watchBlockNumber:e=>W6(t,e),watchContractEvent:e=>O4(t,e),watchEvent:e=>DD(t,e),watchPendingTransactions:e=>V6(t,e)}}function Oce(t){const{key:e="public",name:n="Public Client"}=t;return U1({...t,key:e,name:n,type:"publicClient"}).extend(qD)}async function Bce(t,e){const{account:n=t.account,chainId:r,nonce:s}=e;if(!n)throw new F0({docsPath:"/docs/eip7702/prepareAuthorization"});const i=yr(n),o=(()=>{if(e.executor)return e.executor==="self"?e.executor:yr(e.executor)})(),a={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof a.chainId>"u"&&(a.chainId=t.chain?.id??await He(t,k0,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await He(t,C1,"getTransactionCount")({address:i.address,blockTag:"pending"}),(o==="self"||o?.address&&yl(o.address,i.address))&&(a.nonce+=1)),a}async function zD(t,{account:e=t.account,message:n}){if(!e)throw new F0({docsPath:"/docs/actions/wallet/signMessage"});const r=yr(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?_c(n):n.raw instanceof Uint8Array?bi(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}function X1({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const u=X5();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:EB(r,{methods:e,retryCount:s,retryDelay:i,uid:u}),value:c}}function WD(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>X1({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function y2(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=HD,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:u=4e3,timeout:l,...d})=>{let h=t,f=()=>{};const y=X1({key:n,name:r,async request({method:m,params:v}){let T;const O=async(A=0)=>{const M=h[A]({...d,chain:c,retryCount:0,timeout:l});try{const P=await M.request({method:m,params:v});return f({method:m,params:v,response:P,transport:M,status:"success"}),P}catch(P){if(f({error:P,method:m,params:v,transport:M,status:"error"}),i(P)||A===h.length-1||(T??=h.slice(A+1).some(I=>{const{include:F,exclude:W}=I({chain:c}).config.methods||{};return F?F.includes(m):W?!W.includes(m):!0}),!T))throw P;return O(A+1)}};return O()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:m=>f=m,transports:h.map(m=>m({chain:c,retryCount:0}))});if(s){const m=typeof s=="object"?s:{};VD({chain:c,interval:m.interval??u,onTransports:v=>h=v,ping:m.ping,sampleCount:m.sampleCount,timeout:m.timeout,transports:h,weights:m.weights})}return y}}function HD(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===tl.code||t.code===zn.code||nc.nodeMessage.test(t.message)||t.code===5e3))}function VD({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:u=.3}=a,l=[],d=async()=>{const h=await Promise.all(o.map(async m=>{const v=m({chain:t,retryCount:0,timeout:i}),T=Date.now();let O,A;try{await(r?r({transport:v}):v.request({method:"net_listening"})),A=1}catch{A=0}finally{O=Date.now()}return{latency:O-T,success:A}}));l.push(h),l.length>s&&l.shift();const f=Math.max(...l.map(m=>Math.max(...m.map(({latency:v})=>v)))),y=o.map((m,v)=>{const T=l.map(I=>I[v].latency),A=1-T.reduce((I,F)=>I+F,0)/T.length/f,M=l.map(I=>I[v].success),P=M.reduce((I,F)=>I+F,0)/M.length;return P===0?[0,v]:[u*A+c*P,v]}).sort((m,v)=>v[0]-m[0]);n(y.map(([,m])=>o[m])),await kp(e),d()};d()}class KD extends fe{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function bf(t,e={}){const{batch:n,fetchFn:r,fetchOptions:s,key:i="http",methods:o,name:a="HTTP JSON-RPC",onFetchRequest:c,onFetchResponse:u,retryDelay:l,raw:d}=e;return({chain:h,retryCount:f,timeout:y})=>{const{batchSize:m=1e3,wait:v=0}=typeof n=="object"?n:{},T=e.retryCount??f,O=y??e.timeout??1e4,A=t||h?.rpcUrls.default.http[0];if(!A)throw new KD;const M=RB(A,{fetchFn:r,fetchOptions:s,onRequest:c,onResponse:u,timeout:O});return X1({key:i,methods:o,name:a,async request({method:P,params:I}){const F={method:P,params:I},{schedule:W}=K5({id:A,wait:v,shouldSplitBatch(N){return N.length>m},fn:N=>M.request({body:N}),sort:(N,R)=>N.id-R.id}),D=async N=>n?W(N):[await M.request({body:N})],[{error:k,result:B}]=await D(F);if(d)return{error:k,result:B};if(k)throw new y1({body:F,error:k,url:A});return B},retryCount:T,retryDelay:l,timeout:O,type:"http"},{fetchOptions:s,url:A})}}function $ce(t){const{r:e,s:n}=Y1.Signature.fromCompact(t.slice(2,130)),r=+`0x${t.slice(130)}`,[s,i]=(()=>{if(r===0||r===1)return[void 0,r];if(r===27)return[BigInt(r),0];if(r===28)return[BigInt(r),1];throw new Error("Invalid yParityOrV value")})();return typeof s<"u"?{r:je(e,{size:32}),s:je(n,{size:32}),v:s,yParity:i}:{r:je(e,{size:32}),s:je(n,{size:32}),yParity:i}}const _m={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return gl(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},W0={async getMyTokensWithBalance(t){const e=Me.state.address,n=Y.state.activeCaipNetwork,r=ve.getConnectorId("eip155")===ne.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=ye.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace===ne.CHAIN.EVM&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await We.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){try{const n=_m.getChainIdHexFromCAIP2ChainId(e.caipNetworkId);if(!(await Ae.getCapabilities(t))?.[n]?.assetDiscovery?.supported)return null;const s=await Ae.walletGetAssets({account:t,chainFilter:[n]});if(!_m.isWalletGetAssetsResponse(s))return null;const o=(s[n]||[]).map(a=>_m.createBalance(a,e.caipNetworkId));return ye.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:o},timestamp:Date.now()}),o}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},Ni=Dt({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),GD={state:Ni,replaceState(t){t&&Object.assign(Ni,Oa(t))},subscribe(t){return Y.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return Y.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){Y.setAccountProp("status",t,e)},getCaipAddress(t){return Y.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?ke.getPlainAddress(t):void 0;e===Y.state.activeChain&&(Y.state.activeCaipAddress=t),Y.setAccountProp("caipAddress",t,e),Y.setAccountProp("address",n,e)},setBalance(t,e,n){Y.setAccountProp("balance",t,n),Y.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){Y.setAccountProp("profileName",t,e)},setProfileImage(t,e){Y.setAccountProp("profileImage",t,e)},setUser(t,e){Y.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){Y.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){Y.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){Y.setAccountProp("currentTab",t,Y.state.activeChain)},setTokenBalance(t,e){t&&Y.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){Y.setAccountProp("shouldUpdateToAddress",t,e)},addAddressLabel(t,e,n){const r=Y.getAccountProp("addressLabels",n)||new Map;r.set(t,e),Y.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=Y.getAccountProp("addressLabels",e)||new Map;n.delete(t),Y.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){Y.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){Y.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&Y.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){Y.setAccountProp("socialWindow",t?Oa(t):void 0,e)},setFarcasterUrl(t,e){Y.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){Ni.balanceLoading=!0;const e=Y.state.activeCaipNetwork?.caipNetworkId,n=Y.state.activeCaipNetwork?.chainNamespace,r=Y.state.activeCaipAddress,s=r?ke.getPlainAddress(r):void 0;if(Ni.lastRetry&&!ke.isAllowedRetry(Ni.lastRetry,30*At.ONE_SEC_MS))return Ni.balanceLoading=!1,[];try{if(s&&e&&n){const i=await W0.getMyTokensWithBalance();return Me.setTokenBalance(i,n),Ni.lastRetry=void 0,Ni.balanceLoading=!1,i}}catch(i){Ni.lastRetry=Date.now(),t?.(i),vn.showError("Token Balance Unavailable")}finally{Ni.balanceLoading=!1}return[]},resetAccount(t){Y.resetAccount(t)}},Me=Vr(GD),YD={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=Y.state.activeCaipNetwork,r=Fe.state.data;if(t.id===n?.id)return;const i=Me.getCaipAddress(Y.state.activeChain),o=t.chainNamespace!==Y.state.activeChain,a=Me.getCaipAddress(t.chainNamespace),u=ve.getConnectorId(Y.state.activeChain)===ne.CONNECTOR_ID.AUTH,l=ne.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||u&&l?Fe.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?Fe.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):Fe.push("SwitchNetwork",{...r,network:t})}},Yr=Dt({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),ZD={state:Yr,subscribe(t){return In(Yr,()=>t(Yr))},subscribeKey(t,e){return Nn(Yr,t,e)},async open(t){const e=t?.namespace,n=Y.state.activeChain,r=e&&e!==n,s=Y.getAccountData(t?.namespace)?.caipAddress;if(Ae.state.wcBasic?Ke.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await Ke.prefetch(),ve.setFilterByNamespace(t?.namespace),Et.setLoading(!0,e),e&&r){const i=Y.getNetworkData(e)?.caipNetwork||Y.getRequestedCaipNetworks(e)[0];i&&YD.onSwitchNetwork({network:i,ignoreSwitchConfirmation:!0})}else{const i=Y.state.noAdapters;pe.state.manualWCControl||i&&!s?ke.isMobile()?Fe.reset("AllWallets"):Fe.reset("ConnectingWalletConnectBasic"):t?.view?Fe.reset(t.view,t.data):s?Fe.reset("Account"):Fe.reset("Connect")}Yr.open=!0,li.set({open:!0}),Nt.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=pe.state.enableEmbedded,e=!!Y.state.activeCaipAddress;Yr.open&&Nt.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Yr.open=!1,Fe.reset("Connect"),Et.clearLoading(),t?e?Fe.replace("Account"):Fe.push("Connect"):li.set({open:!1}),Ae.resetUri()},setLoading(t,e){e&&Yr.loadingNamespaceMap.set(e,t),Yr.loading=t,li.set({loading:t})},clearLoading(){Yr.loadingNamespaceMap.clear(),Yr.loading=!1,li.set({loading:!1})},shake(){Yr.shake||(Yr.shake=!0,setTimeout(()=>{Yr.shake=!1},500))}},Et=Vr(ZD),hd={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},Fw={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},JD={providers:dS,selectedProvider:null,error:null,purchaseCurrency:hd,paymentCurrency:Fw,purchaseCurrencies:[hd],paymentCurrencies:[],quotesLoading:!1},Ct=Dt(JD),XD={state:Ct,subscribe(t){return In(Ct,()=>t(Ct))},subscribeKey(t,e){return Nn(Ct,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=Y.state.activeChain,n=e===ne.CHAIN.SOLANA?"SOL":"USDC",r=Y.getAccountProp("address",e)??"",s=new URL(t.url);s.searchParams.append("publicKey",J8),s.searchParams.append("destinationCurrencyCode",n),s.searchParams.append("walletAddress",r),s.searchParams.append("externalCustomerId",pe.state.projectId),Ct.selectedProvider={...t,url:s.toString()}}else Ct.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=dS.filter(r=>e.includes(r.name));Ct.providers=n}else Ct.providers=[]},setPurchaseCurrency(t){Ct.purchaseCurrency=t},setPaymentCurrency(t){Ct.paymentCurrency=t},setPurchaseAmount(t){jw.state.purchaseAmount=t},setPaymentAmount(t){jw.state.paymentAmount=t},async getAvailableCurrencies(){const t=await We.getOnrampOptions();Ct.purchaseCurrencies=t.purchaseCurrencies,Ct.paymentCurrencies=t.paymentCurrencies,Ct.paymentCurrency=t.paymentCurrencies[0]||Fw,Ct.purchaseCurrency=t.purchaseCurrencies[0]||hd,await Ke.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await Ke.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){Ct.quotesLoading=!0;try{const t=await We.getOnrampQuote({purchaseCurrency:Ct.purchaseCurrency,paymentCurrency:Ct.paymentCurrency,amount:Ct.paymentAmount?.toString()||"0",network:Ct.purchaseCurrency?.symbol});return Ct.quotesLoading=!1,Ct.purchaseAmount=Number(t?.purchaseAmount.amount),t}catch(t){return Ct.error=t.message,Ct.quotesLoading=!1,null}finally{Ct.quotesLoading=!1}},resetState(){Ct.selectedProvider=null,Ct.error=null,Ct.purchaseCurrency=hd,Ct.paymentCurrency=Fw,Ct.purchaseCurrencies=[hd],Ct.paymentCurrencies=[],Ct.paymentAmount=void 0,Ct.purchaseAmount=void 0,Ct.quotesLoading=!1}},jw=Vr(XD),fa={getGasPriceInEther(t,e){const n=e*t;return Number(n)/1e18},getGasPriceInUSD(t,e,n){const r=fa.getGasPriceInEther(e,n);return nn.bigNumber(t).times(r).toNumber()},getPriceImpact({sourceTokenAmount:t,sourceTokenPriceInUSD:e,toTokenPriceInUSD:n,toTokenAmount:r}){const s=nn.bigNumber(t).times(e),i=nn.bigNumber(r).times(n);return s.minus(i).div(s).times(100).toNumber()},getMaxSlippage(t,e){const n=nn.bigNumber(t).div(100);return nn.multiply(e,n).toNumber()},getProviderFee(t,e=.0085){return nn.bigNumber(t).times(e).toString()},isInsufficientNetworkTokenForGas(t,e){const n=e||"0";return nn.bigNumber(t).eq(0)?!0:nn.bigNumber(nn.bigNumber(n)).gt(t)},isInsufficientSourceTokenForSwap(t,e,n){const r=n?.find(i=>i.address===e)?.quantity?.numeric;return nn.bigNumber(r||"0").lt(t)},getToTokenAmount({sourceToken:t,toToken:e,sourceTokenPrice:n,toTokenPrice:r,sourceTokenAmount:s}){if(s==="0"||!t||!e)return"0";const i=t.decimals,o=n,a=e.decimals,c=r;if(c<=0)return"0";const u=nn.bigNumber(s).times(.0085),d=nn.bigNumber(s).minus(u).times(nn.bigNumber(10).pow(i)),h=nn.bigNumber(o).div(c),f=i-a;return d.times(h).div(nn.bigNumber(10).pow(f)).div(nn.bigNumber(10).pow(a)).toFixed(a).toString()}},w2=15e4,QD=6,Ur={initializing:!1,initialized:!1,loadingPrices:!1,loadingQuote:!1,loadingApprovalTransaction:!1,loadingBuildTransaction:!1,loadingTransaction:!1,fetchError:!1,approvalTransaction:void 0,swapTransaction:void 0,transactionError:void 0,sourceToken:void 0,sourceTokenAmount:"",sourceTokenPriceInUSD:0,toToken:void 0,toTokenAmount:"",toTokenPriceInUSD:0,networkPrice:"0",networkBalanceInUSD:"0",networkTokenSymbol:"",inputError:void 0,slippage:At.CONVERT_SLIPPAGE_TOLERANCE,tokens:void 0,popularTokens:void 0,suggestedTokens:void 0,foundTokens:void 0,myTokensWithBalance:void 0,tokensPriceMap:{},gasFee:"0",gasPriceInUSD:0,priceImpact:void 0,maxSlippage:void 0,providerFee:void 0},ae=Dt(Ur),rp={state:ae,subscribe(t){return In(ae,()=>t(ae))},subscribeKey(t,e){return Nn(ae,t,e)},getParams(){const t=Y.state.activeCaipAddress,e=ke.getPlainAddress(t),n=s1(),r=ve.getConnectorId(Y.state.activeChain);if(!e)throw new Error("No address found to swap the tokens from.");const s=!ae.toToken?.address||!ae.toToken?.decimals,i=!ae.sourceToken?.address||!ae.sourceToken?.decimals||!nn.bigNumber(ae.sourceTokenAmount).gt(0),o=!ae.sourceTokenAmount;return{networkAddress:n,fromAddress:e,fromCaipAddress:t,sourceTokenAddress:ae.sourceToken?.address,toTokenAddress:ae.toToken?.address,toTokenAmount:ae.toTokenAmount,toTokenDecimals:ae.toToken?.decimals,sourceTokenAmount:ae.sourceTokenAmount,sourceTokenDecimals:ae.sourceToken?.decimals,invalidToToken:s,invalidSourceToken:i,invalidSourceTokenAmount:o,availableToSwap:t&&!s&&!i&&!o,isAuthConnector:r===ne.CONNECTOR_ID.AUTH}},setSourceToken(t){if(!t){ae.sourceToken=t,ae.sourceTokenAmount="",ae.sourceTokenPriceInUSD=0;return}ae.sourceToken=t,Je.setTokenPrice(t.address,"sourceToken")},setSourceTokenAmount(t){ae.sourceTokenAmount=t},setToToken(t){if(!t){ae.toToken=t,ae.toTokenAmount="",ae.toTokenPriceInUSD=0;return}ae.toToken=t,Je.setTokenPrice(t.address,"toToken")},setToTokenAmount(t){ae.toTokenAmount=t?nn.formatNumberToLocalString(t,QD):""},async setTokenPrice(t,e){let n=ae.tokensPriceMap[t]||0;n||(ae.loadingPrices=!0,n=await Je.getAddressPrice(t)),e==="sourceToken"?ae.sourceTokenPriceInUSD=n:e==="toToken"&&(ae.toTokenPriceInUSD=n),ae.loadingPrices&&(ae.loadingPrices=!1),Je.getParams().availableToSwap&&Je.swapTokens()},switchTokens(){if(ae.initializing||!ae.initialized)return;const t=ae.toToken?{...ae.toToken}:void 0,e=ae.sourceToken?{...ae.sourceToken}:void 0,n=t&&ae.toTokenAmount===""?"1":ae.toTokenAmount;Je.setSourceToken(t),Je.setToToken(e),Je.setSourceTokenAmount(n),Je.setToTokenAmount(""),Je.swapTokens()},resetState(){ae.myTokensWithBalance=Ur.myTokensWithBalance,ae.tokensPriceMap=Ur.tokensPriceMap,ae.initialized=Ur.initialized,ae.sourceToken=Ur.sourceToken,ae.sourceTokenAmount=Ur.sourceTokenAmount,ae.sourceTokenPriceInUSD=Ur.sourceTokenPriceInUSD,ae.toToken=Ur.toToken,ae.toTokenAmount=Ur.toTokenAmount,ae.toTokenPriceInUSD=Ur.toTokenPriceInUSD,ae.networkPrice=Ur.networkPrice,ae.networkTokenSymbol=Ur.networkTokenSymbol,ae.networkBalanceInUSD=Ur.networkBalanceInUSD,ae.inputError=Ur.inputError,ae.myTokensWithBalance=Ur.myTokensWithBalance},resetValues(){const{networkAddress:t}=Je.getParams(),e=ae.tokens?.find(n=>n.address===t);Je.setSourceToken(e),Je.setToToken(void 0)},getApprovalLoadingState(){return ae.loadingApprovalTransaction},clearError(){ae.transactionError=void 0},async initializeState(){if(!ae.initializing){if(ae.initializing=!0,!ae.initialized)try{await Je.fetchTokens(),ae.initialized=!0}catch{ae.initialized=!1,vn.showError("Failed to initialize swap"),Fe.goBack()}ae.initializing=!1}},async fetchTokens(){const{networkAddress:t}=Je.getParams();await Je.getTokenList(),await Je.getNetworkTokenPrice(),await Je.getMyTokensWithBalance();const e=ae.tokens?.find(n=>n.address===t);e&&(ae.networkTokenSymbol=e.symbol,Je.setSourceToken(e),Je.setSourceTokenAmount("1"))},async getTokenList(){const t=await sd.getTokenList();ae.tokens=t,ae.popularTokens=t.sort((e,n)=>e.symbol<n.symbol?-1:e.symbol>n.symbol?1:0),ae.suggestedTokens=t.filter(e=>!!At.SWAP_SUGGESTED_TOKENS.includes(e.symbol),{})},async getAddressPrice(t){const e=ae.tokensPriceMap[t];if(e)return e;const r=(await We.fetchTokenPrice({addresses:[t]}))?.fungibles||[],i=[...ae.tokens||[],...ae.myTokensWithBalance||[]]?.find(c=>c.address===t)?.symbol,o=r.find(c=>c.symbol.toLowerCase()===i?.toLowerCase())?.price||0,a=parseFloat(o.toString());return ae.tokensPriceMap[t]=a,a},async getNetworkTokenPrice(){const{networkAddress:t}=Je.getParams(),n=(await We.fetchTokenPrice({addresses:[t]}).catch(()=>(vn.showError("Failed to fetch network token price"),{fungibles:[]}))).fungibles?.[0],r=n?.price.toString()||"0";ae.tokensPriceMap[t]=parseFloat(r),ae.networkTokenSymbol=n?.symbol||"",ae.networkPrice=r},async getMyTokensWithBalance(t){const e=await W0.getMyTokensWithBalance(t),n=sd.mapBalancesToSwapTokens(e);n&&(await Je.getInitialGasPrice(),Je.setBalances(n))},setBalances(t){const{networkAddress:e}=Je.getParams(),n=Y.state.activeCaipNetwork;if(!n)return;const r=t.find(s=>s.address===e);t.forEach(s=>{ae.tokensPriceMap[s.address]=s.price||0}),ae.myTokensWithBalance=t.filter(s=>s.address.startsWith(n.caipNetworkId)),ae.networkBalanceInUSD=r?nn.multiply(r.quantity.numeric,r.price).toString():"0"},async getInitialGasPrice(){const t=await sd.fetchGasPrice();if(!t)return{gasPrice:null,gasPriceInUSD:null};switch(Y.state?.activeCaipNetwork?.chainNamespace){case ne.CHAIN.SOLANA:return ae.gasFee=t.standard??"0",ae.gasPriceInUSD=nn.multiply(t.standard,ae.networkPrice).div(1e9).toNumber(),{gasPrice:BigInt(ae.gasFee),gasPriceInUSD:Number(ae.gasPriceInUSD)};case ne.CHAIN.EVM:default:const e=t.standard??"0",n=BigInt(e),r=BigInt(w2),s=fa.getGasPriceInUSD(ae.networkPrice,r,n);return ae.gasFee=e,ae.gasPriceInUSD=s,{gasPrice:n,gasPriceInUSD:s}}},async swapTokens(){const t=Me.state.address,e=ae.sourceToken,n=ae.toToken,r=nn.bigNumber(ae.sourceTokenAmount).gt(0);if(r||Je.setToTokenAmount(""),!n||!e||ae.loadingPrices||!r)return;ae.loadingQuote=!0;const s=nn.bigNumber(ae.sourceTokenAmount).times(10**e.decimals).round(0);try{const i=await We.fetchSwapQuote({userAddress:t,from:e.address,to:n.address,gasPrice:ae.gasFee,amount:s.toString()});ae.loadingQuote=!1;const o=i?.quotes?.[0]?.toAmount;if(!o){Jt.open({shortMessage:"Incorrect amount",longMessage:"Please enter a valid amount"},"error");return}const a=nn.bigNumber(o).div(10**n.decimals).toString();Je.setToTokenAmount(a),Je.hasInsufficientToken(ae.sourceTokenAmount,e.address)?ae.inputError="Insufficient balance":(ae.inputError=void 0,Je.setTransactionDetails())}catch{ae.loadingQuote=!1,ae.inputError="Insufficient balance"}},async getTransaction(){const{fromCaipAddress:t,availableToSwap:e}=Je.getParams(),n=ae.sourceToken,r=ae.toToken;if(!(!t||!e||!n||!r||ae.loadingQuote))try{ae.loadingBuildTransaction=!0;const s=await sd.fetchSwapAllowance({userAddress:t,tokenAddress:n.address,sourceTokenAmount:ae.sourceTokenAmount,sourceTokenDecimals:n.decimals});let i;return s?i=await Je.createSwapTransaction():i=await Je.createAllowanceTransaction(),ae.loadingBuildTransaction=!1,ae.fetchError=!1,i}catch{Fe.goBack(),vn.showError("Failed to check allowance"),ae.loadingBuildTransaction=!1,ae.approvalTransaction=void 0,ae.swapTransaction=void 0,ae.fetchError=!0;return}},async createAllowanceTransaction(){const{fromCaipAddress:t,sourceTokenAddress:e,toTokenAddress:n}=Je.getParams();if(!(!t||!n)){if(!e)throw new Error("createAllowanceTransaction - No source token address found.");try{const r=await We.generateApproveCalldata({from:e,to:n,userAddress:t}),s=ke.getPlainAddress(r.tx.from);if(!s)throw new Error("SwapController:createAllowanceTransaction - address is required");const i={data:r.tx.data,to:s,gasPrice:BigInt(r.tx.eip155.gasPrice),value:BigInt(r.tx.value),toAmount:ae.toTokenAmount};return ae.swapTransaction=void 0,ae.approvalTransaction={data:i.data,to:i.to,gasPrice:i.gasPrice,value:i.value,toAmount:i.toAmount},{data:i.data,to:i.to,gasPrice:i.gasPrice,value:i.value,toAmount:i.toAmount}}catch{Fe.goBack(),vn.showError("Failed to create approval transaction"),ae.approvalTransaction=void 0,ae.swapTransaction=void 0,ae.fetchError=!0;return}}},async createSwapTransaction(){const{networkAddress:t,fromCaipAddress:e,sourceTokenAmount:n}=Je.getParams(),r=ae.sourceToken,s=ae.toToken;if(!e||!n||!r||!s)return;const i=Ae.parseUnits(n,r.decimals)?.toString();try{const o=await We.generateSwapCalldata({userAddress:e,from:r.address,to:s.address,amount:i,disableEstimate:!0}),a=r.address===t,c=BigInt(o.tx.eip155.gas),u=BigInt(o.tx.eip155.gasPrice),l=ke.getPlainAddress(o.tx.to);if(!l)throw new Error("SwapController:createSwapTransaction - address is required");const d={data:o.tx.data,to:l,gas:c,gasPrice:u,value:BigInt(a?i??"0":"0"),toAmount:ae.toTokenAmount};return ae.gasPriceInUSD=fa.getGasPriceInUSD(ae.networkPrice,c,u),ae.approvalTransaction=void 0,ae.swapTransaction=d,d}catch{Fe.goBack(),vn.showError("Failed to create transaction"),ae.approvalTransaction=void 0,ae.swapTransaction=void 0,ae.fetchError=!0;return}},onEmbeddedWalletApprovalSuccess(){vn.showLoading("Approve limit increase in your wallet"),Fe.replace("SwapPreview")},async sendTransactionForApproval(t){const{fromAddress:e,isAuthConnector:n}=Je.getParams();ae.loadingApprovalTransaction=!0,n?Fe.pushTransactionStack({onSuccess:Je.onEmbeddedWalletApprovalSuccess}):vn.showLoading("Approve limit increase in your wallet");try{await Ae.sendTransaction({address:e,to:t.to,data:t.data,value:t.value,chainNamespace:ne.CHAIN.EVM}),await Je.swapTokens(),await Je.getTransaction(),ae.approvalTransaction=void 0,ae.loadingApprovalTransaction=!1}catch(s){const i=s;ae.transactionError=i?.shortMessage,ae.loadingApprovalTransaction=!1,vn.showError(i?.shortMessage||"Transaction error"),Nt.sendEvent({type:"track",event:"SWAP_APPROVAL_ERROR",properties:{message:i?.shortMessage||i?.message||"Unknown",network:Y.state.activeCaipNetwork?.caipNetworkId||"",swapFromToken:Je.state.sourceToken?.symbol||"",swapToToken:Je.state.toToken?.symbol||"",swapFromAmount:Je.state.sourceTokenAmount||"",swapToAmount:Je.state.toTokenAmount||"",isSmartAccount:gr(ne.CHAIN.EVM)===An.ACCOUNT_TYPES.SMART_ACCOUNT}})}},async sendTransactionForSwap(t){if(!t)return;const{fromAddress:e,toTokenAmount:n,isAuthConnector:r}=Je.getParams();ae.loadingTransaction=!0;const s=`Swapping ${ae.sourceToken?.symbol} to ${nn.formatNumberToLocalString(n,3)} ${ae.toToken?.symbol}`,i=`Swapped ${ae.sourceToken?.symbol} to ${nn.formatNumberToLocalString(n,3)} ${ae.toToken?.symbol}`;r?Fe.pushTransactionStack({onSuccess(){Fe.replace("Account"),vn.showLoading(s),rp.resetState()}}):vn.showLoading("Confirm transaction in your wallet");try{const o=[ae.sourceToken?.address,ae.toToken?.address].join(","),a=await Ae.sendTransaction({address:e,to:t.to,data:t.data,value:t.value,chainNamespace:ne.CHAIN.EVM});return ae.loadingTransaction=!1,vn.showSuccess(i),Nt.sendEvent({type:"track",event:"SWAP_SUCCESS",properties:{network:Y.state.activeCaipNetwork?.caipNetworkId||"",swapFromToken:Je.state.sourceToken?.symbol||"",swapToToken:Je.state.toToken?.symbol||"",swapFromAmount:Je.state.sourceTokenAmount||"",swapToAmount:Je.state.toTokenAmount||"",isSmartAccount:gr(ne.CHAIN.EVM)===An.ACCOUNT_TYPES.SMART_ACCOUNT}}),rp.resetState(),r||Fe.replace("Account"),rp.getMyTokensWithBalance(o),a}catch(o){const a=o;ae.transactionError=a?.shortMessage,ae.loadingTransaction=!1,vn.showError(a?.shortMessage||"Transaction error"),Nt.sendEvent({type:"track",event:"SWAP_ERROR",properties:{message:a?.shortMessage||a?.message||"Unknown",network:Y.state.activeCaipNetwork?.caipNetworkId||"",swapFromToken:Je.state.sourceToken?.symbol||"",swapToToken:Je.state.toToken?.symbol||"",swapFromAmount:Je.state.sourceTokenAmount||"",swapToAmount:Je.state.toTokenAmount||"",isSmartAccount:gr(ne.CHAIN.EVM)===An.ACCOUNT_TYPES.SMART_ACCOUNT}});return}},hasInsufficientToken(t,e){return fa.isInsufficientSourceTokenForSwap(t,e,ae.myTokensWithBalance)},setTransactionDetails(){const{toTokenAddress:t,toTokenDecimals:e}=Je.getParams();!t||!e||(ae.gasPriceInUSD=fa.getGasPriceInUSD(ae.networkPrice,BigInt(ae.gasFee),BigInt(w2)),ae.priceImpact=fa.getPriceImpact({sourceTokenAmount:ae.sourceTokenAmount,sourceTokenPriceInUSD:ae.sourceTokenPriceInUSD,toTokenPriceInUSD:ae.toTokenPriceInUSD,toTokenAmount:ae.toTokenAmount}),ae.maxSlippage=fa.getMaxSlippage(ae.slippage,ae.toTokenAmount),ae.providerFee=fa.getProviderFee(ae.sourceTokenAmount))}},Je=Vr(rp),ni=Dt({message:"",open:!1,triggerRect:{width:0,height:0,top:0,left:0},variant:"shade"}),eU={state:ni,subscribe(t){return In(ni,()=>t(ni))},subscribeKey(t,e){return Nn(ni,t,e)},showTooltip({message:t,triggerRect:e,variant:n}){ni.open=!0,ni.message=t,ni.triggerRect=e,ni.variant=n},hide(){ni.open=!1,ni.message="",ni.triggerRect={width:0,height:0,top:0,left:0}}},Dce=Vr(eU),b2=2147483648,tU={convertEVMChainIdToCoinType(t){if(t>=b2)throw new Error("Invalid chainId");return(b2|t)>>>0}},Ps=Dt({suggestions:[],loading:!1}),nU={state:Ps,subscribe(t){return In(Ps,()=>t(Ps))},subscribeKey(t,e){return Nn(Ps,t,e)},async resolveName(t){try{return await We.lookupEnsName(t)}catch(e){const n=e;throw new Error(n?.reasons?.[0]?.description||"Error resolving name")}},async isNameRegistered(t){try{return await We.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Ps.loading=!0,Ps.suggestions=[];const e=await We.getEnsNameSuggestions(t);return Ps.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],Ps.suggestions}catch(e){const n=fd.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{Ps.loading=!1}},async getNamesForAddress(t){try{if(!Y.state.activeCaipNetwork)return[];const n=ye.getEnsFromCacheForAddress(t);if(n)return n;const r=await We.reverseLookupEnsName({address:t});return ye.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=fd.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=Y.state.activeCaipNetwork,n=Me.state.address,r=ve.getAuthConnector();if(!e)throw new Error("Network not found");if(!n||!r)throw new Error("Address or auth connector not found");Ps.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Fe.pushTransactionStack({onCancel(){Fe.replace("RegisterAccountName")}});const i=await Ae.signMessage(s);Ps.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=tU.convertEVMChainIdToCoinType(Number(o));await We.registerEnsName({coinType:a,address:n,signature:i,message:s}),Me.setProfileName(t,e.chainNamespace),Fe.replace("RegisterAccountNameSuccess")}catch(s){const i=fd.parseEnsApiError(s,`Error registering name ${t}`);throw Fe.replace("RegisterAccountName"),new Error(i)}finally{Ps.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){return t?.reasons?.[0]?.description||e}},fd=Vr(nU),$l=Dt({isLegalCheckboxChecked:!1}),Uce={state:$l,subscribe(t){return In($l,()=>t($l))},subscribeKey(t,e){return Nn($l,t,e)},setIsLegalCheckboxChecked(t){$l.isLegalCheckboxChecked=t}};var Q1={},H0={};H0.byteLength=iU;H0.toByteArray=aU;H0.fromByteArray=lU;var qi=[],Ms=[],rU=typeof Uint8Array<"u"?Uint8Array:Array,Cm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var nu=0,sU=Cm.length;nu<sU;++nu)qi[nu]=Cm[nu],Ms[Cm.charCodeAt(nu)]=nu;Ms[45]=62;Ms[95]=63;function K6(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function iU(t){var e=K6(t),n=e[0],r=e[1];return(n+r)*3/4-r}function oU(t,e,n){return(e+n)*3/4-n}function aU(t){var e,n=K6(t),r=n[0],s=n[1],i=new rU(oU(t,r,s)),o=0,a=s>0?r-4:r,c;for(c=0;c<a;c+=4)e=Ms[t.charCodeAt(c)]<<18|Ms[t.charCodeAt(c+1)]<<12|Ms[t.charCodeAt(c+2)]<<6|Ms[t.charCodeAt(c+3)],i[o++]=e>>16&255,i[o++]=e>>8&255,i[o++]=e&255;return s===2&&(e=Ms[t.charCodeAt(c)]<<2|Ms[t.charCodeAt(c+1)]>>4,i[o++]=e&255),s===1&&(e=Ms[t.charCodeAt(c)]<<10|Ms[t.charCodeAt(c+1)]<<4|Ms[t.charCodeAt(c+2)]>>2,i[o++]=e>>8&255,i[o++]=e&255),i}function cU(t){return qi[t>>18&63]+qi[t>>12&63]+qi[t>>6&63]+qi[t&63]}function uU(t,e,n){for(var r,s=[],i=e;i<n;i+=3)r=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),s.push(cU(r));return s.join("")}function lU(t){for(var e,n=t.length,r=n%3,s=[],i=16383,o=0,a=n-r;o<a;o+=i)s.push(uU(t,o,o+i>a?a:o+i));return r===1?(e=t[n-1],s.push(qi[e>>2]+qi[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],s.push(qi[e>>10]+qi[e>>4&63]+qi[e<<2&63]+"=")),s.join("")}var ev={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ev.read=function(t,e,n,r,s){var i,o,a=s*8-r-1,c=(1<<a)-1,u=c>>1,l=-7,d=n?s-1:0,h=n?-1:1,f=t[e+d];for(d+=h,i=f&(1<<-l)-1,f>>=-l,l+=a;l>0;i=i*256+t[e+d],d+=h,l-=8);for(o=i&(1<<-l)-1,i>>=-l,l+=r;l>0;o=o*256+t[e+d],d+=h,l-=8);if(i===0)i=1-u;else{if(i===c)return o?NaN:(f?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-u}return(f?-1:1)*o*Math.pow(2,i-r)};ev.write=function(t,e,n,r,s,i){var o,a,c,u=i*8-s-1,l=(1<<u)-1,d=l>>1,h=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:i-1,y=r?1:-1,m=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+d>=1?e+=h/c:e+=h*Math.pow(2,1-d),e*c>=2&&(o++,c/=2),o+d>=l?(a=0,o=l):o+d>=1?(a=(e*c-1)*Math.pow(2,s),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,s),o=0));s>=8;t[n+f]=a&255,f+=y,a/=256,s-=8);for(o=o<<s|a,u+=s;u>0;t[n+f]=o&255,f+=y,o/=256,u-=8);t[n+f-y]|=m*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=H0,n=ev,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=P,t.INSPECT_MAX_BYTES=50;const s=2147483647;t.kMaxLength=s;const{Uint8Array:i,ArrayBuffer:o,SharedArrayBuffer:a}=globalThis;l.TYPED_ARRAY_SUPPORT=c(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{const H=new i(1),S={foo:function(){return 42}};return Object.setPrototypeOf(S,i.prototype),Object.setPrototypeOf(H,S),H.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function u(H){if(H>s)throw new RangeError('The value "'+H+'" is invalid for option "size"');const S=new i(H);return Object.setPrototypeOf(S,l.prototype),S}function l(H,S,$){if(typeof H=="number"){if(typeof S=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(H)}return d(H,S,$)}l.poolSize=8192;function d(H,S,$){if(typeof H=="string")return m(H,S);if(o.isView(H))return T(H);if(H==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof H);if(Mn(H,o)||H&&Mn(H.buffer,o)||typeof a<"u"&&(Mn(H,a)||H&&Mn(H.buffer,a)))return O(H,S,$);if(typeof H=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Z=H.valueOf&&H.valueOf();if(Z!=null&&Z!==H)return l.from(Z,S,$);const ee=A(H);if(ee)return ee;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof H[Symbol.toPrimitive]=="function")return l.from(H[Symbol.toPrimitive]("string"),S,$);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof H)}l.from=function(H,S,$){return d(H,S,$)},Object.setPrototypeOf(l.prototype,i.prototype),Object.setPrototypeOf(l,i);function h(H){if(typeof H!="number")throw new TypeError('"size" argument must be of type number');if(H<0)throw new RangeError('The value "'+H+'" is invalid for option "size"')}function f(H,S,$){return h(H),H<=0?u(H):S!==void 0?typeof $=="string"?u(H).fill(S,$):u(H).fill(S):u(H)}l.alloc=function(H,S,$){return f(H,S,$)};function y(H){return h(H),u(H<0?0:M(H)|0)}l.allocUnsafe=function(H){return y(H)},l.allocUnsafeSlow=function(H){return y(H)};function m(H,S){if((typeof S!="string"||S==="")&&(S="utf8"),!l.isEncoding(S))throw new TypeError("Unknown encoding: "+S);const $=I(H,S)|0;let Z=u($);const ee=Z.write(H,S);return ee!==$&&(Z=Z.slice(0,ee)),Z}function v(H){const S=H.length<0?0:M(H.length)|0,$=u(S);for(let Z=0;Z<S;Z+=1)$[Z]=H[Z]&255;return $}function T(H){if(Mn(H,i)){const S=new i(H);return O(S.buffer,S.byteOffset,S.byteLength)}return v(H)}function O(H,S,$){if(S<0||H.byteLength<S)throw new RangeError('"offset" is outside of buffer bounds');if(H.byteLength<S+($||0))throw new RangeError('"length" is outside of buffer bounds');let Z;return S===void 0&&$===void 0?Z=new i(H):$===void 0?Z=new i(H,S):Z=new i(H,S,$),Object.setPrototypeOf(Z,l.prototype),Z}function A(H){if(l.isBuffer(H)){const S=M(H.length)|0,$=u(S);return $.length===0||H.copy($,0,0,S),$}if(H.length!==void 0)return typeof H.length!="number"||Mt(H.length)?u(0):v(H);if(H.type==="Buffer"&&Array.isArray(H.data))return v(H.data)}function M(H){if(H>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return H|0}function P(H){return+H!=H&&(H=0),l.alloc(+H)}l.isBuffer=function(S){return S!=null&&S._isBuffer===!0&&S!==l.prototype},l.compare=function(S,$){if(Mn(S,i)&&(S=l.from(S,S.offset,S.byteLength)),Mn($,i)&&($=l.from($,$.offset,$.byteLength)),!l.isBuffer(S)||!l.isBuffer($))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(S===$)return 0;let Z=S.length,ee=$.length;for(let se=0,ue=Math.min(Z,ee);se<ue;++se)if(S[se]!==$[se]){Z=S[se],ee=$[se];break}return Z<ee?-1:ee<Z?1:0},l.isEncoding=function(S){switch(String(S).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(S,$){if(!Array.isArray(S))throw new TypeError('"list" argument must be an Array of Buffers');if(S.length===0)return l.alloc(0);let Z;if($===void 0)for($=0,Z=0;Z<S.length;++Z)$+=S[Z].length;const ee=l.allocUnsafe($);let se=0;for(Z=0;Z<S.length;++Z){let ue=S[Z];if(Mn(ue,i))se+ue.length>ee.length?(l.isBuffer(ue)||(ue=l.from(ue)),ue.copy(ee,se)):i.prototype.set.call(ee,ue,se);else if(l.isBuffer(ue))ue.copy(ee,se);else throw new TypeError('"list" argument must be an Array of Buffers');se+=ue.length}return ee};function I(H,S){if(l.isBuffer(H))return H.length;if(o.isView(H)||Mn(H,o))return H.byteLength;if(typeof H!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof H);const $=H.length,Z=arguments.length>2&&arguments[2]===!0;if(!Z&&$===0)return 0;let ee=!1;for(;;)switch(S){case"ascii":case"latin1":case"binary":return $;case"utf8":case"utf-8":return Ft(H).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $*2;case"hex":return $>>>1;case"base64":return lt(H).length;default:if(ee)return Z?-1:Ft(H).length;S=(""+S).toLowerCase(),ee=!0}}l.byteLength=I;function F(H,S,$){let Z=!1;if((S===void 0||S<0)&&(S=0),S>this.length||(($===void 0||$>this.length)&&($=this.length),$<=0)||($>>>=0,S>>>=0,$<=S))return"";for(H||(H="utf8");;)switch(H){case"hex":return b(this,S,$);case"utf8":case"utf-8":return _(this,S,$);case"ascii":return z(this,S,$);case"latin1":case"binary":return q(this,S,$);case"base64":return w(this,S,$);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,S,$);default:if(Z)throw new TypeError("Unknown encoding: "+H);H=(H+"").toLowerCase(),Z=!0}}l.prototype._isBuffer=!0;function W(H,S,$){const Z=H[S];H[S]=H[$],H[$]=Z}l.prototype.swap16=function(){const S=this.length;if(S%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let $=0;$<S;$+=2)W(this,$,$+1);return this},l.prototype.swap32=function(){const S=this.length;if(S%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let $=0;$<S;$+=4)W(this,$,$+3),W(this,$+1,$+2);return this},l.prototype.swap64=function(){const S=this.length;if(S%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let $=0;$<S;$+=8)W(this,$,$+7),W(this,$+1,$+6),W(this,$+2,$+5),W(this,$+3,$+4);return this},l.prototype.toString=function(){const S=this.length;return S===0?"":arguments.length===0?_(this,0,S):F.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(S){if(!l.isBuffer(S))throw new TypeError("Argument must be a Buffer");return this===S?!0:l.compare(this,S)===0},l.prototype.inspect=function(){let S="";const $=t.INSPECT_MAX_BYTES;return S=this.toString("hex",0,$).replace(/(.{2})/g,"$1 ").trim(),this.length>$&&(S+=" ... "),"<Buffer "+S+">"},r&&(l.prototype[r]=l.prototype.inspect),l.prototype.compare=function(S,$,Z,ee,se){if(Mn(S,i)&&(S=l.from(S,S.offset,S.byteLength)),!l.isBuffer(S))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof S);if($===void 0&&($=0),Z===void 0&&(Z=S?S.length:0),ee===void 0&&(ee=0),se===void 0&&(se=this.length),$<0||Z>S.length||ee<0||se>this.length)throw new RangeError("out of range index");if(ee>=se&&$>=Z)return 0;if(ee>=se)return-1;if($>=Z)return 1;if($>>>=0,Z>>>=0,ee>>>=0,se>>>=0,this===S)return 0;let ue=se-ee,at=Z-$;const tt=Math.min(ue,at),nt=this.slice(ee,se),Gt=S.slice($,Z);for(let Ze=0;Ze<tt;++Ze)if(nt[Ze]!==Gt[Ze]){ue=nt[Ze],at=Gt[Ze];break}return ue<at?-1:at<ue?1:0};function D(H,S,$,Z,ee){if(H.length===0)return-1;if(typeof $=="string"?(Z=$,$=0):$>2147483647?$=2147483647:$<-2147483648&&($=-2147483648),$=+$,Mt($)&&($=ee?0:H.length-1),$<0&&($=H.length+$),$>=H.length){if(ee)return-1;$=H.length-1}else if($<0)if(ee)$=0;else return-1;if(typeof S=="string"&&(S=l.from(S,Z)),l.isBuffer(S))return S.length===0?-1:k(H,S,$,Z,ee);if(typeof S=="number")return S=S&255,typeof i.prototype.indexOf=="function"?ee?i.prototype.indexOf.call(H,S,$):i.prototype.lastIndexOf.call(H,S,$):k(H,[S],$,Z,ee);throw new TypeError("val must be string, number or Buffer")}function k(H,S,$,Z,ee){let se=1,ue=H.length,at=S.length;if(Z!==void 0&&(Z=String(Z).toLowerCase(),Z==="ucs2"||Z==="ucs-2"||Z==="utf16le"||Z==="utf-16le")){if(H.length<2||S.length<2)return-1;se=2,ue/=2,at/=2,$/=2}function tt(Gt,Ze){return se===1?Gt[Ze]:Gt.readUInt16BE(Ze*se)}let nt;if(ee){let Gt=-1;for(nt=$;nt<ue;nt++)if(tt(H,nt)===tt(S,Gt===-1?0:nt-Gt)){if(Gt===-1&&(Gt=nt),nt-Gt+1===at)return Gt*se}else Gt!==-1&&(nt-=nt-Gt),Gt=-1}else for($+at>ue&&($=ue-at),nt=$;nt>=0;nt--){let Gt=!0;for(let Ze=0;Ze<at;Ze++)if(tt(H,nt+Ze)!==tt(S,Ze)){Gt=!1;break}if(Gt)return nt}return-1}l.prototype.includes=function(S,$,Z){return this.indexOf(S,$,Z)!==-1},l.prototype.indexOf=function(S,$,Z){return D(this,S,$,Z,!0)},l.prototype.lastIndexOf=function(S,$,Z){return D(this,S,$,Z,!1)};function B(H,S,$,Z){$=Number($)||0;const ee=H.length-$;Z?(Z=Number(Z),Z>ee&&(Z=ee)):Z=ee;const se=S.length;Z>se/2&&(Z=se/2);let ue;for(ue=0;ue<Z;++ue){const at=parseInt(S.substr(ue*2,2),16);if(Mt(at))return ue;H[$+ue]=at}return ue}function N(H,S,$,Z){return Ot(Ft(S,H.length-$),H,$,Z)}function R(H,S,$,Z){return Ot(Wt(S),H,$,Z)}function p(H,S,$,Z){return Ot(lt(S),H,$,Z)}function g(H,S,$,Z){return Ot(Qt(S,H.length-$),H,$,Z)}l.prototype.write=function(S,$,Z,ee){if($===void 0)ee="utf8",Z=this.length,$=0;else if(Z===void 0&&typeof $=="string")ee=$,Z=this.length,$=0;else if(isFinite($))$=$>>>0,isFinite(Z)?(Z=Z>>>0,ee===void 0&&(ee="utf8")):(ee=Z,Z=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const se=this.length-$;if((Z===void 0||Z>se)&&(Z=se),S.length>0&&(Z<0||$<0)||$>this.length)throw new RangeError("Attempt to write outside buffer bounds");ee||(ee="utf8");let ue=!1;for(;;)switch(ee){case"hex":return B(this,S,$,Z);case"utf8":case"utf-8":return N(this,S,$,Z);case"ascii":case"latin1":case"binary":return R(this,S,$,Z);case"base64":return p(this,S,$,Z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g(this,S,$,Z);default:if(ue)throw new TypeError("Unknown encoding: "+ee);ee=(""+ee).toLowerCase(),ue=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function w(H,S,$){return S===0&&$===H.length?e.fromByteArray(H):e.fromByteArray(H.slice(S,$))}function _(H,S,$){$=Math.min(H.length,$);const Z=[];let ee=S;for(;ee<$;){const se=H[ee];let ue=null,at=se>239?4:se>223?3:se>191?2:1;if(ee+at<=$){let tt,nt,Gt,Ze;switch(at){case 1:se<128&&(ue=se);break;case 2:tt=H[ee+1],(tt&192)===128&&(Ze=(se&31)<<6|tt&63,Ze>127&&(ue=Ze));break;case 3:tt=H[ee+1],nt=H[ee+2],(tt&192)===128&&(nt&192)===128&&(Ze=(se&15)<<12|(tt&63)<<6|nt&63,Ze>2047&&(Ze<55296||Ze>57343)&&(ue=Ze));break;case 4:tt=H[ee+1],nt=H[ee+2],Gt=H[ee+3],(tt&192)===128&&(nt&192)===128&&(Gt&192)===128&&(Ze=(se&15)<<18|(tt&63)<<12|(nt&63)<<6|Gt&63,Ze>65535&&Ze<1114112&&(ue=Ze))}}ue===null?(ue=65533,at=1):ue>65535&&(ue-=65536,Z.push(ue>>>10&1023|55296),ue=56320|ue&1023),Z.push(ue),ee+=at}return L(Z)}const C=4096;function L(H){const S=H.length;if(S<=C)return String.fromCharCode.apply(String,H);let $="",Z=0;for(;Z<S;)$+=String.fromCharCode.apply(String,H.slice(Z,Z+=C));return $}function z(H,S,$){let Z="";$=Math.min(H.length,$);for(let ee=S;ee<$;++ee)Z+=String.fromCharCode(H[ee]&127);return Z}function q(H,S,$){let Z="";$=Math.min(H.length,$);for(let ee=S;ee<$;++ee)Z+=String.fromCharCode(H[ee]);return Z}function b(H,S,$){const Z=H.length;(!S||S<0)&&(S=0),(!$||$<0||$>Z)&&($=Z);let ee="";for(let se=S;se<$;++se)ee+=Kt[H[se]];return ee}function E(H,S,$){const Z=H.slice(S,$);let ee="";for(let se=0;se<Z.length-1;se+=2)ee+=String.fromCharCode(Z[se]+Z[se+1]*256);return ee}l.prototype.slice=function(S,$){const Z=this.length;S=~~S,$=$===void 0?Z:~~$,S<0?(S+=Z,S<0&&(S=0)):S>Z&&(S=Z),$<0?($+=Z,$<0&&($=0)):$>Z&&($=Z),$<S&&($=S);const ee=this.subarray(S,$);return Object.setPrototypeOf(ee,l.prototype),ee};function j(H,S,$){if(H%1!==0||H<0)throw new RangeError("offset is not uint");if(H+S>$)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(S,$,Z){S=S>>>0,$=$>>>0,Z||j(S,$,this.length);let ee=this[S],se=1,ue=0;for(;++ue<$&&(se*=256);)ee+=this[S+ue]*se;return ee},l.prototype.readUintBE=l.prototype.readUIntBE=function(S,$,Z){S=S>>>0,$=$>>>0,Z||j(S,$,this.length);let ee=this[S+--$],se=1;for(;$>0&&(se*=256);)ee+=this[S+--$]*se;return ee},l.prototype.readUint8=l.prototype.readUInt8=function(S,$){return S=S>>>0,$||j(S,1,this.length),this[S]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(S,$){return S=S>>>0,$||j(S,2,this.length),this[S]|this[S+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(S,$){return S=S>>>0,$||j(S,2,this.length),this[S]<<8|this[S+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(S,$){return S=S>>>0,$||j(S,4,this.length),(this[S]|this[S+1]<<8|this[S+2]<<16)+this[S+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(S,$){return S=S>>>0,$||j(S,4,this.length),this[S]*16777216+(this[S+1]<<16|this[S+2]<<8|this[S+3])},l.prototype.readBigUInt64LE=Er(function(S){S=S>>>0,nr(S,"offset");const $=this[S],Z=this[S+7];($===void 0||Z===void 0)&&Ut(S,this.length-8);const ee=$+this[++S]*2**8+this[++S]*2**16+this[++S]*2**24,se=this[++S]+this[++S]*2**8+this[++S]*2**16+Z*2**24;return BigInt(ee)+(BigInt(se)<<BigInt(32))}),l.prototype.readBigUInt64BE=Er(function(S){S=S>>>0,nr(S,"offset");const $=this[S],Z=this[S+7];($===void 0||Z===void 0)&&Ut(S,this.length-8);const ee=$*2**24+this[++S]*2**16+this[++S]*2**8+this[++S],se=this[++S]*2**24+this[++S]*2**16+this[++S]*2**8+Z;return(BigInt(ee)<<BigInt(32))+BigInt(se)}),l.prototype.readIntLE=function(S,$,Z){S=S>>>0,$=$>>>0,Z||j(S,$,this.length);let ee=this[S],se=1,ue=0;for(;++ue<$&&(se*=256);)ee+=this[S+ue]*se;return se*=128,ee>=se&&(ee-=Math.pow(2,8*$)),ee},l.prototype.readIntBE=function(S,$,Z){S=S>>>0,$=$>>>0,Z||j(S,$,this.length);let ee=$,se=1,ue=this[S+--ee];for(;ee>0&&(se*=256);)ue+=this[S+--ee]*se;return se*=128,ue>=se&&(ue-=Math.pow(2,8*$)),ue},l.prototype.readInt8=function(S,$){return S=S>>>0,$||j(S,1,this.length),this[S]&128?(255-this[S]+1)*-1:this[S]},l.prototype.readInt16LE=function(S,$){S=S>>>0,$||j(S,2,this.length);const Z=this[S]|this[S+1]<<8;return Z&32768?Z|4294901760:Z},l.prototype.readInt16BE=function(S,$){S=S>>>0,$||j(S,2,this.length);const Z=this[S+1]|this[S]<<8;return Z&32768?Z|4294901760:Z},l.prototype.readInt32LE=function(S,$){return S=S>>>0,$||j(S,4,this.length),this[S]|this[S+1]<<8|this[S+2]<<16|this[S+3]<<24},l.prototype.readInt32BE=function(S,$){return S=S>>>0,$||j(S,4,this.length),this[S]<<24|this[S+1]<<16|this[S+2]<<8|this[S+3]},l.prototype.readBigInt64LE=Er(function(S){S=S>>>0,nr(S,"offset");const $=this[S],Z=this[S+7];($===void 0||Z===void 0)&&Ut(S,this.length-8);const ee=this[S+4]+this[S+5]*2**8+this[S+6]*2**16+(Z<<24);return(BigInt(ee)<<BigInt(32))+BigInt($+this[++S]*2**8+this[++S]*2**16+this[++S]*2**24)}),l.prototype.readBigInt64BE=Er(function(S){S=S>>>0,nr(S,"offset");const $=this[S],Z=this[S+7];($===void 0||Z===void 0)&&Ut(S,this.length-8);const ee=($<<24)+this[++S]*2**16+this[++S]*2**8+this[++S];return(BigInt(ee)<<BigInt(32))+BigInt(this[++S]*2**24+this[++S]*2**16+this[++S]*2**8+Z)}),l.prototype.readFloatLE=function(S,$){return S=S>>>0,$||j(S,4,this.length),n.read(this,S,!0,23,4)},l.prototype.readFloatBE=function(S,$){return S=S>>>0,$||j(S,4,this.length),n.read(this,S,!1,23,4)},l.prototype.readDoubleLE=function(S,$){return S=S>>>0,$||j(S,8,this.length),n.read(this,S,!0,52,8)},l.prototype.readDoubleBE=function(S,$){return S=S>>>0,$||j(S,8,this.length),n.read(this,S,!1,52,8)};function K(H,S,$,Z,ee,se){if(!l.isBuffer(H))throw new TypeError('"buffer" argument must be a Buffer instance');if(S>ee||S<se)throw new RangeError('"value" argument is out of bounds');if($+Z>H.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(S,$,Z,ee){if(S=+S,$=$>>>0,Z=Z>>>0,!ee){const at=Math.pow(2,8*Z)-1;K(this,S,$,Z,at,0)}let se=1,ue=0;for(this[$]=S&255;++ue<Z&&(se*=256);)this[$+ue]=S/se&255;return $+Z},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(S,$,Z,ee){if(S=+S,$=$>>>0,Z=Z>>>0,!ee){const at=Math.pow(2,8*Z)-1;K(this,S,$,Z,at,0)}let se=Z-1,ue=1;for(this[$+se]=S&255;--se>=0&&(ue*=256);)this[$+se]=S/ue&255;return $+Z},l.prototype.writeUint8=l.prototype.writeUInt8=function(S,$,Z){return S=+S,$=$>>>0,Z||K(this,S,$,1,255,0),this[$]=S&255,$+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(S,$,Z){return S=+S,$=$>>>0,Z||K(this,S,$,2,65535,0),this[$]=S&255,this[$+1]=S>>>8,$+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(S,$,Z){return S=+S,$=$>>>0,Z||K(this,S,$,2,65535,0),this[$]=S>>>8,this[$+1]=S&255,$+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(S,$,Z){return S=+S,$=$>>>0,Z||K(this,S,$,4,4294967295,0),this[$+3]=S>>>24,this[$+2]=S>>>16,this[$+1]=S>>>8,this[$]=S&255,$+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(S,$,Z){return S=+S,$=$>>>0,Z||K(this,S,$,4,4294967295,0),this[$]=S>>>24,this[$+1]=S>>>16,this[$+2]=S>>>8,this[$+3]=S&255,$+4};function X(H,S,$,Z,ee){ht(S,Z,ee,H,$,7);let se=Number(S&BigInt(4294967295));H[$++]=se,se=se>>8,H[$++]=se,se=se>>8,H[$++]=se,se=se>>8,H[$++]=se;let ue=Number(S>>BigInt(32)&BigInt(4294967295));return H[$++]=ue,ue=ue>>8,H[$++]=ue,ue=ue>>8,H[$++]=ue,ue=ue>>8,H[$++]=ue,$}function re(H,S,$,Z,ee){ht(S,Z,ee,H,$,7);let se=Number(S&BigInt(4294967295));H[$+7]=se,se=se>>8,H[$+6]=se,se=se>>8,H[$+5]=se,se=se>>8,H[$+4]=se;let ue=Number(S>>BigInt(32)&BigInt(4294967295));return H[$+3]=ue,ue=ue>>8,H[$+2]=ue,ue=ue>>8,H[$+1]=ue,ue=ue>>8,H[$]=ue,$+8}l.prototype.writeBigUInt64LE=Er(function(S,$=0){return X(this,S,$,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=Er(function(S,$=0){return re(this,S,$,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(S,$,Z,ee){if(S=+S,$=$>>>0,!ee){const tt=Math.pow(2,8*Z-1);K(this,S,$,Z,tt-1,-tt)}let se=0,ue=1,at=0;for(this[$]=S&255;++se<Z&&(ue*=256);)S<0&&at===0&&this[$+se-1]!==0&&(at=1),this[$+se]=(S/ue>>0)-at&255;return $+Z},l.prototype.writeIntBE=function(S,$,Z,ee){if(S=+S,$=$>>>0,!ee){const tt=Math.pow(2,8*Z-1);K(this,S,$,Z,tt-1,-tt)}let se=Z-1,ue=1,at=0;for(this[$+se]=S&255;--se>=0&&(ue*=256);)S<0&&at===0&&this[$+se+1]!==0&&(at=1),this[$+se]=(S/ue>>0)-at&255;return $+Z},l.prototype.writeInt8=function(S,$,Z){return S=+S,$=$>>>0,Z||K(this,S,$,1,127,-128),S<0&&(S=255+S+1),this[$]=S&255,$+1},l.prototype.writeInt16LE=function(S,$,Z){return S=+S,$=$>>>0,Z||K(this,S,$,2,32767,-32768),this[$]=S&255,this[$+1]=S>>>8,$+2},l.prototype.writeInt16BE=function(S,$,Z){return S=+S,$=$>>>0,Z||K(this,S,$,2,32767,-32768),this[$]=S>>>8,this[$+1]=S&255,$+2},l.prototype.writeInt32LE=function(S,$,Z){return S=+S,$=$>>>0,Z||K(this,S,$,4,2147483647,-2147483648),this[$]=S&255,this[$+1]=S>>>8,this[$+2]=S>>>16,this[$+3]=S>>>24,$+4},l.prototype.writeInt32BE=function(S,$,Z){return S=+S,$=$>>>0,Z||K(this,S,$,4,2147483647,-2147483648),S<0&&(S=4294967295+S+1),this[$]=S>>>24,this[$+1]=S>>>16,this[$+2]=S>>>8,this[$+3]=S&255,$+4},l.prototype.writeBigInt64LE=Er(function(S,$=0){return X(this,S,$,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=Er(function(S,$=0){return re(this,S,$,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function de(H,S,$,Z,ee,se){if($+Z>H.length)throw new RangeError("Index out of range");if($<0)throw new RangeError("Index out of range")}function he(H,S,$,Z,ee){return S=+S,$=$>>>0,ee||de(H,S,$,4),n.write(H,S,$,Z,23,4),$+4}l.prototype.writeFloatLE=function(S,$,Z){return he(this,S,$,!0,Z)},l.prototype.writeFloatBE=function(S,$,Z){return he(this,S,$,!1,Z)};function Oe(H,S,$,Z,ee){return S=+S,$=$>>>0,ee||de(H,S,$,8),n.write(H,S,$,Z,52,8),$+8}l.prototype.writeDoubleLE=function(S,$,Z){return Oe(this,S,$,!0,Z)},l.prototype.writeDoubleBE=function(S,$,Z){return Oe(this,S,$,!1,Z)},l.prototype.copy=function(S,$,Z,ee){if(!l.isBuffer(S))throw new TypeError("argument should be a Buffer");if(Z||(Z=0),!ee&&ee!==0&&(ee=this.length),$>=S.length&&($=S.length),$||($=0),ee>0&&ee<Z&&(ee=Z),ee===Z||S.length===0||this.length===0)return 0;if($<0)throw new RangeError("targetStart out of bounds");if(Z<0||Z>=this.length)throw new RangeError("Index out of range");if(ee<0)throw new RangeError("sourceEnd out of bounds");ee>this.length&&(ee=this.length),S.length-$<ee-Z&&(ee=S.length-$+Z);const se=ee-Z;return this===S&&typeof i.prototype.copyWithin=="function"?this.copyWithin($,Z,ee):i.prototype.set.call(S,this.subarray(Z,ee),$),se},l.prototype.fill=function(S,$,Z,ee){if(typeof S=="string"){if(typeof $=="string"?(ee=$,$=0,Z=this.length):typeof Z=="string"&&(ee=Z,Z=this.length),ee!==void 0&&typeof ee!="string")throw new TypeError("encoding must be a string");if(typeof ee=="string"&&!l.isEncoding(ee))throw new TypeError("Unknown encoding: "+ee);if(S.length===1){const ue=S.charCodeAt(0);(ee==="utf8"&&ue<128||ee==="latin1")&&(S=ue)}}else typeof S=="number"?S=S&255:typeof S=="boolean"&&(S=Number(S));if($<0||this.length<$||this.length<Z)throw new RangeError("Out of range index");if(Z<=$)return this;$=$>>>0,Z=Z===void 0?this.length:Z>>>0,S||(S=0);let se;if(typeof S=="number")for(se=$;se<Z;++se)this[se]=S;else{const ue=l.isBuffer(S)?S:l.from(S,ee),at=ue.length;if(at===0)throw new TypeError('The value "'+S+'" is invalid for argument "value"');for(se=0;se<Z-$;++se)this[se+$]=ue[se%at]}return this};const Re={};function Ve(H,S,$){Re[H]=class extends ${constructor(){super(),Object.defineProperty(this,"message",{value:S.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${H}]`,this.stack,delete this.name}get code(){return H}set code(ee){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ee,writable:!0})}toString(){return`${this.name} [${H}]: ${this.message}`}}}Ve("ERR_BUFFER_OUT_OF_BOUNDS",function(H){return H?`${H} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ve("ERR_INVALID_ARG_TYPE",function(H,S){return`The "${H}" argument must be of type number. Received type ${typeof S}`},TypeError),Ve("ERR_OUT_OF_RANGE",function(H,S,$){let Z=`The value of "${H}" is out of range.`,ee=$;return Number.isInteger($)&&Math.abs($)>2**32?ee=kt(String($)):typeof $=="bigint"&&(ee=String($),($>BigInt(2)**BigInt(32)||$<-(BigInt(2)**BigInt(32)))&&(ee=kt(ee)),ee+="n"),Z+=` It must be ${S}. Received ${ee}`,Z},RangeError);function kt(H){let S="",$=H.length;const Z=H[0]==="-"?1:0;for(;$>=Z+4;$-=3)S=`_${H.slice($-3,$)}${S}`;return`${H.slice(0,$)}${S}`}function dt(H,S,$){nr(S,"offset"),(H[S]===void 0||H[S+$]===void 0)&&Ut(S,H.length-($+1))}function ht(H,S,$,Z,ee,se){if(H>$||H<S){const ue=typeof S=="bigint"?"n":"";let at;throw S===0||S===BigInt(0)?at=`>= 0${ue} and < 2${ue} ** ${(se+1)*8}${ue}`:at=`>= -(2${ue} ** ${(se+1)*8-1}${ue}) and < 2 ** ${(se+1)*8-1}${ue}`,new Re.ERR_OUT_OF_RANGE("value",at,H)}dt(Z,ee,se)}function nr(H,S){if(typeof H!="number")throw new Re.ERR_INVALID_ARG_TYPE(S,"number",H)}function Ut(H,S,$){throw Math.floor(H)!==H?(nr(H,$),new Re.ERR_OUT_OF_RANGE("offset","an integer",H)):S<0?new Re.ERR_BUFFER_OUT_OF_BOUNDS:new Re.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${S}`,H)}const Xt=/[^+/0-9A-Za-z-_]/g;function ro(H){if(H=H.split("=")[0],H=H.trim().replace(Xt,""),H.length<2)return"";for(;H.length%4!==0;)H=H+"=";return H}function Ft(H,S){S=S||1/0;let $;const Z=H.length;let ee=null;const se=[];for(let ue=0;ue<Z;++ue){if($=H.charCodeAt(ue),$>55295&&$<57344){if(!ee){if($>56319){(S-=3)>-1&&se.push(239,191,189);continue}else if(ue+1===Z){(S-=3)>-1&&se.push(239,191,189);continue}ee=$;continue}if($<56320){(S-=3)>-1&&se.push(239,191,189),ee=$;continue}$=(ee-55296<<10|$-56320)+65536}else ee&&(S-=3)>-1&&se.push(239,191,189);if(ee=null,$<128){if((S-=1)<0)break;se.push($)}else if($<2048){if((S-=2)<0)break;se.push($>>6|192,$&63|128)}else if($<65536){if((S-=3)<0)break;se.push($>>12|224,$>>6&63|128,$&63|128)}else if($<1114112){if((S-=4)<0)break;se.push($>>18|240,$>>12&63|128,$>>6&63|128,$&63|128)}else throw new Error("Invalid code point")}return se}function Wt(H){const S=[];for(let $=0;$<H.length;++$)S.push(H.charCodeAt($)&255);return S}function Qt(H,S){let $,Z,ee;const se=[];for(let ue=0;ue<H.length&&!((S-=2)<0);++ue)$=H.charCodeAt(ue),Z=$>>8,ee=$%256,se.push(ee),se.push(Z);return se}function lt(H){return e.toByteArray(ro(H))}function Ot(H,S,$,Z){let ee;for(ee=0;ee<Z&&!(ee+$>=S.length||ee>=H.length);++ee)S[ee+$]=H[ee];return ee}function Mn(H,S){return H instanceof S||H!=null&&H.constructor!=null&&H.constructor.name!=null&&H.constructor.name===S.name}function Mt(H){return H!==H}const Kt=function(){const H="0123456789abcdef",S=new Array(256);for(let $=0;$<16;++$){const Z=$*16;for(let ee=0;ee<16;++ee)S[Z+ee]=H[$]+H[ee]}return S}();function Er(H){return typeof BigInt>"u"?Bt:H}function Bt(){throw new Error("BigInt not supported")}})(Q1);const Le=Q1.Buffer,mt=Q1.Buffer;var vf={exports:{}},v2;function dU(){if(v2)return vf.exports;v2=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(P,I,F){return Function.prototype.apply.call(P,I,F)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(P){return Object.getOwnPropertyNames(P).concat(Object.getOwnPropertySymbols(P))}:n=function(P){return Object.getOwnPropertyNames(P)};function r(M){console&&console.warn&&console.warn(M)}var s=Number.isNaN||function(P){return P!==P};function i(){i.init.call(this)}vf.exports=i,vf.exports.once=T,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function a(M){if(typeof M!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof M)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(M){if(typeof M!="number"||M<0||s(M))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+M+".");o=M}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(P){if(typeof P!="number"||P<0||s(P))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+P+".");return this._maxListeners=P,this};function c(M){return M._maxListeners===void 0?i.defaultMaxListeners:M._maxListeners}i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(P){for(var I=[],F=1;F<arguments.length;F++)I.push(arguments[F]);var W=P==="error",D=this._events;if(D!==void 0)W=W&&D.error===void 0;else if(!W)return!1;if(W){var k;if(I.length>0&&(k=I[0]),k instanceof Error)throw k;var B=new Error("Unhandled error."+(k?" ("+k.message+")":""));throw B.context=k,B}var N=D[P];if(N===void 0)return!1;if(typeof N=="function")e(N,this,I);else for(var R=N.length,p=y(N,R),F=0;F<R;++F)e(p[F],this,I);return!0};function u(M,P,I,F){var W,D,k;if(a(I),D=M._events,D===void 0?(D=M._events=Object.create(null),M._eventsCount=0):(D.newListener!==void 0&&(M.emit("newListener",P,I.listener?I.listener:I),D=M._events),k=D[P]),k===void 0)k=D[P]=I,++M._eventsCount;else if(typeof k=="function"?k=D[P]=F?[I,k]:[k,I]:F?k.unshift(I):k.push(I),W=c(M),W>0&&k.length>W&&!k.warned){k.warned=!0;var B=new Error("Possible EventEmitter memory leak detected. "+k.length+" "+String(P)+" listeners added. Use emitter.setMaxListeners() to increase limit");B.name="MaxListenersExceededWarning",B.emitter=M,B.type=P,B.count=k.length,r(B)}return M}i.prototype.addListener=function(P,I){return u(this,P,I,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(P,I){return u(this,P,I,!0)};function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(M,P,I){var F={fired:!1,wrapFn:void 0,target:M,type:P,listener:I},W=l.bind(F);return W.listener=I,F.wrapFn=W,W}i.prototype.once=function(P,I){return a(I),this.on(P,d(this,P,I)),this},i.prototype.prependOnceListener=function(P,I){return a(I),this.prependListener(P,d(this,P,I)),this},i.prototype.removeListener=function(P,I){var F,W,D,k,B;if(a(I),W=this._events,W===void 0)return this;if(F=W[P],F===void 0)return this;if(F===I||F.listener===I)--this._eventsCount===0?this._events=Object.create(null):(delete W[P],W.removeListener&&this.emit("removeListener",P,F.listener||I));else if(typeof F!="function"){for(D=-1,k=F.length-1;k>=0;k--)if(F[k]===I||F[k].listener===I){B=F[k].listener,D=k;break}if(D<0)return this;D===0?F.shift():m(F,D),F.length===1&&(W[P]=F[0]),W.removeListener!==void 0&&this.emit("removeListener",P,B||I)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(P){var I,F,W;if(F=this._events,F===void 0)return this;if(F.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):F[P]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete F[P]),this;if(arguments.length===0){var D=Object.keys(F),k;for(W=0;W<D.length;++W)k=D[W],k!=="removeListener"&&this.removeAllListeners(k);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(I=F[P],typeof I=="function")this.removeListener(P,I);else if(I!==void 0)for(W=I.length-1;W>=0;W--)this.removeListener(P,I[W]);return this};function h(M,P,I){var F=M._events;if(F===void 0)return[];var W=F[P];return W===void 0?[]:typeof W=="function"?I?[W.listener||W]:[W]:I?v(W):y(W,W.length)}i.prototype.listeners=function(P){return h(this,P,!0)},i.prototype.rawListeners=function(P){return h(this,P,!1)},i.listenerCount=function(M,P){return typeof M.listenerCount=="function"?M.listenerCount(P):f.call(M,P)},i.prototype.listenerCount=f;function f(M){var P=this._events;if(P!==void 0){var I=P[M];if(typeof I=="function")return 1;if(I!==void 0)return I.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function y(M,P){for(var I=new Array(P),F=0;F<P;++F)I[F]=M[F];return I}function m(M,P){for(;P+1<M.length;P++)M[P]=M[P+1];M.pop()}function v(M){for(var P=new Array(M.length),I=0;I<P.length;++I)P[I]=M[I].listener||M[I];return P}function T(M,P){return new Promise(function(I,F){function W(k){M.removeListener(P,D),F(k)}function D(){typeof M.removeListener=="function"&&M.removeListener("error",W),I([].slice.call(arguments))}A(M,P,D,{once:!0}),P!=="error"&&O(M,W,{once:!0})})}function O(M,P,I){typeof M.on=="function"&&A(M,"error",P,I)}function A(M,P,I,F){if(typeof M.on=="function")F.once?M.once(P,I):M.on(P,I);else if(typeof M.addEventListener=="function")M.addEventListener(P,function W(D){F.once&&M.removeEventListener(P,W),I(D)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof M)}return vf.exports}var Xs=dU();const tv=Ii(Xs);var Am={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var qw=function(t,e){return qw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},qw(t,e)};function hU(t,e){qw(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var zw=function(){return zw=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},zw.apply(this,arguments)};function fU(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function pU(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function gU(t,e){return function(n,r){e(n,r,t)}}function mU(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function yU(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function wU(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return c([u,l])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,s=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(l){u=[6,l],s=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function bU(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function vU(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Ww(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function G6(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function EU(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(G6(arguments[e]));return t}function _U(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function eh(t){return this instanceof eh?(this.v=t,this):new eh(t)}function CU(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(y,m){i.push([h,f,y,m])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(y){d(i[0][3],y)}}function c(h){h.value instanceof eh?Promise.resolve(h.value.v).then(u,l):d(i[0][2],h)}function u(h){a("next",h)}function l(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function AU(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:eh(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function IU(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Ww=="function"?Ww(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},o)}}function SU(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function xU(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function TU(t){return t&&t.__esModule?t:{default:t}}function NU(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function RU(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const PU=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return zw},__asyncDelegator:AU,__asyncGenerator:CU,__asyncValues:IU,__await:eh,__awaiter:yU,__classPrivateFieldGet:NU,__classPrivateFieldSet:RU,__createBinding:bU,__decorate:pU,__exportStar:vU,__extends:hU,__generator:wU,__importDefault:TU,__importStar:xU,__makeTemplateObject:SU,__metadata:mU,__param:gU,__read:G6,__rest:fU,__spread:EU,__spreadArrays:_U,__values:Ww},Symbol.toStringTag,{value:"Module"})),V0=b0(PU);var Im={},Dl={},E2;function kU(){if(E2)return Dl;E2=1,Object.defineProperty(Dl,"__esModule",{value:!0}),Dl.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return Dl.delay=t,Dl}var qa={},Sm={},za={},_2;function OU(){return _2||(_2=1,Object.defineProperty(za,"__esModule",{value:!0}),za.ONE_THOUSAND=za.ONE_HUNDRED=void 0,za.ONE_HUNDRED=100,za.ONE_THOUSAND=1e3),za}var xm={},C2;function BU(){return C2||(C2=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(xm)),xm}var A2;function Y6(){return A2||(A2=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=V0;e.__exportStar(OU(),t),e.__exportStar(BU(),t)}(Sm)),Sm}var I2;function $U(){if(I2)return qa;I2=1,Object.defineProperty(qa,"__esModule",{value:!0}),qa.fromMiliseconds=qa.toMiliseconds=void 0;const t=Y6();function e(r){return r*t.ONE_THOUSAND}qa.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return qa.fromMiliseconds=n,qa}var S2;function DU(){return S2||(S2=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=V0;e.__exportStar(kU(),t),e.__exportStar($U(),t)}(Im)),Im}var ru={},x2;function UU(){if(x2)return ru;x2=1,Object.defineProperty(ru,"__esModule",{value:!0}),ru.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return ru.Watch=t,ru.default=t,ru}var Tm={},Ul={},T2;function MU(){if(T2)return Ul;T2=1,Object.defineProperty(Ul,"__esModule",{value:!0}),Ul.IWatch=void 0;class t{}return Ul.IWatch=t,Ul}var N2;function LU(){return N2||(N2=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),V0.__exportStar(MU(),t)}(Tm)),Tm}var R2;function FU(){return R2||(R2=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=V0;e.__exportStar(DU(),t),e.__exportStar(UU(),t),e.__exportStar(LU(),t),e.__exportStar(Y6(),t)}(Am)),Am}var _e=FU();class qc{}let jU=class extends qc{constructor(e){super()}};const P2=_e.FIVE_SECONDS,zc={pulse:"heartbeat_pulse"};let qU=class Z6 extends jU{constructor(e){super(e),this.events=new Xs.EventEmitter,this.interval=P2,this.interval=e?.interval||P2}static async init(e){const n=new Z6(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),_e.toMiliseconds(this.interval))}pulse(){this.events.emit(zc.pulse)}};const zU=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,WU=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,HU=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function VU(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){KU(t);return}return e}function KU(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Ef(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!HU.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(zU.test(t)||WU.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,VU)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function GU(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function Gn(t,...e){try{return GU(t(...e))}catch(n){return Promise.reject(n)}}function YU(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function ZU(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function sp(t){if(YU(t))return String(t);if(ZU(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return sp(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const Hw="base64:";function JU(t){return typeof t=="string"?t:Hw+eM(t)}function XU(t){return typeof t!="string"||!t.startsWith(Hw)?t:QU(t.slice(Hw.length))}function QU(t){return globalThis.Buffer?Le.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function eM(t){return globalThis.Buffer?Le.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function es(t){return t&&t.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function tM(...t){return es(t.join(":"))}function _f(t){return t=es(t),t?t+":":""}function nM(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function rM(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const sM="memory",iM=()=>{const t=new Map;return{name:sM,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function oM(t={}){const e={mounts:{"":t.driver||iM()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=u=>{for(const l of e.mountpoints)if(u.startsWith(l))return{base:l,relativeKey:u.slice(l.length),driver:e.mounts[l]};return{base:"",relativeKey:u,driver:e.mounts[""]}},r=(u,l)=>e.mountpoints.filter(d=>d.startsWith(u)||l&&u.startsWith(d)).map(d=>({relativeBase:u.length>d.length?u.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(u,l)=>{if(e.watching){l=es(l);for(const d of e.watchListeners)d(u,l)}},i=async()=>{if(!e.watching){e.watching=!0;for(const u in e.mounts)e.unwatch[u]=await k2(e.mounts[u],s,u)}},o=async()=>{if(e.watching){for(const u in e.unwatch)await e.unwatch[u]();e.unwatch={},e.watching=!1}},a=(u,l,d)=>{const h=new Map,f=y=>{let m=h.get(y.base);return m||(m={driver:y.driver,base:y.base,items:[]},h.set(y.base,m)),m};for(const y of u){const m=typeof y=="string",v=es(m?y:y.key),T=m?void 0:y.value,O=m||!y.options?l:{...l,...y.options},A=n(v);f(A).items.push({key:v,value:T,relativeKey:A.relativeKey,options:O})}return Promise.all([...h.values()].map(y=>d(y))).then(y=>y.flat())},c={hasItem(u,l={}){u=es(u);const{relativeKey:d,driver:h}=n(u);return Gn(h.hasItem,d,l)},getItem(u,l={}){u=es(u);const{relativeKey:d,driver:h}=n(u);return Gn(h.getItem,d,l).then(f=>Ef(f))},getItems(u,l={}){return a(u,l,d=>d.driver.getItems?Gn(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),l).then(h=>h.map(f=>({key:tM(d.base,f.key),value:Ef(f.value)}))):Promise.all(d.items.map(h=>Gn(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:Ef(f)})))))},getItemRaw(u,l={}){u=es(u);const{relativeKey:d,driver:h}=n(u);return h.getItemRaw?Gn(h.getItemRaw,d,l):Gn(h.getItem,d,l).then(f=>XU(f))},async setItem(u,l,d={}){if(l===void 0)return c.removeItem(u);u=es(u);const{relativeKey:h,driver:f}=n(u);f.setItem&&(await Gn(f.setItem,h,sp(l),d),f.watch||s("update",u))},async setItems(u,l){await a(u,l,async d=>{if(d.driver.setItems)return Gn(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:sp(h.value),options:h.options})),l);d.driver.setItem&&await Promise.all(d.items.map(h=>Gn(d.driver.setItem,h.relativeKey,sp(h.value),h.options)))})},async setItemRaw(u,l,d={}){if(l===void 0)return c.removeItem(u,d);u=es(u);const{relativeKey:h,driver:f}=n(u);if(f.setItemRaw)await Gn(f.setItemRaw,h,l,d);else if(f.setItem)await Gn(f.setItem,h,JU(l),d);else return;f.watch||s("update",u)},async removeItem(u,l={}){typeof l=="boolean"&&(l={removeMeta:l}),u=es(u);const{relativeKey:d,driver:h}=n(u);h.removeItem&&(await Gn(h.removeItem,d,l),(l.removeMeta||l.removeMata)&&await Gn(h.removeItem,d+"$",l),h.watch||s("remove",u))},async getMeta(u,l={}){typeof l=="boolean"&&(l={nativeOnly:l}),u=es(u);const{relativeKey:d,driver:h}=n(u),f=Object.create(null);if(h.getMeta&&Object.assign(f,await Gn(h.getMeta,d,l)),!l.nativeOnly){const y=await Gn(h.getItem,d+"$",l).then(m=>Ef(m));y&&typeof y=="object"&&(typeof y.atime=="string"&&(y.atime=new Date(y.atime)),typeof y.mtime=="string"&&(y.mtime=new Date(y.mtime)),Object.assign(f,y))}return f},setMeta(u,l,d={}){return this.setItem(u+"$",l,d)},removeMeta(u,l={}){return this.removeItem(u+"$",l)},async getKeys(u,l={}){u=_f(u);const d=r(u,!0);let h=[];const f=[];let y=!0;for(const v of d){v.driver.flags?.maxDepth||(y=!1);const T=await Gn(v.driver.getKeys,v.relativeBase,l);for(const O of T){const A=v.mountpoint+es(O);h.some(M=>A.startsWith(M))||f.push(A)}h=[v.mountpoint,...h.filter(O=>!O.startsWith(v.mountpoint))]}const m=l.maxDepth!==void 0&&!y;return f.filter(v=>(!m||nM(v,l.maxDepth))&&rM(v,u))},async clear(u,l={}){u=_f(u),await Promise.all(r(u,!1).map(async d=>{if(d.driver.clear)return Gn(d.driver.clear,d.relativeBase,l);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",l);return Promise.all(h.map(f=>d.driver.removeItem(f,l)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(u=>O2(u)))},async watch(u){return await i(),e.watchListeners.push(u),async()=>{e.watchListeners=e.watchListeners.filter(l=>l!==u),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(u,l){if(u=_f(u),u&&e.mounts[u])throw new Error(`already mounted at ${u}`);return u&&(e.mountpoints.push(u),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[u]=l,e.watching&&Promise.resolve(k2(l,s,u)).then(d=>{e.unwatch[u]=d}).catch(console.error),c},async unmount(u,l=!0){u=_f(u),!(!u||!e.mounts[u])&&(e.watching&&u in e.unwatch&&(e.unwatch[u]?.(),delete e.unwatch[u]),l&&await O2(e.mounts[u]),e.mountpoints=e.mountpoints.filter(d=>d!==u),delete e.mounts[u])},getMount(u=""){u=es(u)+":";const l=n(u);return{driver:l.driver,base:l.base}},getMounts(u="",l={}){return u=es(u),r(u,l.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(u,l={})=>c.getKeys(u,l),get:(u,l={})=>c.getItem(u,l),set:(u,l,d={})=>c.setItem(u,l,d),has:(u,l={})=>c.hasItem(u,l),del:(u,l={})=>c.removeItem(u,l),remove:(u,l={})=>c.removeItem(u,l)};return c}function k2(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function O2(t){typeof t.dispose=="function"&&await Gn(t.dispose)}function Wc(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function J6(t,e){const n=indexedDB.open(t);n.onupgradeneeded=()=>n.result.createObjectStore(e);const r=Wc(n);return(s,i)=>r.then(o=>i(o.transaction(e,s).objectStore(e)))}let Nm;function Wh(){return Nm||(Nm=J6("keyval-store","keyval")),Nm}function B2(t,e=Wh()){return e("readonly",n=>Wc(n.get(t)))}function aM(t,e,n=Wh()){return n("readwrite",r=>(r.put(e,t),Wc(r.transaction)))}function cM(t,e=Wh()){return e("readwrite",n=>(n.delete(t),Wc(n.transaction)))}function uM(t=Wh()){return t("readwrite",e=>(e.clear(),Wc(e.transaction)))}function lM(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Wc(t.transaction)}function dM(t=Wh()){return t("readonly",e=>{if(e.getAllKeys)return Wc(e.getAllKeys());const n=[];return lM(e,r=>n.push(r.key)).then(()=>n)})}const hM=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),fM=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function Nc(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return fM(t)}catch{return t}}function Fo(t){return typeof t=="string"?t:hM(t)||""}const pM="idb-keyval";var gM=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=J6(t.dbName,t.storeName)),{name:pM,options:t,async hasItem(s){return!(typeof await B2(n(s),r)>"u")},async getItem(s){return await B2(n(s),r)??null},setItem(s,i){return aM(n(s),i,r)},removeItem(s){return cM(n(s),r)},getKeys(){return dM(r)},clear(){return uM(r)}}};const mM="WALLET_CONNECT_V2_INDEXED_DB",yM="keyvaluestorage";let wM=class{constructor(){this.indexedDb=oM({driver:gM({dbName:mM,storeName:yM})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,Fo(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var Rm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},ip={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Rm<"u"&&Rm.localStorage?ip.exports=Rm.localStorage:typeof window<"u"&&window.localStorage?ip.exports=window.localStorage:ip.exports=new e})();function bM(t){var e;return[t[0],Nc((e=t[1])!=null?e:"")]}let vM=class{constructor(){this.localStorage=ip.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(bM)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return Nc(n)}async setItem(e,n){this.localStorage.setItem(e,Fo(n))}async removeItem(e){this.localStorage.removeItem(e)}};const EM="wc_storage_version",$2=1,_M=async(t,e,n)=>{const r=EM,s=await e.getItem(r);if(s&&s>=$2){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const u=await t.getItem(a);await e.setItem(a,u),o.push(a)}}await e.setItem(r,$2),n(e),CM(t,o)},CM=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let AM=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new vM;this.storage=e;try{const n=new wM;_M(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};var Pm,D2;function IM(){if(D2)return Pm;D2=1;function t(n){try{return JSON.stringify(n)}catch{return'"[Circular]"'}}Pm=e;function e(n,r,s){var i=s&&s.stringify||t,o=1;if(typeof n=="object"&&n!==null){var a=r.length+o;if(a===1)return n;var c=new Array(a);c[0]=i(n);for(var u=1;u<a;u++)c[u]=i(r[u]);return c.join(" ")}if(typeof n!="string")return n;var l=r.length;if(l===0)return n;for(var d="",h=1-o,f=-1,y=n&&n.length||0,m=0;m<y;){if(n.charCodeAt(m)===37&&m+1<y){switch(f=f>-1?f:0,n.charCodeAt(m+1)){case 100:case 102:if(h>=l||r[h]==null)break;f<m&&(d+=n.slice(f,m)),d+=Number(r[h]),f=m+2,m++;break;case 105:if(h>=l||r[h]==null)break;f<m&&(d+=n.slice(f,m)),d+=Math.floor(Number(r[h])),f=m+2,m++;break;case 79:case 111:case 106:if(h>=l||r[h]===void 0)break;f<m&&(d+=n.slice(f,m));var v=typeof r[h];if(v==="string"){d+="'"+r[h]+"'",f=m+2,m++;break}if(v==="function"){d+=r[h].name||"<anonymous>",f=m+2,m++;break}d+=i(r[h]),f=m+2,m++;break;case 115:if(h>=l)break;f<m&&(d+=n.slice(f,m)),d+=String(r[h]),f=m+2,m++;break;case 37:f<m&&(d+=n.slice(f,m)),d+="%",f=m+2,m++,h--;break}++h}++m}return f===-1?n:(f<y&&(d+=n.slice(f)),d)}return Pm}var km,U2;function SM(){if(U2)return km;U2=1;const t=IM();km=s;const e=P().console||{},n={mapHttpRequest:y,mapHttpResponse:y,wrapRequestSerializer:m,wrapResponseSerializer:m,wrapErrorSerializer:m,req:y,res:y,err:h};function r(I,F){return Array.isArray(I)?I.filter(function(D){return D!=="!stdSerializers.err"}):I===!0?Object.keys(F):!1}function s(I){I=I||{},I.browser=I.browser||{};const F=I.browser.transmit;if(F&&typeof F.send!="function")throw Error("pino: transmit option must have a send function");const W=I.browser.write||e;I.browser.write&&(I.browser.asObject=!0);const D=I.serializers||{},k=r(I.browser.serialize,D);let B=I.browser.serialize;Array.isArray(I.browser.serialize)&&I.browser.serialize.indexOf("!stdSerializers.err")>-1&&(B=!1);const N=["error","fatal","warn","info","debug","trace"];typeof W=="function"&&(W.error=W.fatal=W.warn=W.info=W.debug=W.trace=W),I.enabled===!1&&(I.level="silent");const R=I.level||"info",p=Object.create(W);p.log||(p.log=v),Object.defineProperty(p,"levelVal",{get:w}),Object.defineProperty(p,"level",{get:_,set:C});const g={transmit:F,serialize:k,asObject:I.browser.asObject,levels:N,timestamp:f(I)};p.levels=s.levels,p.level=R,p.setMaxListeners=p.getMaxListeners=p.emit=p.addListener=p.on=p.prependListener=p.once=p.prependOnceListener=p.removeListener=p.removeAllListeners=p.listeners=p.listenerCount=p.eventNames=p.write=p.flush=v,p.serializers=D,p._serialize=k,p._stdErrSerialize=B,p.child=L,F&&(p._logEvent=d());function w(){return this.level==="silent"?1/0:this.levels.values[this.level]}function _(){return this._level}function C(z){if(z!=="silent"&&!this.levels.values[z])throw Error("unknown level "+z);this._level=z,i(g,p,"error","log"),i(g,p,"fatal","error"),i(g,p,"warn","error"),i(g,p,"info","log"),i(g,p,"debug","log"),i(g,p,"trace","log")}function L(z,q){if(!z)throw new Error("missing bindings for child Pino");q=q||{},k&&z.serializers&&(q.serializers=z.serializers);const b=q.serializers;if(k&&b){var E=Object.assign({},D,b),j=I.browser.serialize===!0?Object.keys(E):k;delete z.serializers,c([z],j,E,this._stdErrSerialize)}function K(X){this._childLevel=(X._childLevel|0)+1,this.error=u(X,z,"error"),this.fatal=u(X,z,"fatal"),this.warn=u(X,z,"warn"),this.info=u(X,z,"info"),this.debug=u(X,z,"debug"),this.trace=u(X,z,"trace"),E&&(this.serializers=E,this._serialize=j),F&&(this._logEvent=d([].concat(X._logEvent.bindings,z)))}return K.prototype=this,new K(this)}return p}s.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},s.stdSerializers=n,s.stdTimeFunctions=Object.assign({},{nullTime:T,epochTime:O,unixTime:A,isoTime:M});function i(I,F,W,D){const k=Object.getPrototypeOf(F);F[W]=F.levelVal>F.levels.values[W]?v:k[W]?k[W]:e[W]||e[D]||v,o(I,F,W)}function o(I,F,W){!I.transmit&&F[W]===v||(F[W]=function(D){return function(){const B=I.timestamp(),N=new Array(arguments.length),R=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var p=0;p<N.length;p++)N[p]=arguments[p];if(I.serialize&&!I.asObject&&c(N,this._serialize,this.serializers,this._stdErrSerialize),I.asObject?D.call(R,a(this,W,N,B)):D.apply(R,N),I.transmit){const g=I.transmit.level||F.level,w=s.levels.values[g],_=s.levels.values[W];if(_<w)return;l(this,{ts:B,methodLevel:W,methodValue:_,transmitValue:s.levels.values[I.transmit.level||F.level],send:I.transmit.send,val:F.levelVal},N)}}}(F[W]))}function a(I,F,W,D){I._serialize&&c(W,I._serialize,I.serializers,I._stdErrSerialize);const k=W.slice();let B=k[0];const N={};D&&(N.time=D),N.level=s.levels.values[F];let R=(I._childLevel|0)+1;if(R<1&&(R=1),B!==null&&typeof B=="object"){for(;R--&&typeof k[0]=="object";)Object.assign(N,k.shift());B=k.length?t(k.shift(),k):void 0}else typeof B=="string"&&(B=t(k.shift(),k));return B!==void 0&&(N.msg=B),N}function c(I,F,W,D){for(const k in I)if(D&&I[k]instanceof Error)I[k]=s.stdSerializers.err(I[k]);else if(typeof I[k]=="object"&&!Array.isArray(I[k]))for(const B in I[k])F&&F.indexOf(B)>-1&&B in W&&(I[k][B]=W[B](I[k][B]))}function u(I,F,W){return function(){const D=new Array(1+arguments.length);D[0]=F;for(var k=1;k<D.length;k++)D[k]=arguments[k-1];return I[W].apply(this,D)}}function l(I,F,W){const D=F.send,k=F.ts,B=F.methodLevel,N=F.methodValue,R=F.val,p=I._logEvent.bindings;c(W,I._serialize||Object.keys(I.serializers),I.serializers,I._stdErrSerialize===void 0?!0:I._stdErrSerialize),I._logEvent.ts=k,I._logEvent.messages=W.filter(function(g){return p.indexOf(g)===-1}),I._logEvent.level.label=B,I._logEvent.level.value=N,D(B,I._logEvent,R),I._logEvent=d(p)}function d(I){return{ts:0,messages:[],bindings:I||[],level:{label:"",value:0}}}function h(I){const F={type:I.constructor.name,msg:I.message,stack:I.stack};for(const W in I)F[W]===void 0&&(F[W]=I[W]);return F}function f(I){return typeof I.timestamp=="function"?I.timestamp:I.timestamp===!1?T:O}function y(){return{}}function m(I){return I}function v(){}function T(){return!1}function O(){return Date.now()}function A(){return Math.round(Date.now()/1e3)}function M(){return new Date(Date.now()).toISOString()}function P(){function I(F){return typeof F<"u"&&F}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return I(self)||I(window)||I(this)||{}}}return km}var Au=SM();const Hh=Ii(Au),xM={level:"info"},Vh="custom_context",nv=1e3*1024;let TM=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},M2=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new TM(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},X6=class{constructor(e,n=nv){this.level=e??"error",this.levelValue=Au.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new M2(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===Au.levels.values.error?console.error(e):n===Au.levels.values.warn?console.warn(e):n===Au.levels.values.debug?console.debug(e):n===Au.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Fo({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new M2(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(Fo({extraMetadata:e})),new Blob(n,{type:"application/json"})}},NM=class{constructor(e,n=nv){this.baseChunkLogger=new X6(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},RM=class{constructor(e,n=nv){this.baseChunkLogger=new X6(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var PM=Object.defineProperty,kM=Object.defineProperties,OM=Object.getOwnPropertyDescriptors,L2=Object.getOwnPropertySymbols,BM=Object.prototype.hasOwnProperty,$M=Object.prototype.propertyIsEnumerable,F2=(t,e,n)=>e in t?PM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Op=(t,e)=>{for(var n in e||(e={}))BM.call(e,n)&&F2(t,n,e[n]);if(L2)for(var n of L2(e))$M.call(e,n)&&F2(t,n,e[n]);return t},Bp=(t,e)=>kM(t,OM(e));function El(t){return Bp(Op({},t),{level:t?.level||xM.level})}function DM(t,e=Vh){return t[e]||""}function UM(t,e,n=Vh){return t[n]=e,t}function ps(t,e=Vh){let n="";return typeof t.bindings>"u"?n=DM(t,e):n=t.bindings().context||"",n}function MM(t,e,n=Vh){const r=ps(t,n);return r.trim()?`${r}/${e}`:e}function Dr(t,e,n=Vh){const r=MM(t,e,n),s=t.child({context:r});return UM(s,r,n)}function LM(t){var e,n;const r=new NM((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Hh(Bp(Op({},t.opts),{level:"trace",browser:Bp(Op({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function FM(t){var e;const n=new RM((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Hh(Bp(Op({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function rv(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?LM(t):FM(t)}var jM=Object.defineProperty,qM=(t,e,n)=>e in t?jM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,j2=(t,e,n)=>qM(t,typeof e!="symbol"?e+"":e,n);let zM=class extends qc{constructor(e){super(),this.opts=e,j2(this,"protocol","wc"),j2(this,"version",2)}};var WM=Object.defineProperty,HM=(t,e,n)=>e in t?WM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,VM=(t,e,n)=>HM(t,e+"",n);let KM=class extends qc{constructor(e,n){super(),this.core=e,this.logger=n,VM(this,"records",new Map)}},GM=class{constructor(e,n){this.logger=e,this.core=n}},YM=class extends qc{constructor(e,n){super(),this.relayer=e,this.logger=n}},ZM=class extends qc{constructor(e){super()}},JM=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},XM=class extends qc{constructor(e,n){super(),this.relayer=e,this.logger=n}},QM=class extends qc{constructor(e,n){super(),this.core=e,this.logger=n}},e9=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},t9=class{constructor(e,n){this.projectId=e,this.logger=n}},n9=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var r9=Object.defineProperty,s9=(t,e,n)=>e in t?r9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,q2=(t,e,n)=>s9(t,typeof e!="symbol"?e+"":e,n);let i9=class{constructor(e){this.opts=e,q2(this,"protocol","wc"),q2(this,"version",2)}},o9=class{constructor(e){this.client=e}};function a9(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Q6(t,...e){if(!a9(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function z2(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function c9(t,e){Q6(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const su=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Om=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function u9(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function ex(t){return typeof t=="string"&&(t=u9(t)),Q6(t),t}let l9=class{clone(){return this._cloneInto()}};function d9(t){const e=r=>t().update(ex(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function tx(t=32){if(su&&typeof su.getRandomValues=="function")return su.getRandomValues(new Uint8Array(t));if(su&&typeof su.randomBytes=="function")return su.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function h9(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}let f9=class extends l9{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Om(this.buffer)}update(e){z2(this);const{view:n,buffer:r,blockLen:s}=this;e=ex(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Om(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){z2(this),c9(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;h9(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Om(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const Cf=BigInt(2**32-1),Vw=BigInt(32);function nx(t,e=!1){return e?{h:Number(t&Cf),l:Number(t>>Vw&Cf)}:{h:Number(t>>Vw&Cf)|0,l:Number(t&Cf)|0}}function p9(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=nx(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const g9=(t,e)=>BigInt(t>>>0)<<Vw|BigInt(e>>>0),m9=(t,e,n)=>t>>>n,y9=(t,e,n)=>t<<32-n|e>>>n,w9=(t,e,n)=>t>>>n|e<<32-n,b9=(t,e,n)=>t<<32-n|e>>>n,v9=(t,e,n)=>t<<64-n|e>>>n-32,E9=(t,e,n)=>t>>>n-32|e<<64-n,_9=(t,e)=>e,C9=(t,e)=>t,A9=(t,e,n)=>t<<n|e>>>32-n,I9=(t,e,n)=>e<<n|t>>>32-n,S9=(t,e,n)=>e<<n-32|t>>>64-n,x9=(t,e,n)=>t<<n-32|e>>>64-n;function T9(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const N9=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),R9=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,P9=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),k9=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,O9=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),B9=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,pt={fromBig:nx,split:p9,toBig:g9,shrSH:m9,shrSL:y9,rotrSH:w9,rotrSL:b9,rotrBH:v9,rotrBL:E9,rotr32H:_9,rotr32L:C9,rotlSH:A9,rotlSL:I9,rotlBH:S9,rotlBL:x9,add:T9,add3L:N9,add3H:R9,add4L:P9,add4H:k9,add5H:B9,add5L:O9},[$9,D9]=pt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),ra=new Uint32Array(80),sa=new Uint32Array(80);let U9=class extends f9{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:d,Fl:h,Gh:f,Gl:y,Hh:m,Hl:v}=this;return[e,n,r,s,i,o,a,c,u,l,d,h,f,y,m,v]}set(e,n,r,s,i,o,a,c,u,l,d,h,f,y,m,v){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=y|0,this.Hh=m|0,this.Hl=v|0}process(e,n){for(let A=0;A<16;A++,n+=4)ra[A]=e.getUint32(n),sa[A]=e.getUint32(n+=4);for(let A=16;A<80;A++){const M=ra[A-15]|0,P=sa[A-15]|0,I=pt.rotrSH(M,P,1)^pt.rotrSH(M,P,8)^pt.shrSH(M,P,7),F=pt.rotrSL(M,P,1)^pt.rotrSL(M,P,8)^pt.shrSL(M,P,7),W=ra[A-2]|0,D=sa[A-2]|0,k=pt.rotrSH(W,D,19)^pt.rotrBH(W,D,61)^pt.shrSH(W,D,6),B=pt.rotrSL(W,D,19)^pt.rotrBL(W,D,61)^pt.shrSL(W,D,6),N=pt.add4L(F,B,sa[A-7],sa[A-16]),R=pt.add4H(N,I,k,ra[A-7],ra[A-16]);ra[A]=R|0,sa[A]=N|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:d,El:h,Fh:f,Fl:y,Gh:m,Gl:v,Hh:T,Hl:O}=this;for(let A=0;A<80;A++){const M=pt.rotrSH(d,h,14)^pt.rotrSH(d,h,18)^pt.rotrBH(d,h,41),P=pt.rotrSL(d,h,14)^pt.rotrSL(d,h,18)^pt.rotrBL(d,h,41),I=d&f^~d&m,F=h&y^~h&v,W=pt.add5L(O,P,F,D9[A],sa[A]),D=pt.add5H(W,T,M,I,$9[A],ra[A]),k=W|0,B=pt.rotrSH(r,s,28)^pt.rotrBH(r,s,34)^pt.rotrBH(r,s,39),N=pt.rotrSL(r,s,28)^pt.rotrBL(r,s,34)^pt.rotrBL(r,s,39),R=r&i^r&a^i&a,p=s&o^s&c^o&c;T=m|0,O=v|0,m=f|0,v=y|0,f=d|0,y=h|0,{h:d,l:h}=pt.add(u|0,l|0,D|0,k|0),u=a|0,l=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const g=pt.add3L(k,N,p);r=pt.add3H(g,D,B,R),s=g|0}({h:r,l:s}=pt.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=pt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=pt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=pt.add(this.Dh|0,this.Dl|0,u|0,l|0),{h:d,l:h}=pt.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:y}=pt.add(this.Fh|0,this.Fl|0,f|0,y|0),{h:m,l:v}=pt.add(this.Gh|0,this.Gl|0,m|0,v|0),{h:T,l:O}=pt.add(this.Hh|0,this.Hl|0,T|0,O|0),this.set(r,s,i,o,a,c,u,l,d,h,f,y,m,v,T,O)}roundClean(){ra.fill(0),sa.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const M9=d9(()=>new U9);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const sv=BigInt(0),rx=BigInt(1),L9=BigInt(2);function iv(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ov(t){if(!iv(t))throw new Error("Uint8Array expected")}function Bm(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const F9=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function av(t){ov(t);let e="";for(let n=0;n<t.length;n++)e+=F9[t[n]];return e}function sx(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?sv:BigInt("0x"+t)}const ho={_0:48,_9:57,A:65,F:70,a:97,f:102};function W2(t){if(t>=ho._0&&t<=ho._9)return t-ho._0;if(t>=ho.A&&t<=ho.F)return t-(ho.A-10);if(t>=ho.a&&t<=ho.f)return t-(ho.a-10)}function ix(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=W2(t.charCodeAt(i)),a=W2(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function j9(t){return sx(av(t))}function op(t){return ov(t),sx(av(Uint8Array.from(t).reverse()))}function ox(t,e){return ix(t.toString(16).padStart(e*2,"0"))}function Kw(t,e){return ox(t,e).reverse()}function fo(t,e,n){let r;if(typeof e=="string")try{r=ix(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(iv(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function H2(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];ov(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const $m=t=>typeof t=="bigint"&&sv<=t;function q9(t,e,n){return $m(t)&&$m(e)&&$m(n)&&e<=t&&t<n}function Ml(t,e,n,r){if(!q9(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function z9(t){let e;for(e=0;t>sv;t>>=rx,e+=1);return e}const W9=t=>(L9<<BigInt(t-1))-rx,H9={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||iv(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function cv(t,e,n={}){const r=(s,i,o)=>{const a=H9[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function V2(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const er=BigInt(0),xn=BigInt(1),Ja=BigInt(2),V9=BigInt(3),Gw=BigInt(4),K2=BigInt(5),G2=BigInt(8);function Wn(t,e){const n=t%e;return n>=er?n:e+n}function K9(t,e,n){if(e<er)throw new Error("invalid exponent, negatives unsupported");if(n<=er)throw new Error("invalid modulus");if(n===xn)return er;let r=xn;for(;e>er;)e&xn&&(r=r*t%n),t=t*t%n,e>>=xn;return r}function Ri(t,e,n){let r=t;for(;e-- >er;)r*=r,r%=n;return r}function Y2(t,e){if(t===er)throw new Error("invert: expected non-zero number");if(e<=er)throw new Error("invert: expected positive modulus, got "+e);let n=Wn(t,e),r=e,s=er,i=xn;for(;n!==er;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==xn)throw new Error("invert: does not exist");return Wn(s,e)}function G9(t){const e=(t-xn)/Ja;let n,r,s;for(n=t-xn,r=0;n%Ja===er;n/=Ja,r++);for(s=Ja;s<t&&K9(s,e,t)!==t-xn;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+xn)/Gw;return function(a,c){const u=a.pow(c,o);if(!a.eql(a.sqr(u),c))throw new Error("Cannot find square root");return u}}const i=(n+xn)/Ja;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,u=o.pow(o.mul(o.ONE,s),n),l=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let y=o.sqr(d);h<c&&!o.eql(y,o.ONE);h++)y=o.sqr(y);const f=o.pow(u,xn<<BigInt(c-h-1));u=o.sqr(f),l=o.mul(l,f),d=o.mul(d,u),c=h}return l}}function Y9(t){if(t%Gw===V9){const e=(t+xn)/Gw;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%G2===K2){const e=(t-K2)/G2;return function(n,r){const s=n.mul(r,Ja),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,Ja),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return G9(t)}const Z9=(t,e)=>(Wn(t,e)&xn)===xn,J9=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function X9(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=J9.reduce((r,s)=>(r[s]="function",r),e);return cv(t,n)}function Q9(t,e,n){if(n<er)throw new Error("invalid exponent, negatives unsupported");if(n===er)return t.ONE;if(n===xn)return e;let r=t.ONE,s=e;for(;n>er;)n&xn&&(r=t.mul(r,s)),s=t.sqr(s),n>>=xn;return r}function eL(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function ax(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function cx(t,e,n=!1,r={}){if(t<=er)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=ax(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:W9(s),ZERO:er,ONE:xn,create:c=>Wn(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return er<=c&&c<t},is0:c=>c===er,isOdd:c=>(c&xn)===xn,neg:c=>Wn(-c,t),eql:(c,u)=>c===u,sqr:c=>Wn(c*c,t),add:(c,u)=>Wn(c+u,t),sub:(c,u)=>Wn(c-u,t),mul:(c,u)=>Wn(c*u,t),pow:(c,u)=>Q9(a,c,u),div:(c,u)=>Wn(c*Y2(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>Y2(c,t),sqrt:r.sqrt||(c=>(o||(o=Y9(t)),o(a,c))),invertBatch:c=>eL(a,c),cmov:(c,u,l)=>l?u:c,toBytes:c=>n?Kw(c,i):ox(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?op(c):j9(c)}});return Object.freeze(a)}const Z2=BigInt(0),Af=BigInt(1);function Dm(t,e){const n=e.negate();return t?n:e}function ux(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Um(t,e){ux(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function tL(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function nL(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const Mm=new WeakMap,lx=new WeakMap;function Lm(t){return lx.get(t)||1}function rL(t,e){return{constTimeNegate:Dm,hasPrecomputes(n){return Lm(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>Z2;)r&Af&&(s=s.add(i)),i=i.double(),r>>=Af;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=Um(r,e),o=[];let a=n,c=a;for(let u=0;u<s;u++){c=a,o.push(c);for(let l=1;l<i;l++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=Um(n,e);let a=t.ZERO,c=t.BASE;const u=BigInt(2**n-1),l=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let y=Number(s&u);s>>=d,y>o&&(y-=l,s+=Af);const m=f,v=f+Math.abs(y)-1,T=h%2!==0,O=y<0;y===0?c=c.add(Dm(T,r[m])):a=a.add(Dm(O,r[v]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=Um(n,e),c=BigInt(2**n-1),u=2**n,l=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===Z2)break;let f=Number(s&c);if(s>>=l,f>a&&(f-=u,s+=Af),f===0)continue;let y=r[h+Math.abs(f)-1];f<0&&(y=y.negate()),i=i.add(y)}return i},getPrecomputes(n,r,s){let i=Mm.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&Mm.set(r,s(i))),i},wNAFCached(n,r,s){const i=Lm(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=Lm(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){ux(r,e),lx.set(n,r),Mm.delete(n)}}}function sL(t,e,n,r){if(tL(n,t),nL(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=z9(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),u=Math.floor((e.BITS-1)/o)*o;let l=s;for(let d=u;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const y=r[f],m=Number(y>>BigInt(d)&BigInt(a));c[m]=c[m].add(n[f])}let h=s;for(let f=c.length-1,y=s;f>0;f--)y=y.add(c[f]),h=h.add(y);if(l=l.add(h),d!==0)for(let f=0;f<o;f++)l=l.double()}return l}function iL(t){return X9(t.Fp),cv(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ax(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const ri=BigInt(0),Zr=BigInt(1),If=BigInt(2),oL=BigInt(8),aL={zip215:!0};function cL(t){const e=iL(t);return cv(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function uL(t){const e=cL(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,u=If<<BigInt(a*8)-Zr,l=n.create,d=cx(e.n,e.nBitLength),h=e.uvRatio||((g,w)=>{try{return{isValid:!0,value:n.sqrt(g*n.inv(w))}}catch{return{isValid:!1,value:ri}}}),f=e.adjustScalarBytes||(g=>g),y=e.domain||((g,w,_)=>{if(Bm("phflag",_),w.length||_)throw new Error("Contexts/pre-hash are not supported");return g});function m(g,w){Ml("coordinate "+g,w,ri,u)}function v(g){if(!(g instanceof A))throw new Error("ExtendedPoint expected")}const T=V2((g,w)=>{const{ex:_,ey:C,ez:L}=g,z=g.is0();w==null&&(w=z?oL:n.inv(L));const q=l(_*w),b=l(C*w),E=l(L*w);if(z)return{x:ri,y:Zr};if(E!==Zr)throw new Error("invZ was invalid");return{x:q,y:b}}),O=V2(g=>{const{a:w,d:_}=e;if(g.is0())throw new Error("bad point: ZERO");const{ex:C,ey:L,ez:z,et:q}=g,b=l(C*C),E=l(L*L),j=l(z*z),K=l(j*j),X=l(b*w),re=l(j*l(X+E)),de=l(K+l(_*l(b*E)));if(re!==de)throw new Error("bad point: equation left != right (1)");const he=l(C*L),Oe=l(z*q);if(he!==Oe)throw new Error("bad point: equation left != right (2)");return!0});class A{constructor(w,_,C,L){this.ex=w,this.ey=_,this.ez=C,this.et=L,m("x",w),m("y",_),m("z",C),m("t",L),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(w){if(w instanceof A)throw new Error("extended point not allowed");const{x:_,y:C}=w||{};return m("x",_),m("y",C),new A(_,C,Zr,l(_*C))}static normalizeZ(w){const _=n.invertBatch(w.map(C=>C.ez));return w.map((C,L)=>C.toAffine(_[L])).map(A.fromAffine)}static msm(w,_){return sL(A,d,w,_)}_setWindowSize(w){I.setWindowSize(this,w)}assertValidity(){O(this)}equals(w){v(w);const{ex:_,ey:C,ez:L}=this,{ex:z,ey:q,ez:b}=w,E=l(_*b),j=l(z*L),K=l(C*b),X=l(q*L);return E===j&&K===X}is0(){return this.equals(A.ZERO)}negate(){return new A(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){const{a:w}=e,{ex:_,ey:C,ez:L}=this,z=l(_*_),q=l(C*C),b=l(If*l(L*L)),E=l(w*z),j=_+C,K=l(l(j*j)-z-q),X=E+q,re=X-b,de=E-q,he=l(K*re),Oe=l(X*de),Re=l(K*de),Ve=l(re*X);return new A(he,Oe,Ve,Re)}add(w){v(w);const{a:_,d:C}=e,{ex:L,ey:z,ez:q,et:b}=this,{ex:E,ey:j,ez:K,et:X}=w;if(_===BigInt(-1)){const ro=l((z-L)*(j+E)),Ft=l((z+L)*(j-E)),Wt=l(Ft-ro);if(Wt===ri)return this.double();const Qt=l(q*If*X),lt=l(b*If*K),Ot=lt+Qt,Mn=Ft+ro,Mt=lt-Qt,Kt=l(Ot*Wt),Er=l(Mn*Mt),Bt=l(Ot*Mt),H=l(Wt*Mn);return new A(Kt,Er,H,Bt)}const re=l(L*E),de=l(z*j),he=l(b*C*X),Oe=l(q*K),Re=l((L+z)*(E+j)-re-de),Ve=Oe-he,kt=Oe+he,dt=l(de-_*re),ht=l(Re*Ve),nr=l(kt*dt),Ut=l(Re*dt),Xt=l(Ve*kt);return new A(ht,nr,Xt,Ut)}subtract(w){return this.add(w.negate())}wNAF(w){return I.wNAFCached(this,w,A.normalizeZ)}multiply(w){const _=w;Ml("scalar",_,Zr,r);const{p:C,f:L}=this.wNAF(_);return A.normalizeZ([C,L])[0]}multiplyUnsafe(w,_=A.ZERO){const C=w;return Ml("scalar",C,ri,r),C===ri?P:this.is0()||C===Zr?this:I.wNAFCachedUnsafe(this,C,A.normalizeZ,_)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return I.unsafeLadder(this,r).is0()}toAffine(w){return T(this,w)}clearCofactor(){const{h:w}=e;return w===Zr?this:this.multiplyUnsafe(w)}static fromHex(w,_=!1){const{d:C,a:L}=e,z=n.BYTES;w=fo("pointHex",w,z),Bm("zip215",_);const q=w.slice(),b=w[z-1];q[z-1]=b&-129;const E=op(q),j=_?u:n.ORDER;Ml("pointHex.y",E,ri,j);const K=l(E*E),X=l(K-Zr),re=l(C*K-L);let{isValid:de,value:he}=h(X,re);if(!de)throw new Error("Point.fromHex: invalid y coordinate");const Oe=(he&Zr)===Zr,Re=(b&128)!==0;if(!_&&he===ri&&Re)throw new Error("Point.fromHex: x=0 and x_0=1");return Re!==Oe&&(he=l(-he)),A.fromAffine({x:he,y:E})}static fromPrivateKey(w){return D(w).point}toRawBytes(){const{x:w,y:_}=this.toAffine(),C=Kw(_,n.BYTES);return C[C.length-1]|=w&Zr?128:0,C}toHex(){return av(this.toRawBytes())}}A.BASE=new A(e.Gx,e.Gy,Zr,l(e.Gx*e.Gy)),A.ZERO=new A(ri,Zr,Zr,ri);const{BASE:M,ZERO:P}=A,I=rL(A,a*8);function F(g){return Wn(g,r)}function W(g){return F(op(g))}function D(g){const w=n.BYTES;g=fo("private key",g,w);const _=fo("hashed private key",i(g),2*w),C=f(_.slice(0,w)),L=_.slice(w,2*w),z=W(C),q=M.multiply(z),b=q.toRawBytes();return{head:C,prefix:L,scalar:z,point:q,pointBytes:b}}function k(g){return D(g).pointBytes}function B(g=new Uint8Array,...w){const _=H2(...w);return W(i(y(_,fo("context",g),!!s)))}function N(g,w,_={}){g=fo("message",g),s&&(g=s(g));const{prefix:C,scalar:L,pointBytes:z}=D(w),q=B(_.context,C,g),b=M.multiply(q).toRawBytes(),E=B(_.context,b,z,g),j=F(q+E*L);Ml("signature.s",j,ri,r);const K=H2(b,Kw(j,n.BYTES));return fo("result",K,n.BYTES*2)}const R=aL;function p(g,w,_,C=R){const{context:L,zip215:z}=C,q=n.BYTES;g=fo("signature",g,2*q),w=fo("message",w),_=fo("publicKey",_,q),z!==void 0&&Bm("zip215",z),s&&(w=s(w));const b=op(g.slice(q,2*q));let E,j,K;try{E=A.fromHex(_,z),j=A.fromHex(g.slice(0,q),z),K=M.multiplyUnsafe(b)}catch{return!1}if(!z&&E.isSmallOrder())return!1;const X=B(L,j.toRawBytes(),E.toRawBytes(),w);return j.add(E.multiplyUnsafe(X)).subtract(K).clearCofactor().equals(A.ZERO)}return M._setWindowSize(8),{CURVE:e,getPublicKey:k,sign:N,verify:p,ExtendedPoint:A,utils:{getExtendedPublicKey:D,randomPrivateKey:()=>o(n.BYTES),precompute(g=8,w=A.BASE){return w._setWindowSize(g),w.multiply(BigInt(3)),w}}}}BigInt(0),BigInt(1);const uv=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),J2=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const lL=BigInt(1),X2=BigInt(2);BigInt(3);const dL=BigInt(5),hL=BigInt(8);function fL(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=uv,o=t*t%i*t%i,a=Ri(o,X2,i)*o%i,c=Ri(a,lL,i)*t%i,u=Ri(c,dL,i)*c%i,l=Ri(u,e,i)*u%i,d=Ri(l,n,i)*l%i,h=Ri(d,r,i)*d%i,f=Ri(h,s,i)*h%i,y=Ri(f,s,i)*h%i,m=Ri(y,e,i)*u%i;return{pow_p_5_8:Ri(m,X2,i)*t%i,b2:o}}function pL(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function gL(t,e){const n=uv,r=Wn(e*e*e,n),s=Wn(r*r*e,n),i=fL(t*s).pow_p_5_8;let o=Wn(t*r*i,n);const a=Wn(e*o*o,n),c=o,u=Wn(o*J2,n),l=a===t,d=a===Wn(-t,n),h=a===Wn(-t*J2,n);return l&&(o=c),(d||h)&&(o=u),Z9(o,n)&&(o=Wn(-o,n)),{isValid:l||d,value:o}}const mL=cx(uv,void 0,!0),yL={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:mL,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:hL,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:M9,randomBytes:tx,adjustScalarBytes:pL,uvRatio:gL},dx=uL(yL),wL="EdDSA",bL="JWT",$p=".",K0="base64url",hx="utf8",fx="utf8",vL=":",EL="did",_L="key",Q2="base58btc",CL="z",AL="K36",IL=32;function lv(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function px(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?lv(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function gx(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=px(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return lv(n)}function SL(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(y){if(y instanceof Uint8Array||(ArrayBuffer.isView(y)?y=new Uint8Array(y.buffer,y.byteOffset,y.byteLength):Array.isArray(y)&&(y=Uint8Array.from(y))),!(y instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(y.length===0)return"";for(var m=0,v=0,T=0,O=y.length;T!==O&&y[T]===0;)T++,m++;for(var A=(O-T)*l+1>>>0,M=new Uint8Array(A);T!==O;){for(var P=y[T],I=0,F=A-1;(P!==0||I<v)&&F!==-1;F--,I++)P+=256*M[F]>>>0,M[F]=P%a>>>0,P=P/a>>>0;if(P!==0)throw new Error("Non-zero carry");v=I,T++}for(var W=A-v;W!==A&&M[W]===0;)W++;for(var D=c.repeat(m);W<A;++W)D+=t.charAt(M[W]);return D}function h(y){if(typeof y!="string")throw new TypeError("Expected String");if(y.length===0)return new Uint8Array;var m=0;if(y[m]!==" "){for(var v=0,T=0;y[m]===c;)v++,m++;for(var O=(y.length-m)*u+1>>>0,A=new Uint8Array(O);y[m];){var M=n[y.charCodeAt(m)];if(M===255)return;for(var P=0,I=O-1;(M!==0||P<T)&&I!==-1;I--,P++)M+=a*A[I]>>>0,A[I]=M%256>>>0,M=M/256>>>0;if(M!==0)throw new Error("Non-zero carry");T=P,m++}if(y[m]!==" "){for(var F=O-T;F!==O&&A[F]===0;)F++;for(var W=new Uint8Array(v+(O-F)),D=v;F!==O;)W[D++]=A[F++];return W}}}function f(y){var m=h(y);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var xL=SL,TL=xL;const mx=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},NL=t=>new TextEncoder().encode(t),RL=t=>new TextDecoder().decode(t);let PL=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},kL=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return yx(this,e)}},OL=class{constructor(e){this.decoders=e}or(e){return yx(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const yx=(t,e)=>new OL({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let BL=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new PL(e,n,r),this.decoder=new kL(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const G0=({name:t,prefix:e,encode:n,decode:r})=>new BL(t,e,n,r),Kh=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=TL(n,e);return G0({prefix:t,name:e,encode:r,decode:i=>mx(s(i))})},$L=(t,e,n,r)=>{const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,u=0;for(let l=0;l<i;++l){const d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},DL=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},wr=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>G0({prefix:e,name:t,encode(s){return DL(s,r,n)},decode(s){return $L(s,r,n,t)}}),UL=G0({prefix:"\0",name:"identity",encode:t=>RL(t),decode:t=>NL(t)});var ML=Object.freeze({__proto__:null,identity:UL});const LL=wr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var FL=Object.freeze({__proto__:null,base2:LL});const jL=wr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var qL=Object.freeze({__proto__:null,base8:jL});const zL=Kh({prefix:"9",name:"base10",alphabet:"0123456789"});var WL=Object.freeze({__proto__:null,base10:zL});const HL=wr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),VL=wr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var KL=Object.freeze({__proto__:null,base16:HL,base16upper:VL});const GL=wr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),YL=wr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ZL=wr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),JL=wr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),XL=wr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),QL=wr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),e7=wr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),t7=wr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),n7=wr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var r7=Object.freeze({__proto__:null,base32:GL,base32upper:YL,base32pad:ZL,base32padupper:JL,base32hex:XL,base32hexupper:QL,base32hexpad:e7,base32hexpadupper:t7,base32z:n7});const s7=Kh({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),i7=Kh({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var o7=Object.freeze({__proto__:null,base36:s7,base36upper:i7});const a7=Kh({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),c7=Kh({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var u7=Object.freeze({__proto__:null,base58btc:a7,base58flickr:c7});const l7=wr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),d7=wr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),h7=wr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),f7=wr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var p7=Object.freeze({__proto__:null,base64:l7,base64pad:d7,base64url:h7,base64urlpad:f7});const wx=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),g7=wx.reduce((t,e,n)=>(t[n]=e,t),[]),m7=wx.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function y7(t){return t.reduce((e,n)=>(e+=g7[n],e),"")}function w7(t){const e=[];for(const n of t){const r=m7[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const b7=G0({prefix:"🚀",name:"base256emoji",encode:y7,decode:w7});var v7=Object.freeze({__proto__:null,base256emoji:b7}),E7=bx,e_=128,_7=-128,C7=Math.pow(2,31);function bx(t,e,n){e=e||[],n=n||0;for(var r=n;t>=C7;)e[n++]=t&255|e_,t/=128;for(;t&_7;)e[n++]=t&255|e_,t>>>=7;return e[n]=t|0,bx.bytes=n-r+1,e}var A7=Yw,I7=128,t_=127;function Yw(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw Yw.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&t_)<<s:(o&t_)*Math.pow(2,s),s+=7}while(o>=I7);return Yw.bytes=i-r,n}var S7=Math.pow(2,7),x7=Math.pow(2,14),T7=Math.pow(2,21),N7=Math.pow(2,28),R7=Math.pow(2,35),P7=Math.pow(2,42),k7=Math.pow(2,49),O7=Math.pow(2,56),B7=Math.pow(2,63),$7=function(t){return t<S7?1:t<x7?2:t<T7?3:t<N7?4:t<R7?5:t<P7?6:t<k7?7:t<O7?8:t<B7?9:10},D7={encode:E7,decode:A7,encodingLength:$7},vx=D7;const n_=(t,e,n=0)=>(vx.encode(t,e,n),e),r_=t=>vx.encodingLength(t),Zw=(t,e)=>{const n=e.byteLength,r=r_(t),s=r+r_(n),i=new Uint8Array(s+n);return n_(t,i,0),n_(n,i,r),i.set(e,s),new U7(t,n,e,i)};let U7=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const Ex=({name:t,code:e,encode:n})=>new M7(t,e,n);let M7=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?Zw(this.code,n):n.then(r=>Zw(this.code,r))}else throw Error("Unknown type, must be binary type")}};const _x=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),L7=Ex({name:"sha2-256",code:18,encode:_x("SHA-256")}),F7=Ex({name:"sha2-512",code:19,encode:_x("SHA-512")});var j7=Object.freeze({__proto__:null,sha256:L7,sha512:F7});const Cx=0,q7="identity",Ax=mx,z7=t=>Zw(Cx,Ax(t)),W7={code:Cx,name:q7,encode:Ax,digest:z7};var H7=Object.freeze({__proto__:null,identity:W7});new TextEncoder,new TextDecoder;const s_={...ML,...FL,...qL,...WL,...KL,...r7,...o7,...u7,...p7,...v7};({...j7,...H7});function Ix(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const i_=Ix("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Fm=Ix("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=px(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),Sx={utf8:i_,"utf-8":i_,hex:s_.base16,latin1:Fm,ascii:Fm,binary:Fm,...s_};function Y0(t,e="utf8"){const n=Sx[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function _l(t,e="utf8"){const n=Sx[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?lv(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function o_(t){return Nc(Y0(_l(t,K0),hx))}function Dp(t){return Y0(_l(Fo(t),hx),K0)}function xx(t){const e=_l(AL,Q2),n=CL+Y0(gx([e,t]),Q2);return[EL,_L,n].join(vL)}function V7(t){return Y0(t,K0)}function K7(t){return _l(t,K0)}function G7(t){return _l([Dp(t.header),Dp(t.payload)].join($p),fx)}function Y7(t){return[Dp(t.header),Dp(t.payload),V7(t.signature)].join($p)}function Jw(t){const e=t.split($p),n=o_(e[0]),r=o_(e[1]),s=K7(e[2]),i=_l(e.slice(0,2).join($p),fx);return{header:n,payload:r,signature:s,data:i}}function a_(t=tx(IL)){const e=dx.getPublicKey(t);return{secretKey:gx([t,e]),publicKey:e}}async function Z7(t,e,n,r,s=_e.fromMiliseconds(Date.now())){const i={alg:wL,typ:bL},o=xx(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},u=G7({header:i,payload:c}),l=dx.sign(u,r.secretKey.slice(0,32));return Y7({header:i,payload:c,signature:l})}var c_=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},J7=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),X7=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=tr.platform}return t}(),Q7=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),eF=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),tF=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),nF=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,rF=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,u_=3,sF=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",nF]],l_=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function iF(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new tF:typeof navigator<"u"?aF(navigator.userAgent):uF()}function oF(t){return t!==""&&sF.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function aF(t){var e=oF(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new eF;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<u_&&(s=c_(c_([],s,!0),lF(u_-s.length),!0)):s=[];var i=s.join("."),o=cF(t),a=rF.exec(t);return a&&a[1]?new Q7(n,i,o,a[1]):new J7(n,i,o)}function cF(t){for(var e=0,n=l_.length;e<n;e++){var r=l_[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function uF(){var t=typeof tr<"u"&&tr.version;return t?new X7(tr.version.slice(1)):null}function lF(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var Yt={},d_;function Tx(){if(d_)return Yt;d_=1,Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.getLocalStorage=Yt.getLocalStorageOrThrow=Yt.getCrypto=Yt.getCryptoOrThrow=Yt.getLocation=Yt.getLocationOrThrow=Yt.getNavigator=Yt.getNavigatorOrThrow=Yt.getDocument=Yt.getDocumentOrThrow=Yt.getFromWindowOrThrow=Yt.getFromWindow=void 0;function t(h){let f;return typeof window<"u"&&typeof window[h]<"u"&&(f=window[h]),f}Yt.getFromWindow=t;function e(h){const f=t(h);if(!f)throw new Error(`${h} is not defined in Window`);return f}Yt.getFromWindowOrThrow=e;function n(){return e("document")}Yt.getDocumentOrThrow=n;function r(){return t("document")}Yt.getDocument=r;function s(){return e("navigator")}Yt.getNavigatorOrThrow=s;function i(){return t("navigator")}Yt.getNavigator=i;function o(){return e("location")}Yt.getLocationOrThrow=o;function a(){return t("location")}Yt.getLocation=a;function c(){return e("crypto")}Yt.getCryptoOrThrow=c;function u(){return t("crypto")}Yt.getCrypto=u;function l(){return e("localStorage")}Yt.getLocalStorageOrThrow=l;function d(){return t("localStorage")}return Yt.getLocalStorage=d,Yt}var jo=Tx(),Ll={},h_;function dF(){if(h_)return Ll;h_=1,Object.defineProperty(Ll,"__esModule",{value:!0}),Ll.getWindowMetadata=void 0;const t=Tx();function e(){let n,r;try{n=t.getDocumentOrThrow(),r=t.getLocationOrThrow()}catch{return null}function s(){const f=n.getElementsByTagName("link"),y=[];for(let m=0;m<f.length;m++){const v=f[m],T=v.getAttribute("rel");if(T&&T.toLowerCase().indexOf("icon")>-1){const O=v.getAttribute("href");if(O)if(O.toLowerCase().indexOf("https:")===-1&&O.toLowerCase().indexOf("http:")===-1&&O.indexOf("//")!==0){let A=r.protocol+"//"+r.host;if(O.indexOf("/")===0)A+=O;else{const M=r.pathname.split("/");M.pop();const P=M.join("/");A+=P+"/"+O}y.push(A)}else if(O.indexOf("//")===0){const A=r.protocol+O;y.push(A)}else y.push(O)}}return y}function i(...f){const y=n.getElementsByTagName("meta");for(let m=0;m<y.length;m++){const v=y[m],T=["itemprop","property","name"].map(O=>v.getAttribute(O)).filter(O=>O?f.includes(O):!1);if(T.length&&T){const O=v.getAttribute("content");if(O)return O}}return""}function o(){let f=i("name","og:site_name","og:title","twitter:title");return f||(f=n.title),f}function a(){return i("description","og:description","twitter:description","keywords")}const c=o(),u=a(),l=r.origin,d=s();return{description:u,url:l,icons:d,name:c}}return Ll.getWindowMetadata=e,Ll}var hF=dF();function fF(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let u=0;u<e.length;u++)e[u]=255;for(let u=0;u<t.length;u++){const l=t.charAt(u),d=l.charCodeAt(0);if(e[d]!==255)throw new TypeError(l+" is ambiguous");e[d]=u}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(u){if(u instanceof Uint8Array||(ArrayBuffer.isView(u)?u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength):Array.isArray(u)&&(u=Uint8Array.from(u))),!(u instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(u.length===0)return"";let l=0,d=0,h=0;const f=u.length;for(;h!==f&&u[h]===0;)h++,l++;const y=(f-h)*i+1>>>0,m=new Uint8Array(y);for(;h!==f;){let O=u[h],A=0;for(let M=y-1;(O!==0||A<d)&&M!==-1;M--,A++)O+=256*m[M]>>>0,m[M]=O%n>>>0,O=O/n>>>0;if(O!==0)throw new Error("Non-zero carry");d=A,h++}let v=y-d;for(;v!==y&&m[v]===0;)v++;let T=r.repeat(l);for(;v<y;++v)T+=t.charAt(m[v]);return T}function a(u){if(typeof u!="string")throw new TypeError("Expected String");if(u.length===0)return new Uint8Array;let l=0,d=0,h=0;for(;u[l]===r;)d++,l++;const f=(u.length-l)*s+1>>>0,y=new Uint8Array(f);for(;l<u.length;){const O=u.charCodeAt(l);if(O>255)return;let A=e[O];if(A===255)return;let M=0;for(let P=f-1;(A!==0||M<h)&&P!==-1;P--,M++)A+=n*y[P]>>>0,y[P]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");h=M,l++}let m=f-h;for(;m!==f&&y[m]===0;)m++;const v=new Uint8Array(d+(f-m));let T=d;for(;m!==f;)v[T++]=y[m++];return v}function c(u){const l=a(u);if(l)return l;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var pF="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Qn=fF(pF);function gF(t){const e=t.length;let n=0,r=0;for(;r<e;){let s=t.charCodeAt(r++);if((s&4294967168)===0){n++;continue}else if((s&4294965248)===0)n+=2;else{if(s>=55296&&s<=56319&&r<e){const i=t.charCodeAt(r);(i&64512)===56320&&(++r,s=((s&1023)<<10)+(i&1023)+65536)}(s&4294901760)===0?n+=3:n+=4}}return n}function mF(t,e,n){const r=t.length;let s=n,i=0;for(;i<r;){let o=t.charCodeAt(i++);if((o&4294967168)===0){e[s++]=o;continue}else if((o&4294965248)===0)e[s++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&i<r){const a=t.charCodeAt(i);(a&64512)===56320&&(++i,o=((o&1023)<<10)+(a&1023)+65536)}(o&4294901760)===0?(e[s++]=o>>12&15|224,e[s++]=o>>6&63|128):(e[s++]=o>>18&7|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128)}e[s++]=o&63|128}}const yF=new TextEncoder,wF=50;function bF(t,e,n){yF.encodeInto(t,e.subarray(n))}function vF(t,e,n){t.length>wF?bF(t,e,n):mF(t,e,n)}const EF=4096;function Nx(t,e,n){let r=e;const s=r+n,i=[];let o="";for(;r<s;){const a=t[r++];if((a&128)===0)i.push(a);else if((a&224)===192){const c=t[r++]&63;i.push((a&31)<<6|c)}else if((a&240)===224){const c=t[r++]&63,u=t[r++]&63;i.push((a&31)<<12|c<<6|u)}else if((a&248)===240){const c=t[r++]&63,u=t[r++]&63,l=t[r++]&63;let d=(a&7)<<18|c<<12|u<<6|l;d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|d&1023),i.push(d)}else i.push(a);i.length>=EF&&(o+=String.fromCharCode(...i),i.length=0)}return i.length>0&&(o+=String.fromCharCode(...i)),o}const _F=new TextDecoder,CF=200;function AF(t,e,n){const r=t.subarray(e,e+n);return _F.decode(r)}function IF(t,e,n){return n>CF?AF(t,e,n):Nx(t,e,n)}class Sf{constructor(e,n){this.type=e,this.data=n}}class bs extends Error{constructor(e){super(e);const n=Object.create(bs.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:bs.name})}}const Fl=4294967295;function SF(t,e,n){const r=n/4294967296,s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function Rx(t,e,n){const r=Math.floor(n/4294967296),s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function Px(t,e){const n=t.getInt32(e),r=t.getUint32(e+4);return n*4294967296+r}function xF(t,e){const n=t.getUint32(e),r=t.getUint32(e+4);return n*4294967296+r}const TF=-1,NF=4294967296-1,RF=17179869184-1;function PF({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=RF)if(e===0&&t<=NF){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t),n}else{const n=t/4294967296,r=t&4294967295,s=new Uint8Array(8),i=new DataView(s.buffer);return i.setUint32(0,e<<2|n&3),i.setUint32(4,r),s}else{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,e),Rx(r,4,t),n}}function kF(t){const e=t.getTime(),n=Math.floor(e/1e3),r=(e-n*1e3)*1e6,s=Math.floor(r/1e9);return{sec:n+s,nsec:r-s*1e9}}function OF(t){if(t instanceof Date){const e=kF(t);return PF(e)}else return null}function BF(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const n=e.getUint32(0),r=e.getUint32(4),s=(n&3)*4294967296+r,i=n>>>2;return{sec:s,nsec:i}}case 12:{const n=Px(e,4),r=e.getUint32(0);return{sec:n,nsec:r}}default:throw new bs(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function $F(t){const e=BF(t);return new Date(e.sec*1e3+e.nsec/1e6)}const DF={type:TF,encode:OF,decode:$F};class Up{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(DF)}register({type:e,encode:n,decode:r}){if(e>=0)this.encoders[e]=n,this.decoders[e]=r;else{const s=-1-e;this.builtInEncoders[s]=n,this.builtInDecoders[s]=r}}tryToEncode(e,n){for(let r=0;r<this.builtInEncoders.length;r++){const s=this.builtInEncoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=-1-r;return new Sf(o,i)}}}for(let r=0;r<this.encoders.length;r++){const s=this.encoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=r;return new Sf(o,i)}}}return e instanceof Sf?e:null}decode(e,n,r){const s=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return s?s(e,n,r):new Sf(n,e)}}Up.defaultCodec=new Up;function UF(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function Xw(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):UF(t)?new Uint8Array(t):Uint8Array.from(t)}const MF=100,LF=2048;let FF=class kx{constructor(e){this.entered=!1,this.extensionCodec=e?.extensionCodec??Up.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.maxDepth=e?.maxDepth??MF,this.initialBufferSize=e?.initialBufferSize??LF,this.sortKeys=e?.sortKeys??!1,this.forceFloat32=e?.forceFloat32??!1,this.ignoreUndefined=e?.ignoreUndefined??!1,this.forceIntegerToFloat=e?.forceIntegerToFloat??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new kx({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,n)}ensureBufferSizeToWrite(e){const n=this.pos+e;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(e){const n=new ArrayBuffer(e),r=new Uint8Array(n),s=new DataView(n);r.set(this.bytes),this.view=s,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const r=gF(e);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),vF(e,this.bytes,this.pos),this.pos+=r}encodeObject(e,n){const r=this.extensionCodec.tryToEncode(e,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,n);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const n=e.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const r=Xw(e);this.writeU8a(r)}encodeArray(e,n){const r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const s of e)this.doEncode(s,n+1)}countWithoutUndefined(e,n){let r=0;for(const s of n)e[s]!==void 0&&r++;return r}encodeMap(e,n){const r=Object.keys(e);this.sortKeys&&r.sort();const s=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(const i of r){const o=e[i];this.ignoreUndefined&&o===void 0||(this.encodeString(i),this.doEncode(o,n+1))}}encodeExtension(e){if(typeof e.data=="function"){const r=e.data(this.pos+6),s=r.length;if(s>=4294967296)throw new Error(`Too large extension object: ${s}`);this.writeU8(201),this.writeU32(s),this.writeI8(e.type),this.writeU8a(r);return}const n=e.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const n=e.length;this.ensureBufferSizeToWrite(n),this.bytes.set(e,this.pos),this.pos+=n}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),SF(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),Rx(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function jF(t,e){return new FF(e).encodeSharedRef(t)}function jm(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const qF=16,zF=16;class WF{constructor(e=qF,n=zF){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,n,r){const s=this.caches[r-1];e:for(const i of s){const o=i.bytes;for(let a=0;a<r;a++)if(o[a]!==e[n+a])continue e;return i.str}return null}store(e,n){const r=this.caches[e.length-1],s={bytes:e,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=s:r.push(s)}decode(e,n,r){const s=this.find(e,n,r);if(s!=null)return this.hit++,s;this.miss++;const i=Nx(e,n,r),o=Uint8Array.prototype.slice.call(e,n,n+r);return this.store(o,i),i}}const Qw="array",pd="map_key",Ox="map_value",HF=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new bs("The type of key must be string or number but "+typeof t)};class VF{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const n=this.getUninitializedStateFromPool();n.type=Qw,n.position=0,n.size=e,n.array=new Array(e)}pushMapState(e){const n=this.getUninitializedStateFromPool();n.type=pd,n.readCount=0,n.size=e,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===Qw){const r=e;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(e.type===pd||e.type===Ox){const r=e;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const jl=-1,dv=new DataView(new ArrayBuffer(0)),KF=new Uint8Array(dv.buffer);try{dv.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const f_=new RangeError("Insufficient data"),GF=new WF;let YF=class Bx{constructor(e){this.totalPos=0,this.pos=0,this.view=dv,this.bytes=KF,this.headByte=jl,this.stack=new VF,this.entered=!1,this.extensionCodec=e?.extensionCodec??Up.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.rawStrings=e?.rawStrings??!1,this.maxStrLength=e?.maxStrLength??Fl,this.maxBinLength=e?.maxBinLength??Fl,this.maxArrayLength=e?.maxArrayLength??Fl,this.maxMapLength=e?.maxMapLength??Fl,this.maxExtLength=e?.maxExtLength??Fl,this.keyDecoder=e?.keyDecoder!==void 0?e.keyDecoder:GF,this.mapKeyConverter=e?.mapKeyConverter??HF}clone(){return new Bx({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=jl,this.stack.reset()}setBuffer(e){const n=Xw(e);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===jl&&!this.hasRemaining(1))this.setBuffer(e);else{const n=this.bytes.subarray(this.pos),r=Xw(e),s=new Uint8Array(n.length+r.length);s.set(n),s.set(r,n.length),this.setBuffer(s)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let n=!1,r;for await(const a of e){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{r=this.doDecodeSync(),n=!0}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:s,pos:i,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${jm(s)} at ${o} (${i} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,n){if(this.entered){yield*this.clone().decodeMultiAsync(e,n);return}try{this.entered=!0;let r=n,s=-1;for await(const i of e){if(n&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),r&&(s=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let n;if(e>=224)n=e-256;else if(e<192)if(e<128)n=e;else if(e<144){const s=e-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e<160){const s=e-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else{const s=e-160;n=this.decodeString(s,0)}else if(e===192)n=null;else if(e===194)n=!1;else if(e===195)n=!0;else if(e===202)n=this.readF32();else if(e===203)n=this.readF64();else if(e===204)n=this.readU8();else if(e===205)n=this.readU16();else if(e===206)n=this.readU32();else if(e===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(e===208)n=this.readI8();else if(e===209)n=this.readI16();else if(e===210)n=this.readI32();else if(e===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(e===217){const s=this.lookU8();n=this.decodeString(s,1)}else if(e===218){const s=this.lookU16();n=this.decodeString(s,2)}else if(e===219){const s=this.lookU32();n=this.decodeString(s,4)}else if(e===220){const s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===221){const s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===222){const s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===223){const s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===196){const s=this.lookU8();n=this.decodeBinary(s,1)}else if(e===197){const s=this.lookU16();n=this.decodeBinary(s,2)}else if(e===198){const s=this.lookU32();n=this.decodeBinary(s,4)}else if(e===212)n=this.decodeExtension(1,0);else if(e===213)n=this.decodeExtension(2,0);else if(e===214)n=this.decodeExtension(4,0);else if(e===215)n=this.decodeExtension(8,0);else if(e===216)n=this.decodeExtension(16,0);else if(e===199){const s=this.lookU8();n=this.decodeExtension(s,1)}else if(e===200){const s=this.lookU16();n=this.decodeExtension(s,2)}else if(e===201){const s=this.lookU32();n=this.decodeExtension(s,4)}else throw new bs(`Unrecognized type byte: ${jm(e)}`);this.complete();const r=this.stack;for(;r.length>0;){const s=r.top();if(s.type===Qw)if(s.array[s.position]=n,s.position++,s.position===s.size)n=s.array,r.release(s);else continue e;else if(s.type===pd){if(n==="__proto__")throw new bs("The key __proto__ is not allowed");s.key=this.mapKeyConverter(n),s.type=Ox;continue e}else if(s.map[s.key]=n,s.readCount++,s.readCount===s.size)n=s.map,r.release(s);else{s.key=null,s.type=pd;continue e}}return n}}readHeadByte(){return this.headByte===jl&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=jl}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new bs(`Unrecognized array type byte: ${jm(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new bs(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new bs(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,n):this.decodeBinary(e,n)}decodeUtf8String(e,n){if(e>this.maxStrLength)throw new bs(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+e)throw f_;const r=this.pos+n;let s;return this.stateIsMapKey()&&this.keyDecoder?.canBeCached(e)?s=this.keyDecoder.decode(this.bytes,r,e):s=IF(this.bytes,r,e),this.pos+=n+e,s}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===pd:!1}decodeBinary(e,n){if(e>this.maxBinLength)throw new bs(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+n))throw f_;const r=this.pos+n,s=this.bytes.subarray(r,r+e);return this.pos+=n+e,s}decodeExtension(e,n){if(e>this.maxExtLength)throw new bs(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+n),s=this.decodeBinary(e,n+1);return this.extensionCodec.decode(s,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=xF(this.view,this.pos);return this.pos+=8,e}readI64(){const e=Px(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function ZF(t,e){return new YF(e).decode(t)}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function JF(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function $x(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(n=>typeof n=="string"):e.every(n=>Number.isSafeInteger(n)):!1}function Mp(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function hv(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function eb(t){if(!Array.isArray(t))throw new Error("array expected")}function Lp(t,e){if(!$x(!0,e))throw new Error(`${t}: array of strings expected`)}function XF(t,e){if(!$x(!1,e))throw new Error(`${t}: array of numbers expected`)}function QF(...t){const e=i=>i,n=(i,o)=>a=>i(o(a)),r=t.map(i=>i.encode).reduceRight(n,e),s=t.map(i=>i.decode).reduce(n,e);return{encode:r,decode:s}}function ej(t){const e=typeof t=="string"?t.split(""):t,n=e.length;Lp("alphabet",e);const r=new Map(e.map((s,i)=>[s,i]));return{encode:s=>(eb(s),s.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${t}`);return e[i]})),decode:s=>(eb(s),s.map(i=>{Mp("alphabet.decode",i);const o=r.get(i);if(o===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${t}`);return o}))}}function tj(t=""){return Mp("join",t),{encode:e=>(Lp("join.decode",e),e.join(t)),decode:e=>(Mp("join.decode",e),e.split(t))}}function nj(t,e="="){return hv(t),Mp("padding",e),{encode(n){for(Lp("padding.encode",n);n.length*t%8;)n.push(e);return n},decode(n){Lp("padding.decode",n);let r=n.length;if(r*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if((r-1)*t%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}const Dx=(t,e)=>e===0?t:Dx(e,t%e),Fp=(t,e)=>t+(e-Dx(t,e)),qm=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function p_(t,e,n,r){if(eb(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(Fp(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${Fp(e,n)}`);let s=0,i=0;const o=qm[e],a=qm[n]-1,c=[];for(const u of t){if(hv(u),u>=o)throw new Error(`convertRadix2: invalid data word=${u} from=${e}`);if(s=s<<e|u,i+e>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${e}`);for(i+=e;i>=n;i-=n)c.push((s>>i-n&a)>>>0);const l=qm[i];if(l===void 0)throw new Error("invalid carry");s&=l-1}if(s=s<<n-i&a,!r&&i>=e)throw new Error("Excess padding");if(!r&&s>0)throw new Error(`Non-zero padding: ${s}`);return r&&i>0&&c.push(s>>>0),c}function rj(t,e=!1){if(hv(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(Fp(8,t)>32||Fp(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!JF(n))throw new Error("radix2.encode input should be Uint8Array");return p_(Array.from(n),8,t,!e)},decode:n=>(XF("radix2.decode",n),Uint8Array.from(p_(n,t,8,e)))}}const sj=QF(rj(5),ej("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),nj(5),tj(""));function fv(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Ux(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?fv(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function gd(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=Ux(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return fv(n)}function ij(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(y){if(y instanceof Uint8Array||(ArrayBuffer.isView(y)?y=new Uint8Array(y.buffer,y.byteOffset,y.byteLength):Array.isArray(y)&&(y=Uint8Array.from(y))),!(y instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(y.length===0)return"";for(var m=0,v=0,T=0,O=y.length;T!==O&&y[T]===0;)T++,m++;for(var A=(O-T)*l+1>>>0,M=new Uint8Array(A);T!==O;){for(var P=y[T],I=0,F=A-1;(P!==0||I<v)&&F!==-1;F--,I++)P+=256*M[F]>>>0,M[F]=P%a>>>0,P=P/a>>>0;if(P!==0)throw new Error("Non-zero carry");v=I,T++}for(var W=A-v;W!==A&&M[W]===0;)W++;for(var D=c.repeat(m);W<A;++W)D+=t.charAt(M[W]);return D}function h(y){if(typeof y!="string")throw new TypeError("Expected String");if(y.length===0)return new Uint8Array;var m=0;if(y[m]!==" "){for(var v=0,T=0;y[m]===c;)v++,m++;for(var O=(y.length-m)*u+1>>>0,A=new Uint8Array(O);y[m];){var M=n[y.charCodeAt(m)];if(M===255)return;for(var P=0,I=O-1;(M!==0||P<T)&&I!==-1;I--,P++)M+=a*A[I]>>>0,A[I]=M%256>>>0,M=M/256>>>0;if(M!==0)throw new Error("Non-zero carry");T=P,m++}if(y[m]!==" "){for(var F=O-T;F!==O&&A[F]===0;)F++;for(var W=new Uint8Array(v+(O-F)),D=v;F!==O;)W[D++]=A[F++];return W}}}function f(y){var m=h(y);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var oj=ij,aj=oj;const cj=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},uj=t=>new TextEncoder().encode(t),lj=t=>new TextDecoder().decode(t);class dj{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class hj{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Mx(this,e)}}class fj{constructor(e){this.decoders=e}or(e){return Mx(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Mx=(t,e)=>new fj({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class pj{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new dj(e,n,r),this.decoder=new hj(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Z0=({name:t,prefix:e,encode:n,decode:r})=>new pj(t,e,n,r),Gh=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=aj(n,e);return Z0({prefix:t,name:e,encode:r,decode:i=>cj(s(i))})},gj=(t,e,n,r)=>{const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,u=0;for(let l=0;l<i;++l){const d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},mj=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},br=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>Z0({prefix:e,name:t,encode(s){return mj(s,r,n)},decode(s){return gj(s,r,n,t)}}),yj=Z0({prefix:"\0",name:"identity",encode:t=>lj(t),decode:t=>uj(t)}),wj=Object.freeze(Object.defineProperty({__proto__:null,identity:yj},Symbol.toStringTag,{value:"Module"})),bj=br({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),vj=Object.freeze(Object.defineProperty({__proto__:null,base2:bj},Symbol.toStringTag,{value:"Module"})),Ej=br({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),_j=Object.freeze(Object.defineProperty({__proto__:null,base8:Ej},Symbol.toStringTag,{value:"Module"})),Cj=Gh({prefix:"9",name:"base10",alphabet:"0123456789"}),Aj=Object.freeze(Object.defineProperty({__proto__:null,base10:Cj},Symbol.toStringTag,{value:"Module"})),Ij=br({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Sj=br({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),xj=Object.freeze(Object.defineProperty({__proto__:null,base16:Ij,base16upper:Sj},Symbol.toStringTag,{value:"Module"})),Tj=br({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Nj=br({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Rj=br({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Pj=br({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),kj=br({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Oj=br({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Bj=br({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),$j=br({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Dj=br({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Uj=Object.freeze(Object.defineProperty({__proto__:null,base32:Tj,base32hex:kj,base32hexpad:Bj,base32hexpadupper:$j,base32hexupper:Oj,base32pad:Rj,base32padupper:Pj,base32upper:Nj,base32z:Dj},Symbol.toStringTag,{value:"Module"})),Mj=Gh({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Lj=Gh({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Fj=Object.freeze(Object.defineProperty({__proto__:null,base36:Mj,base36upper:Lj},Symbol.toStringTag,{value:"Module"})),jj=Gh({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),qj=Gh({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),zj=Object.freeze(Object.defineProperty({__proto__:null,base58btc:jj,base58flickr:qj},Symbol.toStringTag,{value:"Module"})),Wj=br({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Hj=br({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Vj=br({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Kj=br({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Gj=Object.freeze(Object.defineProperty({__proto__:null,base64:Wj,base64pad:Hj,base64url:Vj,base64urlpad:Kj},Symbol.toStringTag,{value:"Module"})),Lx=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Yj=Lx.reduce((t,e,n)=>(t[n]=e,t),[]),Zj=Lx.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function Jj(t){return t.reduce((e,n)=>(e+=Yj[n],e),"")}function Xj(t){const e=[];for(const n of t){const r=Zj[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const Qj=Z0({prefix:"🚀",name:"base256emoji",encode:Jj,decode:Xj}),eq=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:Qj},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const g_={...wj,...vj,..._j,...Aj,...xj,...Uj,...Fj,...zj,...Gj,...eq};function Fx(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const m_=Fx("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),zm=Fx("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=Ux(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),jx={utf8:m_,"utf-8":m_,hex:g_.base16,latin1:zm,ascii:zm,binary:zm,...g_};function qs(t,e="utf8"){const n=jx[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?fv(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function ds(t,e="utf8"){const n=jx[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const tq={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var Wm,y_;function qx(){if(y_)return Wm;y_=1;const t="Input must be an string, Buffer or Uint8Array";function e(o){let a;if(o instanceof Uint8Array)a=o;else if(typeof o=="string")a=new TextEncoder().encode(o);else throw new Error(t);return a}function n(o){return Array.prototype.map.call(o,function(a){return(a<16?"0":"")+a.toString(16)}).join("")}function r(o){return(4294967296+o).toString(16).substring(1)}function s(o,a,c){let u=`
`+o+" = ";for(let l=0;l<a.length;l+=2){if(c===32)u+=r(a[l]).toUpperCase(),u+=" ",u+=r(a[l+1]).toUpperCase();else if(c===64)u+=r(a[l+1]).toUpperCase(),u+=r(a[l]).toUpperCase();else throw new Error("Invalid size "+c);l%6===4?u+=`
`+new Array(o.length+4).join(" "):l<a.length-2&&(u+=" ")}console.log(u)}function i(o,a,c){let u=new Date().getTime();const l=new Uint8Array(a);for(let h=0;h<a;h++)l[h]=h%256;const d=new Date().getTime();console.log("Generated random input in "+(d-u)+"ms"),u=d;for(let h=0;h<c;h++){const f=o(l),y=new Date().getTime(),m=y-u;u=y,console.log("Hashed in "+m+"ms: "+f.substring(0,20)+"..."),console.log(Math.round(a/(1<<20)/(m/1e3)*100)/100+" MB PER SECOND")}}return Wm={normalizeInput:e,toHex:n,debugPrint:s,testSpeed:i},Wm}var Hm,w_;function nq(){if(w_)return Hm;w_=1;const t=qx();function e(T,O,A){const M=T[O]+T[A];let P=T[O+1]+T[A+1];M>=4294967296&&P++,T[O]=M,T[O+1]=P}function n(T,O,A,M){let P=T[O]+A;A<0&&(P+=4294967296);let I=T[O+1]+M;P>=4294967296&&I++,T[O]=P,T[O+1]=I}function r(T,O){return T[O]^T[O+1]<<8^T[O+2]<<16^T[O+3]<<24}function s(T,O,A,M,P,I){const F=u[P],W=u[P+1],D=u[I],k=u[I+1];e(c,T,O),n(c,T,F,W);let B=c[M]^c[T],N=c[M+1]^c[T+1];c[M]=N,c[M+1]=B,e(c,A,M),B=c[O]^c[A],N=c[O+1]^c[A+1],c[O]=B>>>24^N<<8,c[O+1]=N>>>24^B<<8,e(c,T,O),n(c,T,D,k),B=c[M]^c[T],N=c[M+1]^c[T+1],c[M]=B>>>16^N<<16,c[M+1]=N>>>16^B<<16,e(c,A,M),B=c[O]^c[A],N=c[O+1]^c[A+1],c[O]=N>>>31^B<<1,c[O+1]=B>>>31^N<<1}const i=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),o=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],a=new Uint8Array(o.map(function(T){return T*2})),c=new Uint32Array(32),u=new Uint32Array(32);function l(T,O){let A=0;for(A=0;A<16;A++)c[A]=T.h[A],c[A+16]=i[A];for(c[24]=c[24]^T.t,c[25]=c[25]^T.t/4294967296,O&&(c[28]=~c[28],c[29]=~c[29]),A=0;A<32;A++)u[A]=r(T.b,4*A);for(A=0;A<12;A++)s(0,8,16,24,a[A*16+0],a[A*16+1]),s(2,10,18,26,a[A*16+2],a[A*16+3]),s(4,12,20,28,a[A*16+4],a[A*16+5]),s(6,14,22,30,a[A*16+6],a[A*16+7]),s(0,10,20,30,a[A*16+8],a[A*16+9]),s(2,12,22,24,a[A*16+10],a[A*16+11]),s(4,14,16,26,a[A*16+12],a[A*16+13]),s(6,8,18,28,a[A*16+14],a[A*16+15]);for(A=0;A<16;A++)T.h[A]=T.h[A]^c[A]^c[A+16]}const d=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function h(T,O,A,M){if(T===0||T>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(O&&O.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(A&&A.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(M&&M.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const P={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:T};d.fill(0),d[0]=T,O&&(d[1]=O.length),d[2]=1,d[3]=1,A&&d.set(A,32),M&&d.set(M,48);for(let I=0;I<16;I++)P.h[I]=i[I]^r(d,I*4);return O&&(f(P,O),P.c=128),P}function f(T,O){for(let A=0;A<O.length;A++)T.c===128&&(T.t+=T.c,l(T,!1),T.c=0),T.b[T.c++]=O[A]}function y(T){for(T.t+=T.c;T.c<128;)T.b[T.c++]=0;l(T,!0);const O=new Uint8Array(T.outlen);for(let A=0;A<T.outlen;A++)O[A]=T.h[A>>2]>>8*(A&3);return O}function m(T,O,A,M,P){A=A||64,T=t.normalizeInput(T),M&&(M=t.normalizeInput(M)),P&&(P=t.normalizeInput(P));const I=h(A,O,M,P);return f(I,T),y(I)}function v(T,O,A,M,P){const I=m(T,O,A,M,P);return t.toHex(I)}return Hm={blake2b:m,blake2bHex:v,blake2bInit:h,blake2bUpdate:f,blake2bFinal:y},Hm}var Vm,b_;function rq(){if(b_)return Vm;b_=1;const t=qx();function e(y,m){return y[m]^y[m+1]<<8^y[m+2]<<16^y[m+3]<<24}function n(y,m,v,T,O,A){o[y]=o[y]+o[m]+O,o[T]=r(o[T]^o[y],16),o[v]=o[v]+o[T],o[m]=r(o[m]^o[v],12),o[y]=o[y]+o[m]+A,o[T]=r(o[T]^o[y],8),o[v]=o[v]+o[T],o[m]=r(o[m]^o[v],7)}function r(y,m){return y>>>m^y<<32-m}const s=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),i=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),o=new Uint32Array(16),a=new Uint32Array(16);function c(y,m){let v=0;for(v=0;v<8;v++)o[v]=y.h[v],o[v+8]=s[v];for(o[12]^=y.t,o[13]^=y.t/4294967296,m&&(o[14]=~o[14]),v=0;v<16;v++)a[v]=e(y.b,4*v);for(v=0;v<10;v++)n(0,4,8,12,a[i[v*16+0]],a[i[v*16+1]]),n(1,5,9,13,a[i[v*16+2]],a[i[v*16+3]]),n(2,6,10,14,a[i[v*16+4]],a[i[v*16+5]]),n(3,7,11,15,a[i[v*16+6]],a[i[v*16+7]]),n(0,5,10,15,a[i[v*16+8]],a[i[v*16+9]]),n(1,6,11,12,a[i[v*16+10]],a[i[v*16+11]]),n(2,7,8,13,a[i[v*16+12]],a[i[v*16+13]]),n(3,4,9,14,a[i[v*16+14]],a[i[v*16+15]]);for(v=0;v<8;v++)y.h[v]^=o[v]^o[v+8]}function u(y,m){if(!(y>0&&y<=32))throw new Error("Incorrect output length, should be in [1, 32]");const v=m?m.length:0;if(m&&!(v>0&&v<=32))throw new Error("Incorrect key length, should be in [1, 32]");const T={h:new Uint32Array(s),b:new Uint8Array(64),c:0,t:0,outlen:y};return T.h[0]^=16842752^v<<8^y,v>0&&(l(T,m),T.c=64),T}function l(y,m){for(let v=0;v<m.length;v++)y.c===64&&(y.t+=y.c,c(y,!1),y.c=0),y.b[y.c++]=m[v]}function d(y){for(y.t+=y.c;y.c<64;)y.b[y.c++]=0;c(y,!0);const m=new Uint8Array(y.outlen);for(let v=0;v<y.outlen;v++)m[v]=y.h[v>>2]>>8*(v&3)&255;return m}function h(y,m,v){v=v||32,y=t.normalizeInput(y);const T=u(v,m);return l(T,y),d(T)}function f(y,m,v){const T=h(y,m,v);return t.toHex(T)}return Vm={blake2s:h,blake2sHex:f,blake2sInit:u,blake2sUpdate:l,blake2sFinal:d},Vm}var Km,v_;function sq(){if(v_)return Km;v_=1;const t=nq(),e=rq();return Km={blake2b:t.blake2b,blake2bHex:t.blake2bHex,blake2bInit:t.blake2bInit,blake2bUpdate:t.blake2bUpdate,blake2bFinal:t.blake2bFinal,blake2s:e.blake2s,blake2sHex:e.blake2sHex,blake2sInit:e.blake2sInit,blake2sUpdate:e.blake2sUpdate,blake2sFinal:e.blake2sFinal},Km}var iq=sq(),oq={};const aq=":";function qu(t){const[e,n]=t.split(aq);return{namespace:e,reference:n}}function zx(t,e){return t.includes(":")?[t]:e.chains||[]}var cq=Object.defineProperty,uq=Object.defineProperties,lq=Object.getOwnPropertyDescriptors,E_=Object.getOwnPropertySymbols,dq=Object.prototype.hasOwnProperty,hq=Object.prototype.propertyIsEnumerable,tb=(t,e,n)=>e in t?cq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,__=(t,e)=>{for(var n in e||(e={}))dq.call(e,n)&&tb(t,n,e[n]);if(E_)for(var n of E_(e))hq.call(e,n)&&tb(t,n,e[n]);return t},fq=(t,e)=>uq(t,lq(e)),C_=(t,e,n)=>tb(t,typeof e!="symbol"?e+"":e,n);const pq="ReactNative",Is={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},gq="js";function jp(){return typeof tr<"u"&&typeof tr.versions<"u"&&typeof tr.versions.node<"u"}function Fa(){return!jo.getDocument()&&!!jo.getNavigator()&&navigator.product===pq}function mq(){return Fa()&&typeof globalThis<"u"&&typeof globalThis?.Platform<"u"&&globalThis?.Platform.OS==="android"}function yq(){return Fa()&&typeof globalThis<"u"&&typeof globalThis?.Platform<"u"&&globalThis?.Platform.OS==="ios"}function Cl(){return!jp()&&!!jo.getNavigator()&&!!jo.getDocument()}function Yh(){return Fa()?Is.reactNative:jp()?Is.node:Cl()?Is.browser:Is.unknown}function A_(){var t;try{return Fa()&&typeof globalThis<"u"&&typeof globalThis?.Application<"u"?(t=globalThis.Application)==null?void 0:t.applicationId:void 0}catch{return}}function wq(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function bq(t){var e,n;const r=Wx();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t?.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),fq(__(__({},r),t),{url:t?.url||r.url,name:t?.name||r.name,description:t?.description||r.description,icons:(n=t?.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function Wx(){return hF.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function vq(){if(Yh()===Is.reactNative&&typeof globalThis<"u"&&typeof globalThis?.Platform<"u"){const{OS:n,Version:r}=globalThis.Platform;return[n,r].join("-")}const t=iF();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function Eq(){var t;const e=Yh();return e===Is.browser?[e,((t=jo.getLocation())==null?void 0:t.host)||"unknown"].join(":"):e}function Hx(t,e,n){const r=vq(),s=Eq();return[[t,e].join("-"),[gq,n].join("-"),r,s].join("/")}function _q({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const u=n.split("?"),l=Hx(t,e,r),d={auth:s,ua:l,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=wq(u[1]||"",d);return u[0]+"?"+h}function sc(t,e){return t.filter(n=>e.includes(n)).length===t.length}function nb(t){return Object.fromEntries(t.entries())}function rb(t){return new Map(Object.entries(t))}function Za(t=_e.FIVE_MINUTES,e){const n=_e.toMiliseconds(t||_e.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const u=new Error(e);o=Promise.reject(u),c(u)},n),r=a,s=c})}}function Ca(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function Vx(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function Cq(t){return Vx("topic",t)}function Aq(t){return Vx("id",t)}function Kx(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function qn(t,e){return _e.fromMiliseconds(Date.now()+_e.toMiliseconds(t))}function pa(t){return Date.now()>=_e.toMiliseconds(t)}function Lt(t,e){return`${t}${e?`:${e}`:""}`}function Yi(t=[],e=[]){return[...new Set([...t,...e])]}async function Iq({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s?.href;if(typeof i!="string")return;const o=Sq(i,t,e),a=Yh();if(a===Is.browser){if(!((r=jo.getDocument())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}xq(o)}else a===Is.reactNative&&typeof globalThis?.Linking<"u"&&await globalThis.Linking.openURL(o)}catch(s){console.error(s)}}function Sq(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${Pq(r,!0)}`}else s=`${s}/wc?${r}`;return s}function xq(t){let e="_self";Rq()?e="_top":(Nq()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function Tq(t,e){let n="";try{if(Cl()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function I_(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function S_(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function pv(){return typeof tr<"u"&&oq.IS_VITEST==="true"}function Nq(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function Rq(){try{return window.self!==window.top}catch{return!1}}function Pq(t,e=!1){const n=Le.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function Gx(t){return Le.from(t,"base64").toString("utf-8")}function kq(t){return new Promise(e=>setTimeout(e,t))}let Oq=class{constructor({limit:e}){C_(this,"limit"),C_(this,"set"),this.limit=e,this.set=new Set}add(e){if(!this.set.has(e)){if(this.set.size>=this.limit){const n=this.set.values().next().value;n&&this.set.delete(n)}this.set.add(e)}}has(e){return this.set.has(e)}};const xf=BigInt(2**32-1),x_=BigInt(32);function Yx(t,e=!1){return e?{h:Number(t&xf),l:Number(t>>x_&xf)}:{h:Number(t>>x_&xf)|0,l:Number(t&xf)|0}}function Zx(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=Yx(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const T_=(t,e,n)=>t>>>n,N_=(t,e,n)=>t<<32-n|e>>>n,ga=(t,e,n)=>t>>>n|e<<32-n,ma=(t,e,n)=>t<<32-n|e>>>n,id=(t,e,n)=>t<<64-n|e>>>n-32,od=(t,e,n)=>t>>>n-32|e<<64-n,Bq=(t,e)=>e,$q=(t,e)=>t,Dq=(t,e,n)=>t<<n|e>>>32-n,Uq=(t,e,n)=>e<<n|t>>>32-n,Mq=(t,e,n)=>e<<n-32|t>>>64-n,Lq=(t,e,n)=>t<<n-32|e>>>64-n;function ui(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const gv=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),mv=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,Fq=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),jq=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,qq=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),zq=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,iu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function yv(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function qo(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Gs(t,...e){if(!yv(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function wv(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");qo(t.outputLen),qo(t.blockLen)}function $a(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function bv(t,e){Gs(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function th(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Ys(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Gm(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Pi(t,e){return t<<32-e|t>>>e}const Jx=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Xx(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const yo=Jx?t=>t:t=>Xx(t);function Wq(t){for(let e=0;e<t.length;e++)t[e]=Xx(t[e]);return t}const ya=Jx?t=>t:Wq,Qx=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Hq=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function nh(t){if(Gs(t),Qx)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=Hq[t[n]];return e}const po={_0:48,_9:57,A:65,F:70,a:97,f:102};function R_(t){if(t>=po._0&&t<=po._9)return t-po._0;if(t>=po.A&&t<=po.F)return t-(po.A-10);if(t>=po.a&&t<=po.f)return t-(po.a-10)}function vv(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(Qx)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=R_(t.charCodeAt(i)),a=R_(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function Vq(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function fi(t){return typeof t=="string"&&(t=Vq(t)),Gs(t),t}function ic(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Gs(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let J0=class{};function Zh(t){const e=r=>t().update(fi(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Kq(t){const e=(r,s)=>t(s).update(fi(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function Al(t=32){if(iu&&typeof iu.getRandomValues=="function")return iu.getRandomValues(new Uint8Array(t));if(iu&&typeof iu.randomBytes=="function")return Uint8Array.from(iu.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const Gq=BigInt(0),ql=BigInt(1),Yq=BigInt(2),Zq=BigInt(7),Jq=BigInt(256),Xq=BigInt(113),eT=[],tT=[],nT=[];for(let t=0,e=ql,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],eT.push(2*(5*r+n)),tT.push((t+1)*(t+2)/2%64);let s=Gq;for(let i=0;i<7;i++)e=(e<<ql^(e>>Zq)*Xq)%Jq,e&Yq&&(s^=ql<<(ql<<BigInt(i))-ql);nT.push(s)}const rT=Zx(nT,!0),Qq=rT[0],ez=rT[1],P_=(t,e,n)=>n>32?Mq(t,e,n):Dq(t,e,n),k_=(t,e,n)=>n>32?Lq(t,e,n):Uq(t,e,n);function tz(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=n[c],l=n[c+1],d=P_(u,l,1)^n[a],h=k_(u,l,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=tT[o],c=P_(s,i,a),u=k_(s,i,a),l=eT[o];s=t[l],i=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=Qq[r],t[1]^=ez[r]}Ys(n)}let nz=class sT extends J0{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,qo(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=th(this.state)}clone(){return this._cloneInto()}keccak(){ya(this.state32),tz(this.state32,this.rounds),ya(this.state32),this.posOut=0,this.pos=0}update(e){$a(this),e=fi(e),Gs(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,(n&128)!==0&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){$a(this,!1),Gs(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return qo(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(bv(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Ys(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new sT(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const rz=(t,e,n)=>Zh(()=>new nz(e,t,n)),sz=rz(1,136,256/8);function iz(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}function oz(t,e,n){return t&e^~t&n}function az(t,e,n){return t&e^t&n^e&n}let iT=class extends J0{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=Gm(this.buffer)}update(e){$a(this),e=fi(e),Gs(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Gm(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){$a(this),bv(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,Ys(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;iz(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Gm(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const ia=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ar=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Ir=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),cz=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),oa=new Uint32Array(64);let uz=class extends iT{constructor(e=32){super(64,e,8,!1),this.A=ia[0]|0,this.B=ia[1]|0,this.C=ia[2]|0,this.D=ia[3]|0,this.E=ia[4]|0,this.F=ia[5]|0,this.G=ia[6]|0,this.H=ia[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)oa[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=oa[d-15],f=oa[d-2],y=Pi(h,7)^Pi(h,18)^h>>>3,m=Pi(f,17)^Pi(f,19)^f>>>10;oa[d]=m+oa[d-7]+y+oa[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){const h=Pi(a,6)^Pi(a,11)^Pi(a,25),f=l+h+oz(a,c,u)+cz[d]+oa[d]|0,y=(Pi(r,2)^Pi(r,13)^Pi(r,22))+az(r,s,i)|0;l=u,u=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+y|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,s,i,o,a,c,u,l)}roundClean(){Ys(oa)}destroy(){this.set(0,0,0,0,0,0,0,0),Ys(this.buffer)}};const oT=Zx(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),lz=oT[0],dz=oT[1],aa=new Uint32Array(80),ca=new Uint32Array(80);let Ev=class extends iT{constructor(e=64){super(128,e,16,!1),this.Ah=Ir[0]|0,this.Al=Ir[1]|0,this.Bh=Ir[2]|0,this.Bl=Ir[3]|0,this.Ch=Ir[4]|0,this.Cl=Ir[5]|0,this.Dh=Ir[6]|0,this.Dl=Ir[7]|0,this.Eh=Ir[8]|0,this.El=Ir[9]|0,this.Fh=Ir[10]|0,this.Fl=Ir[11]|0,this.Gh=Ir[12]|0,this.Gl=Ir[13]|0,this.Hh=Ir[14]|0,this.Hl=Ir[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:d,Fl:h,Gh:f,Gl:y,Hh:m,Hl:v}=this;return[e,n,r,s,i,o,a,c,u,l,d,h,f,y,m,v]}set(e,n,r,s,i,o,a,c,u,l,d,h,f,y,m,v){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=y|0,this.Hh=m|0,this.Hl=v|0}process(e,n){for(let A=0;A<16;A++,n+=4)aa[A]=e.getUint32(n),ca[A]=e.getUint32(n+=4);for(let A=16;A<80;A++){const M=aa[A-15]|0,P=ca[A-15]|0,I=ga(M,P,1)^ga(M,P,8)^T_(M,P,7),F=ma(M,P,1)^ma(M,P,8)^N_(M,P,7),W=aa[A-2]|0,D=ca[A-2]|0,k=ga(W,D,19)^id(W,D,61)^T_(W,D,6),B=ma(W,D,19)^od(W,D,61)^N_(W,D,6),N=Fq(F,B,ca[A-7],ca[A-16]),R=jq(N,I,k,aa[A-7],aa[A-16]);aa[A]=R|0,ca[A]=N|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:d,El:h,Fh:f,Fl:y,Gh:m,Gl:v,Hh:T,Hl:O}=this;for(let A=0;A<80;A++){const M=ga(d,h,14)^ga(d,h,18)^id(d,h,41),P=ma(d,h,14)^ma(d,h,18)^od(d,h,41),I=d&f^~d&m,F=h&y^~h&v,W=qq(O,P,F,dz[A],ca[A]),D=zq(W,T,M,I,lz[A],aa[A]),k=W|0,B=ga(r,s,28)^id(r,s,34)^id(r,s,39),N=ma(r,s,28)^od(r,s,34)^od(r,s,39),R=r&i^r&a^i&a,p=s&o^s&c^o&c;T=m|0,O=v|0,m=f|0,v=y|0,f=d|0,y=h|0,{h:d,l:h}=ui(u|0,l|0,D|0,k|0),u=a|0,l=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const g=gv(k,N,p);r=mv(g,D,B,R),s=g|0}({h:r,l:s}=ui(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=ui(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=ui(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=ui(this.Dh|0,this.Dl|0,u|0,l|0),{h:d,l:h}=ui(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:y}=ui(this.Fh|0,this.Fl|0,f|0,y|0),{h:m,l:v}=ui(this.Gh|0,this.Gl|0,m|0,v|0),{h:T,l:O}=ui(this.Hh|0,this.Hl|0,T|0,O|0),this.set(r,s,i,o,a,c,u,l,d,h,f,y,m,v,T,O)}roundClean(){Ys(aa,ca)}destroy(){Ys(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},hz=class extends Ev{constructor(){super(48),this.Ah=Ar[0]|0,this.Al=Ar[1]|0,this.Bh=Ar[2]|0,this.Bl=Ar[3]|0,this.Ch=Ar[4]|0,this.Cl=Ar[5]|0,this.Dh=Ar[6]|0,this.Dl=Ar[7]|0,this.Eh=Ar[8]|0,this.El=Ar[9]|0,this.Fh=Ar[10]|0,this.Fl=Ar[11]|0,this.Gh=Ar[12]|0,this.Gl=Ar[13]|0,this.Hh=Ar[14]|0,this.Hl=Ar[15]|0}};const Sr=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class fz extends Ev{constructor(){super(32),this.Ah=Sr[0]|0,this.Al=Sr[1]|0,this.Bh=Sr[2]|0,this.Bl=Sr[3]|0,this.Ch=Sr[4]|0,this.Cl=Sr[5]|0,this.Dh=Sr[6]|0,this.Dl=Sr[7]|0,this.Eh=Sr[8]|0,this.El=Sr[9]|0,this.Fh=Sr[10]|0,this.Fl=Sr[11]|0,this.Gh=Sr[12]|0,this.Gl=Sr[13]|0,this.Hh=Sr[14]|0,this.Hl=Sr[15]|0}}const X0=Zh(()=>new uz),pz=Zh(()=>new Ev),gz=Zh(()=>new hz),mz=Zh(()=>new fz),yz=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),Fn=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Te=new Uint32Array(32);function ua(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=Te[2*t],u=Te[2*t+1],l=Te[2*e],d=Te[2*e+1],h=Te[2*n],f=Te[2*n+1],y=Te[2*r],m=Te[2*r+1],v=gv(c,l,o);u=mv(v,u,d,a),c=v|0,{Dh:m,Dl:y}={Dh:m^u,Dl:y^c},{Dh:m,Dl:y}={Dh:Bq(m,y),Dl:$q(m)},{h:f,l:h}=ui(f,h,m,y),{Bh:d,Bl:l}={Bh:d^f,Bl:l^h},{Bh:d,Bl:l}={Bh:ga(d,l,24),Bl:ma(d,l,24)},Te[2*t]=c,Te[2*t+1]=u,Te[2*e]=l,Te[2*e+1]=d,Te[2*n]=h,Te[2*n+1]=f,Te[2*r]=y,Te[2*r+1]=m}function la(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=Te[2*t],u=Te[2*t+1],l=Te[2*e],d=Te[2*e+1],h=Te[2*n],f=Te[2*n+1],y=Te[2*r],m=Te[2*r+1],v=gv(c,l,o);u=mv(v,u,d,a),c=v|0,{Dh:m,Dl:y}={Dh:m^u,Dl:y^c},{Dh:m,Dl:y}={Dh:ga(m,y,16),Dl:ma(m,y,16)},{h:f,l:h}=ui(f,h,m,y),{Bh:d,Bl:l}={Bh:d^f,Bl:l^h},{Bh:d,Bl:l}={Bh:id(d,l,63),Bl:od(d,l,63)},Te[2*t]=c,Te[2*t+1]=u,Te[2*e]=l,Te[2*e+1]=d,Te[2*n]=h,Te[2*n+1]=f,Te[2*r]=y,Te[2*r+1]=m}function wz(t,e={},n,r,s){if(qo(n),t<0||t>n)throw new Error("outputLen bigger than keyLen");const{key:i,salt:o,personalization:a}=e;if(i!==void 0&&(i.length<1||i.length>n))throw new Error("key length must be undefined or 1.."+n);if(o!==void 0&&o.length!==r)throw new Error("salt must be undefined or "+r);if(a!==void 0&&a.length!==s)throw new Error("personalization must be undefined or "+s)}class bz extends J0{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,qo(e),qo(n),this.blockLen=e,this.outputLen=n,this.buffer=new Uint8Array(e),this.buffer32=th(this.buffer)}update(e){$a(this),e=fi(e),Gs(e);const{blockLen:n,buffer:r,buffer32:s}=this,i=e.length,o=e.byteOffset,a=e.buffer;for(let c=0;c<i;){this.pos===n&&(ya(s),this.compress(s,0,!1),ya(s),this.pos=0);const u=Math.min(n-this.pos,i-c),l=o+c;if(u===n&&!(l%4)&&c+u<i){const d=new Uint32Array(a,l,Math.floor((i-c)/4));ya(d);for(let h=0;c+n<i;h+=s.length,c+=n)this.length+=n,this.compress(d,h,!1);ya(d);continue}r.set(e.subarray(c,c+u),this.pos),this.pos+=u,this.length+=u,c+=u}return this}digestInto(e){$a(this),bv(e,this);const{pos:n,buffer32:r}=this;this.finished=!0,Ys(this.buffer.subarray(n)),ya(r),this.compress(r,0,!0),ya(r);const s=th(e);this.get().forEach((i,o)=>s[o]=yo(i))}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){const{buffer:n,length:r,finished:s,destroyed:i,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(n),e.destroyed=i,e.finished=s,e.length=r,e.pos=a,e.outputLen=o,e}clone(){return this._cloneInto()}}class vz extends bz{constructor(e={}){const n=e.dkLen===void 0?64:e.dkLen;super(128,n),this.v0l=Fn[0]|0,this.v0h=Fn[1]|0,this.v1l=Fn[2]|0,this.v1h=Fn[3]|0,this.v2l=Fn[4]|0,this.v2h=Fn[5]|0,this.v3l=Fn[6]|0,this.v3h=Fn[7]|0,this.v4l=Fn[8]|0,this.v4h=Fn[9]|0,this.v5l=Fn[10]|0,this.v5h=Fn[11]|0,this.v6l=Fn[12]|0,this.v6h=Fn[13]|0,this.v7l=Fn[14]|0,this.v7h=Fn[15]|0,wz(n,e,64,16,16);let{key:r,personalization:s,salt:i}=e,o=0;if(r!==void 0&&(r=fi(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,i!==void 0){i=fi(i);const a=th(i);this.v4l^=yo(a[0]),this.v4h^=yo(a[1]),this.v5l^=yo(a[2]),this.v5h^=yo(a[3])}if(s!==void 0){s=fi(s);const a=th(s);this.v6l^=yo(a[0]),this.v6h^=yo(a[1]),this.v7l^=yo(a[2]),this.v7h^=yo(a[3])}if(r!==void 0){const a=new Uint8Array(this.blockLen);a.set(r),this.update(a)}}get(){let{v0l:e,v0h:n,v1l:r,v1h:s,v2l:i,v2h:o,v3l:a,v3h:c,v4l:u,v4h:l,v5l:d,v5h:h,v6l:f,v6h:y,v7l:m,v7h:v}=this;return[e,n,r,s,i,o,a,c,u,l,d,h,f,y,m,v]}set(e,n,r,s,i,o,a,c,u,l,d,h,f,y,m,v){this.v0l=e|0,this.v0h=n|0,this.v1l=r|0,this.v1h=s|0,this.v2l=i|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=u|0,this.v4h=l|0,this.v5l=d|0,this.v5h=h|0,this.v6l=f|0,this.v6h=y|0,this.v7l=m|0,this.v7h=v|0}compress(e,n,r){this.get().forEach((c,u)=>Te[u]=c),Te.set(Fn,16);let{h:s,l:i}=Yx(BigInt(this.length));Te[24]=Fn[8]^i,Te[25]=Fn[9]^s,r&&(Te[28]=~Te[28],Te[29]=~Te[29]);let o=0;const a=yz;for(let c=0;c<12;c++)ua(0,4,8,12,e,n+2*a[o++]),la(0,4,8,12,e,n+2*a[o++]),ua(1,5,9,13,e,n+2*a[o++]),la(1,5,9,13,e,n+2*a[o++]),ua(2,6,10,14,e,n+2*a[o++]),la(2,6,10,14,e,n+2*a[o++]),ua(3,7,11,15,e,n+2*a[o++]),la(3,7,11,15,e,n+2*a[o++]),ua(0,5,10,15,e,n+2*a[o++]),la(0,5,10,15,e,n+2*a[o++]),ua(1,6,11,12,e,n+2*a[o++]),la(1,6,11,12,e,n+2*a[o++]),ua(2,7,8,13,e,n+2*a[o++]),la(2,7,8,13,e,n+2*a[o++]),ua(3,4,9,14,e,n+2*a[o++]),la(3,4,9,14,e,n+2*a[o++]);this.v0l^=Te[0]^Te[16],this.v0h^=Te[1]^Te[17],this.v1l^=Te[2]^Te[18],this.v1h^=Te[3]^Te[19],this.v2l^=Te[4]^Te[20],this.v2h^=Te[5]^Te[21],this.v3l^=Te[6]^Te[22],this.v3h^=Te[7]^Te[23],this.v4l^=Te[8]^Te[24],this.v4h^=Te[9]^Te[25],this.v5l^=Te[10]^Te[26],this.v5h^=Te[11]^Te[27],this.v6l^=Te[12]^Te[28],this.v6h^=Te[13]^Te[29],this.v7l^=Te[14]^Te[30],this.v7h^=Te[15]^Te[31],Ys(Te)}destroy(){this.destroyed=!0,Ys(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Ez=Kq(t=>new vz(t)),_z="https://rpc.walletconnect.org/v1";function aT(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Le.from(sz(n)).toString("hex")}async function Cz(t,e,n,r,s,i){switch(n.t){case"eip191":return await Az(t,e,n.s);case"eip1271":return await Iz(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function Az(t,e,n){return(await w1({hash:aT(e),signature:n})).toLowerCase()===t.toLowerCase()}async function Iz(t,e,n,r,s,i){const o=qu(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",u=n.substring(2),l=(u.length/2).toString(16).padStart(64,"0"),d=(e.startsWith("0x")?e:aT(e)).substring(2),h=a+d+c+l+u,f=await fetch(`${i||_z}/?chainId=${r}&projectId=${s}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:Sz(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:y}=await f.json();return y?y.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function Sz(){return Date.now()+Math.floor(Math.random()*1e3)}function xz(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Le.from(t,"base64").slice(1,65);return Qn.encode(i)}function Tz(t){const e=new Uint8Array(Le.from(t,"base64")),n=Array.from("TransactionData::").map(i=>i.charCodeAt(0)),r=new Uint8Array(n.length+e.length);r.set(n),r.set(e,n.length);const s=Ez(r,{dkLen:32});return Qn.encode(s)}function O_(t){const e=new Uint8Array(X0(Nz(t)));return Qn.encode(e)}function Nz(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function B_(t){const e=Le.from(t,"base64"),n=ZF(e).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=jF(n),s=Le.from("TX"),i=Le.concat([s,Le.from(r)]),o=mz(i);return sj.encode(o).replace(/=+$/,"")}function Ym(t){const e=[];let n=BigInt(t);for(;n>=BigInt(128);)e.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return e.push(Number(n)),Le.from(e)}function Rz(t){const e=Le.from(t.signed.bodyBytes,"base64"),n=Le.from(t.signed.authInfoBytes,"base64"),r=Le.from(t.signature.signature,"base64"),s=[];s.push(Le.from([10])),s.push(Ym(e.length)),s.push(e),s.push(Le.from([18])),s.push(Ym(n.length)),s.push(n),s.push(Le.from([26])),s.push(Ym(r.length)),s.push(r);const i=Le.concat(s),o=X0(i);return Le.from(o).toString("hex").toUpperCase()}var Pz=Object.defineProperty,kz=Object.defineProperties,Oz=Object.getOwnPropertyDescriptors,$_=Object.getOwnPropertySymbols,Bz=Object.prototype.hasOwnProperty,$z=Object.prototype.propertyIsEnumerable,D_=(t,e,n)=>e in t?Pz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Dz=(t,e)=>{for(var n in e||(e={}))Bz.call(e,n)&&D_(t,n,e[n]);if($_)for(var n of $_(e))$z.call(e,n)&&D_(t,n,e[n]);return t},Uz=(t,e)=>kz(t,Oz(e));const Mz="did:pkh:",_v=t=>t?.split(":"),Lz=t=>{const e=t&&_v(t);if(e)return t.includes(Mz)?e[3]:e[1]},sb=t=>{const e=t&&_v(t);if(e)return e[2]+":"+e[3]},qp=t=>{const e=t&&_v(t);if(e)return e.pop()};async function U_(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=cT(s,s.iss),o=qp(s.iss);return await Cz(o,i,r,sb(s.iss),n)}const cT=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=qp(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${Lz(e)}`,c=`Nonce: ${t.nonce}`,u=`Issued At: ${t.iat}`,l=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(m=>`
- ${m}`).join("")}`:void 0,y=ap(t.resources);if(y){const m=rh(y);s=Gz(s,m)}return[n,r,"",s,"",i,o,a,c,u,l,d,h,f].filter(m=>m!=null).join(`
`)};function Fz(t){return Le.from(JSON.stringify(t)).toString("base64")}function jz(t){return JSON.parse(Le.from(t,"base64").toString("utf-8"))}function Rc(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function qz(t,e,n,r={}){return n?.sort((s,i)=>s.localeCompare(i)),{att:{[t]:zz(e,n,r)}}}function zz(t,e,n={}){e=e?.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function uT(t){return Rc(t),`urn:recap:${Fz(t).replace(/=/g,"")}`}function rh(t){const e=jz(t.replace("urn:recap:",""));return Rc(e),e}function Wz(t,e,n){const r=qz(t,e,n);return uT(r)}function Hz(t){return t&&t.includes("urn:recap:")}function Vz(t,e){const n=rh(t),r=rh(e),s=Kz(n,r);return uT(s)}function Kz(t,e){Rc(t),Rc(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,u;r.att[s]=Uz(Dz({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((u=e.att[s])==null?void 0:u[a])})})}),r}function Gz(t="",e){Rc(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const u={};c.forEach(d=>{u[d.ability]||(u[d.ability]=[]),u[d.ability].push(d.action)});const l=Object.keys(u).map(d=>(s++,`(${s}) '${d}': '${u[d].join("', '")}' for '${a}'.`));r.push(l.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function M_(t){var e;const n=rh(t);Rc(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function L_(t){const e=rh(t);Rc(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s?.[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function ap(t){if(!t)return;const e=t?.[t.length-1];return Hz(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function lT(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ib(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function Zm(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function is(t,...e){if(!lT(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function F_(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Yz(t,e){is(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Ta(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function rl(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Zz(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const Jz=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Xz(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function ob(t){if(typeof t=="string")t=Xz(t);else if(lT(t))t=ab(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function Qz(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function eW(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const tW=(t,e)=>{function n(r,...s){if(is(r),!Jz)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const u=s[0];if(!u)throw new Error("nonce / iv required");t.varSizeNonce?is(u):is(u,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&is(s[1]);const o=e(r,...s),a=(u,l)=>{if(l!==void 0){if(u!==2)throw new Error("cipher output not supported");is(l)}};let c=!1;return{encrypt(u,l){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,is(u),a(o.encrypt.length,l),o.encrypt(u,l)},decrypt(u,l){if(is(u),i&&u.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,l),o.decrypt(u,l)}}}return Object.assign(n,t),n};function j_(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!rW(e))throw new Error("invalid output, must be aligned");return e}function q_(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function nW(t,e,n){ib(n);const r=new Uint8Array(16),s=Zz(r);return q_(s,0,BigInt(e),n),q_(s,8,BigInt(t),n),r}function rW(t){return t.byteOffset%4===0}function ab(t){return Uint8Array.from(t)}const dT=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),sW=dT("expand 16-byte k"),iW=dT("expand 32-byte k"),oW=Ta(sW),aW=Ta(iW);function xt(t,e){return t<<e|t>>>32-e}function cb(t){return t.byteOffset%4===0}const Tf=64,cW=16,hT=2**32-1,z_=new Uint32Array;function uW(t,e,n,r,s,i,o,a){const c=s.length,u=new Uint8Array(Tf),l=Ta(u),d=cb(s)&&cb(i),h=d?Ta(s):z_,f=d?Ta(i):z_;for(let y=0;y<c;o++){if(t(e,n,r,l,o,a),o>=hT)throw new Error("arx: counter overflow");const m=Math.min(Tf,c-y);if(d&&m===Tf){const v=y/4;if(y%4!==0)throw new Error("arx: invalid block position");for(let T=0,O;T<cW;T++)O=v+T,f[O]=h[O]^l[T];y+=Tf;continue}for(let v=0,T;v<m;v++)T=y+v,i[T]=s[T]^u[v];y+=m}}function lW(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=Qz({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return Zm(s),Zm(o),ib(i),ib(n),(a,c,u,l,d=0)=>{is(a),is(c),is(u);const h=u.length;if(l===void 0&&(l=new Uint8Array(h)),is(l),Zm(d),d<0||d>=hT)throw new Error("arx: counter overflow");if(l.length<h)throw new Error(`arx: output (${l.length}) is shorter than data (${h})`);const f=[];let y=a.length,m,v;if(y===32)f.push(m=ab(a)),v=aW;else if(y===16&&n)m=new Uint8Array(32),m.set(a),m.set(a,16),v=oW,f.push(m);else throw new Error(`arx: invalid 32-byte key, got length=${y}`);cb(c)||f.push(c=ab(c));const T=Ta(m);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(v,T,Ta(c.subarray(0,16)),T),c=c.subarray(16)}const O=16-s;if(O!==c.length)throw new Error(`arx: nonce must be ${O} or 16 bytes`);if(O!==12){const M=new Uint8Array(12);M.set(c,i?0:12-c.length),c=M,f.push(c)}const A=Ta(c);return uW(t,v,T,A,u,l,d,o),rl(...f),l}}const rr=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class dW{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=ob(e),is(e,32);const n=rr(e,0),r=rr(e,2),s=rr(e,4),i=rr(e,6),o=rr(e,8),a=rr(e,10),c=rr(e,12),u=rr(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|u<<8)&8191,this.r[9]=u>>>5&127;for(let l=0;l<8;l++)this.pad[l]=rr(e,16+2*l)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],u=o[2],l=o[3],d=o[4],h=o[5],f=o[6],y=o[7],m=o[8],v=o[9],T=rr(e,n+0),O=rr(e,n+2),A=rr(e,n+4),M=rr(e,n+6),P=rr(e,n+8),I=rr(e,n+10),F=rr(e,n+12),W=rr(e,n+14);let D=i[0]+(T&8191),k=i[1]+((T>>>13|O<<3)&8191),B=i[2]+((O>>>10|A<<6)&8191),N=i[3]+((A>>>7|M<<9)&8191),R=i[4]+((M>>>4|P<<12)&8191),p=i[5]+(P>>>1&8191),g=i[6]+((P>>>14|I<<2)&8191),w=i[7]+((I>>>11|F<<5)&8191),_=i[8]+((F>>>8|W<<8)&8191),C=i[9]+(W>>>5|s),L=0,z=L+D*a+k*(5*v)+B*(5*m)+N*(5*y)+R*(5*f);L=z>>>13,z&=8191,z+=p*(5*h)+g*(5*d)+w*(5*l)+_*(5*u)+C*(5*c),L+=z>>>13,z&=8191;let q=L+D*c+k*a+B*(5*v)+N*(5*m)+R*(5*y);L=q>>>13,q&=8191,q+=p*(5*f)+g*(5*h)+w*(5*d)+_*(5*l)+C*(5*u),L+=q>>>13,q&=8191;let b=L+D*u+k*c+B*a+N*(5*v)+R*(5*m);L=b>>>13,b&=8191,b+=p*(5*y)+g*(5*f)+w*(5*h)+_*(5*d)+C*(5*l),L+=b>>>13,b&=8191;let E=L+D*l+k*u+B*c+N*a+R*(5*v);L=E>>>13,E&=8191,E+=p*(5*m)+g*(5*y)+w*(5*f)+_*(5*h)+C*(5*d),L+=E>>>13,E&=8191;let j=L+D*d+k*l+B*u+N*c+R*a;L=j>>>13,j&=8191,j+=p*(5*v)+g*(5*m)+w*(5*y)+_*(5*f)+C*(5*h),L+=j>>>13,j&=8191;let K=L+D*h+k*d+B*l+N*u+R*c;L=K>>>13,K&=8191,K+=p*a+g*(5*v)+w*(5*m)+_*(5*y)+C*(5*f),L+=K>>>13,K&=8191;let X=L+D*f+k*h+B*d+N*l+R*u;L=X>>>13,X&=8191,X+=p*c+g*a+w*(5*v)+_*(5*m)+C*(5*y),L+=X>>>13,X&=8191;let re=L+D*y+k*f+B*h+N*d+R*l;L=re>>>13,re&=8191,re+=p*u+g*c+w*a+_*(5*v)+C*(5*m),L+=re>>>13,re&=8191;let de=L+D*m+k*y+B*f+N*h+R*d;L=de>>>13,de&=8191,de+=p*l+g*u+w*c+_*a+C*(5*v),L+=de>>>13,de&=8191;let he=L+D*v+k*m+B*y+N*f+R*h;L=he>>>13,he&=8191,he+=p*d+g*l+w*u+_*c+C*a,L+=he>>>13,he&=8191,L=(L<<2)+L|0,L=L+z|0,z=L&8191,L=L>>>13,q+=L,i[0]=z,i[1]=q,i[2]=b,i[3]=E,i[4]=j,i[5]=K,i[6]=X,i[7]=re,i[8]=de,i[9]=he}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;rl(r)}update(e){F_(this),e=ob(e),is(e);const{buffer:n,blockLen:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){rl(this.h,this.r,this.buffer,this.pad)}digestInto(e){F_(this),Yz(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function hW(t){const e=(r,s)=>t(s).update(ob(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const fW=hW(t=>new dW(t));function pW(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],u=t[3],l=e[0],d=e[1],h=e[2],f=e[3],y=e[4],m=e[5],v=e[6],T=e[7],O=s,A=n[0],M=n[1],P=n[2],I=o,F=a,W=c,D=u,k=l,B=d,N=h,R=f,p=y,g=m,w=v,_=T,C=O,L=A,z=M,q=P;for(let E=0;E<i;E+=2)I=I+k|0,C=xt(C^I,16),p=p+C|0,k=xt(k^p,12),I=I+k|0,C=xt(C^I,8),p=p+C|0,k=xt(k^p,7),F=F+B|0,L=xt(L^F,16),g=g+L|0,B=xt(B^g,12),F=F+B|0,L=xt(L^F,8),g=g+L|0,B=xt(B^g,7),W=W+N|0,z=xt(z^W,16),w=w+z|0,N=xt(N^w,12),W=W+N|0,z=xt(z^W,8),w=w+z|0,N=xt(N^w,7),D=D+R|0,q=xt(q^D,16),_=_+q|0,R=xt(R^_,12),D=D+R|0,q=xt(q^D,8),_=_+q|0,R=xt(R^_,7),I=I+B|0,q=xt(q^I,16),w=w+q|0,B=xt(B^w,12),I=I+B|0,q=xt(q^I,8),w=w+q|0,B=xt(B^w,7),F=F+N|0,C=xt(C^F,16),_=_+C|0,N=xt(N^_,12),F=F+N|0,C=xt(C^F,8),_=_+C|0,N=xt(N^_,7),W=W+R|0,L=xt(L^W,16),p=p+L|0,R=xt(R^p,12),W=W+R|0,L=xt(L^W,8),p=p+L|0,R=xt(R^p,7),D=D+k|0,z=xt(z^D,16),g=g+z|0,k=xt(k^g,12),D=D+k|0,z=xt(z^D,8),g=g+z|0,k=xt(k^g,7);let b=0;r[b++]=o+I|0,r[b++]=a+F|0,r[b++]=c+W|0,r[b++]=u+D|0,r[b++]=l+k|0,r[b++]=d+B|0,r[b++]=h+N|0,r[b++]=f+R|0,r[b++]=y+p|0,r[b++]=m+g|0,r[b++]=v+w|0,r[b++]=T+_|0,r[b++]=O+C|0,r[b++]=A+L|0,r[b++]=M+z|0,r[b++]=P+q|0}const gW=lW(pW,{counterRight:!1,counterLength:4,allowShortKeys:!1}),mW=new Uint8Array(16),W_=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(mW.subarray(n))},yW=new Uint8Array(32);function H_(t,e,n,r,s){const i=t(e,n,yW),o=fW.create(i);s&&W_(o,s),W_(o,r);const a=nW(r.length,s?s.length:0,!0);o.update(a);const c=o.digest();return rl(i,a),c}const wW=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=j_(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=H_(t,e,n,a,r);return i.set(c,o),rl(c),i},decrypt(s,i){i=j_(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=H_(t,e,n,o,r);if(!eW(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),rl(c),i}}),fT=tW({blockSize:64,nonceLength:12,tagLength:16},wW(gW));let pT=class extends J0{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,wv(e);const r=fi(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Ys(i)}update(e){return $a(this),this.iHash.update(e),this}digestInto(e){$a(this),Gs(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Q0=(t,e,n)=>new pT(t,e).update(n).digest();Q0.create=(t,e)=>new pT(t,e);function bW(t,e,n){return wv(t),n===void 0&&(n=new Uint8Array(t.outputLen)),Q0(t,fi(n),fi(e))}const Jm=Uint8Array.from([0]),V_=Uint8Array.of();function vW(t,e,n,r=32){wv(t),qo(r);const s=t.outputLen;if(r>255*s)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/s);n===void 0&&(n=V_);const o=new Uint8Array(i*s),a=Q0.create(t,e),c=a._cloneInto(),u=new Uint8Array(a.outputLen);for(let l=0;l<i;l++)Jm[0]=l+1,c.update(l===0?V_:u).update(n).update(Jm).digestInto(u),o.set(u,s*l),a._cloneInto(c);return a.destroy(),c.destroy(),Ys(u,Jm),o.slice(0,r)}const EW=(t,e,n,r,s)=>vW(t,bW(t,e,n),r,s),eg=X0,Cv=BigInt(0),ub=BigInt(1);function zp(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function Nf(t){const e=t.toString(16);return e.length&1?"0"+e:e}function gT(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Cv:BigInt("0x"+t)}function tg(t){return gT(nh(t))}function Wp(t){return Gs(t),gT(nh(Uint8Array.from(t).reverse()))}function Av(t,e){return vv(t.toString(16).padStart(e*2,"0"))}function Iv(t,e){return Av(t,e).reverse()}function rs(t,e,n){let r;if(typeof e=="string")try{r=vv(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(yv(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const Xm=t=>typeof t=="bigint"&&Cv<=t;function _W(t,e,n){return Xm(t)&&Xm(e)&&Xm(n)&&e<=t&&t<n}function lb(t,e,n,r){if(!_W(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function CW(t){let e;for(e=0;t>Cv;t>>=ub,e+=1);return e}const ng=t=>(ub<<BigInt(t))-ub;function AW(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=h=>new Uint8Array(h),s=h=>Uint8Array.of(h);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},u=(...h)=>n(o,i,...h),l=(h=r(0))=>{o=u(s(0),h),i=u(),h.length!==0&&(o=u(s(1),h),i=u())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const f=[];for(;h<e;){i=u();const y=i.slice();f.push(y),h+=i.length}return ic(...f)};return(h,f)=>{c(),l(h);let y;for(;!(y=f(d()));)l();return c(),y}}function rg(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function K_(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const cs=BigInt(0),jr=BigInt(1),oc=BigInt(2),IW=BigInt(3),mT=BigInt(4),yT=BigInt(5),wT=BigInt(8);function Fs(t,e){const n=t%e;return n>=cs?n:e+n}function ai(t,e,n){let r=t;for(;e-- >cs;)r*=r,r%=n;return r}function G_(t,e){if(t===cs)throw new Error("invert: expected non-zero number");if(e<=cs)throw new Error("invert: expected positive modulus, got "+e);let n=Fs(t,e),r=e,s=cs,i=jr;for(;n!==cs;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==jr)throw new Error("invert: does not exist");return Fs(s,e)}function bT(t,e){const n=(t.ORDER+jr)/mT,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function SW(t,e){const n=(t.ORDER-yT)/wT,r=t.mul(e,oc),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,oc),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function xW(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-jr,n=0;for(;e%oc===cs;)e/=oc,n++;let r=oc;const s=Il(t);for(;Y_(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return bT;let i=s.pow(r,e);const o=(e+jr)/oc;return function(a,c){if(a.is0(c))return c;if(Y_(a,c)!==1)throw new Error("Cannot find square root");let u=n,l=a.mul(a.ONE,i),d=a.pow(c,e),h=a.pow(c,o);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let f=1,y=a.sqr(d);for(;!a.eql(y,a.ONE);)if(f++,y=a.sqr(y),f===u)throw new Error("Cannot find square root");const m=jr<<BigInt(u-f-1),v=a.pow(l,m);u=f,l=a.sqr(v),d=a.mul(d,l),h=a.mul(h,v)}return h}}function TW(t){return t%mT===IW?bT:t%wT===yT?SW:xW(t)}const NW=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function RW(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=NW.reduce((r,s)=>(r[s]="function",r),e);return rg(t,n),t}function PW(t,e,n){if(n<cs)throw new Error("invalid exponent, negatives unsupported");if(n===cs)return t.ONE;if(n===jr)return e;let r=t.ONE,s=e;for(;n>cs;)n&jr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=jr;return r}function vT(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function Y_(t,e){const n=(t.ORDER-jr)/oc,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function kW(t,e){e!==void 0&&qo(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Il(t,e,n=!1,r={}){if(t<=cs)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const l=e;l.BITS&&(s=l.BITS),l.sqrt&&(i=l.sqrt),typeof l.isLE=="boolean"&&(n=l.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:a}=kW(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const u=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:ng(o),ZERO:cs,ONE:jr,create:l=>Fs(l,t),isValid:l=>{if(typeof l!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof l);return cs<=l&&l<t},is0:l=>l===cs,isValidNot0:l=>!u.is0(l)&&u.isValid(l),isOdd:l=>(l&jr)===jr,neg:l=>Fs(-l,t),eql:(l,d)=>l===d,sqr:l=>Fs(l*l,t),add:(l,d)=>Fs(l+d,t),sub:(l,d)=>Fs(l-d,t),mul:(l,d)=>Fs(l*d,t),pow:(l,d)=>PW(u,l,d),div:(l,d)=>Fs(l*G_(d,t),t),sqrN:l=>l*l,addN:(l,d)=>l+d,subN:(l,d)=>l-d,mulN:(l,d)=>l*d,inv:l=>G_(l,t),sqrt:i||(l=>(c||(c=TW(t)),c(u,l))),toBytes:l=>n?Iv(l,a):Av(l,a),fromBytes:l=>{if(l.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+l.length);return n?Wp(l):tg(l)},invertBatch:l=>vT(u,l),cmov:(l,d,h)=>h?d:l});return Object.freeze(u)}function ET(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function _T(t){const e=ET(t);return e+Math.ceil(e/2)}function OW(t,e,n=!1){const r=t.length,s=ET(e),i=_T(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?Wp(t):tg(t),a=Fs(o,e-jr)+jr;return n?Iv(a,s):Av(a,s)}const sl=BigInt(0),ac=BigInt(1);function md(t,e){const n=e.negate();return t?n:e}function BW(t,e,n){const r=i=>i.pz,s=vT(t.Fp,n.map(r));return n.map((i,o)=>i.toAffine(s[o])).map(t.fromAffine)}function CT(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Qm(t,e){CT(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=ng(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function Z_(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=ac);const u=e*r,l=u+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:l,isZero:d,isNeg:h,isNegF:f,offsetF:u}}function $W(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function DW(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const ey=new WeakMap,AT=new WeakMap;function ty(t){return AT.get(t)||1}function J_(t){if(t!==sl)throw new Error("invalid wNAF")}function UW(t,e){return{constTimeNegate:md,hasPrecomputes(n){return ty(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>sl;)r&ac&&(s=s.add(i)),i=i.double(),r>>=ac;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=Qm(r,e),o=[];let a=n,c=a;for(let u=0;u<s;u++){c=a,o.push(c);for(let l=1;l<i;l++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=Qm(n,e);for(let c=0;c<a.windows;c++){const{nextN:u,offset:l,isZero:d,isNeg:h,isNegF:f,offsetF:y}=Z_(s,c,a);s=u,d?o=o.add(md(f,r[y])):i=i.add(md(h,r[l]))}return J_(s),{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=Qm(n,e);for(let a=0;a<o.windows&&s!==sl;a++){const{nextN:c,offset:u,isZero:l,isNeg:d}=Z_(s,a,o);if(s=c,!l){const h=r[u];i=i.add(d?h.negate():h)}}return J_(s),i},getPrecomputes(n,r,s){let i=ey.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),ey.set(r,i))),i},wNAFCached(n,r,s){const i=ty(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=ty(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){CT(r,e),AT.set(n,r),ey.delete(n)}}}function MW(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>sl||r>sl;)n&ac&&(i=i.add(s)),r&ac&&(o=o.add(s)),s=s.double(),n>>=ac,r>>=ac;return{p1:i,p2:o}}function LW(t,e,n,r){$W(n,t),DW(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=CW(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=ng(c),l=new Array(Number(u)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){l.fill(o);for(let m=0;m<i;m++){const v=r[m],T=Number(v>>BigInt(f)&u);l[T]=l[T].add(n[m])}let y=o;for(let m=l.length-1,v=o;m>0;m--)v=v.add(l[m]),y=y.add(v);if(h=h.add(y),f!==0)for(let m=0;m<c;m++)h=h.double()}return h}function X_(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return RW(e),e}else return Il(t)}function FW(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const o of["p","n","h"]){const a=e[o];if(!(typeof a=="bigint"&&a>sl))throw new Error(`CURVE.${o} must be positive bigint`)}const r=X_(e.p,n.Fp),s=X_(e.n,n.Fn),i=["Gx","Gy","a","b"];for(const o of i)if(!r.isValid(e[o]))throw new Error(`CURVE.${o} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const zl=BigInt(0),ou=BigInt(1),Rf=BigInt(2);function jW(t){return rg(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function qW(t){const e=jW(t),{P:n,type:r,adjustScalarBytes:s,powPminus2:i,randomBytes:o}=e,a=r==="x25519";if(!a&&r!=="x448")throw new Error("invalid type");const c=o||Al,u=a?255:448,l=a?32:56,d=BigInt(a?9:5),h=BigInt(a?121665:39081),f=a?Rf**BigInt(254):Rf**BigInt(447),y=a?BigInt(8)*Rf**BigInt(251)-ou:BigInt(4)*Rf**BigInt(445)-ou,m=f+y+ou,v=D=>Fs(D,n),T=O(d);function O(D){return Iv(v(D),l)}function A(D){const k=rs("u coordinate",D,l);return a&&(k[31]&=127),v(Wp(k))}function M(D){return Wp(s(rs("scalar",D,l)))}function P(D,k){const B=W(A(k),M(D));if(B===zl)throw new Error("invalid private or public key received");return O(B)}function I(D){return P(D,T)}function F(D,k,B){const N=v(D*(k-B));return k=v(k-N),B=v(B+N),{x_2:k,x_3:B}}function W(D,k){lb("u",D,zl,n),lb("scalar",k,f,m);const B=k,N=D;let R=ou,p=zl,g=D,w=ou,_=zl;for(let L=BigInt(u-1);L>=zl;L--){const z=B>>L&ou;_^=z,{x_2:R,x_3:g}=F(_,R,g),{x_2:p,x_3:w}=F(_,p,w),_=z;const q=R+p,b=v(q*q),E=R-p,j=v(E*E),K=b-j,X=g+w,re=g-w,de=v(re*q),he=v(X*E),Oe=de+he,Re=de-he;g=v(Oe*Oe),w=v(N*v(Re*Re)),R=v(b*j),p=v(K*(b+v(h*K)))}({x_2:R,x_3:g}=F(_,R,g)),{x_2:p,x_3:w}=F(_,p,w);const C=i(p);return v(R*C)}return{scalarMult:P,scalarMultBase:I,getSharedSecret:(D,k)=>P(D,k),getPublicKey:D=>I(D),utils:{randomPrivateKey:()=>c(l)},GuBytes:T.slice()}}BigInt(0);const zW=BigInt(1),Q_=BigInt(2),WW=BigInt(3),HW=BigInt(5);BigInt(8);const IT={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function VW(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=IT.p,o=t*t%i*t%i,a=ai(o,Q_,i)*o%i,c=ai(a,zW,i)*t%i,u=ai(c,HW,i)*c%i,l=ai(u,e,i)*u%i,d=ai(l,n,i)*l%i,h=ai(d,r,i)*d%i,f=ai(h,s,i)*h%i,y=ai(f,s,i)*h%i,m=ai(y,e,i)*u%i;return{pow_p_5_8:ai(m,Q_,i)*t%i,b2:o}}function KW(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const db=(()=>{const t=IT.p;return qW({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:n,b2:r}=VW(e);return Fs(ai(n,WW,t)*r,t)},adjustScalarBytes:KW})})();function eC(t){t.lowS!==void 0&&zp("lowS",t.lowS),t.prehash!==void 0&&zp("prehash",t.prehash)}class GW extends Error{constructor(e=""){super(e)}}const Eo={Err:GW,_tlv:{encode:(t,e)=>{const{Err:n}=Eo;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Nf(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Nf(s.length/2|128):"";return Nf(t)+i+s+e},decode(t,e){const{Err:n}=Eo;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const u=e.subarray(r,r+c);if(u.length!==c)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const l of u)o=o<<8|l;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Eo;if(t<yd)throw new e("integer: negative integers are not allowed");let n=Nf(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Eo;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return tg(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Eo,s=rs("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:u,l}=r.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(u)}},hexFromSig(t){const{_tlv:e,_int:n}=Eo,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},yd=BigInt(0),wd=BigInt(1),YW=BigInt(2),Pf=BigInt(3),ZW=BigInt(4);function JW(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function ST(t,e,n){const{BYTES:r}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=rs("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function XW(t,e={}){const{Fp:n,Fn:r}=FW("weierstrass",t,e),{h:s,n:i}=t;rg(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(W,D,k){const{x:B,y:N}=D.toAffine(),R=n.toBytes(B);if(zp("isCompressed",k),k){a();const p=!n.isOdd(N);return ic(xT(p),R)}else return ic(Uint8Array.of(4),R,n.toBytes(N))}function u(W){Gs(W);const D=n.BYTES,k=D+1,B=2*D+1,N=W.length,R=W[0],p=W.subarray(1);if(N===k&&(R===2||R===3)){const g=n.fromBytes(p);if(!n.isValid(g))throw new Error("bad point: is not on curve, wrong x");const w=h(g);let _;try{_=n.sqrt(w)}catch(L){const z=L instanceof Error?": "+L.message:"";throw new Error("bad point: is not on curve, sqrt error"+z)}a();const C=n.isOdd(_);return(R&1)===1!==C&&(_=n.neg(_)),{x:g,y:_}}else if(N===B&&R===4){const g=n.fromBytes(p.subarray(D*0,D*1)),w=n.fromBytes(p.subarray(D*1,D*2));if(!f(g,w))throw new Error("bad point: is not on curve");return{x:g,y:w}}else throw new Error(`bad point: got length ${N}, expected compressed=${k} or uncompressed=${B}`)}const l=e.toBytes||c,d=e.fromBytes||u,h=JW(n,t.a,t.b);function f(W,D){const k=n.sqr(D),B=h(W);return n.eql(k,B)}if(!f(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const y=n.mul(n.pow(t.a,Pf),ZW),m=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(y,m)))throw new Error("bad curve params: a or b");function v(W,D,k=!1){if(!n.isValid(D)||k&&n.is0(D))throw new Error(`bad point coordinate ${W}`);return D}function T(W){if(!(W instanceof P))throw new Error("ProjectivePoint expected")}const O=K_((W,D)=>{const{px:k,py:B,pz:N}=W;if(n.eql(N,n.ONE))return{x:k,y:B};const R=W.is0();D==null&&(D=R?n.ONE:n.inv(N));const p=n.mul(k,D),g=n.mul(B,D),w=n.mul(N,D);if(R)return{x:n.ZERO,y:n.ZERO};if(!n.eql(w,n.ONE))throw new Error("invZ was invalid");return{x:p,y:g}}),A=K_(W=>{if(W.is0()){if(e.allowInfinityPoint&&!n.is0(W.py))return;throw new Error("bad point: ZERO")}const{x:D,y:k}=W.toAffine();if(!n.isValid(D)||!n.isValid(k))throw new Error("bad point: x or y not field elements");if(!f(D,k))throw new Error("bad point: equation left != right");if(!W.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function M(W,D,k,B,N){return k=new P(n.mul(k.px,W),k.py,k.pz),D=md(B,D),k=md(N,k),D.add(k)}class P{constructor(D,k,B){this.px=v("x",D),this.py=v("y",k,!0),this.pz=v("z",B),Object.freeze(this)}static fromAffine(D){const{x:k,y:B}=D||{};if(!D||!n.isValid(k)||!n.isValid(B))throw new Error("invalid affine point");if(D instanceof P)throw new Error("projective point not allowed");return n.is0(k)&&n.is0(B)?P.ZERO:new P(k,B,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(D){return BW(P,"pz",D)}static fromBytes(D){return Gs(D),P.fromHex(D)}static fromHex(D){const k=P.fromAffine(d(rs("pointHex",D)));return k.assertValidity(),k}static fromPrivateKey(D){const k=ST(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return P.BASE.multiply(k(D))}static msm(D,k){return LW(P,r,D,k)}precompute(D=8,k=!0){return F.setWindowSize(this,D),k||this.multiply(Pf),this}_setWindowSize(D){this.precompute(D)}assertValidity(){A(this)}hasEvenY(){const{y:D}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(D)}equals(D){T(D);const{px:k,py:B,pz:N}=this,{px:R,py:p,pz:g}=D,w=n.eql(n.mul(k,g),n.mul(R,N)),_=n.eql(n.mul(B,g),n.mul(p,N));return w&&_}negate(){return new P(this.px,n.neg(this.py),this.pz)}double(){const{a:D,b:k}=t,B=n.mul(k,Pf),{px:N,py:R,pz:p}=this;let g=n.ZERO,w=n.ZERO,_=n.ZERO,C=n.mul(N,N),L=n.mul(R,R),z=n.mul(p,p),q=n.mul(N,R);return q=n.add(q,q),_=n.mul(N,p),_=n.add(_,_),g=n.mul(D,_),w=n.mul(B,z),w=n.add(g,w),g=n.sub(L,w),w=n.add(L,w),w=n.mul(g,w),g=n.mul(q,g),_=n.mul(B,_),z=n.mul(D,z),q=n.sub(C,z),q=n.mul(D,q),q=n.add(q,_),_=n.add(C,C),C=n.add(_,C),C=n.add(C,z),C=n.mul(C,q),w=n.add(w,C),z=n.mul(R,p),z=n.add(z,z),C=n.mul(z,q),g=n.sub(g,C),_=n.mul(z,L),_=n.add(_,_),_=n.add(_,_),new P(g,w,_)}add(D){T(D);const{px:k,py:B,pz:N}=this,{px:R,py:p,pz:g}=D;let w=n.ZERO,_=n.ZERO,C=n.ZERO;const L=t.a,z=n.mul(t.b,Pf);let q=n.mul(k,R),b=n.mul(B,p),E=n.mul(N,g),j=n.add(k,B),K=n.add(R,p);j=n.mul(j,K),K=n.add(q,b),j=n.sub(j,K),K=n.add(k,N);let X=n.add(R,g);return K=n.mul(K,X),X=n.add(q,E),K=n.sub(K,X),X=n.add(B,N),w=n.add(p,g),X=n.mul(X,w),w=n.add(b,E),X=n.sub(X,w),C=n.mul(L,K),w=n.mul(z,E),C=n.add(w,C),w=n.sub(b,C),C=n.add(b,C),_=n.mul(w,C),b=n.add(q,q),b=n.add(b,q),E=n.mul(L,E),K=n.mul(z,K),b=n.add(b,E),E=n.sub(q,E),E=n.mul(L,E),K=n.add(K,E),q=n.mul(b,K),_=n.add(_,q),q=n.mul(X,K),w=n.mul(j,w),w=n.sub(w,q),q=n.mul(j,b),C=n.mul(X,C),C=n.add(C,q),new P(w,_,C)}subtract(D){return this.add(D.negate())}is0(){return this.equals(P.ZERO)}multiply(D){const{endo:k}=e;if(!r.isValidNot0(D))throw new Error("invalid scalar: out of range");let B,N;const R=p=>F.wNAFCached(this,p,P.normalizeZ);if(k){const{k1neg:p,k1:g,k2neg:w,k2:_}=k.splitScalar(D),{p:C,f:L}=R(g),{p:z,f:q}=R(_);N=L.add(q),B=M(k.beta,C,z,p,w)}else{const{p,f:g}=R(D);B=p,N=g}return P.normalizeZ([B,N])[0]}multiplyUnsafe(D){const{endo:k}=e,B=this;if(!r.isValid(D))throw new Error("invalid scalar: out of range");if(D===yd||B.is0())return P.ZERO;if(D===wd)return B;if(F.hasPrecomputes(this))return this.multiply(D);if(k){const{k1neg:N,k1:R,k2neg:p,k2:g}=k.splitScalar(D),{p1:w,p2:_}=MW(P,B,R,g);return M(k.beta,w,_,N,p)}else return F.wNAFCachedUnsafe(B,D)}multiplyAndAddUnsafe(D,k,B){const N=this.multiplyUnsafe(k).add(D.multiplyUnsafe(B));return N.is0()?void 0:N}toAffine(D){return O(this,D)}isTorsionFree(){const{isTorsionFree:D}=e;return s===wd?!0:D?D(P,this):F.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:D}=e;return s===wd?this:D?D(P,this):this.multiplyUnsafe(s)}toBytes(D=!0){return zp("isCompressed",D),this.assertValidity(),l(P,this,D)}toRawBytes(D=!0){return this.toBytes(D)}toHex(D=!0){return nh(this.toBytes(D))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}P.BASE=new P(t.Gx,t.Gy,n.ONE),P.ZERO=new P(n.ZERO,n.ONE,n.ZERO),P.Fp=n,P.Fn=r;const I=r.BITS,F=UW(P,e.endo?Math.ceil(I/2):I);return P}function xT(t){return Uint8Array.of(t?2:3)}function QW(t,e,n={}){rg(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||Al,s=e.hmac||((B,...N)=>Q0(e.hash,B,ic(...N))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function u(B){const N=a>>wd;return B>N}function l(B){return u(B)?o.neg(B):B}function d(B,N){if(!o.isValidNot0(N))throw new Error(`invalid signature ${B}: out of range 1..CURVE.n`)}class h{constructor(N,R,p){d("r",N),d("s",R),this.r=N,this.s=R,p!=null&&(this.recovery=p),Object.freeze(this)}static fromCompact(N){const R=o.BYTES,p=rs("compactSignature",N,R*2);return new h(o.fromBytes(p.subarray(0,R)),o.fromBytes(p.subarray(R,R*2)))}static fromDER(N){const{r:R,s:p}=Eo.toSig(rs("DER",N));return new h(R,p)}assertValidity(){}addRecoveryBit(N){return new h(this.r,this.s,N)}recoverPublicKey(N){const R=i.ORDER,{r:p,s:g,recovery:w}=this;if(w==null||![0,1,2,3].includes(w))throw new Error("recovery id invalid");if(a*YW<R&&w>1)throw new Error("recovery id is ambiguous for h>1 curve");const _=w===2||w===3?p+a:p;if(!i.isValid(_))throw new Error("recovery id 2 or 3 invalid");const C=i.toBytes(_),L=t.fromHex(ic(xT((w&1)===0),C)),z=o.inv(_),q=A(rs("msgHash",N)),b=o.create(-q*z),E=o.create(g*z),j=t.BASE.multiplyUnsafe(b).add(L.multiplyUnsafe(E));if(j.is0())throw new Error("point at infinify");return j.assertValidity(),j}hasHighS(){return u(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,o.neg(this.s),this.recovery):this}toBytes(N){if(N==="compact")return ic(o.toBytes(this.r),o.toBytes(this.s));if(N==="der")return vv(Eo.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return nh(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return nh(this.toBytes("compact"))}}const f=ST(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),y={isValidPrivateKey(B){try{return f(B),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const B=a;return OW(r(_T(B)),B)},precompute(B=8,N=t.BASE){return N.precompute(B,!1)}};function m(B,N=!0){return t.fromPrivateKey(B).toBytes(N)}function v(B){if(typeof B=="bigint")return!1;if(B instanceof t)return!0;const N=rs("key",B).length,R=i.BYTES,p=R+1,g=2*R+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===p))return N===p||N===g}function T(B,N,R=!0){if(v(B)===!0)throw new Error("first arg must be private key");if(v(N)===!1)throw new Error("second arg must be public key");return t.fromHex(N).multiply(f(B)).toBytes(R)}const O=e.bits2int||function(B){if(B.length>8192)throw new Error("input is too large");const N=tg(B),R=B.length*8-c;return R>0?N>>BigInt(R):N},A=e.bits2int_modN||function(B){return o.create(O(B))},M=ng(c);function P(B){return lb("num < 2^"+c,B,yd,M),o.toBytes(B)}function I(B,N,R=F){if(["recovered","canonical"].some(j=>j in R))throw new Error("sign() legacy options not supported");const{hash:p}=e;let{lowS:g,prehash:w,extraEntropy:_}=R;g==null&&(g=!0),B=rs("msgHash",B),eC(R),w&&(B=rs("prehashed msgHash",p(B)));const C=A(B),L=f(N),z=[P(L),P(C)];if(_!=null&&_!==!1){const j=_===!0?r(i.BYTES):_;z.push(rs("extraEntropy",j))}const q=ic(...z),b=C;function E(j){const K=O(j);if(!o.isValidNot0(K))return;const X=o.inv(K),re=t.BASE.multiply(K).toAffine(),de=o.create(re.x);if(de===yd)return;const he=o.create(X*o.create(b+de*L));if(he===yd)return;let Oe=(re.x===de?0:2)|Number(re.y&wd),Re=he;return g&&u(he)&&(Re=l(he),Oe^=1),new h(de,Re,Oe)}return{seed:q,k2sig:E}}const F={lowS:e.lowS,prehash:!1},W={lowS:e.lowS,prehash:!1};function D(B,N,R=F){const{seed:p,k2sig:g}=I(B,N,R);return AW(e.hash.outputLen,o.BYTES,s)(p,g)}t.BASE.precompute(8);function k(B,N,R,p=W){const g=B;N=rs("msgHash",N),R=rs("publicKey",R),eC(p);const{lowS:w,prehash:_,format:C}=p;if("strict"in p)throw new Error("options.strict was renamed to lowS");if(C!==void 0&&!["compact","der","js"].includes(C))throw new Error('format must be "compact", "der" or "js"');const L=typeof g=="string"||yv(g),z=!L&&!C&&typeof g=="object"&&g!==null&&typeof g.r=="bigint"&&typeof g.s=="bigint";if(!L&&!z)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let q,b;try{if(z)if(C===void 0||C==="js")q=new h(g.r,g.s);else throw new Error("invalid format");if(L){try{C!=="compact"&&(q=h.fromDER(g))}catch(Oe){if(!(Oe instanceof Eo.Err))throw Oe}!q&&C!=="der"&&(q=h.fromCompact(g))}b=t.fromHex(R)}catch{return!1}if(!q||w&&q.hasHighS())return!1;_&&(N=e.hash(N));const{r:E,s:j}=q,K=A(N),X=o.inv(j),re=o.create(K*X),de=o.create(E*X),he=t.BASE.multiplyUnsafe(re).add(b.multiplyUnsafe(de));return he.is0()?!1:o.create(he.x)===E}return Object.freeze({getPublicKey:m,getSharedSecret:T,sign:D,verify:k,utils:y,Point:t,Signature:h})}function eH(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=Il(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function tH(t){const{CURVE:e,curveOpts:n}=eH(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function nH(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function rH(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=tH(t),s=XW(e,n),i=QW(s,r,n);return nH(t,i)}function hb(t,e){const n=r=>rH({...t,hash:r});return{...n(e),create:n}}const TT={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},NT={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},RT={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},sH=Il(TT.p),iH=Il(NT.p),oH=Il(RT.p),aH=hb({...TT,Fp:sH,lowS:!1},X0);hb({...NT,Fp:iH,lowS:!1},gz),hb({...RT,Fp:oH,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},pz);const cH=aH,PT="base10",qr="base16",di="base64pad",ba="base64url",Jh="utf8",kT=0,Oo=1,Xh=2,uH=0,tC=1,bd=12,Sv=32;function lH(){const t=db.utils.randomPrivateKey(),e=db.getPublicKey(t);return{privateKey:ds(t,qr),publicKey:ds(e,qr)}}function fb(){const t=Al(Sv);return ds(t,qr)}function dH(t,e){const n=db.getSharedSecret(qs(t,qr),qs(e,qr)),r=EW(eg,n,void 0,void 0,Sv);return ds(r,qr)}function cp(t){const e=eg(qs(t,qr));return ds(e,qr)}function ji(t){const e=eg(qs(t,Jh));return ds(e,qr)}function OT(t){return qs(`${t}`,PT)}function Pc(t){return Number(ds(t,PT))}function BT(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function $T(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function hH(t){const e=OT(typeof t.type<"u"?t.type:kT);if(Pc(e)===Oo&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?qs(t.senderPublicKey,qr):void 0,r=typeof t.iv<"u"?qs(t.iv,qr):Al(bd),s=qs(t.symKey,qr),i=fT(s,r).encrypt(qs(t.message,Jh)),o=DT({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===ba?BT(o):o}function fH(t){const e=qs(t.symKey,qr),{sealed:n,iv:r}=sh({encoded:t.encoded,encoding:t.encoding}),s=fT(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return ds(s,Jh)}function pH(t,e){const n=OT(Xh),r=Al(bd),s=qs(t,Jh),i=DT({type:n,sealed:s,iv:r});return e===ba?BT(i):i}function gH(t,e){const{sealed:n}=sh({encoded:t,encoding:e});return ds(n,Jh)}function DT(t){if(Pc(t.type)===Xh)return ds(gd([t.type,t.sealed]),di);if(Pc(t.type)===Oo){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return ds(gd([t.type,t.senderPublicKey,t.iv,t.sealed]),di)}return ds(gd([t.type,t.iv,t.sealed]),di)}function sh(t){const e=(t.encoding||di)===ba?$T(t.encoded):t.encoded,n=qs(e,di),r=n.slice(uH,tC),s=tC;if(Pc(r)===Oo){const c=s+Sv,u=c+bd,l=n.slice(s,c),d=n.slice(c,u),h=n.slice(u);return{type:r,sealed:h,iv:d,senderPublicKey:l}}if(Pc(r)===Xh){const c=n.slice(s),u=Al(bd);return{type:r,sealed:c,iv:u}}const i=s+bd,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function mH(t,e){const n=sh({encoded:t,encoding:e?.encoding});return UT({type:Pc(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?ds(n.senderPublicKey,qr):void 0,receiverPublicKey:e?.receiverPublicKey})}function UT(t){const e=t?.type||kT;if(e===Oo){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function nC(t){return t.type===Oo&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function rC(t){return t.type===Xh}function yH(t){const e=Le.from(t.x,"base64"),n=Le.from(t.y,"base64");return gd([new Uint8Array([4]),e,n])}function wH(t,e){const[n,r,s]=t.split("."),i=Le.from($T(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,u=eg(c),l=yH(e);if(!cH.verify(gd([o,a]),u,l))throw new Error("Invalid signature");return Jw(t).payload}const bH="irn";function Hp(t){return t?.relay||{protocol:bH}}function ad(t){const e=tq[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function vH(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function sC(t){if(!t.includes("wc:")){const u=Gx(t);u!=null&&u.includes("wc:")&&(t=u)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((u,l)=>{a[l]=u});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:EH(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:vH(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function EH(t){return t.startsWith("//")?t.substring(2):t}function _H(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function iC(t){const e=new URLSearchParams,n=_H(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function kf(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var CH=Object.defineProperty,AH=Object.defineProperties,IH=Object.getOwnPropertyDescriptors,oC=Object.getOwnPropertySymbols,SH=Object.prototype.hasOwnProperty,xH=Object.prototype.propertyIsEnumerable,aC=(t,e,n)=>e in t?CH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,TH=(t,e)=>{for(var n in e||(e={}))SH.call(e,n)&&aC(t,n,e[n]);if(oC)for(var n of oC(e))xH.call(e,n)&&aC(t,n,e[n]);return t},NH=(t,e)=>AH(t,IH(e));function Sl(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function RH(t){const e=[];return Object.values(t).forEach(n=>{e.push(...Sl(n.accounts))}),e}function PH(t,e){const n=[];return Object.values(t).forEach(r=>{Sl(r.accounts).includes(e)&&n.push(...r.methods)}),n}function kH(t,e){const n=[];return Object.values(t).forEach(r=>{Sl(r.accounts).includes(e)&&n.push(...r.events)}),n}function sg(t){return t.includes(":")}function ku(t){return sg(t)?t.split(":")[0]:t}function cC(t){var e,n,r;const s={};if(!Zi(t))return s;for(const[i,o]of Object.entries(t)){const a=sg(i)?[i]:o.chains,c=o.methods||[],u=o.events||[],l=ku(i);s[l]=NH(TH({},s[l]),{chains:Yi(a,(e=s[l])==null?void 0:e.chains),methods:Yi(c,(n=s[l])==null?void 0:n.methods),events:Yi(u,(r=s[l])==null?void 0:r.events)})}return s}function OH(t){const e={};return t?.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function uC(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=OH(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=Yi(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function BH(t,e){var n,r,s,i,o,a;const c=cC(t),u=cC(e),l={},d=Object.keys(c).concat(Object.keys(u));for(const h of d)l[h]={chains:Yi((n=c[h])==null?void 0:n.chains,(r=u[h])==null?void 0:r.chains),methods:Yi((s=c[h])==null?void 0:s.methods,(i=u[h])==null?void 0:i.methods),events:Yi((o=c[h])==null?void 0:o.events,(a=u[h])==null?void 0:a.events)};return l}const $H={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},DH={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Ee(t,e){const{message:n,code:r}=DH[t];return{message:e?`${n} ${e}`:n,code:r}}function dn(t,e){const{message:n,code:r}=$H[t];return{message:e?`${n} ${e}`:n,code:r}}function Bo(t,e){return!!Array.isArray(t)}function Zi(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function dr(t){return typeof t>"u"}function $n(t,e){return e&&dr(t)?!0:typeof t=="string"&&!!t.trim().length}function xv(t,e){return e&&dr(t)?!0:typeof t=="number"&&!isNaN(t)}function UH(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return sc(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:u}=t.namespaces[o],l=Sl(a),d=n[o];(!sc(zx(o,d),l)||!sc(d.methods,c)||!sc(d.events,u))&&(i=!1)}),i):!1}function Vp(t){return $n(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function MH(t){if($n(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&Vp(n)}}return!1}function LH(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if($n(t,!1)){if(e(t))return!0;const n=Gx(t);return e(n)}}catch{}return!1}function FH(t){var e;return(e=t?.proposer)==null?void 0:e.publicKey}function jH(t){return t?.topic}function qH(t,e){let n=null;return $n(t?.publicKey,!1)||(n=Ee("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function lC(t){let e=!0;return Bo(t)?t.length&&(e=t.every(n=>$n(n,!1))):e=!1,e}function zH(t,e,n){let r=null;return Bo(e)&&e.length?e.forEach(s=>{r||Vp(s)||(r=dn("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):Vp(t)||(r=dn("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function WH(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=zH(s,zx(s,i),`${e} ${n}`);o&&(r=o)}),r}function HH(t,e){let n=null;return Bo(t)?t.forEach(r=>{n||MH(r)||(n=dn("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=dn("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function VH(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=HH(r?.accounts,`${e} namespace`);s&&(n=s)}),n}function KH(t,e){let n=null;return lC(t?.methods)?lC(t?.events)||(n=dn("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=dn("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function MT(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=KH(r,`${e}, namespace`);s&&(n=s)}),n}function GH(t,e,n){let r=null;if(t&&Zi(t)){const s=MT(t,e);s&&(r=s);const i=WH(t,e,n);i&&(r=i)}else r=Ee("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function ny(t,e){let n=null;if(t&&Zi(t)){const r=MT(t,e);r&&(n=r);const s=VH(t,e);s&&(n=s)}else n=Ee("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function LT(t){return $n(t.protocol,!0)}function YH(t,e){let n=!1;return t?t&&Bo(t)&&t.length&&t.forEach(r=>{n=LT(r)}):n=!0,n}function ZH(t){return typeof t=="number"}function ts(t){return typeof t<"u"&&typeof t!==null}function JH(t){return!(!t||typeof t!="object"||!t.code||!xv(t.code,!1)||!t.message||!$n(t.message,!1))}function XH(t){return!(dr(t)||!$n(t.method,!1))}function QH(t){return!(dr(t)||dr(t.result)&&dr(t.error)||!xv(t.id,!1)||!$n(t.jsonrpc,!1))}function eV(t){return!(dr(t)||!$n(t.name,!1))}function dC(t,e){return!(!Vp(e)||!RH(t).includes(e))}function tV(t,e,n){return $n(n,!1)?PH(t,e).includes(n):!1}function nV(t,e,n){return $n(n,!1)?kH(t,e).includes(n):!1}function hC(t,e,n){let r=null;const s=rV(t),i=sV(e),o=Object.keys(s),a=Object.keys(i),c=fC(Object.keys(t)),u=fC(Object.keys(e)),l=c.filter(d=>!u.includes(d));return l.length&&(r=Ee("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${l.toString()}
      Received: ${Object.keys(e).toString()}`)),sc(o,a)||(r=Ee("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=Sl(e[d].accounts);h.includes(d)||(r=Ee("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(sc(s[d].methods,i[d].methods)?sc(s[d].events,i[d].events)||(r=Ee("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=Ee("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function rV(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function fC(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function sV(t){const e={};return Object.keys(t).forEach(n=>{n.includes(":")?e[n]=t[n]:Sl(t[n].accounts)?.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}),e}function iV(t,e){return xv(t,!1)&&t<=e.max&&t>=e.min}function pC(){const t=Yh();return new Promise(e=>{switch(t){case Is.browser:e(oV());break;case Is.reactNative:e(aV());break;case Is.node:e(cV());break;default:e(!0)}})}function oV(){return Cl()&&navigator?.onLine}async function aV(){return Fa()&&typeof globalThis<"u"&&globalThis!=null&&globalThis.NetInfo?(await globalThis?.NetInfo.fetch())?.isConnected:!0}function cV(){return!0}function uV(t){switch(Yh()){case Is.browser:lV(t);break;case Is.reactNative:dV(t);break}}function lV(t){!Fa()&&Cl()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function dV(t){Fa()&&typeof globalThis<"u"&&globalThis!=null&&globalThis.NetInfo&&globalThis?.NetInfo.addEventListener(e=>t(e?.isConnected))}function hV(){var t;return Cl()&&jo.getDocument()?((t=jo.getDocument())==null?void 0:t.visibilityState)==="visible":!0}const ry={};class Wl{static get(e){return ry[e]}static set(e,n){ry[e]=n}static delete(e){delete ry[e]}}function fV(t){const e=Qn.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function pV({publicKey:t,signature:e,payload:n}){var r;const s=pb(n.method),i=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),o=yV(n.address),a=n.era==="00"?new Uint8Array([0]):pb(n.era);if(a.length!==1&&a.length!==2)throw new Error("Invalid era length");const c=parseInt(n.nonce,16),u=new Uint8Array([c&255,c>>8&255]),l=BigInt(`0x${mV(n.tip)}`),d=bV(l),h=new Uint8Array([0,...t,o,...e,...a,...u,...d,...s]),f=wV(h.length+1);return new Uint8Array([...f,i,...h])}function gV(t){const e=pb(t),n=iq.blake2b(e,void 0,32);return"0x"+Le.from(n).toString("hex")}function pb(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function mV(t){return t.startsWith("0x")?t.slice(2):t}function yV(t){const e=Qn.decode(t)[0];return e===42?0:e===60?2:1}function wV(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function bV(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function vV(t){const e=Uint8Array.from(Le.from(t.signature,"hex")),n=fV(t.transaction.address),r=pV({publicKey:n,signature:e,payload:t.transaction}),s=Le.from(r).toString("hex");return gV(s)}const EV="PARSE_ERROR",_V="INVALID_REQUEST",CV="METHOD_NOT_FOUND",AV="INVALID_PARAMS",FT="INTERNAL_ERROR",Tv="SERVER_ERROR",IV=[-32700,-32600,-32601,-32602,-32603],vd={[EV]:{code:-32700,message:"Parse error"},[_V]:{code:-32600,message:"Invalid Request"},[CV]:{code:-32601,message:"Method not found"},[AV]:{code:-32602,message:"Invalid params"},[FT]:{code:-32603,message:"Internal error"},[Tv]:{code:-32e3,message:"Server error"}},jT=Tv;function SV(t){return IV.includes(t)}function gC(t){return Object.keys(vd).includes(t)?vd[t]:vd[jT]}function xV(t){const e=Object.values(vd).find(n=>n.code===t);return e||vd[jT]}function qT(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var sy={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var gb=function(t,e){return gb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},gb(t,e)};function TV(t,e){gb(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var mb=function(){return mb=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},mb.apply(this,arguments)};function NV(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function RV(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function PV(t,e){return function(n,r){e(n,r,t)}}function kV(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function OV(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function BV(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return c([u,l])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,s=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(l){u=[6,l],s=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function $V(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function DV(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function yb(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function zT(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function UV(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(zT(arguments[e]));return t}function MV(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function ih(t){return this instanceof ih?(this.v=t,this):new ih(t)}function LV(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(y,m){i.push([h,f,y,m])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(y){d(i[0][3],y)}}function c(h){h.value instanceof ih?Promise.resolve(h.value.v).then(u,l):d(i[0][2],h)}function u(h){a("next",h)}function l(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function FV(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:ih(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function jV(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof yb=="function"?yb(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},o)}}function qV(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function zV(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function WV(t){return t&&t.__esModule?t:{default:t}}function HV(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function VV(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const KV=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return mb},__asyncDelegator:FV,__asyncGenerator:LV,__asyncValues:jV,__await:ih,__awaiter:OV,__classPrivateFieldGet:HV,__classPrivateFieldSet:VV,__createBinding:$V,__decorate:RV,__exportStar:DV,__extends:TV,__generator:BV,__importDefault:WV,__importStar:zV,__makeTemplateObject:qV,__metadata:kV,__param:PV,__read:zT,__rest:NV,__spread:UV,__spreadArrays:MV,__values:yb},Symbol.toStringTag,{value:"Module"})),GV=b0(KV);var go={},mC;function YV(){if(mC)return go;mC=1,Object.defineProperty(go,"__esModule",{value:!0}),go.isBrowserCryptoAvailable=go.getSubtleCrypto=go.getBrowerCrypto=void 0;function t(){return globalThis?.crypto||globalThis?.msCrypto||{}}go.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}go.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return go.isBrowserCryptoAvailable=n,go}var mo={},yC;function ZV(){if(yC)return mo;yC=1,Object.defineProperty(mo,"__esModule",{value:!0}),mo.isBrowser=mo.isNode=mo.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}mo.isReactNative=t;function e(){return typeof tr<"u"&&typeof tr.versions<"u"&&typeof tr.versions.node<"u"}mo.isNode=e;function n(){return!t()&&!e()}return mo.isBrowser=n,mo}var wC;function JV(){return wC||(wC=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=GV;e.__exportStar(YV(),t),e.__exportStar(ZV(),t)}(sy)),sy}var XV=JV();function Di(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function cc(t=6){return BigInt(Di(t))}function Aa(t,e,n){return{id:n||Di(),jsonrpc:"2.0",method:t,params:e}}function ig(t,e){return{id:t,jsonrpc:"2.0",result:e}}function og(t,e,n){return{id:t,jsonrpc:"2.0",error:QV(e)}}function QV(t,e){return typeof t>"u"?gC(FT):(typeof t=="string"&&(t=Object.assign(Object.assign({},gC(Tv)),{message:t})),SV(t.code)&&(t=xV(t.code)),t)}let eK=class{},tK=class extends eK{constructor(){super()}},nK=class extends tK{constructor(e){super()}};const rK="^https?:",sK="^wss?:";function iK(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function WT(t,e){const n=iK(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function bC(t){return WT(t,rK)}function vC(t){return WT(t,sK)}function oK(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function HT(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function Nv(t){return HT(t)&&"method"in t}function ag(t){return HT(t)&&(Ui(t)||Ls(t))}function Ui(t){return"result"in t}function Ls(t){return"error"in t}let Qs=class extends nK{constructor(e){super(e),this.events=new Xs.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(Aa(e.method,e.params||[],e.id||cc().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{Ls(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),ag(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const aK=()=>typeof WebSocket<"u"?WebSocket:typeof globalThis<"u"&&typeof globalThis.WebSocket<"u"?globalThis.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),cK=()=>typeof WebSocket<"u"||typeof globalThis<"u"&&typeof globalThis.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",EC=t=>t.split("?")[0],_C=10,uK=aK();let lK=class{constructor(e){if(this.url=e,this.events=new Xs.EventEmitter,this.registering=!1,!vC(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Fo(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!vC(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=XV.isReactNative()?void 0:{rejectUnauthorized:!oK(e)},i=new uK(e,[],s);cK()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?Nc(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=og(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return qT(e,EC(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>_C&&this.events.setMaxListeners(_C)}emitError(e){const n=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${EC(this.url)}`));return this.events.emit("register_error",n),n}};var dK={};const VT="wc",KT=2,wb="core",Xi=`${VT}@2:${wb}:`,hK={logger:"error"},fK={database:":memory:"},pK="crypto",CC="client_ed25519_seed",gK=_e.ONE_DAY,mK="keychain",yK="0.3",wK="messages",bK="0.3",AC=_e.SIX_HOURS,vK="publisher",GT="irn",EK="error",YT="wss://relay.walletconnect.org",_K="relayer",Jn={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},CK="_subscription",ks={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},AK=.1,bb="2.21.5",an={link_mode:"link_mode",relay:"relay"},up={inbound:"inbound",outbound:"outbound"},IK="0.3",SK="WALLETCONNECT_CLIENT_ID",IC="WALLETCONNECT_LINK_MODE_APPS",ws={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},xK="subscription",TK="0.3",NK="pairing",RK="0.3",Hl={wc_pairingDelete:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:_e.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:_e.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:0},res:{ttl:_e.ONE_DAY,prompt:!1,tag:0}}},Xa={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},si={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},PK="history",kK="0.3",OK="expirer",Ds={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},BK="0.3",$K="verify-api",DK="https://verify.walletconnect.com",ZT="https://verify.walletconnect.org",Ed=ZT,UK=`${Ed}/v3`,MK=[DK,ZT],LK="echo",FK="https://echo.walletconnect.com",Bi={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},wo={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},ii={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Wa={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Ha={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Vl={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},jK=.1,qK="event-client",zK=86400,WK="https://pulse.walletconnect.org/batch";function HK(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(y){if(y instanceof Uint8Array||(ArrayBuffer.isView(y)?y=new Uint8Array(y.buffer,y.byteOffset,y.byteLength):Array.isArray(y)&&(y=Uint8Array.from(y))),!(y instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(y.length===0)return"";for(var m=0,v=0,T=0,O=y.length;T!==O&&y[T]===0;)T++,m++;for(var A=(O-T)*l+1>>>0,M=new Uint8Array(A);T!==O;){for(var P=y[T],I=0,F=A-1;(P!==0||I<v)&&F!==-1;F--,I++)P+=256*M[F]>>>0,M[F]=P%a>>>0,P=P/a>>>0;if(P!==0)throw new Error("Non-zero carry");v=I,T++}for(var W=A-v;W!==A&&M[W]===0;)W++;for(var D=c.repeat(m);W<A;++W)D+=t.charAt(M[W]);return D}function h(y){if(typeof y!="string")throw new TypeError("Expected String");if(y.length===0)return new Uint8Array;var m=0;if(y[m]!==" "){for(var v=0,T=0;y[m]===c;)v++,m++;for(var O=(y.length-m)*u+1>>>0,A=new Uint8Array(O);y[m];){var M=n[y.charCodeAt(m)];if(M===255)return;for(var P=0,I=O-1;(M!==0||P<T)&&I!==-1;I--,P++)M+=a*A[I]>>>0,A[I]=M%256>>>0,M=M/256>>>0;if(M!==0)throw new Error("Non-zero carry");T=P,m++}if(y[m]!==" "){for(var F=O-T;F!==O&&A[F]===0;)F++;for(var W=new Uint8Array(v+(O-F)),D=v;F!==O;)W[D++]=A[F++];return W}}}function f(y){var m=h(y);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var VK=HK,KK=VK;const JT=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},GK=t=>new TextEncoder().encode(t),YK=t=>new TextDecoder().decode(t);class ZK{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class JK{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return XT(this,e)}}class XK{constructor(e){this.decoders=e}or(e){return XT(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const XT=(t,e)=>new XK({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class QK{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new ZK(e,n,r),this.decoder=new JK(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const cg=({name:t,prefix:e,encode:n,decode:r})=>new QK(t,e,n,r),Qh=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=KK(n,e);return cg({prefix:t,name:e,encode:r,decode:i=>JT(s(i))})},eG=(t,e,n,r)=>{const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,u=0;for(let l=0;l<i;++l){const d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},tG=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},vr=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>cg({prefix:e,name:t,encode(s){return tG(s,r,n)},decode(s){return eG(s,r,n,t)}}),nG=cg({prefix:"\0",name:"identity",encode:t=>YK(t),decode:t=>GK(t)});var rG=Object.freeze({__proto__:null,identity:nG});const sG=vr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var iG=Object.freeze({__proto__:null,base2:sG});const oG=vr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var aG=Object.freeze({__proto__:null,base8:oG});const cG=Qh({prefix:"9",name:"base10",alphabet:"0123456789"});var uG=Object.freeze({__proto__:null,base10:cG});const lG=vr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),dG=vr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var hG=Object.freeze({__proto__:null,base16:lG,base16upper:dG});const fG=vr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),pG=vr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),gG=vr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),mG=vr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),yG=vr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),wG=vr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),bG=vr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),vG=vr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),EG=vr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var _G=Object.freeze({__proto__:null,base32:fG,base32upper:pG,base32pad:gG,base32padupper:mG,base32hex:yG,base32hexupper:wG,base32hexpad:bG,base32hexpadupper:vG,base32z:EG});const CG=Qh({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),AG=Qh({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var IG=Object.freeze({__proto__:null,base36:CG,base36upper:AG});const SG=Qh({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),xG=Qh({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var TG=Object.freeze({__proto__:null,base58btc:SG,base58flickr:xG});const NG=vr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),RG=vr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),PG=vr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),kG=vr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var OG=Object.freeze({__proto__:null,base64:NG,base64pad:RG,base64url:PG,base64urlpad:kG});const QT=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),BG=QT.reduce((t,e,n)=>(t[n]=e,t),[]),$G=QT.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function DG(t){return t.reduce((e,n)=>(e+=BG[n],e),"")}function UG(t){const e=[];for(const n of t){const r=$G[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const MG=cg({prefix:"🚀",name:"base256emoji",encode:DG,decode:UG});var LG=Object.freeze({__proto__:null,base256emoji:MG}),FG=eN,SC=128,jG=-128,qG=Math.pow(2,31);function eN(t,e,n){e=e||[],n=n||0;for(var r=n;t>=qG;)e[n++]=t&255|SC,t/=128;for(;t&jG;)e[n++]=t&255|SC,t>>>=7;return e[n]=t|0,eN.bytes=n-r+1,e}var zG=vb,WG=128,xC=127;function vb(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw vb.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&xC)<<s:(o&xC)*Math.pow(2,s),s+=7}while(o>=WG);return vb.bytes=i-r,n}var HG=Math.pow(2,7),VG=Math.pow(2,14),KG=Math.pow(2,21),GG=Math.pow(2,28),YG=Math.pow(2,35),ZG=Math.pow(2,42),JG=Math.pow(2,49),XG=Math.pow(2,56),QG=Math.pow(2,63),eY=function(t){return t<HG?1:t<VG?2:t<KG?3:t<GG?4:t<YG?5:t<ZG?6:t<JG?7:t<XG?8:t<QG?9:10},tY={encode:FG,decode:zG,encodingLength:eY},tN=tY;const TC=(t,e,n=0)=>(tN.encode(t,e,n),e),NC=t=>tN.encodingLength(t),Eb=(t,e)=>{const n=e.byteLength,r=NC(t),s=r+NC(n),i=new Uint8Array(s+n);return TC(t,i,0),TC(n,i,r),i.set(e,s),new nY(t,n,e,i)};class nY{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const nN=({name:t,code:e,encode:n})=>new rY(t,e,n);class rY{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?Eb(this.code,n):n.then(r=>Eb(this.code,r))}else throw Error("Unknown type, must be binary type")}}const rN=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),sY=nN({name:"sha2-256",code:18,encode:rN("SHA-256")}),iY=nN({name:"sha2-512",code:19,encode:rN("SHA-512")});var oY=Object.freeze({__proto__:null,sha256:sY,sha512:iY});const sN=0,aY="identity",iN=JT,cY=t=>Eb(sN,iN(t)),uY={code:sN,name:aY,encode:iN,digest:cY};var lY=Object.freeze({__proto__:null,identity:uY});new TextEncoder,new TextDecoder;const RC={...rG,...iG,...aG,...uG,...hG,..._G,...IG,...TG,...OG,...LG};({...oY,...lY});function oN(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function dY(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?oN(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function aN(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const PC=aN("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),iy=aN("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=dY(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),hY={utf8:PC,"utf-8":PC,hex:RC.base16,latin1:iy,ascii:iy,binary:iy,...RC};function fY(t,e="utf8"){const n=hY[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?oN(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}var pY=Object.defineProperty,gY=(t,e,n)=>e in t?pY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ki=(t,e,n)=>gY(t,typeof e!="symbol"?e+"":e,n);class mY{constructor(e,n){this.core=e,this.logger=n,ki(this,"keychain",new Map),ki(this,"name",mK),ki(this,"version",yK),ki(this,"initialized",!1),ki(this,"storagePrefix",Xi),ki(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),ki(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),ki(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),ki(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=Ee("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),ki(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=Dr(n,this.name)}get context(){return ps(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,nb(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?rb(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}}var yY=Object.defineProperty,wY=(t,e,n)=>e in t?yY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,sr=(t,e,n)=>wY(t,typeof e!="symbol"?e+"":e,n);class bY{constructor(e,n,r){this.core=e,this.logger=n,sr(this,"name",pK),sr(this,"keychain"),sr(this,"randomSessionIdentifier",fb()),sr(this,"initialized",!1),sr(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),sr(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),sr(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=a_(s);return xx(i.publicKey)}),sr(this,"generateKeyPair",()=>{this.isInitialized();const s=lH();return this.setPrivateKey(s.publicKey,s.privateKey)}),sr(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=a_(i),a=this.randomSessionIdentifier;return await Z7(a,s,gK,o)}),sr(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=dH(a,i);return this.setSymKey(c,o)}),sr(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||cp(s);return await this.keychain.set(o,s),o}),sr(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),sr(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),sr(this,"encode",async(s,i,o)=>{this.isInitialized();const a=UT(o),c=Fo(i);if(rC(a))return pH(c,o?.encoding);if(nC(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(h,f)}const u=this.getSymKey(s),{type:l,senderPublicKey:d}=a;return hH({type:l,symKey:u,message:c,senderPublicKey:d,encoding:o?.encoding})}),sr(this,"decode",async(s,i,o)=>{this.isInitialized();const a=mH(i,o);if(rC(a)){const c=gH(i,o?.encoding);return Nc(c)}if(nC(a)){const c=a.receiverPublicKey,u=a.senderPublicKey;s=await this.generateSharedKey(c,u)}try{const c=this.getSymKey(s),u=fH({symKey:c,encoded:i,encoding:o?.encoding});return Nc(u)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),sr(this,"getPayloadType",(s,i=di)=>{const o=sh({encoded:s,encoding:i});return Pc(o.type)}),sr(this,"getPayloadSenderPublicKey",(s,i=di)=>{const o=sh({encoded:s,encoding:i});return o.senderPublicKey?ds(o.senderPublicKey,qr):void 0}),this.core=e,this.logger=Dr(n,this.name),this.keychain=r||new mY(this.core,this.logger)}get context(){return ps(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(CC)}catch{e=fb(),await this.keychain.set(CC,e)}return fY(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}}var vY=Object.defineProperty,EY=Object.defineProperties,_Y=Object.getOwnPropertyDescriptors,kC=Object.getOwnPropertySymbols,CY=Object.prototype.hasOwnProperty,AY=Object.prototype.propertyIsEnumerable,_b=(t,e,n)=>e in t?vY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,IY=(t,e)=>{for(var n in e||(e={}))CY.call(e,n)&&_b(t,n,e[n]);if(kC)for(var n of kC(e))AY.call(e,n)&&_b(t,n,e[n]);return t},SY=(t,e)=>EY(t,_Y(e)),ys=(t,e,n)=>_b(t,typeof e!="symbol"?e+"":e,n);class xY extends GM{constructor(e,n){super(e,n),this.logger=e,this.core=n,ys(this,"messages",new Map),ys(this,"messagesWithoutClientAck",new Map),ys(this,"name",wK),ys(this,"version",bK),ys(this,"initialized",!1),ys(this,"storagePrefix",Xi),ys(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),ys(this,"set",async(r,s,i)=>{this.isInitialized();const o=ji(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===up.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,SY(IY({},c),{[o]:s}))}return await this.persist(),o}),ys(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),ys(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),ys(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=ji(s);return typeof i[o]<"u"}),ys(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=ji(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),ys(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=Dr(e,this.name),this.core=n}get context(){return ps(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,nb(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,nb(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?rb(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?rb(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}}var TY=Object.defineProperty,NY=Object.defineProperties,RY=Object.getOwnPropertyDescriptors,OC=Object.getOwnPropertySymbols,PY=Object.prototype.hasOwnProperty,kY=Object.prototype.propertyIsEnumerable,Cb=(t,e,n)=>e in t?TY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Of=(t,e)=>{for(var n in e||(e={}))PY.call(e,n)&&Cb(t,n,e[n]);if(OC)for(var n of OC(e))kY.call(e,n)&&Cb(t,n,e[n]);return t},oy=(t,e)=>NY(t,RY(e)),oi=(t,e,n)=>Cb(t,typeof e!="symbol"?e+"":e,n);class OY extends YM{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,oi(this,"events",new Xs.EventEmitter),oi(this,"name",vK),oi(this,"queue",new Map),oi(this,"publishTimeout",_e.toMiliseconds(_e.ONE_MINUTE)),oi(this,"initialPublishTimeout",_e.toMiliseconds(_e.ONE_SECOND*15)),oi(this,"needsTransportRestart",!1),oi(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const a=i?.ttl||AC,c=Hp(i),u=i?.prompt||!1,l=i?.tag||0,d=i?.id||cc().toString(),h={topic:r,message:s,opts:{ttl:a,relay:c,prompt:u,tag:l,id:d,attestation:i?.attestation,tvf:i?.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${l}`;try{const y=new Promise(async m=>{const v=({id:O})=>{h.opts.id===O&&(this.removeRequestFromQueue(O),this.relayer.events.removeListener(Jn.publish,v),m(h))};this.relayer.events.on(Jn.publish,v);const T=Ca(new Promise((O,A)=>{this.rpcPublish({topic:r,message:s,ttl:a,prompt:u,tag:l,id:d,attestation:i?.attestation,tvf:i?.tvf}).then(O).catch(M=>{this.logger.warn(M,M?.message),A(M)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${l}`);try{await T,this.events.removeListener(Jn.publish,v)}catch(O){this.queue.set(d,oy(Of({},h),{attempt:1})),this.logger.warn(O,O?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:s,opts:i}}),await Ca(y,this.publishTimeout,f)}catch(y){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(y),(o=i?.internal)!=null&&o.throwOnFailedPublish)throw y}finally{this.queue.delete(d)}}),oi(this,"on",(r,s)=>{this.events.on(r,s)}),oi(this,"once",(r,s)=>{this.events.once(r,s)}),oi(this,"off",(r,s)=>{this.events.off(r,s)}),oi(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=Dr(n,this.name),this.registerEventListeners()}get context(){return ps(this.logger)}async rpcPublish(e){var n,r,s,i;const{topic:o,message:a,ttl:c=AC,prompt:u,tag:l,id:d,attestation:h,tvf:f}=e,y={method:ad(Hp().protocol).publish,params:Of({topic:o,message:a,ttl:c,prompt:u,tag:l,attestation:h},f),id:d};dr((n=y.params)==null?void 0:n.prompt)&&((r=y.params)==null||delete r.prompt),dr((s=y.params)==null?void 0:s.tag)&&((i=y.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:y});const m=await this.relayer.request(y);return this.relayer.events.emit(Jn.publish,e),this.logger.debug("Successfully Published Payload"),m}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,oy(Of({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(oy(Of({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(zc.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Jn.connection_stalled);return}this.checkQueue()}),this.relayer.on(Jn.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var BY=Object.defineProperty,$Y=(t,e,n)=>e in t?BY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,au=(t,e,n)=>$Y(t,typeof e!="symbol"?e+"":e,n);class DY{constructor(){au(this,"map",new Map),au(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),au(this,"get",e=>this.map.get(e)||[]),au(this,"exists",(e,n)=>this.get(e).includes(n)),au(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),au(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var UY=Object.defineProperty,MY=Object.defineProperties,LY=Object.getOwnPropertyDescriptors,BC=Object.getOwnPropertySymbols,FY=Object.prototype.hasOwnProperty,jY=Object.prototype.propertyIsEnumerable,Ab=(t,e,n)=>e in t?UY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Kl=(t,e)=>{for(var n in e||(e={}))FY.call(e,n)&&Ab(t,n,e[n]);if(BC)for(var n of BC(e))jY.call(e,n)&&Ab(t,n,e[n]);return t},ay=(t,e)=>MY(t,LY(e)),Zt=(t,e,n)=>Ab(t,typeof e!="symbol"?e+"":e,n);class qY extends XM{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Zt(this,"subscriptions",new Map),Zt(this,"topicMap",new DY),Zt(this,"events",new Xs.EventEmitter),Zt(this,"name",xK),Zt(this,"version",TK),Zt(this,"pending",new Map),Zt(this,"cached",[]),Zt(this,"initialized",!1),Zt(this,"storagePrefix",Xi),Zt(this,"subscribeTimeout",_e.toMiliseconds(_e.ONE_MINUTE)),Zt(this,"initialSubscribeTimeout",_e.toMiliseconds(_e.ONE_SECOND*15)),Zt(this,"clientId"),Zt(this,"batchSubscribeTopicsLimit",500),Zt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Zt(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=Hp(s),o={topic:r,relay:i,transportType:s?.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),Zt(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof s?.id<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),Zt(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),Zt(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),Zt(this,"on",(r,s)=>{this.events.on(r,s)}),Zt(this,"once",(r,s)=>{this.events.once(r,s)}),Zt(this,"off",(r,s)=>{this.events.off(r,s)}),Zt(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),Zt(this,"start",async()=>{await this.onConnect()}),Zt(this,"stop",async()=>{await this.onDisconnect()}),Zt(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Zt(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),Zt(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(zc.pulse,async()=>{await this.checkPending()}),this.events.on(ws.created,async r=>{const s=ws.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(ws.deleted,async r=>{const s=ws.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=Dr(n,this.name),this.clientId=""}get context(){return ps(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=Hp(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=dn("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||r?.transportType===an.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:ad(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r?.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if(r?.transportType===an.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(l=>this.logger.warn(l))},_e.toMiliseconds(_e.ONE_SECOND)),a;const c=new Promise(async l=>{const d=h=>{h.topic===e&&(this.events.removeListener(ws.created,d),l(h.id))};this.events.on(ws.created,d);try{const h=await Ca(new Promise((f,y)=>{this.relayer.request(i).catch(m=>{this.logger.warn(m,m?.message),y(m)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(ws.created,d),l(h)}catch{}}),u=await Ca(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!u&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return u?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Jn.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:ad(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await Ca(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Jn.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:ad(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await Ca(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Jn.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:ad(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,ay(Kl({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,Kl({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,Kl({},n)),this.topicMap.set(n.topic,e),this.events.emit(ws.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=Ee("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(ws.deleted,ay(Kl({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(ws.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(ws.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=Ee("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>ay(Kl({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await kq(_e.toMiliseconds(_e.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return ji(e+await this.getClientId())}}var zY=Object.defineProperty,$C=Object.getOwnPropertySymbols,WY=Object.prototype.hasOwnProperty,HY=Object.prototype.propertyIsEnumerable,Ib=(t,e,n)=>e in t?zY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,DC=(t,e)=>{for(var n in e||(e={}))WY.call(e,n)&&Ib(t,n,e[n]);if($C)for(var n of $C(e))HY.call(e,n)&&Ib(t,n,e[n]);return t},Tt=(t,e,n)=>Ib(t,typeof e!="symbol"?e+"":e,n);class VY extends ZM{constructor(e){super(e),Tt(this,"protocol","wc"),Tt(this,"version",2),Tt(this,"core"),Tt(this,"logger"),Tt(this,"events",new Xs.EventEmitter),Tt(this,"provider"),Tt(this,"messages"),Tt(this,"subscriber"),Tt(this,"publisher"),Tt(this,"name",_K),Tt(this,"transportExplicitlyClosed",!1),Tt(this,"initialized",!1),Tt(this,"connectionAttemptInProgress",!1),Tt(this,"relayUrl"),Tt(this,"projectId"),Tt(this,"packageName"),Tt(this,"bundleId"),Tt(this,"hasExperiencedNetworkDisruption",!1),Tt(this,"pingTimeout"),Tt(this,"heartBeatTimeout",_e.toMiliseconds(_e.THIRTY_SECONDS+_e.FIVE_SECONDS)),Tt(this,"reconnectTimeout"),Tt(this,"connectPromise"),Tt(this,"reconnectInProgress",!1),Tt(this,"requestsInFlight",[]),Tt(this,"connectTimeout",_e.toMiliseconds(_e.ONE_SECOND*15)),Tt(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||cc().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),Tt(this,"resetPingTimeout",()=>{jp()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o?.message)}},this.heartBeatTimeout))}),Tt(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),Tt(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(Jn.connect)}),Tt(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()}),Tt(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(Jn.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Tt(this,"registerProviderListeners",()=>{this.provider.on(ks.payload,this.onPayloadHandler),this.provider.on(ks.connect,this.onConnectHandler),this.provider.on(ks.disconnect,this.onDisconnectHandler),this.provider.on(ks.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Dr(e.logger,this.name):Hh(El({level:e.logger||EK})),this.messages=new xY(this.logger,e.core),this.subscriber=new qY(this,this.logger),this.publisher=new OY(this,this.logger),this.relayUrl=e?.relayUrl||YT,this.projectId=e.projectId,mq()?this.packageName=A_():yq()&&(this.bundleId=A_()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e?.message))}get context(){return ps(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:an.relay},up.outbound)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||n?.transportType==="relay")&&await this.toEstablishConnection();const o=typeof((r=n?.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n?.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const u=l=>{l.topic===e&&(this.subscriber.off(ws.created,u),c())};return await Promise.all([new Promise(l=>{c=l,this.subscriber.on(ws.created,u)}),new Promise(async(l,d)=>{a=await this.subscriber.subscribe(e,DC({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,l()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Ca(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.info("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await pC())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+s?.message)}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=qn(_e.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(Jn.message,e),await this.recordMessageEvent(e,up.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to connect"))};this.provider.once(ks.disconnect,i),await Ca(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(ks.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(ks.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(ks.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,_e.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(jp())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Qs(new lK(_q({sdkVersion:bb,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Nv(e)){if(!e.method.endsWith(CK))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:an.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(DC({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else ag(e)&&this.events.emit(Jn.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,up.inbound),this.events.emit(Jn.message,e))}async acknowledgePayload(e){const n=ig(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(ks.payload,this.onPayloadHandler),this.provider.off(ks.connect,this.onConnectHandler),this.provider.off(ks.disconnect,this.onDisconnectHandler),this.provider.off(ks.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await pC();uV(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(zc.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&hV())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n?.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Jn.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},_e.toMiliseconds(AK)))))}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function KY(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function UC(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function MC(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const GY="[object RegExp]",YY="[object String]",ZY="[object Number]",JY="[object Boolean]",LC="[object Arguments]",XY="[object Symbol]",QY="[object Date]",eZ="[object Map]",tZ="[object Set]",nZ="[object Array]",rZ="[object Function]",sZ="[object ArrayBuffer]",cy="[object Object]",iZ="[object Error]",oZ="[object DataView]",aZ="[object Uint8Array]",cZ="[object Uint8ClampedArray]",uZ="[object Uint16Array]",lZ="[object Uint32Array]",dZ="[object BigUint64Array]",hZ="[object Int8Array]",fZ="[object Int16Array]",pZ="[object Int32Array]",gZ="[object BigInt64Array]",mZ="[object Float32Array]",yZ="[object Float64Array]";function wZ(){}function FC(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function bZ(t,e,n){return cd(t,e,void 0,void 0,void 0,void 0,n)}function cd(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return _d(t,e,i,o)}return _d(t,e,i,o)}function _d(t,e,n,r){if(Object.is(t,e))return!0;let s=MC(t),i=MC(e);if(s===LC&&(s=cy),i===LC&&(i=cy),s!==i)return!1;switch(s){case YY:return t.toString()===e.toString();case ZY:{const c=t.valueOf(),u=e.valueOf();return KY(c,u)}case JY:case QY:case XY:return Object.is(t.valueOf(),e.valueOf());case GY:return t.source===e.source&&t.flags===e.flags;case rZ:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case eZ:{if(t.size!==e.size)return!1;for(const[c,u]of t.entries())if(!e.has(c)||!cd(u,e.get(c),c,t,e,n,r))return!1;return!0}case tZ:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),u=Array.from(e.values());for(let l=0;l<c.length;l++){const d=c[l],h=u.findIndex(f=>cd(d,f,void 0,t,e,n,r));if(h===-1)return!1;u.splice(h,1)}return!0}case nZ:case aZ:case cZ:case uZ:case lZ:case dZ:case hZ:case fZ:case pZ:case gZ:case mZ:case yZ:{if(typeof Le<"u"&&Le.isBuffer(t)!==Le.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!cd(t[c],e[c],c,t,e,n,r))return!1;return!0}case sZ:return t.byteLength!==e.byteLength?!1:_d(new Uint8Array(t),new Uint8Array(e),n,r);case oZ:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:_d(new Uint8Array(t),new Uint8Array(e),n,r);case iZ:return t.name===e.name&&t.message===e.message;case cy:{if(!(_d(t.constructor,e.constructor,n,r)||FC(t)&&FC(e)))return!1;const c=[...Object.keys(t),...UC(t)],u=[...Object.keys(e),...UC(e)];if(c.length!==u.length)return!1;for(let l=0;l<c.length;l++){const d=c[l],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!cd(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function vZ(t,e){return bZ(t,e,wZ)}var EZ=Object.defineProperty,jC=Object.getOwnPropertySymbols,_Z=Object.prototype.hasOwnProperty,CZ=Object.prototype.propertyIsEnumerable,Sb=(t,e,n)=>e in t?EZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qC=(t,e)=>{for(var n in e||(e={}))_Z.call(e,n)&&Sb(t,n,e[n]);if(jC)for(var n of jC(e))CZ.call(e,n)&&Sb(t,n,e[n]);return t},Jr=(t,e,n)=>Sb(t,typeof e!="symbol"?e+"":e,n);class Hc extends JM{constructor(e,n,r,s=Xi,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,Jr(this,"map",new Map),Jr(this,"version",IK),Jr(this,"cached",[]),Jr(this,"initialized",!1),Jr(this,"getKey"),Jr(this,"storagePrefix",Xi),Jr(this,"recentlyDeleted",[]),Jr(this,"recentlyDeletedLimit",200),Jr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!dr(o)?this.map.set(this.getKey(o),o):FH(o)?this.map.set(o.id,o):jH(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Jr(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Jr(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Jr(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>vZ(a[c],o[c]))):this.values)),Jr(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=qC(qC({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Jr(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Dr(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return ps(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=Ee("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=Ee("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=Ee("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}}var AZ=Object.defineProperty,IZ=(t,e,n)=>e in t?AZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bt=(t,e,n)=>IZ(t,typeof e!="symbol"?e+"":e,n);class SZ{constructor(e,n){this.core=e,this.logger=n,bt(this,"name",NK),bt(this,"version",RK),bt(this,"events",new tv),bt(this,"pairings"),bt(this,"initialized",!1),bt(this,"storagePrefix",Xi),bt(this,"ignoredPayloadTypes",[Oo]),bt(this,"registeredMethods",[]),bt(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),bt(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),bt(this,"create",async r=>{this.isInitialized();const s=fb(),i=await this.core.crypto.setSymKey(s),o=qn(_e.FIVE_MINUTES),a={protocol:GT},c={topic:i,expiry:o,relay:a,active:!1,methods:r?.methods},u=iC({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r?.methods});return this.events.emit(Xa.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r?.transportType}),{topic:i,uri:u}}),bt(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r?.uri,trace:[Bi.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:u}=sC(r.uri);s.props.properties.topic=i,s.addTrace(Bi.pairing_uri_validation_success),s.addTrace(Bi.pairing_uri_not_expired);let l;if(this.pairings.keys.includes(i)){if(l=this.pairings.get(i),s.addTrace(Bi.existing_pairing),l.active)throw s.setError(wo.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(Bi.pairing_not_expired)}const d=c||qn(_e.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:u};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(Bi.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(Xa.create,h),s.addTrace(Bi.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(Bi.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(wo.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(wo.subscribe_pairing_topic_failure),f}return s.addTrace(Bi.subscribe_pairing_topic_success),h}),bt(this,"activate",async({topic:r})=>{this.isInitialized();const s=qn(_e.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),bt(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=Za();this.events.once(Lt("pairing_ping",i),({error:u})=>{u?c(u):a()}),await o()}}),bt(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),bt(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),bt(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),bt(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",dn("USER_DISCONNECTED")),await this.deletePairing(s))}),bt(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return iC({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),bt(this,"sendRequest",async(r,s,i)=>{const o=Aa(s,i),a=await this.core.crypto.encode(r,o),c=Hl[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),bt(this,"sendResult",async(r,s,i)=>{const o=ig(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,u=Hl[c].res;await this.core.relayer.publish(s,a,u),await this.core.history.resolve(o)}),bt(this,"sendError",async(r,s,i)=>{const o=og(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,u=Hl[c]?Hl[c].res:Hl.unregistered_method.res;await this.core.relayer.publish(s,a,u),await this.core.history.resolve(o)}),bt(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,dn("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),bt(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>pa(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),bt(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),bt(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),bt(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(Xa.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),bt(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{Ui(s)?this.events.emit(Lt("pairing_ping",i),{}):Ls(s)&&this.events.emit(Lt("pairing_ping",i),{error:s.error})},500)}),bt(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(Xa.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),bt(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=dn("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),bt(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(dn("WC_METHOD_UNSUPPORTED",r))}),bt(this,"isValidPair",(r,s)=>{var i;if(!ts(r)){const{message:a}=Ee("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(wo.malformed_pairing_uri),new Error(a)}if(!LH(r.uri)){const{message:a}=Ee("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(wo.malformed_pairing_uri),new Error(a)}const o=sC(r?.uri);if(!((i=o?.relay)!=null&&i.protocol)){const{message:a}=Ee("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(wo.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=Ee("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(wo.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&_e.toMiliseconds(o?.expiryTimestamp)<Date.now()){s.setError(wo.pairing_expired);const{message:a}=Ee("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),bt(this,"isValidPing",async r=>{if(!ts(r)){const{message:i}=Ee("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),bt(this,"isValidDisconnect",async r=>{if(!ts(r)){const{message:i}=Ee("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),bt(this,"isValidPairingTopic",async r=>{if(!$n(r,!1)){const{message:s}=Ee("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=Ee("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(pa(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=Ee("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=Dr(n,this.name),this.pairings=new Hc(this.core,this.logger,this.name,this.storagePrefix)}get context(){return ps(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Jn.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==an.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);Nv(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):ag(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(Ds.expired,async e=>{const{topic:n}=Kx(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(Xa.expire,{topic:n}))})}}var xZ=Object.defineProperty,TZ=(t,e,n)=>e in t?xZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ir=(t,e,n)=>TZ(t,typeof e!="symbol"?e+"":e,n);class NZ extends KM{constructor(e,n){super(e,n),this.core=e,this.logger=n,ir(this,"records",new Map),ir(this,"events",new Xs.EventEmitter),ir(this,"name",PK),ir(this,"version",kK),ir(this,"cached",[]),ir(this,"initialized",!1),ir(this,"storagePrefix",Xi),ir(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),ir(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:qn(_e.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(si.created,o)}),ir(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=Ls(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(si.updated,s))}),ir(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),ir(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(si.deleted,i)}}),this.persist()}),ir(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),ir(this,"on",(r,s)=>{this.events.on(r,s)}),ir(this,"once",(r,s)=>{this.events.once(r,s)}),ir(this,"off",(r,s)=>{this.events.off(r,s)}),ir(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Dr(n,this.name)}get context(){return ps(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:Aa(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=Ee("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(si.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=Ee("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(si.created,e=>{const n=si.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(si.updated,e=>{const n=si.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(si.deleted,e=>{const n=si.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(zc.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{_e.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(si.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}}var RZ=Object.defineProperty,PZ=(t,e,n)=>e in t?RZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xr=(t,e,n)=>PZ(t,typeof e!="symbol"?e+"":e,n);class kZ extends QM{constructor(e,n){super(e,n),this.core=e,this.logger=n,xr(this,"expirations",new Map),xr(this,"events",new Xs.EventEmitter),xr(this,"name",OK),xr(this,"version",BK),xr(this,"cached",[]),xr(this,"initialized",!1),xr(this,"storagePrefix",Xi),xr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),xr(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),xr(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(Ds.created,{target:i,expiration:o})}),xr(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),xr(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(Ds.deleted,{target:s,expiration:i})}}),xr(this,"on",(r,s)=>{this.events.on(r,s)}),xr(this,"once",(r,s)=>{this.events.once(r,s)}),xr(this,"off",(r,s)=>{this.events.off(r,s)}),xr(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Dr(n,this.name)}get context(){return ps(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return Cq(e);if(typeof e=="number")return Aq(e);const{message:n}=Ee("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Ds.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=Ee("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=Ee("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;_e.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(Ds.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(zc.pulse,()=>this.checkExpirations()),this.events.on(Ds.created,e=>{const n=Ds.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Ds.expired,e=>{const n=Ds.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Ds.deleted,e=>{const n=Ds.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}}var OZ=Object.defineProperty,BZ=(t,e,n)=>e in t?OZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,On=(t,e,n)=>BZ(t,typeof e!="symbol"?e+"":e,n);class $Z extends e9{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,On(this,"name",$K),On(this,"abortController"),On(this,"isDevEnv"),On(this,"verifyUrlV3",UK),On(this,"storagePrefix",Xi),On(this,"version",KT),On(this,"publicKey"),On(this,"fetchPromise"),On(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&_e.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),On(this,"register",async s=>{if(!Cl()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const u=jo.getDocument(),l=this.startAbortTimer(_e.ONE_SECOND*5),d=await new Promise((h,f)=>{const y=()=>{window.removeEventListener("message",v),u.body.removeChild(m),f("attestation aborted")};this.abortController.signal.addEventListener("abort",y);const m=u.createElement("iframe");m.src=c,m.style.display="none",m.addEventListener("error",y,{signal:this.abortController.signal});const v=T=>{if(T.data&&typeof T.data=="string")try{const O=JSON.parse(T.data);if(O.type==="verify_attestation"){if(Jw(O.attestation).payload.id!==o)return;clearInterval(l),u.body.removeChild(m),this.abortController.signal.removeEventListener("abort",y),window.removeEventListener("message",v),h(O.attestation===null?"":O.attestation)}}catch(O){this.logger.warn(O)}};u.body.appendChild(m),window.addEventListener("message",v,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(u){this.logger.warn(u)}return""}),On(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(Jw(i).payload.id!==a)return;const u=await this.isValidJwtAttestation(i);if(u){if(!u.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return u}}if(!o)return;const c=this.getVerifyUrl(s?.verifyUrl);return this.fetchAttestation(o,c)}),On(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(_e.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),On(this,"getVerifyUrl",s=>{let i=s||Ed;return MK.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${Ed}`),i=Ed),i}),On(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(_e.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),On(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),On(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),On(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),On(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),On(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),On(this,"validateAttestation",(s,i)=>{const o=wH(s,i.publicKey),a={hasExpired:_e.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=Dr(n,this.name),this.abortController=new AbortController,this.isDevEnv=pv(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return ps(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),_e.toMiliseconds(e))}}var DZ=Object.defineProperty,UZ=(t,e,n)=>e in t?DZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zC=(t,e,n)=>UZ(t,typeof e!="symbol"?e+"":e,n);class MZ extends t9{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,zC(this,"context",LK),zC(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${FK}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=Dr(n,this.context)}}var LZ=Object.defineProperty,WC=Object.getOwnPropertySymbols,FZ=Object.prototype.hasOwnProperty,jZ=Object.prototype.propertyIsEnumerable,xb=(t,e,n)=>e in t?LZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Gl=(t,e)=>{for(var n in e||(e={}))FZ.call(e,n)&&xb(t,n,e[n]);if(WC)for(var n of WC(e))jZ.call(e,n)&&xb(t,n,e[n]);return t},Vn=(t,e,n)=>xb(t,typeof e!="symbol"?e+"":e,n);class qZ extends n9{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,Vn(this,"context",qK),Vn(this,"storagePrefix",Xi),Vn(this,"storageVersion",jK),Vn(this,"events",new Map),Vn(this,"shouldPersist",!1),Vn(this,"init",async()=>{if(!pv())try{const s={eventId:S_(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:Hx(this.core.relayer.protocol,this.core.relayer.version,bb)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),Vn(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,u=S_(),l=this.core.projectId||"",d=Date.now(),h=Gl({eventId:u,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:l,domain:this.getAppDomain()},this.setMethods(u));return this.telemetryEnabled&&(this.events.set(u,h),this.shouldPersist=!0),h}),Vn(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return Gl(Gl({},a),this.setMethods(a.eventId))}),Vn(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),Vn(this,"setEventListeners",()=>{this.core.heartbeat.on(zc.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{_e.fromMiliseconds(Date.now())-_e.fromMiliseconds(s.timestamp)>zK&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),Vn(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),Vn(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),Vn(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),Vn(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Vn(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,Gl(Gl({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),Vn(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),Vn(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${WK}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${bb}${i}`,{method:"POST",body:JSON.stringify(s)})}),Vn(this,"getAppDomain",()=>Wx().url),this.logger=Dr(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var zZ=Object.defineProperty,HC=Object.getOwnPropertySymbols,WZ=Object.prototype.hasOwnProperty,HZ=Object.prototype.propertyIsEnumerable,Tb=(t,e,n)=>e in t?zZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,VC=(t,e)=>{for(var n in e||(e={}))WZ.call(e,n)&&Tb(t,n,e[n]);if(HC)for(var n of HC(e))HZ.call(e,n)&&Tb(t,n,e[n]);return t},en=(t,e,n)=>Tb(t,typeof e!="symbol"?e+"":e,n);let VZ=class cN extends zM{constructor(e){var n;super(e),en(this,"protocol",VT),en(this,"version",KT),en(this,"name",wb),en(this,"relayUrl"),en(this,"projectId"),en(this,"customStoragePrefix"),en(this,"events",new Xs.EventEmitter),en(this,"logger"),en(this,"heartbeat"),en(this,"relayer"),en(this,"crypto"),en(this,"storage"),en(this,"history"),en(this,"expirer"),en(this,"pairing"),en(this,"verify"),en(this,"echoClient"),en(this,"linkModeSupportedApps"),en(this,"eventClient"),en(this,"initialized",!1),en(this,"logChunkController"),en(this,"on",(a,c)=>this.events.on(a,c)),en(this,"once",(a,c)=>this.events.once(a,c)),en(this,"off",(a,c)=>this.events.off(a,c)),en(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),en(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:u})=>{if(!a||!c)return;const l={topic:a,message:c,publishedAt:Date.now(),transportType:an.link_mode};this.relayer.onLinkMessageEvent(l,{sessionExists:u})});const r=this.getGlobalCore(e?.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||YT,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=El({level:typeof e?.logger=="string"&&e.logger?e.logger:hK.logger,name:wb}),{logger:i,chunkLoggerController:o}=rv({opts:s,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Dr(i,this.name),this.heartbeat=new qU,this.crypto=new bY(this,this.logger,e?.keychain),this.history=new NZ(this,this.logger),this.expirer=new kZ(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new AM(VC(VC({},fK),e?.storageOptions)),this.relayer=new VY({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new SZ(this,this.logger),this.verify=new $Z(this,this.logger,this.storage),this.echoClient=new MZ(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new qZ(this,this.logger,e?.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new cN(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(SK,r),n}get context(){return ps(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(IC,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(IC)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof tr<"u"&&dK.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const KZ=VZ,uN="wc",lN=2,dN="client",Rv=`${uN}@${lN}:${dN}:`,uy={name:dN,logger:"error"},KC="WALLETCONNECT_DEEPLINK_CHOICE",GZ="proposal",GC="Proposal expired",YZ="session",cu=_e.SEVEN_DAYS,ZZ="engine",Kn={wc_sessionPropose:{req:{ttl:_e.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1104},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1106},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:_e.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:_e.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1112},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1114},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:_e.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:_e.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1119}}},ly={min:_e.FIVE_MINUTES,max:_e.SEVEN_DAYS},Oi={idle:"IDLE",active:"ACTIVE"},JZ={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},XZ="request",QZ=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],eJ="wc",tJ="auth",nJ="authKeys",rJ="pairingTopics",sJ="requests",ug=`${eJ}@${1.5}:${tJ}:`,lp=`${ug}:PUB_KEY`;var iJ=Object.defineProperty,oJ=Object.defineProperties,aJ=Object.getOwnPropertyDescriptors,YC=Object.getOwnPropertySymbols,cJ=Object.prototype.hasOwnProperty,uJ=Object.prototype.propertyIsEnumerable,Nb=(t,e,n)=>e in t?iJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,on=(t,e)=>{for(var n in e||(e={}))cJ.call(e,n)&&Nb(t,n,e[n]);if(YC)for(var n of YC(e))uJ.call(e,n)&&Nb(t,n,e[n]);return t},Xr=(t,e)=>oJ(t,aJ(e)),me=(t,e,n)=>Nb(t,typeof e!="symbol"?e+"":e,n);class lJ extends o9{constructor(e){super(e),me(this,"name",ZZ),me(this,"events",new tv),me(this,"initialized",!1),me(this,"requestQueue",{state:Oi.idle,queue:[]}),me(this,"sessionRequestQueue",{state:Oi.idle,queue:[]}),me(this,"emittedSessionRequests",new Oq({limit:500})),me(this,"requestQueueDelay",_e.ONE_SECOND),me(this,"expectedPairingMethodMap",new Map),me(this,"recentlyDeletedMap",new Map),me(this,"recentlyDeletedLimit",200),me(this,"relayMessageCache",[]),me(this,"pendingSessions",new Map),me(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Kn)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},_e.toMiliseconds(this.requestQueueDelay)))}),me(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=Xr(on({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=BH(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:u}=r;let l=s,d,h=!1;try{if(l){const I=this.client.core.pairing.pairings.get(l);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=I.active}}catch(I){throw this.client.logger.error(`connect() -> pairing.get(${l}) failed`),I}if(!l||!h){const{topic:I,uri:F}=await this.client.core.pairing.create();l=I,d=F}if(!l){const{message:I}=Ee("NO_MATCHING_KEY",`connect() pairing topic: ${l}`);throw new Error(I)}const f=await this.client.core.crypto.generateKeyPair(),y=Kn.wc_sessionPropose.req.ttl||_e.FIVE_MINUTES,m=qn(y),v=Xr(on(on({requiredNamespaces:i,optionalNamespaces:o,relays:u??[{protocol:GT}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:m,pairingTopic:l},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:Di()}),T=Lt("session_connect",v.id),{reject:O,resolve:A,done:M}=Za(y,GC),P=({id:I})=>{I===v.id&&(this.client.events.off("proposal_expire",P),this.pendingSessions.delete(v.id),this.events.emit(T,{error:{message:GC,code:0}}))};return this.client.events.on("proposal_expire",P),this.events.once(T,({error:I,session:F})=>{this.client.events.off("proposal_expire",P),I?O(I):F&&A(F)}),await this.sendRequest({topic:l,method:"wc_sessionPropose",params:v,throwOnFailedPublish:!0,clientRpcId:v.id}),await this.setProposal(v.id,v),{uri:d,approval:M}}),me(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),me(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n?.id)==null?void 0:r.toString(),trace:[ii.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(D){throw o.setError(Wa.no_internet_connection),D}try{await this.isValidProposalId(n?.id)}catch(D){throw this.client.logger.error(`approve() -> proposal.get(${n?.id}) failed`),o.setError(Wa.proposal_not_found),D}try{await this.isValidApprove(n)}catch(D){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Wa.session_approve_namespace_validation_failure),D}const{id:a,relayProtocol:c,namespaces:u,sessionProperties:l,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:y,proposer:m,requiredNamespaces:v,optionalNamespaces:T}=f;let O=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:y});O||(O=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:ii.session_approve_started,properties:{topic:y,trace:[ii.session_approve_started,ii.session_namespaces_validation_success]}}));const A=await this.client.core.crypto.generateKeyPair(),M=m.publicKey,P=await this.client.core.crypto.generateSharedKey(A,M),I=on(on(on({relay:{protocol:c??"irn"},namespaces:u,controller:{publicKey:A,metadata:this.client.metadata},expiry:qn(cu)},l&&{sessionProperties:l}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),F=an.relay;O.addTrace(ii.subscribing_session_topic);try{await this.client.core.relayer.subscribe(P,{transportType:F})}catch(D){throw O.setError(Wa.subscribe_session_topic_failure),D}O.addTrace(ii.subscribe_session_topic_success);const W=Xr(on({},I),{topic:P,requiredNamespaces:v,optionalNamespaces:T,pairingTopic:y,acknowledged:!1,self:I.controller,peer:{publicKey:m.publicKey,metadata:m.metadata},controller:A,transportType:an.relay});await this.client.session.set(P,W),O.addTrace(ii.store_session);try{O.addTrace(ii.publishing_session_settle),await this.sendRequest({topic:P,method:"wc_sessionSettle",params:I,throwOnFailedPublish:!0}).catch(D=>{throw O?.setError(Wa.session_settle_publish_failure),D}),O.addTrace(ii.session_settle_publish_success),O.addTrace(ii.publishing_session_approve),await this.sendResult({id:a,topic:y,result:{relay:{protocol:c??"irn"},responderPublicKey:A},throwOnFailedPublish:!0}).catch(D=>{throw O?.setError(Wa.session_approve_publish_failure),D}),O.addTrace(ii.session_approve_publish_success)}catch(D){throw this.client.logger.error(D),this.client.session.delete(P,dn("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(P),D}return this.client.core.eventClient.deleteEvent({eventId:O.eventId}),await this.client.core.pairing.updateMetadata({topic:y,metadata:m.metadata}),await this.deleteProposal(a),await this.client.core.pairing.activate({topic:y}),await this.setExpiry(P,qn(cu)),{topic:P,acknowledged:()=>Promise.resolve(this.client.session.get(P))}}),me(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&await this.sendError({id:r,topic:i,error:s,rpcOpts:Kn.wc_sessionPropose.reject}),await this.deleteProposal(r)}),me(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=Za(),c=Di(),u=cc().toString(),l=this.client.session.get(r).namespaces;return this.events.once(Lt("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:u}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:l}),a(d)}),{acknowledged:i}}),me(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=Di(),{done:i,resolve:o,reject:a}=Za();return this.events.once(Lt("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,qn(cu)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),me(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(v){throw this.client.logger.error("request() -> isValidRequest() failed"),v}const{chainId:r,request:s,topic:i,expiry:o=Kn.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);a?.transportType===an.relay&&await this.confirmOnlineStateOrThrow();const c=Di(),u=cc().toString(),{done:l,resolve:d,reject:h}=Za(o,"Request expired. Please try again.");this.events.once(Lt("session_request",c),({error:v,result:T})=>{v?h(v):d(T)});const f="wc_sessionRequest",y=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(y)return await this.sendRequest({clientRpcId:c,relayRpcId:u,topic:i,method:f,params:{request:Xr(on({},s),{expiryTimestamp:qn(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:y}).catch(v=>h(v)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await l();const m={request:Xr(on({},s),{expiryTimestamp:qn(o)}),chainId:r};return await Promise.all([new Promise(async v=>{await this.sendRequest({clientRpcId:c,relayRpcId:u,topic:i,method:f,params:m,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(c,m)}).catch(T=>h(T)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),v()}),new Promise(async v=>{var T;if(!((T=a.sessionConfig)!=null&&T.disableDeepLink)){const O=await Tq(this.client.core.storage,KC);await Iq({id:c,topic:i,wcDeepLink:O})}v()}),l()]).then(v=>v[2])}),me(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===an.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Ui(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):Ls(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),me(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=Di(),i=cc().toString(),{done:o,resolve:a,reject:c}=Za();this.events.once(Lt("session_ping",s),({error:u})=>{u?c(u):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),me(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=cc().toString(),a=Di();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),me(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:dn("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=Ee("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),me(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>UH(r,n)))),me(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),me(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?an.link_mode:an.relay;o===an.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:u,domain:l,nonce:d,type:h,exp:f,nbf:y,methods:m=[],expiry:v}=n,T=[...n.resources||[]],{topic:O,uri:A}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:O,uri:A}});const M=await this.client.core.crypto.generateKeyPair(),P=cp(M);if(await Promise.all([this.client.auth.authKeys.set(lp,{responseTopic:P,publicKey:M}),this.client.auth.pairingTopics.set(P,{topic:P,pairingTopic:O})]),await this.client.core.relayer.subscribe(P,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${O}`),m.length>0){const{namespace:L}=qu(a[0]);let z=Wz(L,"request",m);ap(T)&&(z=Vz(z,T.pop())),T.push(z)}const I=v&&v>Kn.wc_sessionAuthenticate.req.ttl?v:Kn.wc_sessionAuthenticate.req.ttl,F={authPayload:{type:h??"caip122",chains:a,statement:c,aud:u,domain:l,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:y,resources:T},requester:{publicKey:M,metadata:this.client.metadata},expiryTimestamp:qn(I)},W={eip155:{chains:a,methods:[...new Set(["personal_sign",...m])],events:["chainChanged","accountsChanged"]}},D={requiredNamespaces:{},optionalNamespaces:W,relays:[{protocol:"irn"}],pairingTopic:O,proposer:{publicKey:M,metadata:this.client.metadata},expiryTimestamp:qn(Kn.wc_sessionPropose.req.ttl),id:Di()},{done:k,resolve:B,reject:N}=Za(I,"Request expired"),R=Di(),p=Lt("session_connect",D.id),g=Lt("session_request",R),w=async({error:L,session:z})=>{this.events.off(g,_),L?N(L):z&&B({session:z})},_=async L=>{var z,q,b;if(await this.deletePendingAuthRequest(R,{message:"fulfilled",code:0}),L.error){const he=dn("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return L.error.code===he.code?void 0:(this.events.off(p,w),N(L.error.message))}await this.deleteProposal(D.id),this.events.off(p,w);const{cacaos:E,responder:j}=L.result,K=[],X=[];for(const he of E){await U_({cacao:he,projectId:this.client.core.projectId})||(this.client.logger.error(he,"Signature verification failed"),N(dn("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:Oe}=he,Re=ap(Oe.resources),Ve=[sb(Oe.iss)],kt=qp(Oe.iss);if(Re){const dt=M_(Re),ht=L_(Re);K.push(...dt),Ve.push(...ht)}for(const dt of Ve)X.push(`${dt}:${kt}`)}const re=await this.client.core.crypto.generateSharedKey(M,j.publicKey);let de;K.length>0&&(de={topic:re,acknowledged:!0,self:{publicKey:M,metadata:this.client.metadata},peer:j,controller:j.publicKey,expiry:qn(cu),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:O,namespaces:uC([...new Set(K)],[...new Set(X)]),transportType:o},await this.client.core.relayer.subscribe(re,{transportType:o}),await this.client.session.set(re,de),O&&await this.client.core.pairing.updateMetadata({topic:O,metadata:j.metadata}),de=this.client.session.get(re)),(z=this.client.metadata.redirect)!=null&&z.linkMode&&(q=j.metadata.redirect)!=null&&q.linkMode&&(b=j.metadata.redirect)!=null&&b.universal&&r&&(this.client.core.addLinkModeSupportedApp(j.metadata.redirect.universal),this.client.session.update(re,{transportType:an.link_mode})),B({auths:E,session:de})};this.events.once(p,w),this.events.once(g,_);let C;try{if(i){const L=Aa("wc_sessionAuthenticate",F,R);this.client.core.history.set(O,L);const z=await this.client.core.crypto.encode("",L,{type:Xh,encoding:ba});C=kf(r,O,z)}else await Promise.all([this.sendRequest({topic:O,method:"wc_sessionAuthenticate",params:F,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:R}),this.sendRequest({topic:O,method:"wc_sessionPropose",params:D,expiry:Kn.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:D.id})])}catch(L){throw this.events.off(p,w),this.events.off(g,_),L}return await this.setProposal(D.id,D),await this.setAuthRequest(R,{request:Xr(on({},F),{verifyContext:{}}),pairingTopic:O,transportType:o}),{uri:C??A,response:k}}),me(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[Ha.authenticated_session_approve_started]}});try{this.isInitialized()}catch(v){throw i.setError(Vl.no_internet_connection),v}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(Vl.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||an.relay;a===an.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,u=await this.client.core.crypto.generateKeyPair(),l=cp(c),d={type:Oo,receiverPublicKey:c,senderPublicKey:u},h=[],f=[];for(const v of s){if(!await U_({cacao:v,projectId:this.client.core.projectId})){i.setError(Vl.invalid_cacao);const P=dn("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:l,error:P,encodeOpts:d}),new Error(P.message)}i.addTrace(Ha.cacaos_verified);const{p:T}=v,O=ap(T.resources),A=[sb(T.iss)],M=qp(T.iss);if(O){const P=M_(O),I=L_(O);h.push(...P),A.push(...I)}for(const P of A)f.push(`${P}:${M}`)}const y=await this.client.core.crypto.generateSharedKey(u,c);i.addTrace(Ha.create_authenticated_session_topic);let m;if(h?.length>0){m={topic:y,acknowledged:!0,self:{publicKey:u,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:qn(cu),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:uC([...new Set(h)],[...new Set(f)]),transportType:a},i.addTrace(Ha.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(y,{transportType:a})}catch(v){throw i.setError(Vl.subscribe_authenticated_session_topic_failure),v}i.addTrace(Ha.subscribe_authenticated_session_topic_success),await this.client.session.set(y,m),i.addTrace(Ha.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(Ha.publishing_authenticated_session_approve);try{await this.sendResult({topic:l,id:r,result:{cacaos:s,responder:{publicKey:u,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(v){throw i.setError(Vl.authenticated_session_approve_publish_failure),v}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:m}}),me(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===an.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=cp(o),u={type:Oo,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:u,rpcOpts:Kn.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),me(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return cT(r,s)}),me(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),me(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),me(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,dn("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(KC).catch(u=>this.client.logger.warn(u)),this.getPendingSessionRequests().forEach(u=>{u.topic===s&&this.deletePendingSessionRequest(u.id,dn("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=Oi.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),me(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n);this.client.core.eventClient.getEvent({topic:s.pairingTopic})?.setError(Wa.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,dn("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),me(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=Oi.idle,this.client.events.emit("session_request_expire",{id:n}))}),me(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),me(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),me(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,qn(Kn.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),me(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=an.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),me(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||qn(Kn.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),me(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:u,appLink:l,tvf:d}=n,h=Aa(s,i,c);let f;const y=!!l;try{const T=y?ba:di;f=await this.client.core.crypto.encode(r,h,{encoding:T})}catch(T){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),T}let m;if(QZ.includes(s)){const T=ji(JSON.stringify(h)),O=ji(f);m=await this.client.core.verify.register({id:O,decryptedId:T})}const v=Kn[s].req;if(v.attestation=m,o&&(v.ttl=o),a&&(v.id=a),this.client.core.history.set(r,h),y){const T=kf(l,r,f);await globalThis.Linking.openURL(T,this.client.name)}else{const T=Kn[s].req;o&&(T.ttl=o),a&&(T.id=a),T.tvf=Xr(on({},d),{correlationId:h.id}),u?(T.internal=Xr(on({},T.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,T)):this.client.core.relayer.publish(r,f,T).catch(O=>this.client.logger.error(O))}return h.id}),me(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,u=ig(r,i);let l;const d=c&&typeof globalThis?.Linking<"u";try{const y=d?ba:di;l=await this.client.core.crypto.encode(s,u,Xr(on({},a||{}),{encoding:y}))}catch(y){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),y}let h,f;try{h=await this.client.core.history.get(s,r);const y=h.request;try{f=this.getTVFParams(r,y.params,i)}catch(m){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${m?.message}`)}}catch(y){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),y}if(d){const y=kf(c,s,l);await globalThis.Linking.openURL(y,this.client.name)}else{const y=h.request.method,m=Kn[y].res;m.tvf=Xr(on({},f),{correlationId:r}),o?(m.internal=Xr(on({},m.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,l,m)):this.client.core.relayer.publish(s,l,m).catch(v=>this.client.logger.error(v))}await this.client.core.history.resolve(u)}),me(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,u=og(r,i);let l;const d=c&&typeof globalThis?.Linking<"u";try{const f=d?ba:di;l=await this.client.core.crypto.encode(s,u,Xr(on({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let h;try{h=await this.client.core.history.get(s,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),f}if(d){const f=kf(c,s,l);await globalThis.Linking.openURL(f,this.client.name)}else{const f=h.request.method,y=a||Kn[f].res;this.client.core.relayer.publish(s,l,y)}await this.client.core.history.resolve(u)}),me(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;pa(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{pa(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),me(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),me(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),me(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===Oi.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Oi.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=Oi.idle}),me(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),me(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),me(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=Ee("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),me(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),me(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const u=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),u?.setError(wo.proposal_listener_not_found)),this.isValidConnect(on({},s.params));const l=a.expiryTimestamp||qn(Kn.wc_sessionPropose.req.ttl),d=on({id:c,pairingTopic:r,expiryTimestamp:l,attestation:i,encryptedId:o},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:ji(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});u?.addTrace(Bi.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(u){await this.sendError({id:c,topic:r,error:u,rpcOpts:Kn.wc_sessionPropose.autoReject}),this.client.logger.error(u)}}),me(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(Ui(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const u=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:u});const l=await this.client.core.crypto.generateSharedKey(c,u);this.pendingSessions.set(i,{sessionTopic:l,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(l,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(Ls(r)){await this.deleteProposal(i);const o=Lt("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),me(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:u,sessionProperties:l,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(v=>v.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const y=this.client.proposal.get(f.proposalId),m=Xr(on(on(on({topic:n,relay:o,expiry:c,namespaces:u,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:y.requiredNamespaces,optionalNamespaces:y.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},l&&{sessionProperties:l}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:an.relay});await this.client.session.set(m.topic,m),await this.setExpiry(m.topic,m.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:m.peer.metadata}),this.client.events.emit("session_connect",{session:m}),this.events.emit(Lt("session_connect",f.proposalId),{session:m}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(m),await this.sendResult({id:r.id,topic:n,result:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),me(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;Ui(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(Lt("session_approve",s),{})):Ls(r)&&(await this.client.session.delete(n,dn("USER_DISCONNECTED")),this.events.emit(Lt("session_approve",s),{error:r.error}))}),me(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=Wl.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:dn("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(on({topic:n},s));try{Wl.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0})}catch(c){throw Wl.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),me(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),me(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=Lt("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Ui(r)?this.events.emit(Lt("session_update",s),{}):Ls(r)&&this.events.emit(Lt("session_update",s),{error:r.error})}),me(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,qn(cu)),await this.sendResult({id:s,topic:n,result:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),me(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=Lt("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Ui(r)?this.events.emit(Lt("session_extend",s),{}):Ls(r)&&this.events.emit(Lt("session_extend",s),{error:r.error})}),me(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),me(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=Lt("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);Ui(r)?this.events.emit(Lt("session_ping",s),{}):Ls(r)&&this.events.emit(Lt("session_ping",s),{error:r.error})},500)}),me(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(Jn.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:dn("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),me(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:u,transportType:l}=n,{id:d,params:h}=a;try{await this.isValidRequest(on({topic:o},h));const f=this.client.session.get(o),y=await this.getVerifyContext({attestationId:c,hash:ji(JSON.stringify(Aa("wc_sessionRequest",h,d))),encryptedId:u,metadata:f.peer.metadata,transportType:l}),m={id:d,topic:o,params:h,verifyContext:y};await this.setPendingSessionRequest(m),l===an.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(m):(this.addSessionRequestToSessionRequestQueue(m),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),me(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=Lt("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Ui(r)?this.events.emit(Lt("session_request",s),{result:r.result}):Ls(r)&&this.events.emit(Lt("session_request",s),{error:r.error})}),me(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=Wl.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(on({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),Wl.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),me(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),Ui(r)?this.events.emit(Lt("session_request",s),{result:r.result}):Ls(r)&&this.events.emit(Lt("session_request",s),{error:r.error})}),me(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:u,authPayload:l,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:ji(JSON.stringify(i)),encryptedId:a,metadata:u.metadata,transportType:c}),f={requester:u,pairingTopic:s,id:i.id,authPayload:l,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===an.link_mode&&(r=u.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(u.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(u){this.client.logger.error(u);const l=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:Oo,receiverPublicKey:l,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:u,encodeOpts:f,rpcOpts:Kn.wc_sessionAuthenticate.autoReject,appLink:h})}}),me(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),me(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Oi.idle,this.processSessionRequestQueue()},_e.toMiliseconds(this.requestQueueDelay))}),me(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=Lt("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(Lt("session_request",i.request.id),{error:r})})}),me(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Oi.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),me(this,"emitSessionRequest",n=>{if(this.emittedSessionRequests.has(n.id)){this.client.logger.warn({id:n.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${n.id}`);return}this.sessionRequestQueue.state=Oi.active,this.emittedSessionRequests.add(n.id),this.client.events.emit("session_request",n)}),me(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:Aa("wc_sessionPropose",Xr(on({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),me(this,"isValidConnect",async n=>{if(!ts(n)){const{message:u}=Ee("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(u)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(dr(r)||await this.isValidPairingTopic(r),!YH(c)){const{message:u}=Ee("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(u)}if(!dr(s)&&Zi(s)!==0){const u="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(u):this.client.logger.warn(u),this.validateNamespaces(s,"requiredNamespaces")}if(!dr(i)&&Zi(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),dr(o)||this.validateSessionProps(o,"sessionProperties"),!dr(a)){this.validateSessionProps(a,"scopedProperties");const u=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(l=>u.includes(l.split(":")[0])))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(u)}`)}}),me(this,"validateNamespaces",(n,r)=>{const s=GH(n,"connect()",r);if(s)throw new Error(s.message)}),me(this,"isValidApprove",async n=>{if(!ts(n))throw new Error(Ee("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),u=ny(s,"approve()");if(u)throw new Error(u.message);const l=hC(c.requiredNamespaces,s,"approve()");if(l)throw new Error(l.message);if(!$n(i,!0)){const{message:d}=Ee("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(dr(o)||this.validateSessionProps(o,"sessionProperties"),!dr(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h.split(":")[0])))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),me(this,"isValidReject",async n=>{if(!ts(n)){const{message:i}=Ee("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!JH(s)){const{message:i}=Ee("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),me(this,"isValidSessionSettleRequest",n=>{if(!ts(n)){const{message:u}=Ee("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(u)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!LT(r)){const{message:u}=Ee("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(u)}const a=qH(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=ny(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(pa(o)){const{message:u}=Ee("EXPIRED","onSessionSettleRequest()");throw new Error(u)}}),me(this,"isValidUpdate",async n=>{if(!ts(n)){const{message:c}=Ee("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=ny(s,"update()");if(o)throw new Error(o.message);const a=hC(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),me(this,"isValidExtend",async n=>{if(!ts(n)){const{message:s}=Ee("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),me(this,"isValidRequest",async n=>{if(!ts(n)){const{message:c}=Ee("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!dC(a,i)){const{message:c}=Ee("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!XH(s)){const{message:c}=Ee("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!tV(a,i,s.method)){const{message:c}=Ee("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!iV(o,ly)){const{message:c}=Ee("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${ly.min} and ${ly.max}`);throw new Error(c)}}),me(this,"isValidRespond",async n=>{var r;if(!ts(n)){const{message:o}=Ee("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n?.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!QH(i)){const{message:o}=Ee("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),me(this,"isValidPing",async n=>{if(!ts(n)){const{message:s}=Ee("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),me(this,"isValidEmit",async n=>{if(!ts(n)){const{message:a}=Ee("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!dC(o,i)){const{message:a}=Ee("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!eV(s)){const{message:a}=Ee("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!nV(o,i,s.name)){const{message:a}=Ee("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),me(this,"isValidDisconnect",async n=>{if(!ts(n)){const{message:s}=Ee("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),me(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!$n(s,!1))throw new Error("uri is required parameter");if(!$n(i,!1))throw new Error("domain is required parameter");if(!$n(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>qu(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=qu(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),me(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||Ed,validation:"UNKNOWN",origin:o.url||""}};try{if(a===an.link_mode){const l=this.getAppLinkIfEnabled(o,a);return c.verified.validation=l&&new URL(l).origin===new URL(o.url).origin?"VALID":"INVALID",c}const u=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});u&&(c.verified.origin=u.origin,c.verified.isScam=u.isScam,c.verified.validation=u.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(u){this.client.logger.warn(u)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),me(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=Ee("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),me(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),me(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),me(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=Ee("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),me(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,u,l,d,h;return!n||r!==an.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((u=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:u.universal)!==""&&((l=n?.redirect)==null?void 0:l.universal)!==void 0&&((d=n?.redirect)==null?void 0:d.universal)!==""&&((h=n?.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof globalThis?.Linking<"u"}),me(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n?.redirect)==null?void 0:s.universal:void 0}),me(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=I_(n,"topic")||"",s=decodeURIComponent(I_(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:an.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),me(this,"registerLinkModeListeners",async()=>{var n;if(pv()||Fa()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=globalThis?.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),me(this,"getTVFParams",(n,r,s)=>{var i,o,a;if(!((i=r.request)!=null&&i.method))return{};const c={correlationId:n,rpcMethods:[r.request.method],chainId:r.chainId};try{const u=this.extractTxHashesFromResult(r.request,s);c.txHashes=u,c.contractAddresses=this.isValidContractData(r.request.params)?[(a=(o=r.request.params)==null?void 0:o[0])==null?void 0:a.to]:[]}catch(u){this.client.logger.warn("Error getting TVF params",u)}return c}),me(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=n?.data||((r=n?.[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),me(this,"extractTxHashesFromResult",(n,r)=>{var s;try{if(!r)return[];const i=n.method,o=JZ[i];if(i==="sui_signTransaction")return[Tz(r.transactionBytes)];if(i==="near_signTransaction")return[O_(r)];if(i==="near_signTransactions")return r.map(c=>O_(c));if(i==="xrpl_signTransactionFor"||i==="xrpl_signTransaction")return[(s=r.tx_json)==null?void 0:s.hash];if(i==="polkadot_signTransaction")return[vV({transaction:n.params.transactionPayload,signature:r.signature})];if(i==="algo_signTxn")return Bo(r)?r.map(c=>B_(c)):[B_(r)];if(i==="cosmos_signDirect")return[Rz(r)];if(typeof r=="string")return[r];const a=r[o.key];if(Bo(a))return i==="solana_signAllTransactions"?a.map(c=>xz(c)):a;if(typeof a=="string")return[a]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Jn.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(lp)?this.client.auth.authKeys.get(lp):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===an.link_mode?ba:di});Nv(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:ji(r)})):ag(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(Ds.expired,async e=>{const{topic:n,id:r}=Kx(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,Ee("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,Ee("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(Xa.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(Xa.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!$n(e,!1)){const{message:n}=Ee("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=Ee("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(pa(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=Ee("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!$n(e,!1)){const{message:n}=Ee("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=Ee("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(pa(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=Ee("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=Ee("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if($n(e,!1)){const{message:n}=Ee("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=Ee("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!ZH(e)){const{message:n}=Ee("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=Ee("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(pa(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=Ee("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class dJ extends Hc{constructor(e,n){super(e,n,GZ,Rv),this.core=e,this.logger=n}}let hJ=class extends Hc{constructor(e,n){super(e,n,YZ,Rv),this.core=e,this.logger=n}};class fJ extends Hc{constructor(e,n){super(e,n,XZ,Rv,r=>r.id),this.core=e,this.logger=n}}class pJ extends Hc{constructor(e,n){super(e,n,nJ,ug,()=>lp),this.core=e,this.logger=n}}class gJ extends Hc{constructor(e,n){super(e,n,rJ,ug),this.core=e,this.logger=n}}class mJ extends Hc{constructor(e,n){super(e,n,sJ,ug,r=>r.id),this.core=e,this.logger=n}}var yJ=Object.defineProperty,wJ=(t,e,n)=>e in t?yJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dy=(t,e,n)=>wJ(t,typeof e!="symbol"?e+"":e,n);class bJ{constructor(e,n){this.core=e,this.logger=n,dy(this,"authKeys"),dy(this,"pairingTopics"),dy(this,"requests"),this.authKeys=new pJ(this.core,this.logger),this.pairingTopics=new gJ(this.core,this.logger),this.requests=new mJ(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var vJ=Object.defineProperty,EJ=(t,e,n)=>e in t?vJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vt=(t,e,n)=>EJ(t,typeof e!="symbol"?e+"":e,n);let _J=class hN extends i9{constructor(e){super(e),vt(this,"protocol",uN),vt(this,"version",lN),vt(this,"name",uy.name),vt(this,"metadata"),vt(this,"core"),vt(this,"logger"),vt(this,"events",new Xs.EventEmitter),vt(this,"engine"),vt(this,"session"),vt(this,"proposal"),vt(this,"pendingRequest"),vt(this,"auth"),vt(this,"signConfig"),vt(this,"on",(r,s)=>this.events.on(r,s)),vt(this,"once",(r,s)=>this.events.once(r,s)),vt(this,"off",(r,s)=>this.events.off(r,s)),vt(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),vt(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),vt(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),vt(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),vt(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),vt(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),vt(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),vt(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),vt(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),vt(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),vt(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),vt(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),vt(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),vt(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),vt(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),vt(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),vt(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),vt(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),vt(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=e?.name||uy.name,this.metadata=bq(e?.metadata),this.signConfig=e?.signConfig;const n=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:Hh(El({level:e?.logger||uy.logger}));this.core=e?.core||new KZ(e),this.logger=Dr(n,this.name),this.session=new hJ(this.core,this.logger),this.proposal=new dJ(this.core,this.logger),this.pendingRequest=new fJ(this.core,this.logger),this.engine=new lJ(this),this.auth=new bJ(this.core,this.logger)}static async init(e){const n=new hN(e);return await n.initialize(),n}get context(){return ps(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var Bf={exports:{}},ZC;function CJ(){return ZC||(ZC=1,function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof globalThis<"u"&&globalThis,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof i<"u"&&i||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function u(g){return g&&DataView.prototype.isPrototypeOf(g)}if(c.arrayBuffer)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(g){return g&&l.indexOf(Object.prototype.toString.call(g))>-1};function h(g){if(typeof g!="string"&&(g=String(g)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(g)||g==="")throw new TypeError('Invalid character in header field name: "'+g+'"');return g.toLowerCase()}function f(g){return typeof g!="string"&&(g=String(g)),g}function y(g){var w={next:function(){var _=g.shift();return{done:_===void 0,value:_}}};return c.iterable&&(w[Symbol.iterator]=function(){return w}),w}function m(g){this.map={},g instanceof m?g.forEach(function(w,_){this.append(_,w)},this):Array.isArray(g)?g.forEach(function(w){if(w.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+w.length);this.append(w[0],w[1])},this):g&&Object.getOwnPropertyNames(g).forEach(function(w){this.append(w,g[w])},this)}m.prototype.append=function(g,w){g=h(g),w=f(w);var _=this.map[g];this.map[g]=_?_+", "+w:w},m.prototype.delete=function(g){delete this.map[h(g)]},m.prototype.get=function(g){return g=h(g),this.has(g)?this.map[g]:null},m.prototype.has=function(g){return this.map.hasOwnProperty(h(g))},m.prototype.set=function(g,w){this.map[h(g)]=f(w)},m.prototype.forEach=function(g,w){for(var _ in this.map)this.map.hasOwnProperty(_)&&g.call(w,this.map[_],_,this)},m.prototype.keys=function(){var g=[];return this.forEach(function(w,_){g.push(_)}),y(g)},m.prototype.values=function(){var g=[];return this.forEach(function(w){g.push(w)}),y(g)},m.prototype.entries=function(){var g=[];return this.forEach(function(w,_){g.push([_,w])}),y(g)},c.iterable&&(m.prototype[Symbol.iterator]=m.prototype.entries);function v(g){if(!g._noBody){if(g.bodyUsed)return Promise.reject(new TypeError("Already read"));g.bodyUsed=!0}}function T(g){return new Promise(function(w,_){g.onload=function(){w(g.result)},g.onerror=function(){_(g.error)}})}function O(g){var w=new FileReader,_=T(w);return w.readAsArrayBuffer(g),_}function A(g){var w=new FileReader,_=T(w),C=/charset=([A-Za-z0-9_-]+)/.exec(g.type),L=C?C[1]:"utf-8";return w.readAsText(g,L),_}function M(g){for(var w=new Uint8Array(g),_=new Array(w.length),C=0;C<w.length;C++)_[C]=String.fromCharCode(w[C]);return _.join("")}function P(g){if(g.slice)return g.slice(0);var w=new Uint8Array(g.byteLength);return w.set(new Uint8Array(g)),w.buffer}function I(){return this.bodyUsed=!1,this._initBody=function(g){this.bodyUsed=this.bodyUsed,this._bodyInit=g,g?typeof g=="string"?this._bodyText=g:c.blob&&Blob.prototype.isPrototypeOf(g)?this._bodyBlob=g:c.formData&&FormData.prototype.isPrototypeOf(g)?this._bodyFormData=g:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(g)?this._bodyText=g.toString():c.arrayBuffer&&c.blob&&u(g)?(this._bodyArrayBuffer=P(g.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(g)||d(g))?this._bodyArrayBuffer=P(g):this._bodyText=g=Object.prototype.toString.call(g):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof g=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(g)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var g=v(this);if(g)return g;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var g=v(this);return g||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(O);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var g=v(this);if(g)return g;if(this._bodyBlob)return A(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(M(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}var F=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function W(g){var w=g.toUpperCase();return F.indexOf(w)>-1?w:g}function D(g,w){if(!(this instanceof D))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');w=w||{};var _=w.body;if(g instanceof D){if(g.bodyUsed)throw new TypeError("Already read");this.url=g.url,this.credentials=g.credentials,w.headers||(this.headers=new m(g.headers)),this.method=g.method,this.mode=g.mode,this.signal=g.signal,!_&&g._bodyInit!=null&&(_=g._bodyInit,g.bodyUsed=!0)}else this.url=String(g);if(this.credentials=w.credentials||this.credentials||"same-origin",(w.headers||!this.headers)&&(this.headers=new m(w.headers)),this.method=W(w.method||this.method||"GET"),this.mode=w.mode||this.mode||null,this.signal=w.signal||this.signal||function(){if("AbortController"in a){var z=new AbortController;return z.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&_)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(_),(this.method==="GET"||this.method==="HEAD")&&(w.cache==="no-store"||w.cache==="no-cache")){var C=/([?&])_=[^&]*/;if(C.test(this.url))this.url=this.url.replace(C,"$1_="+new Date().getTime());else{var L=/\?/;this.url+=(L.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}D.prototype.clone=function(){return new D(this,{body:this._bodyInit})};function k(g){var w=new FormData;return g.trim().split("&").forEach(function(_){if(_){var C=_.split("="),L=C.shift().replace(/\+/g," "),z=C.join("=").replace(/\+/g," ");w.append(decodeURIComponent(L),decodeURIComponent(z))}}),w}function B(g){var w=new m,_=g.replace(/\r?\n[\t ]+/g," ");return _.split("\r").map(function(C){return C.indexOf(`
`)===0?C.substr(1,C.length):C}).forEach(function(C){var L=C.split(":"),z=L.shift().trim();if(z){var q=L.join(":").trim();try{w.append(z,q)}catch(b){console.warn("Response "+b.message)}}}),w}I.call(D.prototype);function N(g,w){if(!(this instanceof N))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(w||(w={}),this.type="default",this.status=w.status===void 0?200:w.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=w.statusText===void 0?"":""+w.statusText,this.headers=new m(w.headers),this.url=w.url||"",this._initBody(g)}I.call(N.prototype),N.prototype.clone=function(){return new N(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},N.error=function(){var g=new N(null,{status:200,statusText:""});return g.ok=!1,g.status=0,g.type="error",g};var R=[301,302,303,307,308];N.redirect=function(g,w){if(R.indexOf(w)===-1)throw new RangeError("Invalid status code");return new N(null,{status:w,headers:{location:g}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(w,_){this.message=w,this.name=_;var C=Error(w);this.stack=C.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function p(g,w){return new Promise(function(_,C){var L=new D(g,w);if(L.signal&&L.signal.aborted)return C(new o.DOMException("Aborted","AbortError"));var z=new XMLHttpRequest;function q(){z.abort()}z.onload=function(){var j={statusText:z.statusText,headers:B(z.getAllResponseHeaders()||"")};L.url.indexOf("file://")===0&&(z.status<200||z.status>599)?j.status=200:j.status=z.status,j.url="responseURL"in z?z.responseURL:j.headers.get("X-Request-URL");var K="response"in z?z.response:z.responseText;setTimeout(function(){_(new N(K,j))},0)},z.onerror=function(){setTimeout(function(){C(new TypeError("Network request failed"))},0)},z.ontimeout=function(){setTimeout(function(){C(new TypeError("Network request timed out"))},0)},z.onabort=function(){setTimeout(function(){C(new o.DOMException("Aborted","AbortError"))},0)};function b(j){try{return j===""&&a.location.href?a.location.href:j}catch{return j}}if(z.open(L.method,b(L.url),!0),L.credentials==="include"?z.withCredentials=!0:L.credentials==="omit"&&(z.withCredentials=!1),"responseType"in z&&(c.blob?z.responseType="blob":c.arrayBuffer&&(z.responseType="arraybuffer")),w&&typeof w.headers=="object"&&!(w.headers instanceof m||a.Headers&&w.headers instanceof a.Headers)){var E=[];Object.getOwnPropertyNames(w.headers).forEach(function(j){E.push(h(j)),z.setRequestHeader(j,f(w.headers[j]))}),L.headers.forEach(function(j,K){E.indexOf(K)===-1&&z.setRequestHeader(K,j)})}else L.headers.forEach(function(j,K){z.setRequestHeader(K,j)});L.signal&&(L.signal.addEventListener("abort",q),z.onreadystatechange=function(){z.readyState===4&&L.signal.removeEventListener("abort",q)}),z.send(typeof L._bodyInit>"u"?null:L._bodyInit)})}return p.polyfill=!0,a.fetch||(a.fetch=p,a.Headers=m,a.Request=D,a.Response=N),o.Headers=m,o.Request=D,o.Response=N,o.fetch=p,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e}(Bf,Bf.exports)),Bf.exports}var AJ=CJ();const JC=Ii(AJ);var IJ=Object.defineProperty,SJ=Object.defineProperties,xJ=Object.getOwnPropertyDescriptors,XC=Object.getOwnPropertySymbols,TJ=Object.prototype.hasOwnProperty,NJ=Object.prototype.propertyIsEnumerable,QC=(t,e,n)=>e in t?IJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,eA=(t,e)=>{for(var n in e||(e={}))TJ.call(e,n)&&QC(t,n,e[n]);if(XC)for(var n of XC(e))NJ.call(e,n)&&QC(t,n,e[n]);return t},tA=(t,e)=>SJ(t,xJ(e));const RJ={Accept:"application/json","Content-Type":"application/json"},PJ="POST",nA={headers:RJ,method:PJ},rA=10;let Si=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new Xs.EventEmitter,this.isAvailable=!1,this.registering=!1,!bC(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=Fo(e),r=await(await JC(this.url,tA(eA({},nA),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!bC(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=Fo({id:1,jsonrpc:"2.0",method:"test",params:[]});await JC(e,tA(eA({},nA),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?Nc(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=og(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return qT(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>rA&&this.events.setMaxListeners(rA)}};const sA="error",kJ="wss://relay.walletconnect.org",OJ="wc",BJ="universal_provider",$f=`${OJ}@2:${BJ}:`,fN="https://rpc.walletconnect.org/v1/",Iu="generic",$J=`${fN}bundler`,ei={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function Pv(t){return t==null||typeof t!="object"&&typeof t!="function"}function pN(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function gN(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const DJ="[object RegExp]",mN="[object String]",yN="[object Number]",wN="[object Boolean]",bN="[object Arguments]",UJ="[object Symbol]",MJ="[object Date]",LJ="[object Map]",FJ="[object Set]",jJ="[object Array]",qJ="[object ArrayBuffer]",zJ="[object Object]",WJ="[object DataView]",HJ="[object Uint8Array]",VJ="[object Uint8ClampedArray]",KJ="[object Uint16Array]",GJ="[object Uint32Array]",YJ="[object Int8Array]",ZJ="[object Int16Array]",JJ="[object Int32Array]",XJ="[object Float32Array]",QJ="[object Float64Array]";function kv(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function eX(t,e){return Ou(t,void 0,t,new Map,e)}function Ou(t,e,n,r=new Map,s=void 0){const i=s?.(t,e,n,r);if(i!=null)return i;if(Pv(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Ou(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,Ou(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(Ou(a,void 0,n,r,s));return o}if(typeof Le<"u"&&Le.isBuffer(t))return t.subarray();if(kv(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Ou(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),Qa(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),Qa(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),Qa(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,Qa(o,t,n,r,s),o}if(typeof t=="object"&&tX(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),Qa(o,t,n,r,s),o}return t}function Qa(t,e,n=t,r,s){const i=[...Object.keys(e),...pN(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=Ou(e[a],a,n,r,s))}}function tX(t){switch(gN(t)){case bN:case jJ:case qJ:case WJ:case wN:case MJ:case XJ:case QJ:case YJ:case ZJ:case JJ:case LJ:case yN:case zJ:case DJ:case FJ:case mN:case UJ:case HJ:case VJ:case KJ:case GJ:return!0;default:return!1}}function nX(t,e){return eX(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case yN:case mN:case wN:{const o=new t.constructor(t?.valueOf());return Qa(o,t),o}case bN:{const o={};return Qa(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function iA(t){return nX(t)}function oA(t){return t!==null&&typeof t=="object"&&gN(t)==="[object Arguments]"}function aA(t){return typeof t=="object"&&t!==null}function rX(){}function sX(t){return kv(t)}function iX(t){if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const n=t[Symbol.toStringTag];return n==null||!Object.getOwnPropertyDescriptor(t,Symbol.toStringTag)?.writable?!1:t.toString()===`[object ${n}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function oX(t){if(Pv(t))return t;if(Array.isArray(t)||kv(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function aX(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=Rb(s,o,r,new Map)}return s}function Rb(t,e,n,r){if(Pv(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return oX(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...pN(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(oA(a)&&(a={...a}),oA(c)&&(c={...c}),typeof Le<"u"&&Le.isBuffer(a)&&(a=iA(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const l=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];l[f]=c[f]}c=l}else c=[];const u=n(c,a,o,t,e,r);u!=null?t[o]=u:Array.isArray(a)||aA(c)&&aA(a)?t[o]=Rb(c,a,n,r):c==null&&iX(a)?t[o]=Rb({},a,n,r):c==null&&sX(a)?t[o]=iA(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function cX(t,...e){return aX(t,...e,rX)}var uX=Object.defineProperty,lX=Object.defineProperties,dX=Object.getOwnPropertyDescriptors,cA=Object.getOwnPropertySymbols,hX=Object.prototype.hasOwnProperty,fX=Object.prototype.propertyIsEnumerable,uA=(t,e,n)=>e in t?uX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Df=(t,e)=>{for(var n in e||(e={}))hX.call(e,n)&&uA(t,n,e[n]);if(cA)for(var n of cA(e))fX.call(e,n)&&uA(t,n,e[n]);return t},pX=(t,e)=>lX(t,dX(e));function Ts(t,e,n){var r;const s=qu(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${fN}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function Vc(t){return t.includes(":")?t.split(":")[1]:t}function vN(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function gX(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function lA(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>{var r,s;return((r=n?.chains)==null?void 0:r.length)&&((s=n?.chains)==null?void 0:s.length)>0}))}function Uf(t={},e={}){const n=lA(dA(t)),r=lA(dA(e));return cX(n,r)}function dA(t){var e,n,r,s,i;const o={};if(!Zi(t))return o;for(const[a,c]of Object.entries(t)){const u=sg(a)?[a]:c.chains,l=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=ku(a);o[f]=pX(Df(Df({},o[f]),c),{chains:Yi(u,(e=o[f])==null?void 0:e.chains),methods:Yi(l,(n=o[f])==null?void 0:n.methods),events:Yi(d,(r=o[f])==null?void 0:r.events)}),(Zi(h)||Zi(((s=o[f])==null?void 0:s.rpcMap)||{}))&&(o[f].rpcMap=Df(Df({},h),(i=o[f])==null?void 0:i.rpcMap))}return o}function hA(t){return t.includes(":")?t.split(":")[2]:t}function fA(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=sg(n)?[n]:r.chains?r.chains:vN(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function hy(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const EN={},Pt=t=>EN[t],fy=(t,e)=>{EN[t]=e};var mX=Object.defineProperty,pA=Object.getOwnPropertySymbols,yX=Object.prototype.hasOwnProperty,wX=Object.prototype.propertyIsEnumerable,gA=(t,e,n)=>e in t?mX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mA=(t,e)=>{for(var n in e||(e={}))yX.call(e,n)&&gA(t,n,e[n]);if(pA)for(var n of pA(e))wX.call(e,n)&&gA(t,n,e[n]);return t};const yA="eip155",bX=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],vX=t=>t&&t.startsWith("0x")?BigInt(t).toString(10):t,py=t=>t&&t.startsWith("0x")?t:`0x${BigInt(t).toString(16)}`,wA=t=>Object.keys(t).filter(e=>bX.includes(e)).reduce((e,n)=>(e[n]=t[n],e),{}),EX=(t,e,n)=>{const{sessionProperties:r={},scopedProperties:s={}}=t,i={};if(!Zi(s)&&!Zi(r))return;const o=wA(r);for(const a of n){const c=vX(a);if(!c)continue;i[py(c)]=o;const u=s?.[`${yA}:${c}`];if(u){const l=u?.[`${yA}:${c}:${e}`];i[py(c)]=mA(mA({},i[py(c)]),wA(l||u))}}for(const[a,c]of Object.entries(i))Object.keys(c).length===0&&delete i[a];return Object.keys(i).length>0?i:void 0};var _X=Object.defineProperty,CX=(t,e,n)=>e in t?_X(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,uu=(t,e,n)=>CX(t,typeof e!="symbol"?e+"":e,n);class AX{constructor(e){uu(this,"name","polkadot"),uu(this,"client"),uu(this,"httpProviders"),uu(this,"events"),uu(this,"namespace"),uu(this,"chainId"),this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(ei.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Vc(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ts(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Qs(new Si(r,Pt("disableProviderPing")))}}var IX=Object.defineProperty,SX=Object.defineProperties,xX=Object.getOwnPropertyDescriptors,bA=Object.getOwnPropertySymbols,TX=Object.prototype.hasOwnProperty,NX=Object.prototype.propertyIsEnumerable,Pb=(t,e,n)=>e in t?IX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vA=(t,e)=>{for(var n in e||(e={}))TX.call(e,n)&&Pb(t,n,e[n]);if(bA)for(var n of bA(e))NX.call(e,n)&&Pb(t,n,e[n]);return t},EA=(t,e)=>SX(t,xX(e)),lu=(t,e,n)=>Pb(t,typeof e!="symbol"?e+"":e,n);class RX{constructor(e){lu(this,"name","eip155"),lu(this,"client"),lu(this,"chainId"),lu(this,"namespace"),lu(this,"httpProviders"),lu(this,"events"),this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(ei.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||Ts(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Qs(new Si(r,Pt("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(Vc(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[];if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),l=((o=u?.sessionProperties)==null?void 0:o.capabilities)||{},d=`${a}${c.join(",")}`,h=l?.[d];if(h)return h;let f;try{f=EX(u,a,c)}catch(m){console.warn("Failed to extract capabilities from session",m)}if(f)return f;const y=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:EA(vA({},u.sessionProperties||{}),{capabilities:EA(vA({},l||{}),{[d]:y})})})}catch(m){console.warn("Failed to update session with capabilities",m)}return y}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Aa("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${$J}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var PX=Object.defineProperty,kX=(t,e,n)=>e in t?PX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,du=(t,e,n)=>kX(t,typeof e!="symbol"?e+"":e,n);class OX{constructor(e){du(this,"name","solana"),du(this,"client"),du(this,"httpProviders"),du(this,"events"),du(this,"namespace"),du(this,"chainId"),this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(ei.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Vc(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ts(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Qs(new Si(r,Pt("disableProviderPing")))}}var BX=Object.defineProperty,$X=(t,e,n)=>e in t?BX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hu=(t,e,n)=>$X(t,typeof e!="symbol"?e+"":e,n);class DX{constructor(e){hu(this,"name","cosmos"),hu(this,"client"),hu(this,"httpProviders"),hu(this,"events"),hu(this,"namespace"),hu(this,"chainId"),this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(ei.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Vc(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ts(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Qs(new Si(r,Pt("disableProviderPing")))}}var UX=Object.defineProperty,MX=(t,e,n)=>e in t?UX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,fu=(t,e,n)=>MX(t,typeof e!="symbol"?e+"":e,n);class LX{constructor(e){fu(this,"name","algorand"),fu(this,"client"),fu(this,"httpProviders"),fu(this,"events"),fu(this,"namespace"),fu(this,"chainId"),this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||Ts(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(ei.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ts(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Qs(new Si(r,Pt("disableProviderPing")))}}var FX=Object.defineProperty,jX=(t,e,n)=>e in t?FX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,pu=(t,e,n)=>jX(t,typeof e!="symbol"?e+"":e,n);class qX{constructor(e){pu(this,"name","cip34"),pu(this,"client"),pu(this,"httpProviders"),pu(this,"events"),pu(this,"namespace"),pu(this,"chainId"),this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(ei.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=Vc(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Qs(new Si(r,Pt("disableProviderPing")))}}var zX=Object.defineProperty,WX=(t,e,n)=>e in t?zX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gu=(t,e,n)=>WX(t,typeof e!="symbol"?e+"":e,n);class HX{constructor(e){gu(this,"name","elrond"),gu(this,"client"),gu(this,"httpProviders"),gu(this,"events"),gu(this,"namespace"),gu(this,"chainId"),this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(ei.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Vc(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ts(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Qs(new Si(r,Pt("disableProviderPing")))}}var VX=Object.defineProperty,KX=(t,e,n)=>e in t?VX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mu=(t,e,n)=>KX(t,typeof e!="symbol"?e+"":e,n);class GX{constructor(e){mu(this,"name","multiversx"),mu(this,"client"),mu(this,"httpProviders"),mu(this,"events"),mu(this,"namespace"),mu(this,"chainId"),this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(ei.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Vc(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ts(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Qs(new Si(r,Pt("disableProviderPing")))}}var YX=Object.defineProperty,ZX=(t,e,n)=>e in t?YX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yu=(t,e,n)=>ZX(t,typeof e!="symbol"?e+"":e,n);class JX{constructor(e){yu(this,"name","near"),yu(this,"client"),yu(this,"httpProviders"),yu(this,"events"),yu(this,"namespace"),yu(this,"chainId"),this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Ts(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(ei.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ts(e,this.namespace);return typeof r>"u"?void 0:new Qs(new Si(r,Pt("disableProviderPing")))}}var XX=Object.defineProperty,QX=(t,e,n)=>e in t?XX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wu=(t,e,n)=>QX(t,typeof e!="symbol"?e+"":e,n);class eQ{constructor(e){wu(this,"name","tezos"),wu(this,"client"),wu(this,"httpProviders"),wu(this,"events"),wu(this,"namespace"),wu(this,"chainId"),this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Ts(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(ei.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ts(e,this.namespace);return typeof r>"u"?void 0:new Qs(new Si(r))}}var tQ=Object.defineProperty,nQ=(t,e,n)=>e in t?tQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bu=(t,e,n)=>nQ(t,typeof e!="symbol"?e+"":e,n);class rQ{constructor(e){bu(this,"name",Iu),bu(this,"client"),bu(this,"httpProviders"),bu(this,"events"),bu(this,"namespace"),bu(this,"chainId"),this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(ei.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=qu(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ts(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Qs(new Si(r,Pt("disableProviderPing")))}}var sQ=Object.defineProperty,iQ=Object.defineProperties,oQ=Object.getOwnPropertyDescriptors,_A=Object.getOwnPropertySymbols,aQ=Object.prototype.hasOwnProperty,cQ=Object.prototype.propertyIsEnumerable,kb=(t,e,n)=>e in t?sQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mf=(t,e)=>{for(var n in e||(e={}))aQ.call(e,n)&&kb(t,n,e[n]);if(_A)for(var n of _A(e))cQ.call(e,n)&&kb(t,n,e[n]);return t},gy=(t,e)=>iQ(t,oQ(e)),Os=(t,e,n)=>kb(t,typeof e!="symbol"?e+"":e,n);class Ov{constructor(e){Os(this,"client"),Os(this,"namespaces"),Os(this,"optionalNamespaces"),Os(this,"sessionProperties"),Os(this,"scopedProperties"),Os(this,"events",new tv),Os(this,"rpcProviders",{}),Os(this,"session"),Os(this,"providerOpts"),Os(this,"logger"),Os(this,"uri"),Os(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:Hh(El({level:e?.logger||sA})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const n=new Ov(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Mf({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,ig(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:dn("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=fA(this.session.namespaces);this.namespaces=Uf(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=fA(s.namespaces);return this.namespaces=Uf(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===Iu?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(Bo(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await _J.init({core:this.providerOpts.core,logger:this.providerOpts.logger||sA,relayUrl:this.providerOpts.relayUrl||kJ,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>ku(n)))];fy("client",this.client),fy("events",this.events),fy("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=gX(n,this.session);if(r?.length===0)return;const s=vN(r),i=Uf(this.namespaces,this.optionalNamespaces),o=gy(Mf({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new RX({namespace:o});break;case"algorand":this.rpcProviders[n]=new LX({namespace:o});break;case"solana":this.rpcProviders[n]=new OX({namespace:o});break;case"cosmos":this.rpcProviders[n]=new DX({namespace:o});break;case"polkadot":this.rpcProviders[n]=new AX({namespace:o});break;case"cip34":this.rpcProviders[n]=new qX({namespace:o});break;case"elrond":this.rpcProviders[n]=new HX({namespace:o});break;case"multiversx":this.rpcProviders[n]=new GX({namespace:o});break;case"near":this.rpcProviders[n]=new JX({namespace:o});break;case"tezos":this.rpcProviders[n]=new eQ({namespace:o});break;default:this.rpcProviders[Iu]?this.rpcProviders[Iu].updateNamespace(o):this.rpcProviders[Iu]=new rQ({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&Bo(o)&&this.events.emit("accountsChanged",o.map(hA))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=ku(o),u=hy(o)!==hy(a)?`${c}:${hy(a)}`:o;this.onChainChanged(u)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=gy(Mf({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",gy(Mf({},dn("USER_DISCONNECTED")),{data:e.topic})))}),this.on(ei.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Iu]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=Uf(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>ku(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=ku(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(hA);if(!Bo(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${$f}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${$f}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${$f}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith($f)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}}let Va=null;const os={getSIWX(){return pe.state.siwx},async initializeIfEnabled(t=Y.getActiveCaipAddress()){const e=pe.state.siwx;if(!(e&&t))return;const[n,r,s]=t.split(":");if(Y.checkIfSupportedNetwork(n,`${n}:${r}`))try{if(Va&&await Va,(await e.getSessions(`${n}:${r}`,s)).length)return;await Et.open({view:"SIWXSignMessage"})}catch(i){console.error("SIWXUtil:initializeIfEnabled",i),Nt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await Ae._getClient()?.disconnect().catch(console.error),Fe.reset("Connect"),vn.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=pe.state.siwx,e=ke.getPlainAddress(Y.getActiveCaipAddress()),n=Y.getActiveCaipNetwork(),r=Ae._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();ve.getConnectorId(n.chainNamespace)===ne.CONNECTOR_ID.AUTH&&Fe.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),Y.setLastConnectedSIWECaipNetwork(n),Et.close(),Nt.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!Et.state.open||Fe.state.view==="ApproveTransaction")&&await Et.open({view:"SIWXSignMessage"}),vn.showError("Error signing message"),Nt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){try{const t=this.getSIWX();if(t?.getRequired?.()){const n=Y.getLastConnectedSIWECaipNetwork();if(n){const r=await t?.getSessions(n?.caipNetworkId,ke.getPlainAddress(Y.getActiveCaipAddress())||"");r&&r.length>0?await Y.switchActiveNetwork(n):await Ae.disconnect()}else await Ae.disconnect()}else Et.close();Et.close(),Nt.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(t){console.error("SIWXUtil:cancelSignMessage",t)}},async getAllSessions(){const t=this.getSIWX(),e=Y.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await t?.getSessions(r.caipNetworkId,ke.getPlainAddress(Y.getActiveCaipAddress())||"");s&&n.push(...s)})),n},async getSessions(t){const e=pe.state.siwx;let n=t?.address;if(!n){const s=Y.getActiveCaipAddress();n=ke.getPlainAddress(s)}let r=t?.caipNetworkId;return r||(r=Y.getActiveCaipNetwork()?.caipNetworkId),e&&n&&r?e.getSessions(r,n):[]},async isSIWXCloseDisabled(){const t=this.getSIWX();if(t){const e=Fe.state.view==="ApproveTransaction",n=Fe.state.view==="SIWXSignMessage";if(e||n)return t.getRequired?.()&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:n,preferredAccountType:r,chainNamespace:s}){const i=os.getSIWX();if(!i||!s.includes(ne.CHAIN.EVM)){const l=await t.connect({chainId:e,socialUri:n,preferredAccountType:r});return{address:l.address,chainId:l.chainId,accounts:l.accounts}}const o=`${s}:${e}`,a=await i.createMessage({chainId:o,accountAddress:"<<AccountAddress>>"}),c={accountAddress:a.accountAddress,chainId:a.chainId,domain:a.domain,uri:a.uri,version:a.version,nonce:a.nonce,notBefore:a.notBefore,statement:a.statement,resources:a.resources,requestId:a.requestId,issuedAt:a.issuedAt,expirationTime:a.expirationTime,serializedMessage:a.toString()},u=await t.connect({chainId:e,socialUri:n,siwxMessage:c,preferredAccountType:r});return c.accountAddress=u.address,c.serializedMessage=u.message||"",u.signature&&u.message&&await os.addEmbeddedWalletSession(c,u.message,u.signature),{address:u.address,chainId:u.chainId,accounts:u.accounts}},async addEmbeddedWalletSession(t,e,n){if(Va)return Va;const r=os.getSIWX();return r?(Va=r.addSession({data:t,message:e,signature:n}).finally(()=>{Va=null}),Va):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){const r=os.getSIWX(),s=new Set(e.map(a=>a.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:Y.getActiveCaipNetwork()?.caipNetworkId||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(a=>a!==i.chainId)]});if(vn.showLoading("Authenticating...",{autoClose:!1}),Me.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:o.session.peer.metadata.icons?.[0],type:"WALLET_CONNECT"},Array.from(s)[0]),o?.auths?.length){const a=o.auths.map(c=>{const u=t.client.formatAuthMessage({request:c.p,iss:c.p.iss});return{data:{...c.p,accountAddress:c.p.iss.split(":").slice(-1).join(""),chainId:c.p.iss.split(":").slice(2,4).join(":"),uri:c.p.aud,version:c.p.version||i.version,expirationTime:c.p.exp,issuedAt:c.p.iat,notBefore:c.p.nbf},message:u,signature:c.s.s,cacao:c}});try{await r.setSessions(a),Nt.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:os.getSIWXEventProperties()})}catch(c){throw console.error("SIWX:universalProviderAuth - failed to set sessions",c),Nt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:os.getSIWXEventProperties()}),await t.disconnect().catch(console.error),c}finally{vn.hide()}}return!0},getSIWXEventProperties(){const t=Y.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:Y.state.activeCaipNetwork?.caipNetworkId||"",isSmartAccount:gr(t)===An.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},Rue={isUnsupportedChainView(){return Fe.state.view==="UnsupportedChain"||Fe.state.view==="SwitchNetwork"&&Fe.state.history.includes("UnsupportedChain")},async safeClose(){if(this.isUnsupportedChainView()){Et.shake();return}if(await os.isSIWXCloseDisabled()){Et.shake();return}Et.close()}},uQ={},lQ=(t,e)=>{const n=Br.useRef(void 0);Br.useEffect(()=>{n.current=d8(t,e)}),Br.useDebugValue(n.current)},dQ=lQ,hQ=new WeakMap;function Pue(t,e){const r=Br.useMemo(()=>t&&new WeakMap,[t]),s=Br.useRef(void 0);let i=!0;const o=Br.useSyncExternalStore(Br.useCallback(c=>{const u=In(t,c);return c(),u},[t,void 0]),()=>{const c=vc(t);try{if(!i&&s.current&&!aS(s.current,c,r,new WeakMap))return s.current}catch{}return c},()=>vc(t));i=!1,Br.useLayoutEffect(()=>{s.current=o}),(uQ?"production":void 0)!=="production"&&dQ(o,r);const a=Br.useMemo(()=>new WeakMap,[]);return oS(o,r,a,hQ)}const cn={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:ne.CHAIN.EVM,ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},Zn={ConnectorExplorerIds:{[ne.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[ne.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[ne.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[ne.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[ne.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[cn.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[cn.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[cn.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[cn.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[cn.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[cn.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[cn.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[cn.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[cn.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[cn.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[cn.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[ne.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ne.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ne.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[ne.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[ne.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[ne.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[ne.CONNECTOR_ID.INJECTED]:"Browser Wallet",[ne.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[ne.CONNECTOR_ID.COINBASE]:"Coinbase",[ne.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[ne.CONNECTOR_ID.LEDGER]:"Ledger",[ne.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[ne.CONNECTOR_ID.INJECTED]:"INJECTED",[ne.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[ne.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[ne.CONNECTOR_ID.AUTH]:"AUTH",[cn.CONNECTOR_TYPE_AUTH]:"AUTH"}},Dn={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${cn.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return t?.toLowerCase()===e?.toLowerCase()},getActiveNamespaceConnectedToAuth(){const t=Y.state.activeChain;return ne.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>ve.getConnectorId(e)===ne.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:n}){let r=0;return new Promise(s=>{async function i(){return r+=1,await t()?s(!0):r>=n?s(!1):(setTimeout(i,e),null)}i()})}},fQ=new AbortController,hn={EmbeddedWalletAbortController:fQ,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"ORIGIN_NOT_ALLOWED"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found. Please make sure it is included in 'networks' array in createAppKit function."},ORIGIN_NOT_ALLOWED:{shortMessage:"Origin Not Allowed",longMessage:()=>`🔧 Origin ${pQ()?window.origin:"unknown"} not found on allow list. Please update your project configurations on dashboard.reown.com.`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Unverified Domain",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at dashboard.reown.com."},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider. Please check your time settings and connect again."},INVALID_PROJECT_ID:{shortMessage:"Invalid Project ID",longMessage:"The project ID is invalid. Visit dashboard.reown.com to get a new one."},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured. Please update your project configurations on dashboard.reown.com."},SERVER_ERROR_APP_CONFIGURATION:{shortMessage:"Server Error",longMessage:t=>`Failed to get App Configuration ${t||""}`},RATE_LIMITED_APP_CONFIGURATION:{shortMessage:"Rate Limited",longMessage:"Rate limited when trying to get the App Configuration"}}};function pQ(){return typeof window<"u"}const gQ={createLogger(t,e="error"){const n=El({level:e}),{logger:r}=rv({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},mQ="rpc.walletconnect.org";function CA(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const my=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],zi={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===mQ}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:ne.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${ne.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){const r=t.rpcUrls?.default?.http?.[0];return my.includes(e)?CA(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=t.rpcUrls?.default?.http?.[0],a=this.getDefaultRpcUrl(t,i,n),c=t?.rpcUrls?.chainDefault?.http?.[0]||o,u=r?.[i]?.map(h=>h.url)||[],l=[...u,...a?[a]:[]],d=[...u];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:Zn.NetworkImageIds[t.id],imageUrl:e?.[t.id]},rpcUrls:{...t.rpcUrls,default:{http:l},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>zi.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){const r=[];return n?.forEach(s=>{r.push(bf(s.url,s.config))}),my.includes(t.caipNetworkId)&&r.push(bf(CA(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),t?.rpcUrls?.default?.http?.forEach(s=>{r.push(bf(s))}),y2(r)},extendWagmiTransports(t,e,n){if(my.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return y2([n,bf(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:ne.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){const e=ye.getActiveCaipNetworkId(),n=Y.getAllRequestedCaipNetworks(),r=Array.from(Y.state.chains?.keys()||[]),s=e?.split(":")[0],i=s?r.includes(s):!1,o=n?.find(c=>c.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||n?.[0]}},Kp={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Qr=Dt({providers:{...Kp},providerIds:{...Kp}}),Vt={state:Qr,subscribeKey(t,e){return Nn(Qr,t,e)},subscribe(t){return In(Qr,()=>{t(Qr)})},subscribeProviders(t){return In(Qr.providers,()=>t(Qr.providers))},setProvider(t,e){t&&e&&(Qr.providers[t]=Oa(e))},getProvider(t){if(t)return Qr.providers[t]},setProviderId(t,e){e&&(Qr.providerIds[t]=e)},getProviderId(t){if(t)return Qr.providerIds[t]},reset(){Qr.providers={...Kp},Qr.providerIds={...Kp}},resetChain(t){Qr.providers[t]=void 0,Qr.providerIds[t]=void 0}},AA={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},ar={set(t,e){Cs.isClient&&localStorage.setItem(`${Ue.STORAGE_KEY}${t}`,e)},get(t){return Cs.isClient?localStorage.getItem(`${Ue.STORAGE_KEY}${t}`):null},delete(t,e){Cs.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Ue.STORAGE_KEY}${t}`))}},Lf=30*1e3,Cs={checkIfAllowedToTriggerEmail(){const t=ar.get(Ue.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<Lf){const n=Math.ceil((Lf-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=ar.get(Ue.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<Lf)return Math.ceil((Lf-e)/1e3)}return 0},checkIfRequestExists(t){return An.NOT_SAFE_RPC_METHODS.includes(t.method)||An.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&(t?.match(AA.transactionHash)||t?.match(AA.signedMessage))?Ue.RPC_RESPONSE_TYPE_TX:Ue.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return An.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var Rt;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Rt||(Rt={}));var Ob;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Ob||(Ob={}));const Pe=Rt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),va=t=>{switch(typeof t){case"undefined":return Pe.undefined;case"string":return Pe.string;case"number":return isNaN(t)?Pe.nan:Pe.number;case"boolean":return Pe.boolean;case"function":return Pe.function;case"bigint":return Pe.bigint;case"symbol":return Pe.symbol;case"object":return Array.isArray(t)?Pe.array:t===null?Pe.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Pe.promise:typeof Map<"u"&&t instanceof Map?Pe.map:typeof Set<"u"&&t instanceof Set?Pe.set:typeof Date<"u"&&t instanceof Date?Pe.date:Pe.object;default:return Pe.unknown}},we=Rt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),yQ=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class pi extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(n(o))):a[u]=a[u]||{_errors:[]},a=a[u],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,Rt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}pi.create=t=>new pi(t);const oh=(t,e)=>{let n;switch(t.code){case we.invalid_type:t.received===Pe.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case we.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Rt.jsonStringifyReplacer)}`;break;case we.unrecognized_keys:n=`Unrecognized key(s) in object: ${Rt.joinValues(t.keys,", ")}`;break;case we.invalid_union:n="Invalid input";break;case we.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Rt.joinValues(t.options)}`;break;case we.invalid_enum_value:n=`Invalid enum value. Expected ${Rt.joinValues(t.options)}, received '${t.received}'`;break;case we.invalid_arguments:n="Invalid function arguments";break;case we.invalid_return_type:n="Invalid function return type";break;case we.invalid_date:n="Invalid date";break;case we.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Rt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case we.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case we.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case we.custom:n="Invalid input";break;case we.invalid_intersection_types:n="Intersection results could not be merged";break;case we.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case we.not_finite:n="Number must be finite";break;default:n=e.defaultError,Rt.assertNever(t)}return{message:n}};let _N=oh;function wQ(t){_N=t}function Gp(){return _N}const Yp=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(u=>!!u).slice().reverse();for(const u of c)a=u(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},bQ=[];function De(t,e){const n=Yp({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Gp(),oh].filter(r=>!!r)});t.common.issues.push(n)}class $r{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return it;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return $r.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return it;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const it=Object.freeze({status:"aborted"}),CN=t=>({status:"dirty",value:t}),Wr=t=>({status:"valid",value:t}),Bb=t=>t.status==="aborted",$b=t=>t.status==="dirty",ah=t=>t.status==="valid",Zp=t=>typeof Promise<"u"&&t instanceof Promise;var Ge;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Ge||(Ge={}));class Qi{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const IA=(t,e)=>{if(ah(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new pi(t.common.issues);return this._error=n,this._error}}};function ut(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class yt{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return va(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:va(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new $r,ctx:{common:e.parent.common,data:e.data,parsedType:va(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Zp(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n?.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:va(e)},i=this._parseSync({data:e,path:s.path,parent:s});return IA(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:va(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(Zp(s)?s:Promise.resolve(s));return IA(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:we.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Ci({schema:this,typeName:Qe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return $o.create(this,this._def)}nullable(){return Bc.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return gi.create(this,this._def)}promise(){return ol.create(this,this._def)}or(e){return dh.create([this,e],this._def)}and(e){return hh.create(this,e,this._def)}transform(e){return new Ci({...ut(this._def),schema:this,typeName:Qe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new yh({...ut(this._def),innerType:this,defaultValue:n,typeName:Qe.ZodDefault})}brand(){return new IN({typeName:Qe.ZodBranded,type:this,...ut(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new e0({...ut(this._def),innerType:this,catchValue:n,typeName:Qe.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return ef.create(this,e)}readonly(){return n0.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const vQ=/^c[^\s-]{8,}$/i,EQ=/^[a-z][a-z0-9]*$/,_Q=/^[0-9A-HJKMNP-TV-Z]{26}$/,CQ=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,AQ=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,IQ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let yy;const SQ=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,xQ=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,TQ=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function NQ(t,e){return!!((e==="v4"||!e)&&SQ.test(t)||(e==="v6"||!e)&&xQ.test(t))}class hi extends yt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Pe.string){const i=this._getOrReturnCtx(e);return De(i,{code:we.invalid_type,expected:Pe.string,received:i.parsedType}),it}const r=new $r;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),De(s,{code:we.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),De(s,{code:we.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?De(s,{code:we.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&De(s,{code:we.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")AQ.test(e.data)||(s=this._getOrReturnCtx(e,s),De(s,{validation:"email",code:we.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")yy||(yy=new RegExp(IQ,"u")),yy.test(e.data)||(s=this._getOrReturnCtx(e,s),De(s,{validation:"emoji",code:we.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")CQ.test(e.data)||(s=this._getOrReturnCtx(e,s),De(s,{validation:"uuid",code:we.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")vQ.test(e.data)||(s=this._getOrReturnCtx(e,s),De(s,{validation:"cuid",code:we.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")EQ.test(e.data)||(s=this._getOrReturnCtx(e,s),De(s,{validation:"cuid2",code:we.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")_Q.test(e.data)||(s=this._getOrReturnCtx(e,s),De(s,{validation:"ulid",code:we.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),De(s,{validation:"url",code:we.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),De(s,{validation:"regex",code:we.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),De(s,{code:we.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),De(s,{code:we.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),De(s,{code:we.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?TQ(i).test(e.data)||(s=this._getOrReturnCtx(e,s),De(s,{code:we.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?NQ(e.data,i.version)||(s=this._getOrReturnCtx(e,s),De(s,{validation:"ip",code:we.invalid_string,message:i.message}),r.dirty()):Rt.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:we.invalid_string,...Ge.errToObj(r)})}_addCheck(e){return new hi({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ge.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ge.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ge.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ge.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ge.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ge.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ge.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ge.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(n=e?.offset)!==null&&n!==void 0?n:!1,...Ge.errToObj(e?.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Ge.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...Ge.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Ge.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Ge.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Ge.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Ge.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Ge.errToObj(n)})}nonempty(e){return this.min(1,Ge.errToObj(e))}trim(){return new hi({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new hi({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new hi({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}hi.create=t=>{var e;return new hi({checks:[],typeName:Qe.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...ut(t)})};function RQ(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class Da extends yt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Pe.number){const i=this._getOrReturnCtx(e);return De(i,{code:we.invalid_type,expected:Pe.number,received:i.parsedType}),it}let r;const s=new $r;for(const i of this._def.checks)i.kind==="int"?Rt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),De(r,{code:we.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),De(r,{code:we.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),De(r,{code:we.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?RQ(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),De(r,{code:we.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),De(r,{code:we.not_finite,message:i.message}),s.dirty()):Rt.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ge.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ge.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ge.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ge.toString(n))}setLimit(e,n,r,s){return new Da({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ge.toString(s)}]})}_addCheck(e){return new Da({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ge.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ge.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ge.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ge.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ge.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ge.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Ge.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ge.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ge.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Rt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Da.create=t=>new Da({checks:[],typeName:Qe.ZodNumber,coerce:t?.coerce||!1,...ut(t)});class Ua extends yt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Pe.bigint){const i=this._getOrReturnCtx(e);return De(i,{code:we.invalid_type,expected:Pe.bigint,received:i.parsedType}),it}let r;const s=new $r;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),De(r,{code:we.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),De(r,{code:we.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),De(r,{code:we.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Rt.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ge.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ge.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ge.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ge.toString(n))}setLimit(e,n,r,s){return new Ua({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ge.toString(s)}]})}_addCheck(e){return new Ua({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ge.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ge.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ge.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ge.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ge.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ua.create=t=>{var e;return new Ua({checks:[],typeName:Qe.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...ut(t)})};class ch extends yt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Pe.boolean){const r=this._getOrReturnCtx(e);return De(r,{code:we.invalid_type,expected:Pe.boolean,received:r.parsedType}),it}return Wr(e.data)}}ch.create=t=>new ch({typeName:Qe.ZodBoolean,coerce:t?.coerce||!1,...ut(t)});class kc extends yt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Pe.date){const i=this._getOrReturnCtx(e);return De(i,{code:we.invalid_type,expected:Pe.date,received:i.parsedType}),it}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return De(i,{code:we.invalid_date}),it}const r=new $r;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),De(s,{code:we.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),De(s,{code:we.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Rt.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new kc({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Ge.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Ge.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}kc.create=t=>new kc({checks:[],coerce:t?.coerce||!1,typeName:Qe.ZodDate,...ut(t)});class Jp extends yt{_parse(e){if(this._getType(e)!==Pe.symbol){const r=this._getOrReturnCtx(e);return De(r,{code:we.invalid_type,expected:Pe.symbol,received:r.parsedType}),it}return Wr(e.data)}}Jp.create=t=>new Jp({typeName:Qe.ZodSymbol,...ut(t)});class uh extends yt{_parse(e){if(this._getType(e)!==Pe.undefined){const r=this._getOrReturnCtx(e);return De(r,{code:we.invalid_type,expected:Pe.undefined,received:r.parsedType}),it}return Wr(e.data)}}uh.create=t=>new uh({typeName:Qe.ZodUndefined,...ut(t)});class lh extends yt{_parse(e){if(this._getType(e)!==Pe.null){const r=this._getOrReturnCtx(e);return De(r,{code:we.invalid_type,expected:Pe.null,received:r.parsedType}),it}return Wr(e.data)}}lh.create=t=>new lh({typeName:Qe.ZodNull,...ut(t)});class il extends yt{constructor(){super(...arguments),this._any=!0}_parse(e){return Wr(e.data)}}il.create=t=>new il({typeName:Qe.ZodAny,...ut(t)});class yc extends yt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Wr(e.data)}}yc.create=t=>new yc({typeName:Qe.ZodUnknown,...ut(t)});class zo extends yt{_parse(e){const n=this._getOrReturnCtx(e);return De(n,{code:we.invalid_type,expected:Pe.never,received:n.parsedType}),it}}zo.create=t=>new zo({typeName:Qe.ZodNever,...ut(t)});class Xp extends yt{_parse(e){if(this._getType(e)!==Pe.undefined){const r=this._getOrReturnCtx(e);return De(r,{code:we.invalid_type,expected:Pe.void,received:r.parsedType}),it}return Wr(e.data)}}Xp.create=t=>new Xp({typeName:Qe.ZodVoid,...ut(t)});class gi extends yt{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==Pe.array)return De(n,{code:we.invalid_type,expected:Pe.array,received:n.parsedType}),it;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(De(n,{code:o?we.too_big:we.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(De(n,{code:we.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(De(n,{code:we.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new Qi(n,o,n.path,a)))).then(o=>$r.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new Qi(n,o,n.path,a)));return $r.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new gi({...this._def,minLength:{value:e,message:Ge.toString(n)}})}max(e,n){return new gi({...this._def,maxLength:{value:e,message:Ge.toString(n)}})}length(e,n){return new gi({...this._def,exactLength:{value:e,message:Ge.toString(n)}})}nonempty(e){return this.min(1,e)}}gi.create=(t,e)=>new gi({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Qe.ZodArray,...ut(e)});function Su(t){if(t instanceof pn){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=$o.create(Su(r))}return new pn({...t._def,shape:()=>e})}else return t instanceof gi?new gi({...t._def,type:Su(t.element)}):t instanceof $o?$o.create(Su(t.unwrap())):t instanceof Bc?Bc.create(Su(t.unwrap())):t instanceof eo?eo.create(t.items.map(e=>Su(e))):t}class pn extends yt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Rt.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Pe.object){const u=this._getOrReturnCtx(e);return De(u,{code:we.invalid_type,expected:Pe.object,received:u.parsedType}),it}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof zo&&this._def.unknownKeys==="strip"))for(const u in s.data)o.includes(u)||a.push(u);const c=[];for(const u of o){const l=i[u],d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Qi(s,d,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof zo){const u=this._def.unknownKeys;if(u==="passthrough")for(const l of a)c.push({key:{status:"valid",value:l},value:{status:"valid",value:s.data[l]}});else if(u==="strict")a.length>0&&(De(s,{code:we.unrecognized_keys,keys:a}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const l of a){const d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Qi(s,d,s.path,l)),alwaysSet:l in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const l of c){const d=await l.key;u.push({key:d,value:await l.value,alwaysSet:l.alwaysSet})}return u}).then(u=>$r.mergeObjectSync(r,u)):$r.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return Ge.errToObj,new pn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=Ge.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new pn({...this._def,unknownKeys:"strip"})}passthrough(){return new pn({...this._def,unknownKeys:"passthrough"})}extend(e){return new pn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new pn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Qe.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new pn({...this._def,catchall:e})}pick(e){const n={};return Rt.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new pn({...this._def,shape:()=>n})}omit(e){const n={};return Rt.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new pn({...this._def,shape:()=>n})}deepPartial(){return Su(this)}partial(e){const n={};return Rt.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new pn({...this._def,shape:()=>n})}required(e){const n={};return Rt.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof $o;)i=i._def.innerType;n[r]=i}}),new pn({...this._def,shape:()=>n})}keyof(){return AN(Rt.objectKeys(this.shape))}}pn.create=(t,e)=>new pn({shape:()=>t,unknownKeys:"strip",catchall:zo.create(),typeName:Qe.ZodObject,...ut(e)});pn.strictCreate=(t,e)=>new pn({shape:()=>t,unknownKeys:"strict",catchall:zo.create(),typeName:Qe.ZodObject,...ut(e)});pn.lazycreate=(t,e)=>new pn({shape:t,unknownKeys:"strip",catchall:zo.create(),typeName:Qe.ZodObject,...ut(e)});class dh extends yt{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new pi(a.ctx.common.issues));return De(n,{code:we.invalid_union,unionErrors:o}),it}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const u={...n,common:{...n.common,issues:[]},parent:null},l=c._parseSync({data:n.data,path:n.path,parent:u});if(l.status==="valid")return l;l.status==="dirty"&&!i&&(i={result:l,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new pi(c));return De(n,{code:we.invalid_union,unionErrors:a}),it}}get options(){return this._def.options}}dh.create=(t,e)=>new dh({options:t,typeName:Qe.ZodUnion,...ut(e)});const dp=t=>t instanceof ph?dp(t.schema):t instanceof Ci?dp(t.innerType()):t instanceof gh?[t.value]:t instanceof Ma?t.options:t instanceof mh?Object.keys(t.enum):t instanceof yh?dp(t._def.innerType):t instanceof uh?[void 0]:t instanceof lh?[null]:null;class lg extends yt{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Pe.object)return De(n,{code:we.invalid_type,expected:Pe.object,received:n.parsedType}),it;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(De(n,{code:we.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),it)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=dp(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new lg({typeName:Qe.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...ut(r)})}}function Db(t,e){const n=va(t),r=va(e);if(t===e)return{valid:!0,data:t};if(n===Pe.object&&r===Pe.object){const s=Rt.objectKeys(e),i=Rt.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=Db(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===Pe.array&&r===Pe.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=Db(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===Pe.date&&r===Pe.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class hh extends yt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(Bb(i)||Bb(o))return it;const a=Db(i.value,o.value);return a.valid?(($b(i)||$b(o))&&n.dirty(),{status:n.value,value:a.data}):(De(r,{code:we.invalid_intersection_types}),it)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}hh.create=(t,e,n)=>new hh({left:t,right:e,typeName:Qe.ZodIntersection,...ut(n)});class eo extends yt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Pe.array)return De(r,{code:we.invalid_type,expected:Pe.array,received:r.parsedType}),it;if(r.data.length<this._def.items.length)return De(r,{code:we.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),it;!this._def.rest&&r.data.length>this._def.items.length&&(De(r,{code:we.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Qi(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>$r.mergeArray(n,o)):$r.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new eo({...this._def,rest:e})}}eo.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new eo({items:t,typeName:Qe.ZodTuple,rest:null,...ut(e)})};class fh extends yt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Pe.object)return De(r,{code:we.invalid_type,expected:Pe.object,received:r.parsedType}),it;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new Qi(r,a,r.path,a)),value:o._parse(new Qi(r,r.data[a],r.path,a))});return r.common.async?$r.mergeObjectAsync(n,s):$r.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof yt?new fh({keyType:e,valueType:n,typeName:Qe.ZodRecord,...ut(r)}):new fh({keyType:hi.create(),valueType:e,typeName:Qe.ZodRecord,...ut(n)})}}class Qp extends yt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Pe.map)return De(r,{code:we.invalid_type,expected:Pe.map,received:r.parsedType}),it;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],u)=>({key:s._parse(new Qi(r,a,r.path,[u,"key"])),value:i._parse(new Qi(r,c,r.path,[u,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,l=await c.value;if(u.status==="aborted"||l.status==="aborted")return it;(u.status==="dirty"||l.status==="dirty")&&n.dirty(),a.set(u.value,l.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const u=c.key,l=c.value;if(u.status==="aborted"||l.status==="aborted")return it;(u.status==="dirty"||l.status==="dirty")&&n.dirty(),a.set(u.value,l.value)}return{status:n.value,value:a}}}}Qp.create=(t,e,n)=>new Qp({valueType:e,keyType:t,typeName:Qe.ZodMap,...ut(n)});class Oc extends yt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Pe.set)return De(r,{code:we.invalid_type,expected:Pe.set,received:r.parsedType}),it;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(De(r,{code:we.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(De(r,{code:we.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const u=new Set;for(const l of c){if(l.status==="aborted")return it;l.status==="dirty"&&n.dirty(),u.add(l.value)}return{status:n.value,value:u}}const a=[...r.data.values()].map((c,u)=>i._parse(new Qi(r,c,r.path,u)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new Oc({...this._def,minSize:{value:e,message:Ge.toString(n)}})}max(e,n){return new Oc({...this._def,maxSize:{value:e,message:Ge.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Oc.create=(t,e)=>new Oc({valueType:t,minSize:null,maxSize:null,typeName:Qe.ZodSet,...ut(e)});class zu extends yt{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Pe.function)return De(n,{code:we.invalid_type,expected:Pe.function,received:n.parsedType}),it;function r(a,c){return Yp({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Gp(),oh].filter(u=>!!u),issueData:{code:we.invalid_arguments,argumentsError:c}})}function s(a,c){return Yp({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Gp(),oh].filter(u=>!!u),issueData:{code:we.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof ol){const a=this;return Wr(async function(...c){const u=new pi([]),l=await a._def.args.parseAsync(c,i).catch(f=>{throw u.addIssue(r(c,f)),u}),d=await Reflect.apply(o,this,l);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw u.addIssue(s(d,f)),u})})}else{const a=this;return Wr(function(...c){const u=a._def.args.safeParse(c,i);if(!u.success)throw new pi([r(c,u.error)]);const l=Reflect.apply(o,this,u.data),d=a._def.returns.safeParse(l,i);if(!d.success)throw new pi([s(l,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new zu({...this._def,args:eo.create(e).rest(yc.create())})}returns(e){return new zu({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new zu({args:e||eo.create([]).rest(yc.create()),returns:n||yc.create(),typeName:Qe.ZodFunction,...ut(r)})}}class ph extends yt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}ph.create=(t,e)=>new ph({getter:t,typeName:Qe.ZodLazy,...ut(e)});class gh extends yt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return De(n,{received:n.data,code:we.invalid_literal,expected:this._def.value}),it}return{status:"valid",value:e.data}}get value(){return this._def.value}}gh.create=(t,e)=>new gh({value:t,typeName:Qe.ZodLiteral,...ut(e)});function AN(t,e){return new Ma({values:t,typeName:Qe.ZodEnum,...ut(e)})}class Ma extends yt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return De(n,{expected:Rt.joinValues(r),received:n.parsedType,code:we.invalid_type}),it}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return De(n,{received:n.data,code:we.invalid_enum_value,options:r}),it}return Wr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return Ma.create(e)}exclude(e){return Ma.create(this.options.filter(n=>!e.includes(n)))}}Ma.create=AN;class mh extends yt{_parse(e){const n=Rt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Pe.string&&r.parsedType!==Pe.number){const s=Rt.objectValues(n);return De(r,{expected:Rt.joinValues(s),received:r.parsedType,code:we.invalid_type}),it}if(n.indexOf(e.data)===-1){const s=Rt.objectValues(n);return De(r,{received:r.data,code:we.invalid_enum_value,options:s}),it}return Wr(e.data)}get enum(){return this._def.values}}mh.create=(t,e)=>new mh({values:t,typeName:Qe.ZodNativeEnum,...ut(e)});class ol extends yt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Pe.promise&&n.common.async===!1)return De(n,{code:we.invalid_type,expected:Pe.promise,received:n.parsedType}),it;const r=n.parsedType===Pe.promise?n.data:Promise.resolve(n.data);return Wr(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}ol.create=(t,e)=>new ol({type:t,typeName:Qe.ZodPromise,...ut(e)});class Ci extends yt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Qe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{De(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?it:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?it:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!ah(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>ah(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);Rt.assertNever(s)}}Ci.create=(t,e,n)=>new Ci({schema:t,typeName:Qe.ZodEffects,effect:e,...ut(n)});Ci.createWithPreprocess=(t,e,n)=>new Ci({schema:e,effect:{type:"preprocess",transform:t},typeName:Qe.ZodEffects,...ut(n)});class $o extends yt{_parse(e){return this._getType(e)===Pe.undefined?Wr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}$o.create=(t,e)=>new $o({innerType:t,typeName:Qe.ZodOptional,...ut(e)});class Bc extends yt{_parse(e){return this._getType(e)===Pe.null?Wr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Bc.create=(t,e)=>new Bc({innerType:t,typeName:Qe.ZodNullable,...ut(e)});class yh extends yt{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Pe.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}yh.create=(t,e)=>new yh({innerType:t,typeName:Qe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ut(e)});class e0 extends yt{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Zp(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new pi(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new pi(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}e0.create=(t,e)=>new e0({innerType:t,typeName:Qe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ut(e)});class t0 extends yt{_parse(e){if(this._getType(e)!==Pe.nan){const r=this._getOrReturnCtx(e);return De(r,{code:we.invalid_type,expected:Pe.nan,received:r.parsedType}),it}return{status:"valid",value:e.data}}}t0.create=t=>new t0({typeName:Qe.ZodNaN,...ut(t)});const PQ=Symbol("zod_brand");class IN extends yt{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class ef extends yt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?it:i.status==="dirty"?(n.dirty(),CN(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?it:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new ef({in:e,out:n,typeName:Qe.ZodPipeline})}}class n0 extends yt{_parse(e){const n=this._def.innerType._parse(e);return ah(n)&&(n.value=Object.freeze(n.value)),n}}n0.create=(t,e)=>new n0({innerType:t,typeName:Qe.ZodReadonly,...ut(e)});const SN=(t,e={},n)=>t?il.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,u=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...u,fatal:c})}}):il.create(),kQ={object:pn.lazycreate};var Qe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Qe||(Qe={}));const OQ=(t,e={message:`Input not instance of ${t.name}`})=>SN(n=>n instanceof t,e),xN=hi.create,TN=Da.create,BQ=t0.create,$Q=Ua.create,NN=ch.create,DQ=kc.create,UQ=Jp.create,MQ=uh.create,LQ=lh.create,FQ=il.create,jQ=yc.create,qQ=zo.create,zQ=Xp.create,WQ=gi.create,HQ=pn.create,VQ=pn.strictCreate,KQ=dh.create,GQ=lg.create,YQ=hh.create,ZQ=eo.create,JQ=fh.create,XQ=Qp.create,QQ=Oc.create,eee=zu.create,tee=ph.create,nee=gh.create,ree=Ma.create,see=mh.create,iee=ol.create,SA=Ci.create,oee=$o.create,aee=Bc.create,cee=Ci.createWithPreprocess,uee=ef.create,lee=()=>xN().optional(),dee=()=>TN().optional(),hee=()=>NN().optional(),fee={string:t=>hi.create({...t,coerce:!0}),number:t=>Da.create({...t,coerce:!0}),boolean:t=>ch.create({...t,coerce:!0}),bigint:t=>Ua.create({...t,coerce:!0}),date:t=>kc.create({...t,coerce:!0})},pee=it;var V=Object.freeze({__proto__:null,defaultErrorMap:oh,setErrorMap:wQ,getErrorMap:Gp,makeIssue:Yp,EMPTY_PATH:bQ,addIssueToContext:De,ParseStatus:$r,INVALID:it,DIRTY:CN,OK:Wr,isAborted:Bb,isDirty:$b,isValid:ah,isAsync:Zp,get util(){return Rt},get objectUtil(){return Ob},ZodParsedType:Pe,getParsedType:va,ZodType:yt,ZodString:hi,ZodNumber:Da,ZodBigInt:Ua,ZodBoolean:ch,ZodDate:kc,ZodSymbol:Jp,ZodUndefined:uh,ZodNull:lh,ZodAny:il,ZodUnknown:yc,ZodNever:zo,ZodVoid:Xp,ZodArray:gi,ZodObject:pn,ZodUnion:dh,ZodDiscriminatedUnion:lg,ZodIntersection:hh,ZodTuple:eo,ZodRecord:fh,ZodMap:Qp,ZodSet:Oc,ZodFunction:zu,ZodLazy:ph,ZodLiteral:gh,ZodEnum:Ma,ZodNativeEnum:mh,ZodPromise:ol,ZodEffects:Ci,ZodTransformer:Ci,ZodOptional:$o,ZodNullable:Bc,ZodDefault:yh,ZodCatch:e0,ZodNaN:t0,BRAND:PQ,ZodBranded:IN,ZodPipeline:ef,ZodReadonly:n0,custom:SN,Schema:yt,ZodSchema:yt,late:kQ,get ZodFirstPartyTypeKind(){return Qe},coerce:fee,any:FQ,array:WQ,bigint:$Q,boolean:NN,date:DQ,discriminatedUnion:GQ,effect:SA,enum:ree,function:eee,instanceof:OQ,intersection:YQ,lazy:tee,literal:nee,map:XQ,nan:BQ,nativeEnum:see,never:qQ,null:LQ,nullable:aee,number:TN,object:HQ,oboolean:hee,onumber:dee,optional:oee,ostring:lee,pipeline:uee,preprocess:cee,promise:iee,record:JQ,set:QQ,strictObject:VQ,string:xN,symbol:UQ,transformer:SA,tuple:ZQ,undefined:MQ,union:KQ,unknown:jQ,void:zQ,NEVER:pee,ZodIssueCode:we,quotelessJson:yQ,ZodError:pi});const bn=V.object({message:V.string()});function Be(t){return V.literal(Ue[t])}const dg=V.object({serializedMessage:V.string().optional(),accountAddress:V.string(),chainId:V.string(),notBefore:V.string().optional(),domain:V.string(),uri:V.string(),version:V.string(),nonce:V.string(),statement:V.string().optional(),resources:V.array(V.string()).optional(),requestId:V.string().optional(),issuedAt:V.string().optional(),expirationTime:V.string().optional()});V.object({accessList:V.array(V.string()),blockHash:V.string().nullable(),blockNumber:V.string().nullable(),chainId:V.string().or(V.number()),from:V.string(),gas:V.string(),hash:V.string(),input:V.string().nullable(),maxFeePerGas:V.string(),maxPriorityFeePerGas:V.string(),nonce:V.string(),r:V.string(),s:V.string(),to:V.string(),transactionIndex:V.string().nullable(),type:V.string(),v:V.string(),value:V.string()});const gee=V.object({chainId:V.string().or(V.number()),rpcUrl:V.optional(V.string())}),mee=V.object({email:V.string().email()}),yee=V.object({otp:V.string()}),wee=V.object({uri:V.string(),preferredAccountType:V.optional(V.string()),chainId:V.optional(V.string().or(V.number())),siwxMessage:V.optional(dg),rpcUrl:V.optional(V.string())}),bee=V.object({chainId:V.optional(V.string().or(V.number())),preferredAccountType:V.optional(V.string()),socialUri:V.optional(V.string()),siwxMessage:V.optional(dg),rpcUrl:V.optional(V.string())}),vee=V.object({provider:V.enum(["google","github","apple","facebook","x","discord"])}),Eee=V.object({email:V.string().email()}),_ee=V.object({otp:V.string()}),Cee=V.object({otp:V.string()}),Aee=V.object({themeMode:V.optional(V.enum(["light","dark"])),themeVariables:V.optional(V.record(V.string(),V.string().or(V.number()))),w3mThemeVariables:V.optional(V.record(V.string(),V.string()))}),Iee=V.object({metadata:V.object({name:V.string(),description:V.string(),url:V.string(),icons:V.array(V.string())}).optional(),sdkVersion:V.string().optional(),sdkType:V.string().optional(),projectId:V.string()}),See=V.object({type:V.string()}),xee=V.object({action:V.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),Tee=V.object({url:V.string()}),Nee=V.object({userName:V.string()}),Ree=V.object({email:V.string().optional().nullable(),address:V.string(),chainId:V.string().or(V.number()),accounts:V.array(V.object({address:V.string(),type:V.enum([An.ACCOUNT_TYPES.EOA,An.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:V.string().optional().nullable(),preferredAccountType:V.optional(V.string()),signature:V.string().optional(),message:V.string().optional(),siwxMessage:V.optional(dg)}),Pee=V.object({action:V.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),kee=V.object({email:V.string().email().optional().nullable(),address:V.string(),chainId:V.string().or(V.number()),smartAccountDeployed:V.optional(V.boolean()),accounts:V.array(V.object({address:V.string(),type:V.enum([An.ACCOUNT_TYPES.EOA,An.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:V.optional(V.string()),signature:V.string().optional(),message:V.string().optional(),siwxMessage:V.optional(dg)}),Oee=V.object({uri:V.string()}),Bee=V.object({isConnected:V.boolean()}),$ee=V.object({chainId:V.string().or(V.number())}),Dee=V.object({chainId:V.string().or(V.number())}),Uee=V.object({newEmail:V.string().email()}),Mee=V.object({smartAccountEnabledNetworks:V.array(V.number())});V.object({address:V.string(),isDeployed:V.boolean()});const Lee=V.object({version:V.string().optional()}),Fee=V.object({type:V.string(),address:V.string()}),jee=V.any(),qee=V.object({method:V.literal("eth_accounts")}),zee=V.object({method:V.literal("eth_blockNumber")}),Wee=V.object({method:V.literal("eth_call"),params:V.array(V.any())}),Hee=V.object({method:V.literal("eth_chainId")}),Vee=V.object({method:V.literal("eth_estimateGas"),params:V.array(V.any())}),Kee=V.object({method:V.literal("eth_feeHistory"),params:V.array(V.any())}),Gee=V.object({method:V.literal("eth_gasPrice")}),Yee=V.object({method:V.literal("eth_getAccount"),params:V.array(V.any())}),Zee=V.object({method:V.literal("eth_getBalance"),params:V.array(V.any())}),Jee=V.object({method:V.literal("eth_getBlockByHash"),params:V.array(V.any())}),Xee=V.object({method:V.literal("eth_getBlockByNumber"),params:V.array(V.any())}),Qee=V.object({method:V.literal("eth_getBlockReceipts"),params:V.array(V.any())}),ete=V.object({method:V.literal("eth_getBlockTransactionCountByHash"),params:V.array(V.any())}),tte=V.object({method:V.literal("eth_getBlockTransactionCountByNumber"),params:V.array(V.any())}),nte=V.object({method:V.literal("eth_getCode"),params:V.array(V.any())}),rte=V.object({method:V.literal("eth_getFilterChanges"),params:V.array(V.any())}),ste=V.object({method:V.literal("eth_getFilterLogs"),params:V.array(V.any())}),ite=V.object({method:V.literal("eth_getLogs"),params:V.array(V.any())}),ote=V.object({method:V.literal("eth_getProof"),params:V.array(V.any())}),ate=V.object({method:V.literal("eth_getStorageAt"),params:V.array(V.any())}),cte=V.object({method:V.literal("eth_getTransactionByBlockHashAndIndex"),params:V.array(V.any())}),ute=V.object({method:V.literal("eth_getTransactionByBlockNumberAndIndex"),params:V.array(V.any())}),lte=V.object({method:V.literal("eth_getTransactionByHash"),params:V.array(V.any())}),dte=V.object({method:V.literal("eth_getTransactionCount"),params:V.array(V.any())}),hte=V.object({method:V.literal("eth_getTransactionReceipt"),params:V.array(V.any())}),fte=V.object({method:V.literal("eth_getUncleCountByBlockHash"),params:V.array(V.any())}),pte=V.object({method:V.literal("eth_getUncleCountByBlockNumber"),params:V.array(V.any())}),gte=V.object({method:V.literal("eth_maxPriorityFeePerGas")}),mte=V.object({method:V.literal("eth_newBlockFilter")}),yte=V.object({method:V.literal("eth_newFilter"),params:V.array(V.any())}),wte=V.object({method:V.literal("eth_newPendingTransactionFilter")}),bte=V.object({method:V.literal("eth_sendRawTransaction"),params:V.array(V.any())}),vte=V.object({method:V.literal("eth_syncing"),params:V.array(V.any())}),Ete=V.object({method:V.literal("eth_uninstallFilter"),params:V.array(V.any())}),xA=V.object({method:V.literal("personal_sign"),params:V.array(V.any())}),_te=V.object({method:V.literal("eth_signTypedData_v4"),params:V.array(V.any())}),Cte=V.object({method:V.literal("eth_sendTransaction"),params:V.array(V.any())}),Ate=V.object({method:V.literal("solana_signMessage"),params:V.object({message:V.string(),pubkey:V.string()})}),Ite=V.object({method:V.literal("solana_signTransaction"),params:V.object({transaction:V.string()})}),Ste=V.object({method:V.literal("solana_signAllTransactions"),params:V.object({transactions:V.array(V.string())})}),xte=V.object({method:V.literal("solana_signAndSendTransaction"),params:V.object({transaction:V.string(),options:V.object({skipPreflight:V.boolean().optional(),preflightCommitment:V.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:V.number().optional(),minContextSlot:V.number().optional()}).optional()})}),Tte=V.object({method:V.literal("wallet_sendCalls"),params:V.array(V.object({chainId:V.string().or(V.number()).optional(),from:V.string().optional(),version:V.string().optional(),capabilities:V.any().optional(),calls:V.array(V.object({to:V.string().startsWith("0x"),data:V.string().startsWith("0x").optional(),value:V.string().optional()}))}))}),Nte=V.object({method:V.literal("wallet_getCallsStatus"),params:V.array(V.string())}),Rte=V.object({method:V.literal("wallet_getCapabilities"),params:V.array(V.string().or(V.number()).optional()).optional()}),Pte=V.object({method:V.literal("wallet_grantPermissions"),params:V.array(V.any())}),kte=V.object({method:V.literal("wallet_revokePermissions"),params:V.any()}),Ote=V.object({method:V.literal("wallet_getAssets"),params:V.any()}),TA=V.object({token:V.string()}),$e=V.object({id:V.string().optional()}),wy={appEvent:$e.extend({type:Be("APP_SWITCH_NETWORK"),payload:gee}).or($e.extend({type:Be("APP_CONNECT_EMAIL"),payload:mee})).or($e.extend({type:Be("APP_CONNECT_DEVICE")})).or($e.extend({type:Be("APP_CONNECT_OTP"),payload:yee})).or($e.extend({type:Be("APP_CONNECT_SOCIAL"),payload:wee})).or($e.extend({type:Be("APP_GET_FARCASTER_URI")})).or($e.extend({type:Be("APP_CONNECT_FARCASTER")})).or($e.extend({type:Be("APP_GET_USER"),payload:V.optional(bee)})).or($e.extend({type:Be("APP_GET_SOCIAL_REDIRECT_URI"),payload:vee})).or($e.extend({type:Be("APP_SIGN_OUT")})).or($e.extend({type:Be("APP_IS_CONNECTED"),payload:V.optional(TA)})).or($e.extend({type:Be("APP_GET_CHAIN_ID")})).or($e.extend({type:Be("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or($e.extend({type:Be("APP_INIT_SMART_ACCOUNT")})).or($e.extend({type:Be("APP_SET_PREFERRED_ACCOUNT"),payload:See})).or($e.extend({type:Be("APP_RPC_REQUEST"),payload:xA.or(Ote).or(qee).or(zee).or(Wee).or(Hee).or(Vee).or(Kee).or(Gee).or(Yee).or(Zee).or(Jee).or(Xee).or(Qee).or(ete).or(tte).or(nte).or(rte).or(ste).or(ite).or(ote).or(ate).or(cte).or(ute).or(lte).or(dte).or(hte).or(fte).or(pte).or(gte).or(mte).or(yte).or(wte).or(bte).or(vte).or(Ete).or(xA).or(_te).or(Cte).or(Ate).or(Ite).or(Ste).or(xte).or(Nte).or(Tte).or(Rte).or(Pte).or(kte).and(V.object({chainId:V.string().or(V.number()).optional(),chainNamespace:V.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:V.string().optional()}))})).or($e.extend({type:Be("APP_UPDATE_EMAIL"),payload:Eee})).or($e.extend({type:Be("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:_ee})).or($e.extend({type:Be("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:Cee})).or($e.extend({type:Be("APP_SYNC_THEME"),payload:Aee})).or($e.extend({type:Be("APP_SYNC_DAPP_DATA"),payload:Iee})).or($e.extend({type:Be("APP_RELOAD")})).or($e.extend({type:Be("APP_RPC_ABORT")})),frameEvent:$e.extend({type:Be("FRAME_SWITCH_NETWORK_ERROR"),payload:bn}).or($e.extend({type:Be("FRAME_SWITCH_NETWORK_SUCCESS"),payload:Dee})).or($e.extend({type:Be("FRAME_CONNECT_EMAIL_SUCCESS"),payload:xee})).or($e.extend({type:Be("FRAME_CONNECT_EMAIL_ERROR"),payload:bn})).or($e.extend({type:Be("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:Tee})).or($e.extend({type:Be("FRAME_GET_FARCASTER_URI_ERROR"),payload:bn})).or($e.extend({type:Be("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:Nee})).or($e.extend({type:Be("FRAME_CONNECT_FARCASTER_ERROR"),payload:bn})).or($e.extend({type:Be("FRAME_CONNECT_OTP_ERROR"),payload:bn})).or($e.extend({type:Be("FRAME_CONNECT_OTP_SUCCESS")})).or($e.extend({type:Be("FRAME_CONNECT_DEVICE_ERROR"),payload:bn})).or($e.extend({type:Be("FRAME_CONNECT_DEVICE_SUCCESS")})).or($e.extend({type:Be("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:Ree})).or($e.extend({type:Be("FRAME_CONNECT_SOCIAL_ERROR"),payload:bn})).or($e.extend({type:Be("FRAME_GET_USER_ERROR"),payload:bn})).or($e.extend({type:Be("FRAME_GET_USER_SUCCESS"),payload:kee})).or($e.extend({type:Be("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:bn})).or($e.extend({type:Be("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:Oee})).or($e.extend({type:Be("FRAME_SIGN_OUT_ERROR"),payload:bn})).or($e.extend({type:Be("FRAME_SIGN_OUT_SUCCESS")})).or($e.extend({type:Be("FRAME_IS_CONNECTED_ERROR"),payload:bn})).or($e.extend({type:Be("FRAME_IS_CONNECTED_SUCCESS"),payload:Bee})).or($e.extend({type:Be("FRAME_GET_CHAIN_ID_ERROR"),payload:bn})).or($e.extend({type:Be("FRAME_GET_CHAIN_ID_SUCCESS"),payload:$ee})).or($e.extend({type:Be("FRAME_RPC_REQUEST_ERROR"),payload:bn})).or($e.extend({type:Be("FRAME_RPC_REQUEST_SUCCESS"),payload:jee})).or($e.extend({type:Be("FRAME_SESSION_UPDATE"),payload:TA})).or($e.extend({type:Be("FRAME_UPDATE_EMAIL_ERROR"),payload:bn})).or($e.extend({type:Be("FRAME_UPDATE_EMAIL_SUCCESS"),payload:Pee})).or($e.extend({type:Be("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:bn})).or($e.extend({type:Be("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or($e.extend({type:Be("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:bn})).or($e.extend({type:Be("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:Uee})).or($e.extend({type:Be("FRAME_SYNC_THEME_ERROR"),payload:bn})).or($e.extend({type:Be("FRAME_SYNC_THEME_SUCCESS")})).or($e.extend({type:Be("FRAME_SYNC_DAPP_DATA_ERROR"),payload:bn})).or($e.extend({type:Be("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or($e.extend({type:Be("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:Mee})).or($e.extend({type:Be("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:bn})).or($e.extend({type:Be("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:bn})).or($e.extend({type:Be("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:Fee})).or($e.extend({type:Be("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:bn})).or($e.extend({type:Be("FRAME_READY"),payload:Lee})).or($e.extend({type:Be("FRAME_RELOAD_ERROR"),payload:bn})).or($e.extend({type:Be("FRAME_RELOAD_SUCCESS")}))};function by(t,e={}){return typeof e?.type=="string"&&e?.type?.includes(t)}function Bte({projectId:t,chainId:e,version:n,enableLogger:r,rpcUrl:s=ne.BLOCKCHAIN_API_RPC_URL}){const i=new URL(iR);return i.searchParams.set("projectId",t),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",n),i.searchParams.set("enableLogger",String(r)),i.searchParams.set("rpcUrl",s),i.toString()}class $te{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0,rpcUrl:i=ne.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const o=document.getElementById("w3m-iframe");this.iframe&&!o&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(o,a,c)=>{function u({data:l}){if(!by(Ue.FRAME_EVENT_KEY,l))return;const d=wy.frameEvent.safeParse(l);if(!d.success){console.warn("W3mFrame: invalid frame event",d.error.message);return}d.data?.id===o&&(a(d.data),window.removeEventListener("message",u))}Cs.isClient&&(window.addEventListener("message",u),c.addEventListener("abort",()=>{window.removeEventListener("message",u)}))},onFrameEvent:o=>{Cs.isClient&&window.addEventListener("message",({data:a})=>{if(!by(Ue.FRAME_EVENT_KEY,a))return;const c=wy.frameEvent.safeParse(a);c.success?o(c.data):console.warn("W3mFrame: invalid frame event",c.error.message)})},onAppEvent:o=>{Cs.isClient&&window.addEventListener("message",({data:a})=>{if(!by(Ue.APP_EVENT_KEY,a))return;const c=wy.appEvent.safeParse(a);c.success||console.warn("W3mFrame: invalid app event",c.error.message),o(a)})},postAppEvent:o=>{if(Cs.isClient){if(!this.iframe?.contentWindow)throw new Error("W3mFrame: iframe is not set");this.iframe.contentWindow.postMessage(o,"*")}},postFrameEvent:o=>{if(Cs.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");parent.postMessage(o,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),this.rpcUrl=i,n&&(this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),Cs.isClient)){const o=document.createElement("iframe");o.id="w3m-iframe",o.src=Bte({projectId:e,chainId:r,version:aR,enableLogger:s,rpcUrl:this.rpcUrl}),o.name="w3m-secure-iframe",o.style.position="fixed",o.style.zIndex="999999",o.style.display="none",o.style.border="none",o.style.animationDelay="0s, 50ms",o.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",o.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=o,this.iframe.onerror=()=>{this.frameLoadPromiseResolver?.reject("Unable to load email login dependency")},this.events.onFrameEvent(a=>{a.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,this.frameLoadPromiseResolver?.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class Dte{constructor(e){const n=El({level:oR}),{logger:r,chunkLoggerController:s}=rv({opts:n});this.logger=Dr(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&this.chunkLoggerController?.downloadLogsBlobInBrowser&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{this.chunkLoggerController?.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class Ute{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new Dte(e)),this.abortController=i,this.getActiveCaipNetwork=o;const a=this.getRpcUrl(n);this.w3mFrame=new $te({projectId:e,isAppClient:!0,chainId:n,enableLogger:r,rpcUrl:a}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Ue.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!ar.get(Ue.EMAIL_LOGIN_USED_KEY)}getEmail(){return ar.get(Ue.EMAIL)}getUsername(){return ar.get(Ue.SOCIAL_USERNAME)}async reload(){try{await this.appEvent({type:Ue.APP_RELOAD})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error reloading iframe"),e}}async connectEmail(e){try{Cs.checkIfAllowedToTriggerEmail(),await this.init();const n=await this.appEvent({type:Ue.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),n}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error connecting email"),n}}async connectDevice(){try{return this.appEvent({type:Ue.APP_CONNECT_DEVICE})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting device"),e}}async connectOtp(e){try{return this.appEvent({type:Ue.APP_CONNECT_OTP,payload:e})}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error connecting otp"),n}}async isConnected(){try{if(!this.getLoginEmailUsed())return{isConnected:!1};const e=await this.appEvent({type:Ue.APP_IS_CONNECTED});return e?.isConnected||this.deleteAuthLoginCache(),e}catch(e){throw this.deleteAuthLoginCache(),this.w3mLogger?.logger.error({error:e},"Error checking connection"),e}}async getChainId(){try{const e=await this.appEvent({type:Ue.APP_GET_CHAIN_ID});return this.setLastUsedChainId(e.chainId),e}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error getting chain id"),e}}async getSocialRedirectUri(e){try{return await this.init(),this.appEvent({type:Ue.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error getting social redirect uri"),n}}async updateEmail(e){try{const n=await this.appEvent({type:Ue.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),n}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error updating email"),n}}async updateEmailPrimaryOtp(e){try{return this.appEvent({type:Ue.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error updating email primary otp"),n}}async updateEmailSecondaryOtp(e){try{const n=await this.appEvent({type:Ue.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(n.newEmail),n}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error updating email secondary otp"),n}}async syncTheme(e){try{return this.appEvent({type:Ue.APP_SYNC_THEME,payload:e})}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error syncing theme"),n}}async syncDappData(e){try{return this.appEvent({type:Ue.APP_SYNC_DAPP_DATA,payload:e})}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error syncing dapp data"),n}}async getSmartAccountEnabledNetworks(){try{const e=await this.appEvent({type:Ue.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(e.smartAccountEnabledNetworks),e}catch(e){throw this.persistSmartAccountEnabledNetworks([]),this.w3mLogger?.logger.error({error:e},"Error getting smart account enabled networks"),e}}async setPreferredAccount(e){try{return this.appEvent({type:Ue.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error setting preferred account"),n}}async connect(e){if(e?.socialUri)try{await this.init();const n=this.getRpcUrl(e.chainId),r=await this.appEvent({type:Ue.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:n}});return r.userName&&this.setSocialLoginSuccess(r.userName),this.setLoginSuccess(r.email),this.setLastUsedChainId(r.chainId),this.user=r,r}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error connecting social"),n}else try{const n=e?.chainId||this.getLastUsedChainId()||1,r=await this.getUser({chainId:n,preferredAccountType:e?.preferredAccountType,siwxMessage:e?.siwxMessage,rpcUrl:this.getRpcUrl(n)});return this.setLoginSuccess(r.email),this.setLastUsedChainId(r.chainId),this.user=r,r}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error connecting"),n}}async getUser(e){try{await this.init();const n=e?.chainId||this.getLastUsedChainId()||1,r=await this.appEvent({type:Ue.APP_GET_USER,payload:{...e,chainId:n}});return this.user=r,r}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error connecting"),n}}async connectSocial({uri:e,chainId:n,preferredAccountType:r}){try{await this.init();const s=this.getRpcUrl(n),i=await this.appEvent({type:Ue.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:n,rpcUrl:s,preferredAccountType:r}});return i.userName&&this.setSocialLoginSuccess(i.userName),i}catch(s){throw this.w3mLogger?.logger.error({error:s},"Error connecting social"),s}}async getFarcasterUri(){try{return await this.init(),await this.appEvent({type:Ue.APP_GET_FARCASTER_URI})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error getting farcaster uri"),e}}async connectFarcaster(){try{const e=await this.appEvent({type:Ue.APP_CONNECT_FARCASTER});return e.userName&&this.setSocialLoginSuccess(e.userName),e}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting farcaster"),e}}async switchNetwork({chainId:e}){try{const n=this.getRpcUrl(e),r=await this.appEvent({type:Ue.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:n}});return this.setLastUsedChainId(r.chainId),r}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error switching network"),n}}async disconnect(){try{return this.deleteAuthLoginCache(),await new Promise(async n=>{const r=setTimeout(()=>{n()},3e3);await this.appEvent({type:Ue.APP_SIGN_OUT}),clearTimeout(r),n()})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error disconnecting"),e}}async request(e){const n=e;try{if(An.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const r=e.chainNamespace||"eip155",s=this.getActiveCaipNetwork(r)?.id;n.chainNamespace=r,n.chainId=s,n.rpcUrl=this.getRpcUrl(s),this.rpcRequestHandler?.(e);const i=await this.appEvent({type:Ue.APP_RPC_REQUEST,payload:n});return this.rpcSuccessHandler?.(i,n),i}catch(r){throw this.rpcErrorHandler?.(r,n),this.w3mLogger?.logger.error({error:r},"Error requesting"),r}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ue.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ue.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Ue.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ue.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ue.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ue.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Ue.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:An.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){try{await Promise.all(this.openRpcRequests.map(async({abortController:e,method:n})=>{An.SAFE_RPC_METHODS.includes(n)||e.abort(),await this.appEvent({type:Ue.APP_RPC_ABORT})})),this.openRpcRequests=[]}catch(e){this.w3mLogger?.logger.error({error:e},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Ue.APP_SYNC_DAPP_DATA,Ue.APP_SYNC_THEME,Ue.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{this.onTimeout?.("iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Ue.APP_CONNECT_EMAIL,Ue.APP_CONNECT_DEVICE,Ue.APP_CONNECT_OTP,Ue.APP_CONNECT_SOCIAL,Ue.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{this.onTimeout?.("iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,u)=>{const l=Math.random().toString(36).substring(7);this.w3mLogger?.logger.info?.({event:e,id:l},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:l});const d=new AbortController;if(o==="RPC_REQUEST"){const f=e;this.openRpcRequests=[...this.openRpcRequests,{...f.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?u(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&u(new Error("Something went wrong"))});function h(f,y){f.id===l&&(y?.logger.info?.({framEvent:f,id:l},"Received frame response"),f.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in f&&c(f.payload),c(void 0)):f.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in f&&u(new Error(f.payload?.message||"An error occurred")),u(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(l,f=>h(f,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){ar.set(Ue.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){ar.set(Ue.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&ar.set(Ue.EMAIL,e),ar.set(Ue.EMAIL_LOGIN_USED_KEY,"true"),ar.delete(Ue.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){ar.delete(Ue.EMAIL_LOGIN_USED_KEY),ar.delete(Ue.EMAIL),ar.delete(Ue.LAST_USED_CHAIN_KEY),ar.delete(Ue.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&ar.set(Ue.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=ar.get(Ue.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){ar.set(Ue.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){let n=e===void 0?void 0:"eip155";return typeof e=="string"&&(e.includes(":")?n=Mr.parseCaipNetworkId(e)?.chainNamespace:Number.isInteger(Number(e))?n="eip155":n="solana"),this.getActiveCaipNetwork(n)?.rpcUrls.default.http?.[0]}}class wc{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){return wc.instance||(wc.instance=new Ute({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o})),wc.instance}}var NA={};const Mte={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof tr<"u"&&typeof NA<"u"?NA.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},Ub={filterOutDuplicatesByRDNS(t){const e=pe.state.enableEIP6963?ve.state.connectors:[],n=ye.getRecentWallets(),r=e.map(a=>a.info?.rdns).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&ke.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a?.rdns&&i.includes(String(a.rdns))||!a?.rdns&&e.some(u=>u.name===a.name)))},filterOutDuplicatesByIds(t){const e=ve.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=ye.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a?.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=ve.state,{featuredWalletIds:n}=pe.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>(a.info?.rdns&&(o[a.info.rdns]=!0),o),{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n?.length){const u=n.indexOf(o.id),l=n.indexOf(a.id);if(u!==-1&&l!==-1)return u-l;if(u!==-1)return-1;if(l!==-1)return 1}return 0})},getConnectOrderMethod(t,e){const n=t?.connectMethodsOrder||pe.state.features?.connectMethodsOrder,r=e||ve.state.connectors;if(n)return n;const{injected:s,announced:i}=hp.getConnectorsByType(r,Ke.state.recommended,Ke.state.featured),o=s.filter(hp.showConnector),a=i.filter(hp.showConnector);return o.length||a.length?["wallet","email","social"]:Mte.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&Ke.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&Ke.state.excludedWallets.some(r=>Dn.isLowerCaseMatch(r.name,t.name));return e||n},markWalletsWithDisplayIndex(t){return t.map((e,n)=>({...e,display_index:n}))}},hp={getConnectorsByType(t,e,n){const{customWallets:r}=pe.state,s=ye.getRecentWallets(),i=Ub.filterOutDuplicateWallets(e),o=Ub.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),u=t.filter(d=>d.type==="INJECTED"),l=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:l,multiChain:a,announced:c,injected:u,recommended:i,featured:o}},showConnector(t){const e=t.info?.rdns,n=!!e&&Ke.state.excludedWallets.some(s=>!!s.rdns&&s.rdns===e),r=!!t.name&&Ke.state.excludedWallets.some(s=>Dn.isLowerCaseMatch(s.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!ke.isMobile()||ke.isMobile()&&!e&&!Ae.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(Y.state.chains.values()).some(n=>ve.getConnectorId(n.namespace)===ne.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=pe.state.features?.connectorTypeOrder??[]}){const d=[{type:"walletConnect",isEnabled:pe.state.enableWalletConnect},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(m=>m.isEnabled),h=new Set(d.map(m=>m.type)),f=c.filter(m=>h.has(m)).map(m=>({type:m,isEnabled:!0})),y=d.filter(({type:m})=>!f.some(({type:T})=>T===m));return Array.from(new Set([...f,...y].map(({type:m})=>m)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){try{if(t.name==="Browser Wallet"&&!ke.isMobile())return{accounts:[],chainId:void 0};if(t.id===ne.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[e,n]=await Promise.all([t.provider?.request({method:"eth_accounts"}),t.provider?.request({method:"eth_chainId"}).then(r=>Number(r))]);return{accounts:e,chainId:n}}catch(e){return console.warn(`Failed to fetch provider data for ${t.name}`,e),{accounts:[],chainId:void 0}}}},kue={interpolate(t,e,n){if(t.length!==2||e.length!==2)throw new Error("inputRange and outputRange must be an array of length 2");const r=t[0]||0,s=t[1]||0,i=e[0]||0,o=e[1]||0;return n<r?i:n>s?o:(o-i)/(s-r)*(n-r)+i}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const fp=globalThis,Bv=fp.ShadowRoot&&(fp.ShadyCSS===void 0||fp.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,$v=Symbol(),RA=new WeakMap;let RN=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==$v)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(Bv&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=RA.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&RA.set(n,e))}return e}toString(){return this.cssText}};const $s=t=>new RN(typeof t=="string"?t:t+"",void 0,$v),Wu=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new RN(n,t,$v)},Lte=(t,e)=>{if(Bv)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=fp.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},PA=Bv?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return $s(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:Fte,defineProperty:jte,getOwnPropertyDescriptor:qte,getOwnPropertyNames:zte,getOwnPropertySymbols:Wte,getPrototypeOf:Hte}=Object,hg=globalThis,kA=hg.trustedTypes,Vte=kA?kA.emptyScript:"",Kte=hg.reactiveElementPolyfillSupport,Cd=(t,e)=>t,Mb={toAttribute(t,e){switch(e){case Boolean:t=t?Vte:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},PN=(t,e)=>!Fte(t,e),OA={attribute:!0,type:String,converter:Mb,reflect:!1,useDefault:!1,hasChanged:PN};Symbol.metadata??=Symbol("metadata"),hg.litPropertyMetadata??=new WeakMap;let xu=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=OA){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&jte(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=qte(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s?.call(this);i?.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??OA}static _$Ei(){if(this.hasOwnProperty(Cd("elementProperties")))return;const e=Hte(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Cd("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Cd("properties"))){const n=this.properties,r=[...zte(n),...Wte(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(PA(s))}else e!==void 0&&n.push(PA(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(e=>e(this))}addController(e){(this._$EO??=new Set).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Lte(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(e=>e.hostConnected?.())}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach(e=>e.hostDisconnected?.())}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const i=(r.converter?.toAttribute!==void 0?r.converter:Mb).toAttribute(n,r.type);this._$Em=e,i==null?this.removeAttribute(s):this.setAttribute(s,i),this._$Em=null}}_$AK(e,n){const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const i=r.getPropertyOptions(s),o=typeof i.converter=="function"?{fromAttribute:i.converter}:i.converter?.fromAttribute!==void 0?i.converter:Mb;this._$Em=s;const a=o.fromAttribute(n,i.type);this[s]=a??this._$Ej?.get(s)??a,this._$Em=null}}requestUpdate(e,n,r){if(e!==void 0){const s=this.constructor,i=this[e];if(r??=s.getPropertyOptions(e),!((r.hasChanged??PN)(i,n)||r.useDefault&&r.reflect&&i===this._$Ej?.get(e)&&!this.hasAttribute(s._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[s,i]of this._$Ep)this[s]=i;this._$Ep=void 0}const r=this.constructor.elementProperties;if(r.size>0)for(const[s,i]of r){const{wrapped:o}=i,a=this[s];o!==!0||this._$AL.has(s)||a===void 0||this.C(s,void 0,i,a)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),this._$EO?.forEach(r=>r.hostUpdate?.()),this.update(n)):this._$EM()}catch(r){throw e=!1,this._$EM(),r}e&&this._$AE(n)}willUpdate(e){}_$AE(e){this._$EO?.forEach(n=>n.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach(n=>this._$ET(n,this[n])),this._$EM()}updated(e){}firstUpdated(e){}};xu.elementStyles=[],xu.shadowRootOptions={mode:"open"},xu[Cd("elementProperties")]=new Map,xu[Cd("finalized")]=new Map,Kte?.({ReactiveElement:xu}),(hg.reactiveElementVersions??=[]).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Dv=globalThis,r0=Dv.trustedTypes,BA=r0?r0.createPolicy("lit-html",{createHTML:t=>t}):void 0,kN="$lit$",Ea=`lit$${Math.random().toFixed(9).slice(2)}$`,ON="?"+Ea,Gte=`<${ON}>`,$c=document,wh=()=>$c.createComment(""),bh=t=>t===null||typeof t!="object"&&typeof t!="function",Uv=Array.isArray,Yte=t=>Uv(t)||typeof t?.[Symbol.iterator]=="function",vy=`[ 	
\f\r]`,Yl=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,$A=/-->/g,DA=/>/g,Ka=RegExp(`>|${vy}(?:([^\\s"'>=/]+)(${vy}*=${vy}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),UA=/'/g,MA=/"/g,BN=/^(?:script|style|textarea|title)$/i,$N=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),$ue=$N(1),Due=$N(2),al=Symbol.for("lit-noChange"),Xn=Symbol.for("lit-nothing"),LA=new WeakMap,uc=$c.createTreeWalker($c,129);function DN(t,e){if(!Uv(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return BA!==void 0?BA.createHTML(e):e}const Zte=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=Yl;for(let a=0;a<n;a++){const c=t[a];let u,l,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,l=o.exec(c),l!==null);)h=o.lastIndex,o===Yl?l[1]==="!--"?o=$A:l[1]!==void 0?o=DA:l[2]!==void 0?(BN.test(l[2])&&(s=RegExp("</"+l[2],"g")),o=Ka):l[3]!==void 0&&(o=Ka):o===Ka?l[0]===">"?(o=s??Yl,d=-1):l[1]===void 0?d=-2:(d=o.lastIndex-l[2].length,u=l[1],o=l[3]===void 0?Ka:l[3]==='"'?MA:UA):o===MA||o===UA?o=Ka:o===$A||o===DA?o=Yl:(o=Ka,s=void 0);const f=o===Ka&&t[a+1].startsWith("/>")?" ":"";i+=o===Yl?c+Gte:d>=0?(r.push(u),c.slice(0,d)+kN+c.slice(d)+Ea+f):c+Ea+(d===-2?a:f)}return[DN(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class vh{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[u,l]=Zte(e,n);if(this.el=vh.createElement(u,r),uc.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=uc.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(kN)){const h=l[o++],f=s.getAttribute(d).split(Ea),y=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:y[2],strings:f,ctor:y[1]==="."?Xte:y[1]==="?"?Qte:y[1]==="@"?ene:fg}),s.removeAttribute(d)}else d.startsWith(Ea)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(BN.test(s.tagName)){const d=s.textContent.split(Ea),h=d.length-1;if(h>0){s.textContent=r0?r0.emptyScript:"";for(let f=0;f<h;f++)s.append(d[f],wh()),uc.nextNode(),c.push({type:2,index:++i});s.append(d[h],wh())}}}else if(s.nodeType===8)if(s.data===ON)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(Ea,d+1))!==-1;)c.push({type:7,index:i}),d+=Ea.length-1}i++}}static createElement(e,n){const r=$c.createElement("template");return r.innerHTML=e,r}}function cl(t,e,n=t,r){if(e===al)return e;let s=r!==void 0?n._$Co?.[r]:n._$Cl;const i=bh(e)?void 0:e._$litDirective$;return s?.constructor!==i&&(s?._$AO?.(!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??=[])[r]=s:n._$Cl=s),s!==void 0&&(e=cl(t,s._$AS(t,e.values),s,r)),e}class Jte{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=(e?.creationScope??$c).importNode(n,!0);uc.currentNode=s;let i=uc.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let u;c.type===2?u=new tf(i,i.nextSibling,this,e):c.type===1?u=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(u=new tne(i,this,e)),this._$AV.push(u),c=r[++a]}o!==c?.index&&(i=uc.nextNode(),o++)}return uc.currentNode=$c,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class tf{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=Xn,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=s?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&e?.nodeType===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=cl(this,e,n),bh(e)?e===Xn||e==null||e===""?(this._$AH!==Xn&&this._$AR(),this._$AH=Xn):e!==this._$AH&&e!==al&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Yte(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Xn&&bh(this._$AH)?this._$AA.nextSibling.data=e:this.T($c.createTextNode(e)),this._$AH=e}$(e){const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=vh.createElement(DN(r.h,r.h[0]),this.options)),r);if(this._$AH?._$AD===s)this._$AH.p(n);else{const i=new Jte(s,this),o=i.u(this.options);i.p(n),this.T(o),this._$AH=i}}_$AC(e){let n=LA.get(e.strings);return n===void 0&&LA.set(e.strings,n=new vh(e)),n}k(e){Uv(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new tf(this.O(wh()),this.O(wh()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){for(this._$AP?.(!1,!0,n);e!==this._$AB;){const r=e.nextSibling;e.remove(),e=r}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}}class fg{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=Xn,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=Xn}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=cl(this,e,n,0),o=!bh(e)||e!==this._$AH&&e!==al,o&&(this._$AH=e);else{const a=e;let c,u;for(e=i[0],c=0;c<i.length-1;c++)u=cl(this,a[r+c],n,c),u===al&&(u=this._$AH[c]),o||=!bh(u)||u!==this._$AH[c],u===Xn?e=Xn:e!==Xn&&(e+=(u??"")+i[c+1]),this._$AH[c]=u}o&&!s&&this.j(e)}j(e){e===Xn?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class Xte extends fg{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Xn?void 0:e}}class Qte extends fg{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Xn)}}class ene extends fg{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=cl(this,e,n,0)??Xn)===al)return;const r=this._$AH,s=e===Xn&&r!==Xn||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==Xn&&(r===Xn||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class tne{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){cl(this,e)}}const nne=Dv.litHtmlPolyfillSupport;nne?.(vh,tf),(Dv.litHtmlVersions??=[]).push("3.3.1");const rne=(t,e,n)=>{const r=n?.renderBefore??e;let s=r._$litPart$;if(s===void 0){const i=n?.renderBefore??null;r._$litPart$=s=new tf(e.insertBefore(wh(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Mv=globalThis;let pp=class extends xu{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=rne(n,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return al}};pp._$litElement$=!0,pp.finalized=!0,Mv.litElementHydrateSupport?.({LitElement:pp});const sne=Mv.litElementPolyfillSupport;sne?.({LitElement:pp});(Mv.litElementVersions??=[]).push("4.2.1");let Ad,Na,Ra;function Mue(t,e){Ad=document.createElement("style"),Na=document.createElement("style"),Ra=document.createElement("style"),Ad.textContent=Hu(t).core.cssText,Na.textContent=Hu(t).dark.cssText,Ra.textContent=Hu(t).light.cssText,document.head.appendChild(Ad),document.head.appendChild(Na),document.head.appendChild(Ra),UN(e)}function UN(t){Na&&Ra&&(t==="light"?(Na.removeAttribute("media"),Ra.media="enabled"):(Ra.removeAttribute("media"),Na.media="enabled"))}function ine(t){Ad&&Na&&Ra&&(Ad.textContent=Hu(t).core.cssText,Na.textContent=Hu(t).dark.cssText,Ra.textContent=Hu(t).light.cssText)}function Hu(t){return{core:Wu`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${$s(t?.["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${$s(t?.["--w3m-font-family"]||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${$s(t?.["--w3m-font-size-master"]||"10px")};
        --w3m-border-radius-master: ${$s(t?.["--w3m-border-radius-master"]||"4px")};
        --w3m-z-index: ${$s(t?.["--w3m-z-index"]||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:Wu`
      :root {
        --w3m-color-mix: ${$s(t?.["--w3m-color-mix"]||"#fff")};
        --w3m-accent: ${$s(xo(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${$s(xo(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:Wu`
      :root {
        --w3m-color-mix: ${$s(t?.["--w3m-color-mix"]||"#000")};
        --w3m-accent: ${$s(xo(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${$s(xo(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const Lue=Wu`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,Fue=Wu`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,jue=Wu`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,FA={getSpacingStyles(t,e){if(Array.isArray(t))return t[e]?`var(--wui-spacing-${t[e]})`:void 0;if(typeof t=="string")return`var(--wui-spacing-${t})`},getFormattedDate(t){return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric"}).format(t)},getHostName(t){try{return new URL(t).hostname}catch{return""}},getTruncateString({string:t,charsStart:e,charsEnd:n,truncate:r}){return t.length<=e+n?t:r==="end"?`${t.substring(0,e)}...`:r==="start"?`...${t.substring(t.length-n)}`:`${t.substring(0,Math.floor(e))}...${t.substring(t.length-Math.floor(n))}`},generateAvatarColors(t){const n=t.toLowerCase().replace(/^0x/iu,"").replace(/[^a-f0-9]/gu,"").substring(0,6).padEnd(6,"0"),r=this.hexToRgb(n),s=getComputedStyle(document.documentElement).getPropertyValue("--w3m-border-radius-master"),o=100-3*Number(s?.replace("px","")),a=`${o}% ${o}% at 65% 40%`,c=[];for(let u=0;u<5;u+=1){const l=this.tintColor(r,.15*u);c.push(`rgb(${l[0]}, ${l[1]}, ${l[2]})`)}return`
    --local-color-1: ${c[0]};
    --local-color-2: ${c[1]};
    --local-color-3: ${c[2]};
    --local-color-4: ${c[3]};
    --local-color-5: ${c[4]};
    --local-radial-circle: ${a}
   `},hexToRgb(t){const e=parseInt(t,16),n=e>>16&255,r=e>>8&255,s=e&255;return[n,r,s]},tintColor(t,e){const[n,r,s]=t,i=Math.round(n+(255-n)*e),o=Math.round(r+(255-r)*e),a=Math.round(s+(255-s)*e);return[i,o,a]},isNumber(t){return{number:/^[0-9]+$/u}.number.test(t)},getColorTheme(t){return t||(typeof window<"u"&&window.matchMedia&&typeof window.matchMedia=="function"?window.matchMedia("(prefers-color-scheme: dark)")?.matches?"dark":"light":"dark")},splitBalance(t){const e=t.split(".");return e.length===2?[e[0],e[1]]:["0","00"]},roundNumber(t,e,n){return t.toString().length>=e?Number(t).toFixed(n):t},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})}},one=3,ane=["receive","deposit","borrow","claim"],cne=["withdraw","repay","burn"],jA={getTransactionGroupTitle(t,e){const n=fE.getYear(),r=fE.getMonthNameByIndex(e);return t===n?r:`${r} ${t}`},getTransactionImages(t){const[e,n]=t,r=!!e&&t?.every(o=>!!o.nft_info),s=t?.length>1;return t?.length===2&&!r?[this.getTransactionImage(n),this.getTransactionImage(e)]:s?t.map(o=>this.getTransactionImage(o)):[this.getTransactionImage(e)]},getTransactionImage(t){return{type:jA.getTransactionTransferTokenType(t),url:jA.getTransactionImageURL(t)}},getTransactionImageURL(t){let e;const n=!!t?.nft_info,r=!!t?.fungible_info;return t&&n?e=t?.nft_info?.content?.preview?.url:t&&r&&(e=t?.fungible_info?.icon?.url),e},getTransactionTransferTokenType(t){if(t?.fungible_info)return"FUNGIBLE";if(t?.nft_info)return"NFT"},getTransactionDescriptions(t){const e=t?.metadata?.operationType,n=t?.transfers,r=t?.transfers?.length>0,s=t?.transfers?.length>1,i=r&&n?.every(d=>!!d?.fungible_info),[o,a]=n;let c=this.getTransferDescription(o),u=this.getTransferDescription(a);if(!r)return(e==="send"||e==="receive")&&i?(c=FA.getTruncateString({string:t?.metadata.sentFrom,charsStart:4,charsEnd:6,truncate:"middle"}),u=FA.getTruncateString({string:t?.metadata.sentTo,charsStart:4,charsEnd:6,truncate:"middle"}),[c,u]):[t.metadata.status];if(s)return n.map(d=>this.getTransferDescription(d)).reverse();let l="";return ane.includes(e)?l="+":cne.includes(e)&&(l="-"),c=l.concat(c),[c]},getTransferDescription(t){let e="";return t&&(t?.nft_info?e=t?.nft_info?.name||"-":t?.fungible_info&&(e=this.getFungibleTransferDescription(t)||"-")),e},getFungibleTransferDescription(t){return t?[this.getQuantityFixedValue(t?.quantity.numeric),t?.fungible_info?.symbol].join(" ").trim():null},getQuantityFixedValue(t){return t?parseFloat(t).toFixed(one):null}};function une(t,e){const{kind:n,elements:r}=e;return{kind:n,elements:r,finisher(s){customElements.get(t)||customElements.define(t,s)}}}function lne(t,e){return customElements.get(t)||customElements.define(t,e),e}function que(t){return function(n){return typeof n=="function"?lne(t,n):une(t,n)}}const gp={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,n]=await Promise.all([gp.getAddresses(t),gp.getChainId(t)]);return{chainId:n,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){const n=e.rpcUrls.chainDefault?.http||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:gp.numberToHexString(e.id),rpcUrls:[...n],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[e.blockExplorers?.default.url],iconUrls:[Zn.NetworkImageIds[e.id]]}]})}},vu={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}},zue=l6({id:56,name:"BNB Smart Chain",blockTime:750,nativeCurrency:{decimals:18,name:"BNB",symbol:"BNB"},rpcUrls:{default:{http:["https://56.rpc.thirdweb.com"]}},blockExplorers:{default:{name:"BscScan",url:"https://bscscan.com",apiUrl:"https://api.bscscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:15921452}}}),Wue=l6({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},blockTime:12e3,rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensUniversalResolver:{address:"0xeeeeeeee14d718c2b47d9923deab1335e144eeee",blockCreated:23085558},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});function nf(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const s0=nf({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),Lb=nf({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"}),dne=nf({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});nf({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});nf({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const hne={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},zs={getMethodsByChainNamespace(t){return hne[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const u=`${o}:${i}`,l=r[o];switch(l.chains.push(u),u){case s0.caipNetworkId:l.chains.push(s0.deprecatedCaipNetworkId);break;case Lb.caipNetworkId:l.chains.push(Lb.deprecatedCaipNetworkId);break}return l?.rpcMap&&c&&(l.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{const e=await fd.resolveName(t);return(Object.values(e?.addresses)||[])[0]?.address||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:n,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){n&&t.on("connect",()=>{const a=zs.getWalletConnectAccounts(t,e);n(a)}),r&&t.on("disconnect",()=>{r()}),s&&t.on("session_event",a=>{if(zs.isSessionEventData(a)){const{name:c,data:u}=a.params.event;if(c==="accountsChanged"&&Array.isArray(u)){const l=u.filter(d=>ke.isCaipAddress(d)).map(d=>Mr.parseCaipAddress(d)).filter(d=>d.chainNamespace===e);s(l)}}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){const n=new Set,r=t?.session?.namespaces?.[e]?.accounts?.map(s=>Mr.parseCaipAddress(s)).filter(({address:s})=>n.has(s.toLowerCase())?!1:(n.add(s.toLowerCase()),!0));return r&&r.length>0?r:[]}};class fne{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case ne.CHAIN.EVM:await this.syncEVMConnections(e);break;case ne.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case ne.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:u}=s(a.id);return!c&&u}).map(async a=>{if(a.id===ne.CONNECTOR_ID.WALLET_CONNECT){const c=zs.getWalletConnectAccounts(r,this.namespace),u=n.find(l=>l.chainNamespace===this.namespace&&l.id.toString()===c[0]?.chainId?.toString());c.length>0&&i({connectorId:a.id,accounts:c.map(l=>({address:l.address})),caipNetwork:u})}else{const{accounts:c,chainId:u}=await hp.fetchProviderData(a);if(c.length>0&&u){const l=n.find(d=>d.chainNamespace===this.namespace&&d.id.toString()===u.toString());i({connectorId:a.id,accounts:c.map(d=>({address:d})),caipNetwork:l}),a.provider&&a.id!==ne.CONNECTOR_ID.AUTH&&a.id!==ne.CONNECTOR_ID.WALLET_CONNECT&&o(a.id,a.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:u}=s(a.id);return!c&&u}).map(async a=>{if(a.id===ne.CONNECTOR_ID.WALLET_CONNECT){const c=zs.getWalletConnectAccounts(r,this.namespace);c.length>0&&i({connectorId:a.id,accounts:c.map(u=>({address:u.address})),caipNetwork:n})}else{const c=await a.connect({chainId:n?.id});c&&(i({connectorId:a.id,accounts:[{address:c}],caipNetwork:n}),o(a.id,a.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:u}=s(a.id);return!c&&u}).map(async a=>{if(a.id===ne.CONNECTOR_ID.WALLET_CONNECT){const h=zs.getWalletConnectAccounts(r,this.namespace);h.length>0&&i({connectorId:a.id,accounts:h.map(f=>({address:f.address})),caipNetwork:n});return}const c=await a.connect();let l=(await a.getAccountAddresses())?.map(h=>ke.createAccount(ne.CHAIN.BITCOIN,h.address,h.purpose||"payment",h.publicKey,h.path));if(l&&l.length>1&&(l=[{namespace:ne.CHAIN.BITCOIN,publicKey:l[vu.ACCOUNT_INDEXES.PAYMENT]?.publicKey??"",path:l[vu.ACCOUNT_INDEXES.PAYMENT]?.path??"",address:l[vu.ACCOUNT_INDEXES.PAYMENT]?.address??"",type:"payment"},{namespace:ne.CHAIN.BITCOIN,publicKey:l[vu.ACCOUNT_INDEXES.ORDINAL]?.publicKey??"",path:l[vu.ACCOUNT_INDEXES.ORDINAL]?.path??"",address:l[vu.ACCOUNT_INDEXES.ORDINAL]?.address??"",type:"ordinal"}]),!(a.chains.find(h=>h.id===n?.id)||a.chains[0]))throw new Error("The connector does not support any of the requested chains");c&&(o(a.id,a.provider),i({connectorId:a.id,accounts:l.map(h=>({address:h.address,type:h.type})),caipNetwork:n}))}))}getConnection({address:e,connectorId:n,connections:r,connectors:s}){if(n){const o=r.find(u=>Dn.isLowerCaseMatch(u.connectorId,n));if(!o)return null;const a=s.find(u=>Dn.isLowerCaseMatch(u.id,o.connectorId)),c=e?o.accounts.find(u=>Dn.isLowerCaseMatch(u.address,e)):o.accounts[0];return{...o,account:c,connector:a}}const i=r.find(o=>o.accounts.length>0&&s.some(a=>Dn.isLowerCaseMatch(a.id,o.connectorId)));if(i){const[o]=i.accounts,a=s.find(c=>Dn.isLowerCaseMatch(c.id,i.connectorId));return{...i,account:o,connector:a}}return null}}const ud={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://localhost:*","http://127.0.0.1:*","https://127.0.0.1:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]};class pg{constructor({provider:e,namespace:n}){this.id=ne.CONNECTOR_ID.WALLET_CONNECT,this.name=Zn.ConnectorNamesMap[ne.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=Zn.ConnectorImageIds[ne.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=Y.getCaipNetworks.bind(Y),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=pe.state.universalProviderConfigOverride,s=zs.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return os.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:pne})}}const pne=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],gne=[ne.CONNECTOR_ID.AUTH,ne.CONNECTOR_ID.WALLET_CONNECT];class Lv{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=n=>Y.getCaipNetworks(n),this.getConnectorId=n=>ve.getConnectorId(n),e&&this.construct(e),e?.namespace&&(this.connectionManager=new fne({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:n}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===n?.toString());e&&r&&this.addConnection({connectorId:ne.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:ne.CONNECTOR_ID.AUTH,type:"AUTH",name:ne.CONNECTOR_NAMES.AUTH,provider:e,imageId:Zn.ConnectorImageIds[ne.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const n=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>n.has(r.connectorId.toLowerCase())?!1:(n.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(n=>!Dn.isLowerCaseMatch(n.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,n){Me.setStatus(e,n)}on(e,n){this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e)?.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const i=s,o=gr(n.chainNamespace);await i.switchNetwork({chainId:n.caipNetworkId});const a=await i.getUser({chainId:n.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof pg);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,n){if(e.length>0){const{address:r,chainId:s}=ke.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===s?.toString()),o=this.connectors.find(a=>a.id===n);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:o}),this.addConnection({connectorId:n,accounts:e.map(a=>{const{address:c}=ke.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,n,r=!0){if(e.length>0){const{address:s}=ke.getAccount(e[0]),i=this.connectionManager?.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors});s&&Dn.isLowerCaseMatch(this.getConnectorId(ne.CHAIN.EVM),n)&&this.emit("accountChanged",{address:s,chainId:i?.caipNetwork?.id,connector:i?.connector}),this.addConnection({connectorId:n,accounts:e.map(o=>{const{address:a}=ke.getAccount(o);return{address:a}}),caipNetwork:i?.caipNetwork})}else r&&this.onDisconnect(n)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),Dn.isLowerCaseMatch(this.getConnectorId(ne.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,n){const r=typeof e=="string"&&e.startsWith("0x")?gp.hexStringToNumber(e).toString():e.toString(),s=this.connectionManager?.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(o=>o.chainNamespace===this.namespace).find(o=>o.id.toString()===r);s&&this.addConnection({connectorId:n,accounts:s.accounts,caipNetwork:i}),Dn.isLowerCaseMatch(this.getConnectorId(ne.CHAIN.EVM),n)&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,n){if(gne.includes(e))return;const r=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",i),n.on("accountsChanged",r),n.on("chainChanged",s),this.providerHandlers[e]={provider:n,disconnect:i,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:n,disconnect:r,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];n.removeListener("disconnect",r),n.removeListener("accountsChanged",s),n.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){const e=this.connectionManager?.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[n]=e.accounts;this.emit("accountChanged",{address:n?.address,chainId:e.caipNetwork?.id,connector:e.connector})}}}class mne extends Lv{async setUniversalProvider(e){if(!this.namespace)throw new Error("UniversalAdapter:setUniversalProvider - namespace is required");return this.addConnector(new pg({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace})),Promise.resolve()}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect(),this.emit("disconnect")}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}return{connections:[]}}syncConnections(){return Promise.resolve()}async getAccounts({namespace:e}){const r=this.provider?.session?.namespaces?.[e]?.accounts?.map(s=>{const[,,i]=s.split(":");return i}).filter((s,i,o)=>o.indexOf(s)===i)||[];return Promise.resolve({accounts:r.map(s=>ke.createAccount(e,s,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){if(!(e.caipNetwork&&At.BALANCE_SUPPORTED_CHAINS.includes(e.caipNetwork?.chainNamespace))||e.caipNetwork?.testnet)return{balance:"0.00",symbol:e.caipNetwork?.nativeCurrency.symbol||""};if(Me.state.balanceLoading&&e.chainId===Y.state.activeCaipNetwork?.id)return{balance:Me.state.balance||"0.00",symbol:Me.state.balanceSymbol||""};const s=(await Me.fetchTokenBalance()).find(i=>i.chainId===`${e.caipNetwork?.chainNamespace}:${e.chainId}`&&i.symbol===e.caipNetwork?.nativeCurrency.symbol);return{balance:s?.quantity.numeric||"0.00",symbol:s?.symbol||e.caipNetwork?.nativeCurrency.symbol||""}}async signMessage(e){const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return Y.state.activeCaipNetwork?.chainNamespace===ne.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:Qn.encode(new TextEncoder().encode(r)),pubkey:s}},Y.state.activeCaipNetwork?.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},Y.state.activeCaipNetwork?.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}emitFirstAvailableConnection(){}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===ne.CHAIN.EVM)try{await r.provider?.request({method:"wallet_switchEthereumChain",params:[{chainId:bi(n.id)}]})}catch(s){if(s.code===ud.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||s.code===ud.ERROR_INVALID_CHAIN_ID||s.code===ud.ERROR_CODE_DEFAULT||s?.data?.originalError?.code===ud.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await r.provider?.request({method:"wallet_addEthereumChain",params:[{chainId:bi(n.id),rpcUrls:[n?.rpcUrls.chainDefault?.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[n.blockExplorers?.default.url]}]})}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){return this.connectors.find(r=>r.type==="WALLET_CONNECT")?.provider}}const yne=["email","socials","swaps","onramp","activity","reownBranding","multiWallet"],Ff={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?At.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?At.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?At.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?At.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?At.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?At.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?At.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?At.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?At.DEFAULT_REMOTE_FEATURES.reownBranding:!!t},multiWallet:{apiFeatureName:"multi_wallet",localFeatureName:"multiWallet",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>At.DEFAULT_REMOTE_FEATURES.multiWallet}},wne={localSettingsOverridden:new Set,getApiConfig(t,e){return e?.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=Ff[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=Ff[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return a?.config===null?this.processFallbackFeature(t,o):a?.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return Ff[t].processApi(e)},processFallbackFeature(t,e){return Ff[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await Ke.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?At.DEFAULT_REMOTE_FEATURES:At.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of yne){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),At.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;Jt.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return i}};class bne{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{if(n){const s=Y.getCaipNetworks(n)?.find(a=>a.id===r);if(s)return s;const i=Y.getNetworkData(n)?.caipNetwork;return i||Y.getRequestedCaipNetworks(n).filter(a=>a.chainNamespace===n)?.[0]}return Y.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>Y.getCaipNetworks(n),this.getActiveChainNamespace=()=>Y.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{Y.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>Y.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>Y.state.activeChain===n||!n?Y.state.activeCaipAddress:Y.getAccountProp("caipAddress",n),this.setClientId=n=>{We.setClientId(n)},this.getProvider=n=>Vt.getProvider(n),this.getProviderType=n=>Vt.getProviderId(n),this.getPreferredAccountType=n=>gr(n),this.setCaipAddress=(n,r)=>{Me.setCaipAddress(n,r)},this.setBalance=(n,r,s)=>{Me.setBalance(n,r,s)},this.setProfileName=(n,r)=>{Me.setProfileName(n,r)},this.setProfileImage=(n,r)=>{Me.setProfileImage(n,r)},this.setUser=(n,r)=>{Me.setUser(n,r)},this.resetAccount=n=>{Me.resetAccount(n)},this.setCaipNetwork=n=>{Y.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{Y.setChainNetworkData(r,{caipNetwork:n})},this.setStatus=(n,r)=>{Me.setStatus(n,r),ve.isConnected()?ye.setConnectionStatus("connected"):ye.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>Y.getAccountProp("address",n),this.setConnectors=n=>{const r=[...ve.state.allConnectors,...n];ve.setConnectors(r)},this.setConnections=(n,r)=>{ye.setConnections(n,r),Ae.setConnections(n,r)},this.fetchIdentity=n=>We.fetchIdentity(n),this.getReownName=n=>fd.getNamesForAddress(n),this.getConnectors=()=>ve.getConnectors(),this.getConnectorImage=n=>hS.getConnectorImage(n),this.getConnections=n=>this.remoteFeatures.multiWallet?Cp.getConnectionsData(n).connections:(Jt.open(ne.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.getRecentConnections=n=>this.remoteFeatures.multiWallet?Cp.getConnectionsData(n).recentConnections:(Jt.open(ne.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.switchConnection=async n=>{if(!this.remoteFeatures.multiWallet){Jt.open(ne.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}await Ae.switchConnection(n)},this.deleteConnection=n=>{if(!this.remoteFeatures.multiWallet){Jt.open(ne.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}ye.deleteAddressFromConnection(n),Ae.syncStorageConnections()},this.setConnectedWalletInfo=(n,r)=>{const s=Vt.getProviderId(r),i=n?{...n,type:s}:void 0;Me.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!Y.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{Me.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{Me.removeAddressLabel(n,r)},this.getAddress=n=>Y.state.activeChain===n||!n?Me.state.address:Y.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>Y.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{Y.resetNetwork(n)},this.addConnector=n=>{ve.addConnector(n)},this.resetWcConnection=()=>{Ae.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{Me.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{Me.setSmartAccountDeployed(n,r)},this.setPreferredAccountType=(n,r)=>{Y.setAccountProp("preferredAccountType",n,r)},this.setEIP6963Enabled=n=>{pe.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e?.map(i=>i.namespace).filter(i=>!!i);if(r?.length)return[...new Set(r)];const s=n?.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),pe.state.enableReconnect?(await this.syncExistingConnection(),await this.syncAdapterConnections()):await this.unSyncExistingConnection(),this.remoteFeatures=await wne.fetchRemoteFeatures(e),pe.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&jw.setOnrampProviders(this.remoteFeatures.onramp),(pe.state.remoteFeatures?.email||Array.isArray(pe.state.remoteFeatures?.socials)&&pe.state.remoteFeatures?.socials.length>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){try{const e=await Ke.fetchAllowedOrigins();if(!e||!ke.isClient()){Jt.open(hn.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}const n=window.location.origin;zs.isOriginAllowed(n,e,ud.DEFAULT_ALLOWED_ANCESTORS)||Jt.open(hn.ALERT_ERRORS.ORIGIN_NOT_ALLOWED,"error")}catch(e){if(!(e instanceof Error)){Jt.open(hn.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}switch(e.message){case"RATE_LIMITED":Jt.open(hn.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{const n=e.cause instanceof Error?e.cause:e;Jt.open({shortMessage:hn.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.shortMessage,longMessage:hn.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.longMessage(n.message)},"error");break}default:Jt.open(hn.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}}}sendInitializeEvent(e){const{...n}=e;delete n.adapters,delete n.universalProvider,Nt.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(r=>r.id),siweConfig:{options:e.siweConfig?.options||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&ns.setThemeMode(e.themeMode),e.themeVariables&&ns.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");Y.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&Y.setActiveCaipNetwork(n)}initializeConnectionController(e){Ae.initialize(e.adapters??[]),Ae.setWcBasic(e.basic??!1)}initializeConnectorController(){ve.initialize(this.chainNamespaces)}initializeProjectSettings(e){pe.setProjectId(e.projectId),pe.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){pe.setDebug(e.debug!==!1),pe.setEnableWalletConnect(e.enableWalletConnect!==!1),pe.setEnableWalletGuide(e.enableWalletGuide!==!1),pe.setEnableWallets(e.enableWallets!==!1),pe.setEIP6963Enabled(e.enableEIP6963!==!1),pe.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),pe.setEnableReconnect(e.enableReconnect!==!1),pe.setEnableAuthLogger(e.enableAuthLogger!==!1),pe.setCustomRpcUrls(e.customRpcUrls),pe.setEnableEmbedded(e.enableEmbedded),pe.setAllWallets(e.allWallets),pe.setIncludeWalletIds(e.includeWalletIds),pe.setExcludeWalletIds(e.excludeWalletIds),pe.setFeaturedWalletIds(e.featuredWalletIds),pe.setTokens(e.tokens),pe.setTermsConditionsUrl(e.termsConditionsUrl),pe.setPrivacyPolicyUrl(e.privacyPolicyUrl),pe.setCustomWallets(e.customWallets),pe.setFeatures(e.features),pe.setAllowUnsupportedChain(e.allowUnsupportedChain),pe.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),pe.setPreferUniversalLinks(e.experimental_preferUniversalLinks),pe.setDefaultAccountTypes(e.defaultAccountTypes);const n=this.getDefaultMetaData();if(!e.metadata&&n&&(e.metadata=n),pe.setMetadata(e.metadata),pe.setDisableAppend(e.disableAppend),pe.setEnableEmbedded(e.enableEmbedded),pe.setSIWX(e.siwx),!e.projectId){Jt.open(hn.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(e.adapters?.find(s=>s.namespace===ne.CHAIN.EVM)&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");pe.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){return ke.isClient()?{name:document.getElementsByTagName("title")?.[0]?.textContent||"",description:document.querySelector('meta[property="og:description"]')?.content||"",url:window.location.origin,icons:[document.querySelector('link[rel~="icon"]')?.href||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=zi.getUnsupportedNetwork(`${n}:${e}`);Y.setActiveCaipNetwork(r)}}getDefaultNetwork(){return zi.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return zi.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return zi.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>s.id===e.defaultNetwork?.id);return n?zi.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e,n){try{this.setLoading(!0,e);let r={connections:[]};const s=this.getAdapter(e),{caipAddress:i}=Y.getAccountData(e)||{};return(i||!pe.state.enableReconnect)&&s?.disconnect&&(r=await s.disconnect({id:n})),this.setLoading(!1,e),r}catch(r){throw this.setLoading(!1,e),new Error(`Failed to disconnect chains: ${r.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{const e=Y.state.activeChain,n=this.getAdapter(e),r=this.getCaipNetwork(e)?.id,s=Ae.getConnections(e),i=this.remoteFeatures.multiWallet,o=s.length>0;if(!n)throw new Error("Adapter not found");const a=await n.connectWalletConnect(r);(!o||!i)&&this.close(),this.setClientId(a?.clientId||null),ye.setConnectedNamespaces([...Y.state.chains.keys()]),await this.syncWalletConnectAccount(),await os.initializeIfEnabled()},connectExternal:async({id:e,address:n,info:r,type:s,provider:i,chain:o,caipNetwork:a,socialUri:c})=>{const u=Y.state.activeChain,l=o||u,d=this.getAdapter(l);if(o&&o!==u&&!a){const y=this.getCaipNetworks().find(m=>m.chainNamespace===o);y&&this.setCaipNetwork(y)}if(!l)throw new Error("connectExternal: namespace not found");if(!d)throw new Error("connectExternal: adapter not found");const h=this.getCaipNetwork(l),f=await d.connect({id:e,address:n,info:r,type:s,provider:i,socialUri:c,chainId:a?.id||h?.id,rpcUrl:a?.rpcUrls?.default?.http?.[0]||h?.rpcUrls?.default?.http?.[0]});if(f)return ye.addConnectedNamespace(l),this.syncProvider({...f,chainNamespace:l}),this.setStatus("connected",l),this.syncConnectedWalletInfo(l),ye.removeDisconnectedConnectorId(e,l),{address:f.address}},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{const i=Y.state.activeChain,o=this.getAdapter(i);if(!i)throw new Error("reconnectExternal: namespace not found");if(!o)throw new Error("reconnectExternal: adapter not found");o?.reconnect&&(await o?.reconnect({id:e,info:n,type:r,provider:s,chainId:this.getCaipNetwork()?.id}),ye.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async e=>{const{id:n,chainNamespace:r,initialDisconnect:s}=e||{},i=r||Y.state.activeChain,o=ve.getConnectorId(i),a=n===ne.CONNECTOR_ID.AUTH||o===ne.CONNECTOR_ID.AUTH,c=n===ne.CONNECTOR_ID.WALLET_CONNECT||o===ne.CONNECTOR_ID.WALLET_CONNECT;try{const u=Array.from(Y.state.chains.keys());let l=r?[r]:u;(c||a)&&(l=u);const d=l.map(async y=>{const m=ve.getConnectorId(y),v=await this.disconnectNamespace(y,n||m);v&&(a&&ye.deleteConnectedSocialProvider(),v.connections.forEach(T=>{ye.addDisconnectedConnectorId(T.connectorId,y)})),s&&this.onDisconnectNamespace({chainNamespace:y,closeModal:!1})}),h=await Promise.allSettled(d);$t.resetSend(),Ae.resetWcConnection(),os.getSIWX()?.signOutOnDisconnect&&await os.clearSessions(),ve.setFilterByNamespace(void 0),Ae.syncStorageConnections();const f=h.filter(y=>y.status==="rejected");if(f.length>0)throw new Error(f.map(y=>y.reason.message).join(", "));Nt.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:r||"all"}})}catch(u){throw new Error(`Failed to disconnect chains: ${u.message}`)}},checkInstalled:e=>e?e.some(n=>!!window.ethereum?.[String(n)]):!!window.ethereum,signMessage:async e=>{const n=Y.state.activeChain,r=this.getAdapter(Y.state.activeChain);if(!n)throw new Error("signMessage: namespace not found");if(!r)throw new Error("signMessage: adapter not found");return(await r?.signMessage({message:e,address:Me.state.address,provider:Vt.getProvider(n)}))?.signature||""},sendTransaction:async e=>{const n=e.chainNamespace;if(!n)throw new Error("sendTransaction: namespace not found");if(At.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(n);if(!r)throw new Error("sendTransaction: adapter not found");const s=Vt.getProvider(n);return(await r?.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}))?.hash||""}return""},estimateGas:async e=>{const n=e.chainNamespace;if(n===ne.CHAIN.EVM){const r=this.getAdapter(n);if(!r)throw new Error("estimateGas: adapter is required but got undefined");const s=Vt.getProvider(n),i=this.getCaipNetwork();if(!i)throw new Error("estimateGas: caipNetwork is required but got undefined");return(await r?.estimateGas({...e,provider:s,caipNetwork:i}))?.gas||0n}return 0n},getEnsAvatar:async()=>{const e=Y.state.activeChain;if(!e)throw new Error("getEnsAvatar: namespace is required but got undefined");return await this.syncIdentity({address:Me.state.address,chainId:Number(this.getCaipNetwork()?.id),chainNamespace:e}),Me.state.profileImage||!1},getEnsAddress:async e=>await zs.resolveReownName(e),writeContract:async e=>{const n=Y.state.activeChain,r=this.getAdapter(n);if(!n)throw new Error("writeContract: namespace is required but got undefined");if(!r)throw new Error("writeContract: adapter is required but got undefined");const s=this.getCaipNetwork(),i=this.getCaipAddress(),o=Vt.getProvider(n);if(!s||!i)throw new Error("writeContract: caipNetwork or caipAddress is required but got undefined");return(await r?.writeContract({...e,caipNetwork:s,provider:o,caipAddress:i}))?.hash},parseUnits:(e,n)=>{const r=this.getAdapter(Y.state.activeChain);if(!r)throw new Error("parseUnits: adapter is required but got undefined");return r?.parseUnits({value:e,decimals:n})??0n},formatUnits:(e,n)=>{const r=this.getAdapter(Y.state.activeChain);if(!r)throw new Error("formatUnits: adapter is required but got undefined");return r?.formatUnits({value:e,decimals:n})??"0"},getCapabilities:async e=>{const n=this.getAdapter(Y.state.activeChain);if(!n)throw new Error("getCapabilities: adapter is required but got undefined");return await n?.getCapabilities(e)},grantPermissions:async e=>{const n=this.getAdapter(Y.state.activeChain);if(!n)throw new Error("grantPermissions: adapter is required but got undefined");return await n?.grantPermissions(e)},revokePermissions:async e=>{const n=this.getAdapter(Y.state.activeChain);if(!n)throw new Error("revokePermissions: adapter is required but got undefined");return n?.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(Y.state.activeChain);if(!n)throw new Error("walletGetAssets: adapter is required but got undefined");return await n?.walletGetAssets(e)??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!Me.state.address||this.updateNativeBalance(Me.state.address,n?.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},Ae.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){if(Vt.getProviderId(Y.state.activeChain)===cn.CONNECTOR_TYPE_WALLET_CONNECT){const n=this.universalProvider?.session?.namespaces;return{supportsAllNetworks:this.universalProvider?.session?.peer?.metadata.name==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(n)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=Vt.getProvider(n),i=Vt.getProviderId(n);if(e.chainNamespace===Y.state.activeChain)await this.getAdapter(n)?.switchNetwork({caipNetwork:e,provider:s,providerType:i});else if(this.setCaipNetwork(e),i===cn.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=Mr.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{const s=e?.find(i=>i.namespace===r);return s?(s.construct({namespace:r,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new mne({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){this.onConnectors(e),this.listenAdapter(e),await this.chainAdapters?.[e].syncConnectors(this.options,this),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){this.getAdapter(e)?.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=ye.getConnectionStatus();pe.state.enableReconnect===!1?this.setStatus("disconnected",e):r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(ye.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(u=>u.id.toString()===i.toString()||u.caipNetworkId.toString()===i.toString()),a=Y.state.activeChain===e,c=Y.getAccountProp("address",e);if(o){const u=a&&s?s:c;u&&this.syncAccount({address:u,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",()=>{this.onDisconnectNamespace({chainNamespace:e})}),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=Me.state.address,i=Y.state.activeCaipNetwork;!s||!i?.id||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i,connector:o})=>{const a=Y.state.activeChain===e;o?.provider&&(this.syncProvider({id:o.id,type:o.type,provider:o.provider,chainNamespace:e}),this.syncConnectedWalletInfo(e)),a&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):a&&Y.state.activeCaipNetwork?.id?this.syncAccount({address:s,chainId:Y.state.activeCaipNetwork?.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),ye.addConnectedNamespace(e)})}async createUniversalProviderForAdapter(e){await this.getUniversalProvider(),this.universalProvider&&await this.chainAdapters?.[e]?.setUniversalProvider?.(this.universalProvider)}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async unSyncExistingConnection(){try{await Promise.allSettled(this.chainNamespaces.map(e=>Ae.disconnect({namespace:e,initialDisconnect:!0})))}catch(e){console.error("Error disconnecting existing connections:",e)}}async syncNamespaceConnection(e){try{e===ne.CHAIN.EVM&&ke.isSafeApp()&&ve.setConnectorId(ne.CONNECTOR_ID.SAFE,e);const n=ve.getConnectorId(e);switch(this.setStatus("connecting",e),n){case ne.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case ne.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}onDisconnectNamespace(e){const{chainNamespace:n,closeModal:r}=e||{};Y.resetAccount(n),Y.resetNetwork(n),ye.removeConnectedNamespace(n);const s=Array.from(Y.state.chains.keys());(n?[n]:s).forEach(o=>ye.addDisconnectedConnectorId(ve.getConnectorId(o)||"",o)),ve.removeConnectorId(n),Vt.resetChain(n),this.setUser(void 0,n),this.setStatus("disconnected",n),this.setConnectedWalletInfo(void 0,n),r!==!1&&Et.close()}async syncAdapterConnections(){await Promise.allSettled(this.chainNamespaces.map(e=>{const n=this.getCaipAddress(e),r=this.getCaipNetwork(e);return this.chainAdapters?.[e].syncConnections({connectToFirstConnector:!n,caipNetwork:r,getConnectorStorageInfo(s){const o=ye.getConnections()[e]??[];return{hasDisconnected:ye.isConnectorDisconnected(s,e),hasConnected:o.some(a=>Dn.isLowerCaseMatch(a.connectorId,s))}}})}))}async syncAdapterConnection(e){const n=this.getAdapter(e),r=ve.getConnectorId(e),s=this.getCaipNetwork(e),o=ve.getConnectors(e).find(a=>a.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!s?.id)throw new Error("CaipNetwork not found");const a=await n?.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:s?.rpcUrls?.default?.http?.[0]});a?(this.syncProvider({...a,chainNamespace:e}),await this.syncAccount({...a,chainNamespace:e}),this.setStatus("connected",e)):this.setStatus("disconnected",e)}catch{this.onDisconnectNamespace({chainNamespace:e,closeModal:!1})}}async syncWalletConnectAccount(){const e=Object.keys(this.universalProvider?.session?.namespaces||{}),n=this.chainNamespaces.map(async r=>{const s=this.getAdapter(r);if(!s)return;const i=this.universalProvider?.session?.namespaces?.[r]?.accounts||[],o=Y.state.activeCaipNetwork?.id,a=i.find(c=>{const{chainId:u}=Mr.parseCaipAddress(c);return u===o?.toString()})||i[0];if(a){const c=Mr.validateCaipAddress(a),{chainId:u,address:l}=Mr.parseCaipAddress(c);if(Vt.setProviderId(r,cn.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&Y.state.activeCaipNetwork&&s.namespace!==ne.CHAIN.EVM){const d=s.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:Y.state.activeCaipNetwork});Vt.setProvider(r,d)}else Vt.setProvider(r,this.universalProvider);ve.setConnectorId(ne.CONNECTOR_ID.WALLET_CONNECT,r),ye.addConnectedNamespace(r),await this.syncAccount({address:l,chainId:u,chainNamespace:r})}else e.includes(r)&&this.setStatus("disconnected",r);this.syncConnectedWalletInfo(r),await Y.setApprovedCaipNetworksData(r)});await Promise.all(n)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){Vt.setProviderId(s,e),Vt.setProvider(s,n),ve.setConnectorId(r,s)}async syncAccount(e){const n=e.chainNamespace===Y.state.activeChain,r=Y.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=ye.getActiveNetworkProps(),c=i||a,u=Y.state.activeCaipNetwork?.name===ne.UNSUPPORTED_NETWORK_NAME,l=Y.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(u&&!l)&&c){let d=this.getCaipNetworks().find(y=>y.id.toString()===c.toString()),h=this.getCaipNetworks().find(y=>y.chainNamespace===o);if(!l&&!d&&!h){const y=this.getApprovedCaipNetworkIds()||[],m=y.find(T=>Mr.parseCaipNetworkId(T)?.chainId===c.toString()),v=y.find(T=>Mr.parseCaipNetworkId(T)?.chainNamespace===o);d=this.getCaipNetworks().find(T=>T.caipNetworkId===m),h=this.getCaipNetworks().find(T=>T.caipNetworkId===v||"deprecatedCaipNetworkId"in T&&T.deprecatedCaipNetworkId===v)}const f=d||h;f?.chainNamespace===Y.state.activeChain?pe.state.enableNetworkSwitch&&!pe.state.allowUnsupportedChain&&Y.state.activeCaipNetwork?.name===ne.UNSUPPORTED_NETWORK_NAME?Y.showUnsupportedChainUI():this.setCaipNetwork(f):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),Dn.isLowerCaseMatch(s,Me.state.address)||this.syncAccountInfo(s,f?.id,o),n?await this.syncBalance({address:s,chainId:f?.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r?.id,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||s?.split(":")[1];if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){const n=ve.getConnectorId(e),r=Vt.getProviderId(e);if(r===cn.CONNECTOR_TYPE_ANNOUNCED||r===cn.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(o=>{const a=o.id===n,c=o.info?.rdns===n,u=o.connectors?.some(l=>l.id===n||l.info?.rdns===n);return a||c||!!u});if(i){const{info:o,name:a,imageUrl:c}=i,u=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:u,...o},e)}}}else if(r===cn.CONNECTOR_TYPE_WALLET_CONNECT){const s=Vt.getProvider(e);s?.session&&this.setConnectedWalletInfo({...s.session.peer.metadata,name:s.session.peer.metadata.name,icon:s.session.peer.metadata.icons?.[0]},e)}else if(n&&(n===ne.CONNECTOR_ID.COINBASE_SDK||n===ne.CONNECTOR_ID.COINBASE)){const s=this.getConnectors().find(c=>c.id===n),i=s?.name||"Coinbase Wallet",o=s?.imageUrl||this.getConnectorImage(s),a=s?.info;this.setConnectedWalletInfo({...a,name:i,icon:o},e)}}async syncBalance(e){!Rd.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>r.id.toString()===e.chainId?.toString())||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=Y.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){const e=gQ.createLogger((r,...s)=>{r&&this.handleAlertError(r),console.error(...s)}),n={projectId:this.options?.projectId,metadata:{name:this.options?.metadata?this.options?.metadata.name:"",description:this.options?.metadata?this.options?.metadata.description:"",url:this.options?.metadata?this.options?.metadata.url:"",icons:this.options?.metadata?this.options?.metadata.icons:[""]},logger:e};pe.setManualWCControl(!!this.options?.manualWCControl),this.universalProvider=this.options.universalProvider??await Ov.init(n),pe.state.enableReconnect===!1&&this.universalProvider.session&&await this.universalProvider.disconnect(),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&this.chainNamespaces.forEach(e=>{zs.listenWcProvider({universalProvider:this.universalProvider,namespace:e,onDisplayUri:n=>{Ae.setUri(n)},onConnect:()=>{Ae.finalizeWcConnection()},onDisconnect:()=>{Y.state.noAdapters&&this.resetAccount(e),Ae.resetWcConnection()},onChainChanged:n=>{const r=Y.state.activeChain,s=r&&ve.state.activeConnectorIds[r]===ne.CONNECTOR_ID.WALLET_CONNECT;if(r===e&&(Y.state.noAdapters||s)){const i=this.getCaipNetworks().find(a=>a.id.toString()===n.toString()||a.caipNetworkId.toString()===n.toString()),o=this.getCaipNetwork();if(!i){this.setUnsupportedNetwork(n);return}o?.id.toString()!==i?.id.toString()&&o?.chainNamespace===i?.chainNamespace&&this.setCaipNetwork(i)}},onAccountsChanged:n=>{const r=Y.state.activeChain,s=r&&ve.state.activeConnectorIds[r]===ne.CONNECTOR_ID.WALLET_CONNECT;if(r===e&&(Y.state.noAdapters||s)&&n.length>0){const i=n[0];this.syncAccount({address:i.address,chainId:i.chainId,chainNamespace:i.chainNamespace})}}})})}createUniversalProvider(){return!this.universalProviderInitPromise&&ke.isClient()&&this.options?.projectId&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){Nt.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(hn.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=hn.ALERT_ERRORS[o];a&&(Jt.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){if(e)return this.chainAdapters?.[e]}createAdapter(e){if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e?.uri&&Ae.setUri(e.uri),e?.arguments)switch(e?.view){case"Swap":return Et.open({...e,data:{swap:e.arguments}})}return Et.open(e)}async close(){await this.injectModalUi(),Et.close()}setLoading(e,n){Et.setLoading(e,n)}async disconnect(e){await Ae.disconnect({namespace:e})}getSIWX(){return pe.state.siwx}getError(){return""}getChainId(){return Y.state.activeCaipNetwork?.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){Jt.open(hn.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await Y.switchActiveNetwork(n)}getWalletProvider(){return Y.state.activeChain?Vt.state.providers[Y.state.activeChain]:null}getWalletProviderType(){return Vt.getProviderId(Y.state.activeChain)}subscribeProviders(e){return Vt.subscribeProviders(e)}getThemeMode(){return ns.state.themeMode}getThemeVariables(){return ns.state.themeVariables}setThemeMode(e){ns.setThemeMode(e),UN(ns.state.themeMode)}setTermsConditionsUrl(e){pe.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){pe.setPrivacyPolicyUrl(e)}setThemeVariables(e){ns.setThemeVariables(e),ine(ns.state.themeVariables)}subscribeTheme(e){return ns.subscribe(e)}subscribeConnections(e){return this.remoteFeatures.multiWallet?Ae.subscribe(e):(Jt.open(ne.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),()=>{})}getWalletInfo(e){return e?Y.getAccountProp("connectedWalletInfo",e):Me.state.connectedWalletInfo}getAccount(e){const n=e||Y.state.activeChain,r=ve.getAuthConnector(n),s=Y.getAccountData(n),i=ye.getConnectedConnectorId(Y.state.activeChain),o=Ae.getConnections(n);if(!n)throw new Error("AppKit:getAccount - namespace is required");const a=o.flatMap(c=>c.accounts.map(({address:u,type:l})=>ke.createAccount(n,u,l||"eoa")));if(s)return{allAccounts:a,caipAddress:s.caipAddress,address:ke.getPlainAddress(s.caipAddress),isConnected:!!s.caipAddress,status:s.status,embeddedWalletInfo:r&&i===ne.CONNECTOR_ID.AUTH?{user:s.user?{...s.user,username:ye.getConnectedSocialUsername()}:void 0,authProvider:s.socialProvider||"email",accountType:gr(n),isSmartAccountDeployed:!!s.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?Y.subscribeChainProp("accountState",r,n):Y.subscribe(r),ve.subscribe(r)}subscribeNetwork(e){return Y.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n?.id,caipNetworkId:n?.caipNetworkId})})}subscribeWalletInfo(e,n){return n?Me.subscribeKey("connectedWalletInfo",e,n):Me.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){Me.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){Y.subscribeKey("activeCaipNetwork",e)}getState(){return li.state}getRemoteFeatures(){return pe.state.remoteFeatures}subscribeState(e){return li.subscribe(e)}subscribeRemoteFeatures(e){return pe.subscribeKey("remoteFeatures",e)}showErrorMessage(e){vn.showError(e)}showSuccessMessage(e){vn.showSuccess(e)}getEvent(){return{...Nt.state}}subscribeEvents(e){return Nt.subscribe(e)}replace(e){Fe.replace(e)}redirect(e){Fe.push(e)}popTransactionStack(e){Fe.popTransactionStack(e)}isOpen(){return Et.state.open}isTransactionStackEmpty(){return Fe.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){pe.setFeatures(e)}updateRemoteFeatures(e){pe.setRemoteFeatures(e)}updateOptions(e){const r={...pe.state||{},...e};pe.setOptions(r)}setConnectMethodsOrder(e){pe.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){pe.setWalletFeaturesOrder(e)}setCollapseWallets(e){pe.setCollapseWallets(e)}setSocialsOrder(e){pe.setSocialsOrder(e)}getConnectMethodsOrder(){return Ub.getConnectOrderMethod(pe.state.features,ve.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||Y.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&Y.removeNetwork(e,n)}}let qA=!1;class Hue extends bne{async onAuthProviderConnected(e){e.message&&e.signature&&e.siwxMessage&&await os.addEmbeddedWalletSession({chainId:e.siwxMessage.chainId,accountAddress:e.address,notBefore:e.siwxMessage.notBefore,statement:e.siwxMessage.statement,resources:e.siwxMessage.resources,requestId:e.siwxMessage.requestId,issuedAt:e.siwxMessage.issuedAt,domain:e.siwxMessage.domain,uri:e.siwxMessage.uri,version:e.siwxMessage.version,nonce:e.siwxMessage.nonce},e.message,e.signature);const n=Y.state.activeChain;if(!n)throw new Error("AppKit:onAuthProviderConnected - namespace is required");const r=n===ne.CHAIN.EVM?`eip155:${e.chainId}:${e.address}`:`${e.chainId}:${e.address}`,s=pe.state.defaultAccountTypes[n],i=gr(n),o=e.preferredAccountType||i||s;Dn.isLowerCaseMatch(e.address,Me.state.address)||this.syncIdentity({address:e.address,chainId:e.chainId,chainNamespace:n}),this.setCaipAddress(r,n);const{signature:a,siwxMessage:c,message:u,...l}=e;this.setUser({...Me.state.user||{},...l},n),this.setSmartAccountDeployed(!!e.smartAccountDeployed,n),this.setPreferredAccountType(o,n),this.setLoading(!1,n)}setupAuthConnectorListeners(e){e.onRpcRequest(n=>{Cs.checkIfRequestExists(n)?Cs.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(An.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(An.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=Cs.checkIfRequestIsSafe(r),i=Me.state.address,o=Y.state.activeCaipNetwork;s||(i&&o?.id&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=Y.state.activeChain;if(!n)throw new Error("AppKit:onNotConnected - namespace is required");ve.getConnectorId(n)===ne.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(this.onAuthProviderConnected.bind(this)),e.onSocialConnected(this.onAuthProviderConnected.bind(this)),e.onSetPreferredAccount(({address:n,type:r})=>{const s=Y.state.activeChain;if(!s)throw new Error("AppKit:onSetPreferredAccount - namespace is required");n&&this.setPreferredAccountType(r,s)})}async syncAuthConnectorTheme(e){if(!e)return;const n=ns.getSnapshot(),r=pe.getSnapshot();await Promise.all([e.syncDappData({metadata:r.metadata,sdkVersion:r.sdkVersion,projectId:r.projectId,sdkType:r.sdkType}),e.syncTheme({themeMode:n.themeMode,themeVariables:n.themeVariables,w3mThemeVariables:xo(n.themeVariables,n.themeMode)})])}async syncAuthConnector(e,n){const r=ne.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n),s=n===Y.state.activeChain;if(!r)return;this.setLoading(!0,n);const i=e.getLoginEmailUsed();this.setLoading(i,n),i&&this.setStatus("connecting",n);const o=e.getEmail(),a=e.getUsername();this.setUser({...Me.state?.user||{},username:a,email:o},n),this.setupAuthConnectorListeners(e);const{isConnected:c}=await e.isConnected();if(await this.syncAuthConnectorTheme(e),n&&r&&s){const u=await e.getSmartAccountEnabledNetworks();Y.setSmartAccountEnabledNetworks(u?.smartAccountEnabledNetworks||[],n),c&&this.connectionControllerClient?.connectExternal?(await this.connectionControllerClient?.connectExternal({id:ne.CONNECTOR_ID.AUTH,info:{name:ne.CONNECTOR_ID.AUTH},type:cn.CONNECTOR_TYPE_AUTH,provider:e,chainId:Y.state.activeCaipNetwork?.id,chain:n}),this.setStatus("connected",n)):ve.getConnectorId(n)===ne.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),ye.removeConnectedNamespace(n))}this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){try{if(!ke.isTelegram())return;const n=ye.getTelegramSocialProvider();if(!n||!ke.isClient())return;const s=new URL(window.location.href).searchParams.get("result_uri");if(!s)return;Me.setSocialProvider(n,e),await this.authProvider?.init();const i=ve.getAuthConnector();n&&i&&(this.setLoading(!0,e),await Ae.connectExternal({id:i.id,type:i.type,socialUri:s},i.chain),ye.setConnectedSocialProvider(n),ye.removeTelegramSocialProvider(),Nt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:n,caipNetworkId:Y.getActiveCaipNetwork()?.caipNetworkId}}))}catch(n){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",n)}try{const n=new URL(window.location.href);n.searchParams.delete("result_uri"),window.history.replaceState({},document.title,n.toString())}catch(n){console.error("tma social login failed",n)}}createAuthProvider(e){if(!ne.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=this.remoteFeatures?.email,s=Array.isArray(this.remoteFeatures?.socials)&&this.remoteFeatures.socials.length>0,i=r||s,a=Dn.getActiveNamespaceConnectedToAuth()||e;!this.authProvider&&this.options?.projectId&&i&&(this.authProvider=wc.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:this.getCaipNetwork(a)?.caipNetworkId,abortController:hn.EmbeddedWalletAbortController,onTimeout:u=>{u==="iframe_load_failed"?Jt.open(hn.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):u==="iframe_request_timeout"?Jt.open(hn.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):u==="unverified_domain"&&Jt.open(hn.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:u=>Y.getActiveCaipNetwork(u)}),li.subscribeOpen(u=>{!u&&this.isTransactionStackEmpty()&&this.authProvider?.rejectRpcRequests()}));const c=e===Y.state.activeChain&&pe.state.enableReconnect;pe.state.enableReconnect===!1?this.syncAuthConnectorTheme(this.authProvider):this.authProvider&&c&&(this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){this.createAuthProvider(e),this.authProvider&&this.chainAdapters?.[e]?.setAuthProvider?.(this.authProvider)}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&Ke.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){if(!e)return;const n=Y.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const o=this.getAdapter(r),a=Vt.getProvider(r),c=Vt.getProviderId(r);await o?.switchNetwork({caipNetwork:e,provider:a,providerType:c}),this.setCaipNetwork(e)}else{const a=Vt.getProviderId(n)===cn.CONNECTOR_TYPE_AUTH,c=Vt.getProviderId(r),u=c===cn.CONNECTOR_TYPE_AUTH,l=ne.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if(!r)throw new Error("AppKit:switchCaipNetwork - networkNamespace is required");if((a&&c===void 0||u)&&l)try{Y.state.activeChain=e.chainNamespace,s?await this.getAdapter(r)?.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:c}):await this.connectionControllerClient?.connectExternal?.({id:ne.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:cn.CONNECTOR_TYPE_AUTH,caipNetwork:e}),this.setCaipNetwork(e)}catch{await this.getAdapter(r)?.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:c})}else if(c===cn.CONNECTOR_TYPE_WALLET_CONNECT){if(!Y.state.noAdapters){const d=this.getAdapter(r),h=Vt.getProvider(r),f=Vt.getProviderId(r);await d?.switchNetwork({caipNetwork:e,provider:h,providerType:f})}this.setCaipNetwork(e),this.syncWalletConnectAccount()}else this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r})}}async initialize(e){await super.initialize(e),this.chainNamespaces?.forEach(n=>{this.createAuthProviderForAdapter(n)}),await this.injectModalUi(),li.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){const s=`${r}:${n}`,i=this.caipNetworks?.find(o=>o.caipNetworkId===s);if(r!==ne.CHAIN.EVM||i?.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:o,avatar:a}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(o,r),this.setProfileImage(a,r)}catch{await this.syncReownName(e,r),n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=Vt.getProviderId(e);if(n===cn.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=ye.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(ke.isClient()&&!qA)try{const e={...At.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),ke.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!pe.state.disableAppend&&!pe.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}qA=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!ke.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(Or(()=>import("./embedded-wallet-D6RqQgWx.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]))),n.email&&r.push(Or(()=>import("./email-BDfQSpmP.js"),__vite__mapDeps([14,1,11,5,10,4,9,15,6,12,13]))),n.socials&&r.push(Or(()=>import("./socials-5og5eXfm.js"),__vite__mapDeps([16,1,17,4,18,19,10,20,9,5,11,21,3,12,22,13]))),n.swaps&&n.swaps.length>0&&r.push(Or(()=>import("./swaps-CdQZGYE2.js"),__vite__mapDeps([23,1,9,5,24,25,22,26,3,10,6,4,12,13]))),e.send&&r.push(Or(()=>import("./send-C9TLTwAW.js"),__vite__mapDeps([27,1,9,5,10,4,18,11,26,3,6,28,29,12,13]))),e.receive&&r.push(Or(()=>import("./receive-D-i9oQLV.js"),__vite__mapDeps([30,1,31,3,21,12,13]))),n.onramp&&n.onramp.length>0&&r.push(Or(()=>import("./onramp-DUYDvF77.js"),__vite__mapDeps([32,1,33,3,5,10,17,4,18,34,11,9,20,6,12,13]))),n.activity&&r.push(Or(()=>import("./transactions-CV5JtzvR.js"),__vite__mapDeps([35,1,36,10,11,3,22,12,13]))),e.pay&&r.push(Or(()=>import("./index-CYC82quD.js"),__vite__mapDeps([37,1,9,5,38,3,10,7,33,29,20,12,13]))),await Promise.all([...r,Or(()=>import("./index-Bu7xlabp.js"),__vite__mapDeps([39,1,3,5,28,10,40,7,33,9,8,38,36,11,22,24,25,29,4,6,15,17,18,19,2,20,31,21,12,34,13])),Or(()=>import("./w3m-modal-CcFW0Fke.js"),__vite__mapDeps([41,1,7,3,10,8,5,25,40,12,13]))])}}const Vue="1.7.16",Zl=Dt({connection:null}),Eu={state:Zl,subscribeKey(t,e){return Nn(Zl,t,e)},subscribe(t){return In(Zl,()=>t(Zl))},setConnection(t){Zl.connection=Oa(t)}};/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Fv=BigInt(0),Fb=BigInt(1);function Dc(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function jf(t){const e=t.toString(16);return e.length&1?"0"+e:e}function MN(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Fv:BigInt("0x"+t)}function gg(t){return MN(pc(t))}function Eh(t){return zr(t),MN(pc(Uint8Array.from(t).reverse()))}function jv(t,e){return Sp(t.toString(16).padStart(e*2,"0"))}function mg(t,e){return jv(t,e).reverse()}function _n(t,e,n){let r;if(typeof e=="string")try{r=Sp(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(Ip(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const Ey=t=>typeof t=="bigint"&&Fv<=t;function vne(t,e,n){return Ey(t)&&Ey(e)&&Ey(n)&&e<=t&&t<n}function Bu(t,e,n,r){if(!vne(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function LN(t){let e;for(e=0;t>Fv;t>>=Fb,e+=1);return e}const rf=t=>(Fb<<BigInt(t))-Fb;function Ene(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=f=>new Uint8Array(f),s=f=>Uint8Array.of(f);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},u=(...f)=>n(o,i,...f),l=(f=r(0))=>{o=u(s(0),f),i=u(),f.length!==0&&(o=u(s(1),f),i=u())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const y=[];for(;f<e;){i=u();const m=i.slice();y.push(m),f+=i.length}return Wi(...y)};return(f,y)=>{c(),l(f);let m;for(;!(m=y(d()));)l();return c(),m}}function sf(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function i0(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const us=BigInt(0),mr=BigInt(1),lc=BigInt(2),FN=BigInt(3),jN=BigInt(4),qN=BigInt(5),_ne=BigInt(7),zN=BigInt(8),Cne=BigInt(9),WN=BigInt(16);function Bn(t,e){const n=t%e;return n>=us?n:e+n}function En(t,e,n){let r=t;for(;e-- >us;)r*=r,r%=n;return r}function zA(t,e){if(t===us)throw new Error("invert: expected non-zero number");if(e<=us)throw new Error("invert: expected positive modulus, got "+e);let n=Bn(t,e),r=e,s=us,i=mr;for(;n!==us;){const a=r/n,c=r%n,u=s-i*a;r=n,n=c,s=i,i=u}if(r!==mr)throw new Error("invert: does not exist");return Bn(s,e)}function qv(t,e,n){if(!t.eql(t.sqr(e),n))throw new Error("Cannot find square root")}function HN(t,e){const n=(t.ORDER+mr)/jN,r=t.pow(e,n);return qv(t,r,e),r}function Ane(t,e){const n=(t.ORDER-qN)/zN,r=t.mul(e,lc),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,lc),s),a=t.mul(i,t.sub(o,t.ONE));return qv(t,a,e),a}function Ine(t){const e=Kc(t),n=VN(t),r=n(e,e.neg(e.ONE)),s=n(e,r),i=n(e,e.neg(r)),o=(t+_ne)/WN;return(a,c)=>{let u=a.pow(c,o),l=a.mul(u,r);const d=a.mul(u,s),h=a.mul(u,i),f=a.eql(a.sqr(l),c),y=a.eql(a.sqr(d),c);u=a.cmov(u,l,f),l=a.cmov(h,d,y);const m=a.eql(a.sqr(l),c),v=a.cmov(u,l,m);return qv(a,v,c),v}}function VN(t){if(t<FN)throw new Error("sqrt is not defined for small field");let e=t-mr,n=0;for(;e%lc===us;)e/=lc,n++;let r=lc;const s=Kc(t);for(;WA(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return HN;let i=s.pow(r,e);const o=(e+mr)/lc;return function(c,u){if(c.is0(u))return u;if(WA(c,u)!==1)throw new Error("Cannot find square root");let l=n,d=c.mul(c.ONE,i),h=c.pow(u,e),f=c.pow(u,o);for(;!c.eql(h,c.ONE);){if(c.is0(h))return c.ZERO;let y=1,m=c.sqr(h);for(;!c.eql(m,c.ONE);)if(y++,m=c.sqr(m),y===l)throw new Error("Cannot find square root");const v=mr<<BigInt(l-y-1),T=c.pow(d,v);l=y,d=c.sqr(T),h=c.mul(h,d),f=c.mul(f,T)}return f}}function Sne(t){return t%jN===FN?HN:t%zN===qN?Ane:t%WN===Cne?Ine(t):VN(t)}const xne=(t,e)=>(Bn(t,e)&mr)===mr,Tne=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Nne(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=Tne.reduce((r,s)=>(r[s]="function",r),e);return sf(t,n),t}function Rne(t,e,n){if(n<us)throw new Error("invalid exponent, negatives unsupported");if(n===us)return t.ONE;if(n===mr)return e;let r=t.ONE,s=e;for(;n>us;)n&mr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=mr;return r}function KN(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function WA(t,e){const n=(t.ORDER-mr)/lc,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function Pne(t,e){e!==void 0&&Xu(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Kc(t,e,n=!1,r={}){if(t<=us)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i,o=!1,a;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const h=e;h.BITS&&(s=h.BITS),h.sqrt&&(i=h.sqrt),typeof h.isLE=="boolean"&&(n=h.isLE),typeof h.modOnDecode=="boolean"&&(o=h.modOnDecode),a=h.allowedLengths}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:c,nByteLength:u}=Pne(t,s);if(u>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let l;const d=Object.freeze({ORDER:t,isLE:n,BITS:c,BYTES:u,MASK:rf(c),ZERO:us,ONE:mr,allowedLengths:a,create:h=>Bn(h,t),isValid:h=>{if(typeof h!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof h);return us<=h&&h<t},is0:h=>h===us,isValidNot0:h=>!d.is0(h)&&d.isValid(h),isOdd:h=>(h&mr)===mr,neg:h=>Bn(-h,t),eql:(h,f)=>h===f,sqr:h=>Bn(h*h,t),add:(h,f)=>Bn(h+f,t),sub:(h,f)=>Bn(h-f,t),mul:(h,f)=>Bn(h*f,t),pow:(h,f)=>Rne(d,h,f),div:(h,f)=>Bn(h*zA(f,t),t),sqrN:h=>h*h,addN:(h,f)=>h+f,subN:(h,f)=>h-f,mulN:(h,f)=>h*f,inv:h=>zA(h,t),sqrt:i||(h=>(l||(l=Sne(t)),l(d,h))),toBytes:h=>n?mg(h,u):jv(h,u),fromBytes:(h,f=!0)=>{if(a){if(!a.includes(h.length)||h.length>u)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+h.length);const m=new Uint8Array(u);m.set(h,n?0:m.length-h.length),h=m}if(h.length!==u)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+h.length);let y=n?Eh(h):gg(h);if(o&&(y=Bn(y,t)),!f&&!d.isValid(y))throw new Error("invalid field element: outside of range 0..ORDER");return y},invertBatch:h=>KN(d,h),cmov:(h,f,y)=>y?f:h});return Object.freeze(d)}function GN(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function YN(t){const e=GN(t);return e+Math.ceil(e/2)}function kne(t,e,n=!1){const r=t.length,s=GN(e),i=YN(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?Eh(t):gg(t),a=Bn(o,e-mr)+mr;return n?mg(a,s):jv(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ul=BigInt(0),dc=BigInt(1);function o0(t,e){const n=e.negate();return t?n:e}function hc(t,e){const n=KN(t.Fp,e.map(r=>r.Z));return e.map((r,s)=>t.fromAffine(r.toAffine(n[s])))}function ZN(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function _y(t,e){ZN(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=rf(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function HA(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=dc);const u=e*r,l=u+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:l,isZero:d,isNeg:h,isNegF:f,offsetF:u}}function One(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function Bne(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const Cy=new WeakMap,JN=new WeakMap;function Ay(t){return JN.get(t)||1}function VA(t){if(t!==ul)throw new Error("invalid wNAF")}class XN{constructor(e,n){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=n}_unsafeLadder(e,n,r=this.ZERO){let s=e;for(;n>ul;)n&dc&&(r=r.add(s)),s=s.double(),n>>=dc;return r}precomputeWindow(e,n){const{windows:r,windowSize:s}=_y(n,this.bits),i=[];let o=e,a=o;for(let c=0;c<r;c++){a=o,i.push(a);for(let u=1;u<s;u++)a=a.add(o),i.push(a);o=a.double()}return i}wNAF(e,n,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const o=_y(e,this.bits);for(let a=0;a<o.windows;a++){const{nextN:c,offset:u,isZero:l,isNeg:d,isNegF:h,offsetF:f}=HA(r,a,o);r=c,l?i=i.add(o0(h,n[f])):s=s.add(o0(d,n[u]))}return VA(r),{p:s,f:i}}wNAFUnsafe(e,n,r,s=this.ZERO){const i=_y(e,this.bits);for(let o=0;o<i.windows&&r!==ul;o++){const{nextN:a,offset:c,isZero:u,isNeg:l}=HA(r,o,i);if(r=a,!u){const d=n[c];s=s.add(l?d.negate():d)}}return VA(r),s}getPrecomputes(e,n,r){let s=Cy.get(n);return s||(s=this.precomputeWindow(n,e),e!==1&&(typeof r=="function"&&(s=r(s)),Cy.set(n,s))),s}cached(e,n,r){const s=Ay(e);return this.wNAF(s,this.getPrecomputes(s,e,r),n)}unsafe(e,n,r,s){const i=Ay(e);return i===1?this._unsafeLadder(e,n,s):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),n,s)}createCache(e,n){ZN(n,this.bits),JN.set(e,n),Cy.delete(e)}hasCache(e){return Ay(e)!==1}}function $ne(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>ul||r>ul;)n&dc&&(i=i.add(s)),r&dc&&(o=o.add(s)),s=s.double(),n>>=dc,r>>=dc;return{p1:i,p2:o}}function QN(t,e,n,r){One(n,t),Bne(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=LN(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=rf(c),l=new Array(Number(u)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){l.fill(o);for(let m=0;m<i;m++){const v=r[m],T=Number(v>>BigInt(f)&u);l[T]=l[T].add(n[m])}let y=o;for(let m=l.length-1,v=o;m>0;m--)v=v.add(l[m]),y=y.add(v);if(h=h.add(y),f!==0)for(let m=0;m<c;m++)h=h.double()}return h}function KA(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Nne(e),e}else return Kc(t)}function e3(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const c=e[a];if(!(typeof c=="bigint"&&c>ul))throw new Error(`CURVE.${a} must be positive bigint`)}const r=KA(e.p,n.Fp),s=KA(e.n,n.Fn),o=["Gx","Gy","a",t==="weierstrass"?"b":"d"];for(const a of o)if(!r.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $i=BigInt(0),jn=BigInt(1),Iy=BigInt(2),Dne=BigInt(8);function Une(t,e,n,r){const s=t.sqr(n),i=t.sqr(r),o=t.add(t.mul(e.a,s),i),a=t.add(t.ONE,t.mul(e.d,t.mul(s,i)));return t.eql(o,a)}function Mne(t,e={}){const{Fp:n,Fn:r}=e3("edwards",t,e),{h:s,n:i}=t;sf(e,{},{uvRatio:"function"});const o=Iy<<BigInt(r.BYTES*8)-jn,a=m=>n.create(m),c=e.uvRatio||((m,v)=>{try{return{isValid:!0,value:n.sqrt(n.div(m,v))}}catch{return{isValid:!1,value:$i}}});if(!Une(n,t,t.Gx,t.Gy))throw new Error("bad curve params: generator point");function u(m,v,T=!1){const O=T?jn:$i;return Bu("coordinate "+m,v,O,o),v}function l(m){if(!(m instanceof f))throw new Error("ExtendedPoint expected")}const d=i0((m,v)=>{const{X:T,Y:O,Z:A}=m,M=m.is0();v==null&&(v=M?Dne:n.inv(A));const P=a(T*v),I=a(O*v),F=n.mul(A,v);if(M)return{x:$i,y:jn};if(F!==jn)throw new Error("invZ was invalid");return{x:P,y:I}}),h=i0(m=>{const{a:v,d:T}=t;if(m.is0())throw new Error("bad point: ZERO");const{X:O,Y:A,Z:M,T:P}=m,I=a(O*O),F=a(A*A),W=a(M*M),D=a(W*W),k=a(I*v),B=a(W*a(k+F)),N=a(D+a(T*a(I*F)));if(B!==N)throw new Error("bad point: equation left != right (1)");const R=a(O*A),p=a(M*P);if(R!==p)throw new Error("bad point: equation left != right (2)");return!0});class f{constructor(v,T,O,A){this.X=u("x",v),this.Y=u("y",T),this.Z=u("z",O,!0),this.T=u("t",A),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(v){return hc(f,v)}static msm(v,T){return QN(f,r,v,T)}_setWindowSize(v){this.precompute(v)}static fromAffine(v){if(v instanceof f)throw new Error("extended point not allowed");const{x:T,y:O}=v||{};return u("x",T),u("y",O),new f(T,O,jn,a(T*O))}precompute(v=8,T=!0){return y.createCache(this,v),T||this.multiply(Iy),this}assertValidity(){h(this)}equals(v){l(v);const{X:T,Y:O,Z:A}=this,{X:M,Y:P,Z:I}=v,F=a(T*I),W=a(M*A),D=a(O*I),k=a(P*A);return F===W&&D===k}is0(){return this.equals(f.ZERO)}negate(){return new f(a(-this.X),this.Y,this.Z,a(-this.T))}double(){const{a:v}=t,{X:T,Y:O,Z:A}=this,M=a(T*T),P=a(O*O),I=a(Iy*a(A*A)),F=a(v*M),W=T+O,D=a(a(W*W)-M-P),k=F+P,B=k-I,N=F-P,R=a(D*B),p=a(k*N),g=a(D*N),w=a(B*k);return new f(R,p,w,g)}add(v){l(v);const{a:T,d:O}=t,{X:A,Y:M,Z:P,T:I}=this,{X:F,Y:W,Z:D,T:k}=v,B=a(A*F),N=a(M*W),R=a(I*O*k),p=a(P*D),g=a((A+M)*(F+W)-B-N),w=p-R,_=p+R,C=a(N-T*B),L=a(g*w),z=a(_*C),q=a(g*C),b=a(w*_);return new f(L,z,b,q)}subtract(v){return this.add(v.negate())}multiply(v){const T=v;Bu("scalar",T,jn,i);const{p:O,f:A}=y.cached(this,T,M=>hc(f,M));return hc(f,[O,A])[0]}multiplyUnsafe(v,T=f.ZERO){const O=v;return Bu("scalar",O,$i,i),O===$i?f.ZERO:this.is0()||O===jn?this:y.unsafe(this,O,A=>hc(f,A),T)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}isTorsionFree(){return y.unsafe(this,i).is0()}toAffine(v){return d(this,v)}clearCofactor(){return s===jn?this:this.multiplyUnsafe(s)}static fromBytes(v,T=!1){return zr(v),f.fromHex(v,T)}static fromHex(v,T=!1){const{d:O,a:A}=t,M=n.BYTES;v=_n("pointHex",v,M),Dc("zip215",T);const P=v.slice(),I=v[M-1];P[M-1]=I&-129;const F=Eh(P),W=T?o:n.ORDER;Bu("pointHex.y",F,$i,W);const D=a(F*F),k=a(D-jn),B=a(O*D-A);let{isValid:N,value:R}=c(k,B);if(!N)throw new Error("Point.fromHex: invalid y coordinate");const p=(R&jn)===jn,g=(I&128)!==0;if(!T&&R===$i&&g)throw new Error("Point.fromHex: x=0 and x_0=1");return g!==p&&(R=a(-R)),f.fromAffine({x:R,y:F})}toBytes(){const{x:v,y:T}=this.toAffine(),O=mg(T,n.BYTES);return O[O.length-1]|=v&jn?128:0,O}toRawBytes(){return this.toBytes()}toHex(){return pc(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}f.BASE=new f(t.Gx,t.Gy,jn,a(t.Gx*t.Gy)),f.ZERO=new f($i,jn,jn,$i),f.Fp=n,f.Fn=r;const y=new XN(f,r.BYTES*8);return f}function Lne(t,e,n){if(typeof e!="function")throw new Error('"hash" function param is required');sf(n,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:r}=n,{BASE:s,Fp:i,Fn:o}=t,a=o.ORDER,c=n.randomBytes||c1,u=n.adjustScalarBytes||(B=>B),l=n.domain||((B,N,R)=>{if(Dc("phflag",R),N.length||R)throw new Error("Contexts/pre-hash are not supported");return B});function d(B){return o.create(B)}function h(B){return d(Eh(B))}function f(B){const N=i.BYTES;B=_n("private key",B,N);const R=_n("hashed private key",e(B),2*N),p=u(R.slice(0,N)),g=R.slice(N,2*N),w=h(p);return{head:p,prefix:g,scalar:w}}function y(B){const{head:N,prefix:R,scalar:p}=f(B),g=s.multiply(p),w=g.toBytes();return{head:N,prefix:R,scalar:p,point:g,pointBytes:w}}function m(B){return y(B).pointBytes}function v(B=Uint8Array.of(),...N){const R=Wi(...N);return h(e(l(R,_n("context",B),!!r)))}function T(B,N,R={}){B=_n("message",B),r&&(B=r(B));const{prefix:p,scalar:g,pointBytes:w}=y(N),_=v(R.context,p,B),C=s.multiply(_).toBytes(),L=v(R.context,C,w,B),z=d(_+L*g);Bu("signature.s",z,$i,a);const q=i.BYTES,b=Wi(C,mg(z,q));return _n("result",b,q*2)}const O={zip215:!0};function A(B,N,R,p=O){const{context:g,zip215:w}=p,_=i.BYTES;B=_n("signature",B,2*_),N=_n("message",N),R=_n("publicKey",R,_),w!==void 0&&Dc("zip215",w),r&&(N=r(N));const C=Eh(B.slice(_,2*_));let L,z,q;try{L=t.fromHex(R,w),z=t.fromHex(B.slice(0,_),w),q=s.multiplyUnsafe(C)}catch{return!1}if(!w&&L.isSmallOrder())return!1;const b=v(g,z.toBytes(),L.toBytes(),N);return z.add(L.multiplyUnsafe(b)).subtract(q).clearCofactor().is0()}s.precompute(8);const M=i.BYTES,P={secret:M,public:M,signature:2*M,seed:M};function I(B=c(P.seed)){return B}const F={getExtendedPublicKey:y,randomSecretKey:I,isValidSecretKey:D,isValidPublicKey:k,randomPrivateKey:I,toMontgomery(B){const{y:N}=t.fromBytes(B),R=M===32;if(!R&&M!==57)throw new Error("only defined for 25519 and 448");const p=R?i.div(jn+N,jn-N):i.div(N-jn,N+jn);return i.toBytes(p)},toMontgomeryPriv(B){zr(B,M);const N=e(B.subarray(0,M));return u(N).subarray(0,M)},precompute(B=8,N=t.BASE){return N.precompute(B,!1)}};function W(B){const N=F.randomSecretKey(B);return{secretKey:N,publicKey:m(N)}}function D(B){try{return!!o.fromBytes(B,!1)}catch{return!1}}function k(B,N){try{return!!t.fromBytes(B,N)}catch{return!1}}return Object.freeze({keygen:W,getPublicKey:m,sign:T,verify:A,utils:F,Point:t,info:{type:"edwards",lengths:P}})}function Fne(t){const e={a:t.a,d:t.d,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=Kc(e.n,t.nBitLength,!0),s={Fp:n,Fn:r,uvRatio:t.uvRatio},i={randomBytes:t.randomBytes,adjustScalarBytes:t.adjustScalarBytes,domain:t.domain,prehash:t.prehash,mapToCurve:t.mapToCurve};return{CURVE:e,curveOpts:s,hash:t.hash,eddsaOpts:i}}function jne(t,e){return Object.assign({},e,{ExtendedPoint:e.Point,CURVE:t})}function qne(t){const{CURVE:e,curveOpts:n,hash:r,eddsaOpts:s}=Fne(t),i=Mne(e,n),o=Lne(i,r,s);return jne(t,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0);const zne=BigInt(1),GA=BigInt(2);BigInt(3);const Wne=BigInt(5),Hne=BigInt(8),yg={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:Hne,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Vne(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=yg.p,a=t*t%i*t%i,c=En(a,GA,i)*a%i,u=En(c,zne,i)*t%i,l=En(u,Wne,i)*u%i,d=En(l,e,i)*l%i,h=En(d,n,i)*d%i,f=En(h,r,i)*h%i,y=En(f,s,i)*f%i,m=En(y,s,i)*f%i,v=En(m,e,i)*l%i;return{pow_p_5_8:En(v,GA,i)*t%i,b2:a}}function Kne(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const YA=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function Gne(t,e){const n=yg.p,r=Bn(e*e*e,n),s=Bn(r*r*e,n),i=Vne(t*s).pow_p_5_8;let o=Bn(t*r*i,n);const a=Bn(e*o*o,n),c=o,u=Bn(o*YA,n),l=a===t,d=a===Bn(-t,n),h=a===Bn(-t*YA,n);return l&&(o=c),(d||h)&&(o=u),xne(o,n)&&(o=Bn(-o,n)),{isValid:l||d,value:o}}const Yne=Kc(yg.p,{isLE:!0}),Zne={...yg,Fp:Yne,hash:SO,adjustScalarBytes:Kne,uvRatio:Gne},of=qne(Zne);var mp={exports:{}},Sy={},ZA;function zv(){return ZA||(ZA=1,function(t){Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var e={},n={};n.byteLength=l,n.toByteArray=h,n.fromByteArray=m;for(var r=[],s=[],i=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=o.length;a<c;++a)r[a]=o[a],s[o.charCodeAt(a)]=a;s[45]=62,s[95]=63;function u(O){var A=O.length;if(A%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var M=O.indexOf("=");M===-1&&(M=A);var P=M===A?0:4-M%4;return[M,P]}function l(O){var A=u(O),M=A[0],P=A[1];return(M+P)*3/4-P}function d(O,A,M){return(A+M)*3/4-M}function h(O){var A,M=u(O),P=M[0],I=M[1],F=new i(d(O,P,I)),W=0,D=I>0?P-4:P,k;for(k=0;k<D;k+=4)A=s[O.charCodeAt(k)]<<18|s[O.charCodeAt(k+1)]<<12|s[O.charCodeAt(k+2)]<<6|s[O.charCodeAt(k+3)],F[W++]=A>>16&255,F[W++]=A>>8&255,F[W++]=A&255;return I===2&&(A=s[O.charCodeAt(k)]<<2|s[O.charCodeAt(k+1)]>>4,F[W++]=A&255),I===1&&(A=s[O.charCodeAt(k)]<<10|s[O.charCodeAt(k+1)]<<4|s[O.charCodeAt(k+2)]>>2,F[W++]=A>>8&255,F[W++]=A&255),F}function f(O){return r[O>>18&63]+r[O>>12&63]+r[O>>6&63]+r[O&63]}function y(O,A,M){for(var P,I=[],F=A;F<M;F+=3)P=(O[F]<<16&16711680)+(O[F+1]<<8&65280)+(O[F+2]&255),I.push(f(P));return I.join("")}function m(O){for(var A,M=O.length,P=M%3,I=[],F=16383,W=0,D=M-P;W<D;W+=F)I.push(y(O,W,W+F>D?D:W+F));return P===1?(A=O[M-1],I.push(r[A>>2]+r[A<<4&63]+"==")):P===2&&(A=(O[M-2]<<8)+O[M-1],I.push(r[A>>10]+r[A>>4&63]+r[A<<2&63]+"=")),I.join("")}var v={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */v.read=function(O,A,M,P,I){var F,W,D=I*8-P-1,k=(1<<D)-1,B=k>>1,N=-7,R=M?I-1:0,p=M?-1:1,g=O[A+R];for(R+=p,F=g&(1<<-N)-1,g>>=-N,N+=D;N>0;F=F*256+O[A+R],R+=p,N-=8);for(W=F&(1<<-N)-1,F>>=-N,N+=P;N>0;W=W*256+O[A+R],R+=p,N-=8);if(F===0)F=1-B;else{if(F===k)return W?NaN:(g?-1:1)*(1/0);W=W+Math.pow(2,P),F=F-B}return(g?-1:1)*W*Math.pow(2,F-P)},v.write=function(O,A,M,P,I,F){var W,D,k,B=F*8-I-1,N=(1<<B)-1,R=N>>1,p=I===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=P?0:F-1,w=P?1:-1,_=A<0||A===0&&1/A<0?1:0;for(A=Math.abs(A),isNaN(A)||A===1/0?(D=isNaN(A)?1:0,W=N):(W=Math.floor(Math.log(A)/Math.LN2),A*(k=Math.pow(2,-W))<1&&(W--,k*=2),W+R>=1?A+=p/k:A+=p*Math.pow(2,1-R),A*k>=2&&(W++,k/=2),W+R>=N?(D=0,W=N):W+R>=1?(D=(A*k-1)*Math.pow(2,I),W=W+R):(D=A*Math.pow(2,R-1)*Math.pow(2,I),W=0));I>=8;O[M+g]=D&255,g+=w,D/=256,I-=8);for(W=W<<I|D,B+=I;B>0;O[M+g]=W&255,g+=w,W/=256,B-=8);O[M+g-w]|=_*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(O){const A=n,M=v,P=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;O.Buffer=N,O.SlowBuffer=E,O.INSPECT_MAX_BYTES=50;const I=2147483647;O.kMaxLength=I;const{Uint8Array:F,ArrayBuffer:W,SharedArrayBuffer:D}=globalThis;N.TYPED_ARRAY_SUPPORT=k(),!N.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function k(){try{const G=new F(1),x={foo:function(){return 42}};return Object.setPrototypeOf(x,F.prototype),Object.setPrototypeOf(G,x),G.foo()===42}catch{return!1}}Object.defineProperty(N.prototype,"parent",{enumerable:!0,get:function(){if(N.isBuffer(this))return this.buffer}}),Object.defineProperty(N.prototype,"offset",{enumerable:!0,get:function(){if(N.isBuffer(this))return this.byteOffset}});function B(G){if(G>I)throw new RangeError('The value "'+G+'" is invalid for option "size"');const x=new F(G);return Object.setPrototypeOf(x,N.prototype),x}function N(G,x,U){if(typeof G=="number"){if(typeof x=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(G)}return R(G,x,U)}N.poolSize=8192;function R(G,x,U){if(typeof G=="string")return _(G,x);if(W.isView(G))return L(G);if(G==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof G);if(gs(G,W)||G&&gs(G.buffer,W)||typeof D<"u"&&(gs(G,D)||G&&gs(G.buffer,D)))return z(G,x,U);if(typeof G=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const J=G.valueOf&&G.valueOf();if(J!=null&&J!==G)return N.from(J,x,U);const te=q(G);if(te)return te;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof G[Symbol.toPrimitive]=="function")return N.from(G[Symbol.toPrimitive]("string"),x,U);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof G)}N.from=function(G,x,U){return R(G,x,U)},Object.setPrototypeOf(N.prototype,F.prototype),Object.setPrototypeOf(N,F);function p(G){if(typeof G!="number")throw new TypeError('"size" argument must be of type number');if(G<0)throw new RangeError('The value "'+G+'" is invalid for option "size"')}function g(G,x,U){return p(G),G<=0?B(G):x!==void 0?typeof U=="string"?B(G).fill(x,U):B(G).fill(x):B(G)}N.alloc=function(G,x,U){return g(G,x,U)};function w(G){return p(G),B(G<0?0:b(G)|0)}N.allocUnsafe=function(G){return w(G)},N.allocUnsafeSlow=function(G){return w(G)};function _(G,x){if((typeof x!="string"||x==="")&&(x="utf8"),!N.isEncoding(x))throw new TypeError("Unknown encoding: "+x);const U=j(G,x)|0;let J=B(U);const te=J.write(G,x);return te!==U&&(J=J.slice(0,te)),J}function C(G){const x=G.length<0?0:b(G.length)|0,U=B(x);for(let J=0;J<x;J+=1)U[J]=G[J]&255;return U}function L(G){if(gs(G,F)){const x=new F(G);return z(x.buffer,x.byteOffset,x.byteLength)}return C(G)}function z(G,x,U){if(x<0||G.byteLength<x)throw new RangeError('"offset" is outside of buffer bounds');if(G.byteLength<x+(U||0))throw new RangeError('"length" is outside of buffer bounds');let J;return x===void 0&&U===void 0?J=new F(G):U===void 0?J=new F(G,x):J=new F(G,x,U),Object.setPrototypeOf(J,N.prototype),J}function q(G){if(N.isBuffer(G)){const x=b(G.length)|0,U=B(x);return U.length===0||G.copy(U,0,0,x),U}if(G.length!==void 0)return typeof G.length!="number"||un(G.length)?B(0):C(G);if(G.type==="Buffer"&&Array.isArray(G.data))return C(G.data)}function b(G){if(G>=I)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+I.toString(16)+" bytes");return G|0}function E(G){return+G!=G&&(G=0),N.alloc(+G)}N.isBuffer=function(x){return x!=null&&x._isBuffer===!0&&x!==N.prototype},N.compare=function(x,U){if(gs(x,F)&&(x=N.from(x,x.offset,x.byteLength)),gs(U,F)&&(U=N.from(U,U.offset,U.byteLength)),!N.isBuffer(x)||!N.isBuffer(U))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(x===U)return 0;let J=x.length,te=U.length;for(let ie=0,le=Math.min(J,te);ie<le;++ie)if(x[ie]!==U[ie]){J=x[ie],te=U[ie];break}return J<te?-1:te<J?1:0},N.isEncoding=function(x){switch(String(x).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},N.concat=function(x,U){if(!Array.isArray(x))throw new TypeError('"list" argument must be an Array of Buffers');if(x.length===0)return N.alloc(0);let J;if(U===void 0)for(U=0,J=0;J<x.length;++J)U+=x[J].length;const te=N.allocUnsafe(U);let ie=0;for(J=0;J<x.length;++J){let le=x[J];if(gs(le,F))ie+le.length>te.length?(N.isBuffer(le)||(le=N.from(le)),le.copy(te,ie)):F.prototype.set.call(te,le,ie);else if(N.isBuffer(le))le.copy(te,ie);else throw new TypeError('"list" argument must be an Array of Buffers');ie+=le.length}return te};function j(G,x){if(N.isBuffer(G))return G.length;if(W.isView(G)||gs(G,W))return G.byteLength;if(typeof G!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof G);const U=G.length,J=arguments.length>2&&arguments[2]===!0;if(!J&&U===0)return 0;let te=!1;for(;;)switch(x){case"ascii":case"latin1":case"binary":return U;case"utf8":case"utf-8":return tt(G).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U*2;case"hex":return U>>>1;case"base64":return Ze(G).length;default:if(te)return J?-1:tt(G).length;x=(""+x).toLowerCase(),te=!0}}N.byteLength=j;function K(G,x,U){let J=!1;if((x===void 0||x<0)&&(x=0),x>this.length||((U===void 0||U>this.length)&&(U=this.length),U<=0)||(U>>>=0,x>>>=0,U<=x))return"";for(G||(G="utf8");;)switch(G){case"hex":return Ft(this,x,U);case"utf8":case"utf-8":return ht(this,x,U);case"ascii":return Xt(this,x,U);case"latin1":case"binary":return ro(this,x,U);case"base64":return dt(this,x,U);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Wt(this,x,U);default:if(J)throw new TypeError("Unknown encoding: "+G);G=(G+"").toLowerCase(),J=!0}}N.prototype._isBuffer=!0;function X(G,x,U){const J=G[x];G[x]=G[U],G[U]=J}N.prototype.swap16=function(){const x=this.length;if(x%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let U=0;U<x;U+=2)X(this,U,U+1);return this},N.prototype.swap32=function(){const x=this.length;if(x%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let U=0;U<x;U+=4)X(this,U,U+3),X(this,U+1,U+2);return this},N.prototype.swap64=function(){const x=this.length;if(x%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let U=0;U<x;U+=8)X(this,U,U+7),X(this,U+1,U+6),X(this,U+2,U+5),X(this,U+3,U+4);return this},N.prototype.toString=function(){const x=this.length;return x===0?"":arguments.length===0?ht(this,0,x):K.apply(this,arguments)},N.prototype.toLocaleString=N.prototype.toString,N.prototype.equals=function(x){if(!N.isBuffer(x))throw new TypeError("Argument must be a Buffer");return this===x?!0:N.compare(this,x)===0},N.prototype.inspect=function(){let x="";const U=O.INSPECT_MAX_BYTES;return x=this.toString("hex",0,U).replace(/(.{2})/g,"$1 ").trim(),this.length>U&&(x+=" ... "),"<Buffer "+x+">"},P&&(N.prototype[P]=N.prototype.inspect),N.prototype.compare=function(x,U,J,te,ie){if(gs(x,F)&&(x=N.from(x,x.offset,x.byteLength)),!N.isBuffer(x))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof x);if(U===void 0&&(U=0),J===void 0&&(J=x?x.length:0),te===void 0&&(te=0),ie===void 0&&(ie=this.length),U<0||J>x.length||te<0||ie>this.length)throw new RangeError("out of range index");if(te>=ie&&U>=J)return 0;if(te>=ie)return-1;if(U>=J)return 1;if(U>>>=0,J>>>=0,te>>>=0,ie>>>=0,this===x)return 0;let le=ie-te,ft=J-U;const ot=Math.min(le,ft),st=this.slice(te,ie),sn=x.slice(U,J);for(let et=0;et<ot;++et)if(st[et]!==sn[et]){le=st[et],ft=sn[et];break}return le<ft?-1:ft<le?1:0};function re(G,x,U,J,te){if(G.length===0)return-1;if(typeof U=="string"?(J=U,U=0):U>2147483647?U=2147483647:U<-2147483648&&(U=-2147483648),U=+U,un(U)&&(U=te?0:G.length-1),U<0&&(U=G.length+U),U>=G.length){if(te)return-1;U=G.length-1}else if(U<0)if(te)U=0;else return-1;if(typeof x=="string"&&(x=N.from(x,J)),N.isBuffer(x))return x.length===0?-1:de(G,x,U,J,te);if(typeof x=="number")return x=x&255,typeof F.prototype.indexOf=="function"?te?F.prototype.indexOf.call(G,x,U):F.prototype.lastIndexOf.call(G,x,U):de(G,[x],U,J,te);throw new TypeError("val must be string, number or Buffer")}function de(G,x,U,J,te){let ie=1,le=G.length,ft=x.length;if(J!==void 0&&(J=String(J).toLowerCase(),J==="ucs2"||J==="ucs-2"||J==="utf16le"||J==="utf-16le")){if(G.length<2||x.length<2)return-1;ie=2,le/=2,ft/=2,U/=2}function ot(sn,et){return ie===1?sn[et]:sn.readUInt16BE(et*ie)}let st;if(te){let sn=-1;for(st=U;st<le;st++)if(ot(G,st)===ot(x,sn===-1?0:st-sn)){if(sn===-1&&(sn=st),st-sn+1===ft)return sn*ie}else sn!==-1&&(st-=st-sn),sn=-1}else for(U+ft>le&&(U=le-ft),st=U;st>=0;st--){let sn=!0;for(let et=0;et<ft;et++)if(ot(G,st+et)!==ot(x,et)){sn=!1;break}if(sn)return st}return-1}N.prototype.includes=function(x,U,J){return this.indexOf(x,U,J)!==-1},N.prototype.indexOf=function(x,U,J){return re(this,x,U,J,!0)},N.prototype.lastIndexOf=function(x,U,J){return re(this,x,U,J,!1)};function he(G,x,U,J){U=Number(U)||0;const te=G.length-U;J?(J=Number(J),J>te&&(J=te)):J=te;const ie=x.length;J>ie/2&&(J=ie/2);let le;for(le=0;le<J;++le){const ft=parseInt(x.substr(le*2,2),16);if(un(ft))return le;G[U+le]=ft}return le}function Oe(G,x,U,J){return rn(tt(x,G.length-U),G,U,J)}function Re(G,x,U,J){return rn(nt(x),G,U,J)}function Ve(G,x,U,J){return rn(Ze(x),G,U,J)}function kt(G,x,U,J){return rn(Gt(x,G.length-U),G,U,J)}N.prototype.write=function(x,U,J,te){if(U===void 0)te="utf8",J=this.length,U=0;else if(J===void 0&&typeof U=="string")te=U,J=this.length,U=0;else if(isFinite(U))U=U>>>0,isFinite(J)?(J=J>>>0,te===void 0&&(te="utf8")):(te=J,J=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ie=this.length-U;if((J===void 0||J>ie)&&(J=ie),x.length>0&&(J<0||U<0)||U>this.length)throw new RangeError("Attempt to write outside buffer bounds");te||(te="utf8");let le=!1;for(;;)switch(te){case"hex":return he(this,x,U,J);case"utf8":case"utf-8":return Oe(this,x,U,J);case"ascii":case"latin1":case"binary":return Re(this,x,U,J);case"base64":return Ve(this,x,U,J);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return kt(this,x,U,J);default:if(le)throw new TypeError("Unknown encoding: "+te);te=(""+te).toLowerCase(),le=!0}},N.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function dt(G,x,U){return x===0&&U===G.length?A.fromByteArray(G):A.fromByteArray(G.slice(x,U))}function ht(G,x,U){U=Math.min(G.length,U);const J=[];let te=x;for(;te<U;){const ie=G[te];let le=null,ft=ie>239?4:ie>223?3:ie>191?2:1;if(te+ft<=U){let ot,st,sn,et;switch(ft){case 1:ie<128&&(le=ie);break;case 2:ot=G[te+1],(ot&192)===128&&(et=(ie&31)<<6|ot&63,et>127&&(le=et));break;case 3:ot=G[te+1],st=G[te+2],(ot&192)===128&&(st&192)===128&&(et=(ie&15)<<12|(ot&63)<<6|st&63,et>2047&&(et<55296||et>57343)&&(le=et));break;case 4:ot=G[te+1],st=G[te+2],sn=G[te+3],(ot&192)===128&&(st&192)===128&&(sn&192)===128&&(et=(ie&15)<<18|(ot&63)<<12|(st&63)<<6|sn&63,et>65535&&et<1114112&&(le=et))}}le===null?(le=65533,ft=1):le>65535&&(le-=65536,J.push(le>>>10&1023|55296),le=56320|le&1023),J.push(le),te+=ft}return Ut(J)}const nr=4096;function Ut(G){const x=G.length;if(x<=nr)return String.fromCharCode.apply(String,G);let U="",J=0;for(;J<x;)U+=String.fromCharCode.apply(String,G.slice(J,J+=nr));return U}function Xt(G,x,U){let J="";U=Math.min(G.length,U);for(let te=x;te<U;++te)J+=String.fromCharCode(G[te]&127);return J}function ro(G,x,U){let J="";U=Math.min(G.length,U);for(let te=x;te<U;++te)J+=String.fromCharCode(G[te]);return J}function Ft(G,x,U){const J=G.length;(!x||x<0)&&(x=0),(!U||U<0||U>J)&&(U=J);let te="";for(let ie=x;ie<U;++ie)te+=yn[G[ie]];return te}function Wt(G,x,U){const J=G.slice(x,U);let te="";for(let ie=0;ie<J.length-1;ie+=2)te+=String.fromCharCode(J[ie]+J[ie+1]*256);return te}N.prototype.slice=function(x,U){const J=this.length;x=~~x,U=U===void 0?J:~~U,x<0?(x+=J,x<0&&(x=0)):x>J&&(x=J),U<0?(U+=J,U<0&&(U=0)):U>J&&(U=J),U<x&&(U=x);const te=this.subarray(x,U);return Object.setPrototypeOf(te,N.prototype),te};function Qt(G,x,U){if(G%1!==0||G<0)throw new RangeError("offset is not uint");if(G+x>U)throw new RangeError("Trying to access beyond buffer length")}N.prototype.readUintLE=N.prototype.readUIntLE=function(x,U,J){x=x>>>0,U=U>>>0,J||Qt(x,U,this.length);let te=this[x],ie=1,le=0;for(;++le<U&&(ie*=256);)te+=this[x+le]*ie;return te},N.prototype.readUintBE=N.prototype.readUIntBE=function(x,U,J){x=x>>>0,U=U>>>0,J||Qt(x,U,this.length);let te=this[x+--U],ie=1;for(;U>0&&(ie*=256);)te+=this[x+--U]*ie;return te},N.prototype.readUint8=N.prototype.readUInt8=function(x,U){return x=x>>>0,U||Qt(x,1,this.length),this[x]},N.prototype.readUint16LE=N.prototype.readUInt16LE=function(x,U){return x=x>>>0,U||Qt(x,2,this.length),this[x]|this[x+1]<<8},N.prototype.readUint16BE=N.prototype.readUInt16BE=function(x,U){return x=x>>>0,U||Qt(x,2,this.length),this[x]<<8|this[x+1]},N.prototype.readUint32LE=N.prototype.readUInt32LE=function(x,U){return x=x>>>0,U||Qt(x,4,this.length),(this[x]|this[x+1]<<8|this[x+2]<<16)+this[x+3]*16777216},N.prototype.readUint32BE=N.prototype.readUInt32BE=function(x,U){return x=x>>>0,U||Qt(x,4,this.length),this[x]*16777216+(this[x+1]<<16|this[x+2]<<8|this[x+3])},N.prototype.readBigUInt64LE=ti(function(x){x=x>>>0,ee(x,"offset");const U=this[x],J=this[x+7];(U===void 0||J===void 0)&&se(x,this.length-8);const te=U+this[++x]*2**8+this[++x]*2**16+this[++x]*2**24,ie=this[++x]+this[++x]*2**8+this[++x]*2**16+J*2**24;return BigInt(te)+(BigInt(ie)<<BigInt(32))}),N.prototype.readBigUInt64BE=ti(function(x){x=x>>>0,ee(x,"offset");const U=this[x],J=this[x+7];(U===void 0||J===void 0)&&se(x,this.length-8);const te=U*2**24+this[++x]*2**16+this[++x]*2**8+this[++x],ie=this[++x]*2**24+this[++x]*2**16+this[++x]*2**8+J;return(BigInt(te)<<BigInt(32))+BigInt(ie)}),N.prototype.readIntLE=function(x,U,J){x=x>>>0,U=U>>>0,J||Qt(x,U,this.length);let te=this[x],ie=1,le=0;for(;++le<U&&(ie*=256);)te+=this[x+le]*ie;return ie*=128,te>=ie&&(te-=Math.pow(2,8*U)),te},N.prototype.readIntBE=function(x,U,J){x=x>>>0,U=U>>>0,J||Qt(x,U,this.length);let te=U,ie=1,le=this[x+--te];for(;te>0&&(ie*=256);)le+=this[x+--te]*ie;return ie*=128,le>=ie&&(le-=Math.pow(2,8*U)),le},N.prototype.readInt8=function(x,U){return x=x>>>0,U||Qt(x,1,this.length),this[x]&128?(255-this[x]+1)*-1:this[x]},N.prototype.readInt16LE=function(x,U){x=x>>>0,U||Qt(x,2,this.length);const J=this[x]|this[x+1]<<8;return J&32768?J|4294901760:J},N.prototype.readInt16BE=function(x,U){x=x>>>0,U||Qt(x,2,this.length);const J=this[x+1]|this[x]<<8;return J&32768?J|4294901760:J},N.prototype.readInt32LE=function(x,U){return x=x>>>0,U||Qt(x,4,this.length),this[x]|this[x+1]<<8|this[x+2]<<16|this[x+3]<<24},N.prototype.readInt32BE=function(x,U){return x=x>>>0,U||Qt(x,4,this.length),this[x]<<24|this[x+1]<<16|this[x+2]<<8|this[x+3]},N.prototype.readBigInt64LE=ti(function(x){x=x>>>0,ee(x,"offset");const U=this[x],J=this[x+7];(U===void 0||J===void 0)&&se(x,this.length-8);const te=this[x+4]+this[x+5]*2**8+this[x+6]*2**16+(J<<24);return(BigInt(te)<<BigInt(32))+BigInt(U+this[++x]*2**8+this[++x]*2**16+this[++x]*2**24)}),N.prototype.readBigInt64BE=ti(function(x){x=x>>>0,ee(x,"offset");const U=this[x],J=this[x+7];(U===void 0||J===void 0)&&se(x,this.length-8);const te=(U<<24)+this[++x]*2**16+this[++x]*2**8+this[++x];return(BigInt(te)<<BigInt(32))+BigInt(this[++x]*2**24+this[++x]*2**16+this[++x]*2**8+J)}),N.prototype.readFloatLE=function(x,U){return x=x>>>0,U||Qt(x,4,this.length),M.read(this,x,!0,23,4)},N.prototype.readFloatBE=function(x,U){return x=x>>>0,U||Qt(x,4,this.length),M.read(this,x,!1,23,4)},N.prototype.readDoubleLE=function(x,U){return x=x>>>0,U||Qt(x,8,this.length),M.read(this,x,!0,52,8)},N.prototype.readDoubleBE=function(x,U){return x=x>>>0,U||Qt(x,8,this.length),M.read(this,x,!1,52,8)};function lt(G,x,U,J,te,ie){if(!N.isBuffer(G))throw new TypeError('"buffer" argument must be a Buffer instance');if(x>te||x<ie)throw new RangeError('"value" argument is out of bounds');if(U+J>G.length)throw new RangeError("Index out of range")}N.prototype.writeUintLE=N.prototype.writeUIntLE=function(x,U,J,te){if(x=+x,U=U>>>0,J=J>>>0,!te){const ft=Math.pow(2,8*J)-1;lt(this,x,U,J,ft,0)}let ie=1,le=0;for(this[U]=x&255;++le<J&&(ie*=256);)this[U+le]=x/ie&255;return U+J},N.prototype.writeUintBE=N.prototype.writeUIntBE=function(x,U,J,te){if(x=+x,U=U>>>0,J=J>>>0,!te){const ft=Math.pow(2,8*J)-1;lt(this,x,U,J,ft,0)}let ie=J-1,le=1;for(this[U+ie]=x&255;--ie>=0&&(le*=256);)this[U+ie]=x/le&255;return U+J},N.prototype.writeUint8=N.prototype.writeUInt8=function(x,U,J){return x=+x,U=U>>>0,J||lt(this,x,U,1,255,0),this[U]=x&255,U+1},N.prototype.writeUint16LE=N.prototype.writeUInt16LE=function(x,U,J){return x=+x,U=U>>>0,J||lt(this,x,U,2,65535,0),this[U]=x&255,this[U+1]=x>>>8,U+2},N.prototype.writeUint16BE=N.prototype.writeUInt16BE=function(x,U,J){return x=+x,U=U>>>0,J||lt(this,x,U,2,65535,0),this[U]=x>>>8,this[U+1]=x&255,U+2},N.prototype.writeUint32LE=N.prototype.writeUInt32LE=function(x,U,J){return x=+x,U=U>>>0,J||lt(this,x,U,4,4294967295,0),this[U+3]=x>>>24,this[U+2]=x>>>16,this[U+1]=x>>>8,this[U]=x&255,U+4},N.prototype.writeUint32BE=N.prototype.writeUInt32BE=function(x,U,J){return x=+x,U=U>>>0,J||lt(this,x,U,4,4294967295,0),this[U]=x>>>24,this[U+1]=x>>>16,this[U+2]=x>>>8,this[U+3]=x&255,U+4};function Ot(G,x,U,J,te){Z(x,J,te,G,U,7);let ie=Number(x&BigInt(4294967295));G[U++]=ie,ie=ie>>8,G[U++]=ie,ie=ie>>8,G[U++]=ie,ie=ie>>8,G[U++]=ie;let le=Number(x>>BigInt(32)&BigInt(4294967295));return G[U++]=le,le=le>>8,G[U++]=le,le=le>>8,G[U++]=le,le=le>>8,G[U++]=le,U}function Mn(G,x,U,J,te){Z(x,J,te,G,U,7);let ie=Number(x&BigInt(4294967295));G[U+7]=ie,ie=ie>>8,G[U+6]=ie,ie=ie>>8,G[U+5]=ie,ie=ie>>8,G[U+4]=ie;let le=Number(x>>BigInt(32)&BigInt(4294967295));return G[U+3]=le,le=le>>8,G[U+2]=le,le=le>>8,G[U+1]=le,le=le>>8,G[U]=le,U+8}N.prototype.writeBigUInt64LE=ti(function(x,U=0){return Ot(this,x,U,BigInt(0),BigInt("0xffffffffffffffff"))}),N.prototype.writeBigUInt64BE=ti(function(x,U=0){return Mn(this,x,U,BigInt(0),BigInt("0xffffffffffffffff"))}),N.prototype.writeIntLE=function(x,U,J,te){if(x=+x,U=U>>>0,!te){const ot=Math.pow(2,8*J-1);lt(this,x,U,J,ot-1,-ot)}let ie=0,le=1,ft=0;for(this[U]=x&255;++ie<J&&(le*=256);)x<0&&ft===0&&this[U+ie-1]!==0&&(ft=1),this[U+ie]=(x/le>>0)-ft&255;return U+J},N.prototype.writeIntBE=function(x,U,J,te){if(x=+x,U=U>>>0,!te){const ot=Math.pow(2,8*J-1);lt(this,x,U,J,ot-1,-ot)}let ie=J-1,le=1,ft=0;for(this[U+ie]=x&255;--ie>=0&&(le*=256);)x<0&&ft===0&&this[U+ie+1]!==0&&(ft=1),this[U+ie]=(x/le>>0)-ft&255;return U+J},N.prototype.writeInt8=function(x,U,J){return x=+x,U=U>>>0,J||lt(this,x,U,1,127,-128),x<0&&(x=255+x+1),this[U]=x&255,U+1},N.prototype.writeInt16LE=function(x,U,J){return x=+x,U=U>>>0,J||lt(this,x,U,2,32767,-32768),this[U]=x&255,this[U+1]=x>>>8,U+2},N.prototype.writeInt16BE=function(x,U,J){return x=+x,U=U>>>0,J||lt(this,x,U,2,32767,-32768),this[U]=x>>>8,this[U+1]=x&255,U+2},N.prototype.writeInt32LE=function(x,U,J){return x=+x,U=U>>>0,J||lt(this,x,U,4,2147483647,-2147483648),this[U]=x&255,this[U+1]=x>>>8,this[U+2]=x>>>16,this[U+3]=x>>>24,U+4},N.prototype.writeInt32BE=function(x,U,J){return x=+x,U=U>>>0,J||lt(this,x,U,4,2147483647,-2147483648),x<0&&(x=4294967295+x+1),this[U]=x>>>24,this[U+1]=x>>>16,this[U+2]=x>>>8,this[U+3]=x&255,U+4},N.prototype.writeBigInt64LE=ti(function(x,U=0){return Ot(this,x,U,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),N.prototype.writeBigInt64BE=ti(function(x,U=0){return Mn(this,x,U,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Mt(G,x,U,J,te,ie){if(U+J>G.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("Index out of range")}function Kt(G,x,U,J,te){return x=+x,U=U>>>0,te||Mt(G,x,U,4),M.write(G,x,U,J,23,4),U+4}N.prototype.writeFloatLE=function(x,U,J){return Kt(this,x,U,!0,J)},N.prototype.writeFloatBE=function(x,U,J){return Kt(this,x,U,!1,J)};function Er(G,x,U,J,te){return x=+x,U=U>>>0,te||Mt(G,x,U,8),M.write(G,x,U,J,52,8),U+8}N.prototype.writeDoubleLE=function(x,U,J){return Er(this,x,U,!0,J)},N.prototype.writeDoubleBE=function(x,U,J){return Er(this,x,U,!1,J)},N.prototype.copy=function(x,U,J,te){if(!N.isBuffer(x))throw new TypeError("argument should be a Buffer");if(J||(J=0),!te&&te!==0&&(te=this.length),U>=x.length&&(U=x.length),U||(U=0),te>0&&te<J&&(te=J),te===J||x.length===0||this.length===0)return 0;if(U<0)throw new RangeError("targetStart out of bounds");if(J<0||J>=this.length)throw new RangeError("Index out of range");if(te<0)throw new RangeError("sourceEnd out of bounds");te>this.length&&(te=this.length),x.length-U<te-J&&(te=x.length-U+J);const ie=te-J;return this===x&&typeof F.prototype.copyWithin=="function"?this.copyWithin(U,J,te):F.prototype.set.call(x,this.subarray(J,te),U),ie},N.prototype.fill=function(x,U,J,te){if(typeof x=="string"){if(typeof U=="string"?(te=U,U=0,J=this.length):typeof J=="string"&&(te=J,J=this.length),te!==void 0&&typeof te!="string")throw new TypeError("encoding must be a string");if(typeof te=="string"&&!N.isEncoding(te))throw new TypeError("Unknown encoding: "+te);if(x.length===1){const le=x.charCodeAt(0);(te==="utf8"&&le<128||te==="latin1")&&(x=le)}}else typeof x=="number"?x=x&255:typeof x=="boolean"&&(x=Number(x));if(U<0||this.length<U||this.length<J)throw new RangeError("Out of range index");if(J<=U)return this;U=U>>>0,J=J===void 0?this.length:J>>>0,x||(x=0);let ie;if(typeof x=="number")for(ie=U;ie<J;++ie)this[ie]=x;else{const le=N.isBuffer(x)?x:N.from(x,te),ft=le.length;if(ft===0)throw new TypeError('The value "'+x+'" is invalid for argument "value"');for(ie=0;ie<J-U;++ie)this[ie+U]=le[ie%ft]}return this};const Bt={};function H(G,x,U){Bt[G]=class extends U{constructor(){super(),Object.defineProperty(this,"message",{value:x.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${G}]`,this.stack,delete this.name}get code(){return G}set code(te){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:te,writable:!0})}toString(){return`${this.name} [${G}]: ${this.message}`}}}H("ERR_BUFFER_OUT_OF_BOUNDS",function(G){return G?`${G} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),H("ERR_INVALID_ARG_TYPE",function(G,x){return`The "${G}" argument must be of type number. Received type ${typeof x}`},TypeError),H("ERR_OUT_OF_RANGE",function(G,x,U){let J=`The value of "${G}" is out of range.`,te=U;return Number.isInteger(U)&&Math.abs(U)>2**32?te=S(String(U)):typeof U=="bigint"&&(te=String(U),(U>BigInt(2)**BigInt(32)||U<-(BigInt(2)**BigInt(32)))&&(te=S(te)),te+="n"),J+=` It must be ${x}. Received ${te}`,J},RangeError);function S(G){let x="",U=G.length;const J=G[0]==="-"?1:0;for(;U>=J+4;U-=3)x=`_${G.slice(U-3,U)}${x}`;return`${G.slice(0,U)}${x}`}function $(G,x,U){ee(x,"offset"),(G[x]===void 0||G[x+U]===void 0)&&se(x,G.length-(U+1))}function Z(G,x,U,J,te,ie){if(G>U||G<x){const le=typeof x=="bigint"?"n":"";let ft;throw x===0||x===BigInt(0)?ft=`>= 0${le} and < 2${le} ** ${(ie+1)*8}${le}`:ft=`>= -(2${le} ** ${(ie+1)*8-1}${le}) and < 2 ** ${(ie+1)*8-1}${le}`,new Bt.ERR_OUT_OF_RANGE("value",ft,G)}$(J,te,ie)}function ee(G,x){if(typeof G!="number")throw new Bt.ERR_INVALID_ARG_TYPE(x,"number",G)}function se(G,x,U){throw Math.floor(G)!==G?(ee(G,U),new Bt.ERR_OUT_OF_RANGE("offset","an integer",G)):x<0?new Bt.ERR_BUFFER_OUT_OF_BOUNDS:new Bt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${x}`,G)}const ue=/[^+/0-9A-Za-z-_]/g;function at(G){if(G=G.split("=")[0],G=G.trim().replace(ue,""),G.length<2)return"";for(;G.length%4!==0;)G=G+"=";return G}function tt(G,x){x=x||1/0;let U;const J=G.length;let te=null;const ie=[];for(let le=0;le<J;++le){if(U=G.charCodeAt(le),U>55295&&U<57344){if(!te){if(U>56319){(x-=3)>-1&&ie.push(239,191,189);continue}else if(le+1===J){(x-=3)>-1&&ie.push(239,191,189);continue}te=U;continue}if(U<56320){(x-=3)>-1&&ie.push(239,191,189),te=U;continue}U=(te-55296<<10|U-56320)+65536}else te&&(x-=3)>-1&&ie.push(239,191,189);if(te=null,U<128){if((x-=1)<0)break;ie.push(U)}else if(U<2048){if((x-=2)<0)break;ie.push(U>>6|192,U&63|128)}else if(U<65536){if((x-=3)<0)break;ie.push(U>>12|224,U>>6&63|128,U&63|128)}else if(U<1114112){if((x-=4)<0)break;ie.push(U>>18|240,U>>12&63|128,U>>6&63|128,U&63|128)}else throw new Error("Invalid code point")}return ie}function nt(G){const x=[];for(let U=0;U<G.length;++U)x.push(G.charCodeAt(U)&255);return x}function Gt(G,x){let U,J,te;const ie=[];for(let le=0;le<G.length&&!((x-=2)<0);++le)U=G.charCodeAt(le),J=U>>8,te=U%256,ie.push(te),ie.push(J);return ie}function Ze(G){return A.toByteArray(at(G))}function rn(G,x,U,J){let te;for(te=0;te<J&&!(te+U>=x.length||te>=G.length);++te)x[te+U]=G[te];return te}function gs(G,x){return G instanceof x||G!=null&&G.constructor!=null&&G.constructor.name!=null&&G.constructor.name===x.name}function un(G){return G!==G}const yn=function(){const G="0123456789abcdef",x=new Array(256);for(let U=0;U<16;++U){const J=U*16;for(let te=0;te<16;++te)x[J+te]=G[U]+G[te]}return x}();function ti(G){return typeof BigInt>"u"?wn:G}function wn(){throw new Error("BigInt not supported")}})(e);const T=e.Buffer;t.Blob=e.Blob,t.BlobOptions=e.BlobOptions,t.Buffer=e.Buffer,t.File=e.File,t.FileOptions=e.FileOptions,t.INSPECT_MAX_BYTES=e.INSPECT_MAX_BYTES,t.SlowBuffer=e.SlowBuffer,t.TranscodeEncoding=e.TranscodeEncoding,t.atob=e.atob,t.btoa=e.btoa,t.constants=e.constants,t.default=T,t.isAscii=e.isAscii,t.isUtf8=e.isUtf8,t.kMaxLength=e.kMaxLength,t.kStringMaxLength=e.kStringMaxLength,t.resolveObjectURL=e.resolveObjectURL,t.transcode=e.transcode}(Sy)),Sy}var Jne=mp.exports,JA;function t3(){return JA||(JA=1,function(t){(function(e,n){function r(R,p){if(!R)throw new Error(p||"Assertion failed")}function s(R,p){R.super_=p;var g=function(){};g.prototype=p.prototype,R.prototype=new g,R.prototype.constructor=R}function i(R,p,g){if(i.isBN(R))return R;this.negative=0,this.words=null,this.length=0,this.red=null,R!==null&&((p==="le"||p==="be")&&(g=p,p=10),this._init(R||0,p||10,g||"be"))}typeof e=="object"?e.exports=i:n.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=zv().Buffer}catch{}i.isBN=function(p){return p instanceof i?!0:p!==null&&typeof p=="object"&&p.constructor.wordSize===i.wordSize&&Array.isArray(p.words)},i.max=function(p,g){return p.cmp(g)>0?p:g},i.min=function(p,g){return p.cmp(g)<0?p:g},i.prototype._init=function(p,g,w){if(typeof p=="number")return this._initNumber(p,g,w);if(typeof p=="object")return this._initArray(p,g,w);g==="hex"&&(g=16),r(g===(g|0)&&g>=2&&g<=36),p=p.toString().replace(/\s+/g,"");var _=0;p[0]==="-"&&(_++,this.negative=1),_<p.length&&(g===16?this._parseHex(p,_,w):(this._parseBase(p,g,_),w==="le"&&this._initArray(this.toArray(),g,w)))},i.prototype._initNumber=function(p,g,w){p<0&&(this.negative=1,p=-p),p<67108864?(this.words=[p&67108863],this.length=1):p<4503599627370496?(this.words=[p&67108863,p/67108864&67108863],this.length=2):(r(p<9007199254740992),this.words=[p&67108863,p/67108864&67108863,1],this.length=3),w==="le"&&this._initArray(this.toArray(),g,w)},i.prototype._initArray=function(p,g,w){if(r(typeof p.length=="number"),p.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(p.length/3),this.words=new Array(this.length);for(var _=0;_<this.length;_++)this.words[_]=0;var C,L,z=0;if(w==="be")for(_=p.length-1,C=0;_>=0;_-=3)L=p[_]|p[_-1]<<8|p[_-2]<<16,this.words[C]|=L<<z&67108863,this.words[C+1]=L>>>26-z&67108863,z+=24,z>=26&&(z-=26,C++);else if(w==="le")for(_=0,C=0;_<p.length;_+=3)L=p[_]|p[_+1]<<8|p[_+2]<<16,this.words[C]|=L<<z&67108863,this.words[C+1]=L>>>26-z&67108863,z+=24,z>=26&&(z-=26,C++);return this._strip()};function a(R,p){var g=R.charCodeAt(p);if(g>=48&&g<=57)return g-48;if(g>=65&&g<=70)return g-55;if(g>=97&&g<=102)return g-87;r(!1,"Invalid character in "+R)}function c(R,p,g){var w=a(R,g);return g-1>=p&&(w|=a(R,g-1)<<4),w}i.prototype._parseHex=function(p,g,w){this.length=Math.ceil((p.length-g)/6),this.words=new Array(this.length);for(var _=0;_<this.length;_++)this.words[_]=0;var C=0,L=0,z;if(w==="be")for(_=p.length-1;_>=g;_-=2)z=c(p,g,_)<<C,this.words[L]|=z&67108863,C>=18?(C-=18,L+=1,this.words[L]|=z>>>26):C+=8;else{var q=p.length-g;for(_=q%2===0?g+1:g;_<p.length;_+=2)z=c(p,g,_)<<C,this.words[L]|=z&67108863,C>=18?(C-=18,L+=1,this.words[L]|=z>>>26):C+=8}this._strip()};function u(R,p,g,w){for(var _=0,C=0,L=Math.min(R.length,g),z=p;z<L;z++){var q=R.charCodeAt(z)-48;_*=w,q>=49?C=q-49+10:q>=17?C=q-17+10:C=q,r(q>=0&&C<w,"Invalid character"),_+=C}return _}i.prototype._parseBase=function(p,g,w){this.words=[0],this.length=1;for(var _=0,C=1;C<=67108863;C*=g)_++;_--,C=C/g|0;for(var L=p.length-w,z=L%_,q=Math.min(L,L-z)+w,b=0,E=w;E<q;E+=_)b=u(p,E,E+_,g),this.imuln(C),this.words[0]+b<67108864?this.words[0]+=b:this._iaddn(b);if(z!==0){var j=1;for(b=u(p,E,p.length,g),E=0;E<z;E++)j*=g;this.imuln(j),this.words[0]+b<67108864?this.words[0]+=b:this._iaddn(b)}this._strip()},i.prototype.copy=function(p){p.words=new Array(this.length);for(var g=0;g<this.length;g++)p.words[g]=this.words[g];p.length=this.length,p.negative=this.negative,p.red=this.red};function l(R,p){R.words=p.words,R.length=p.length,R.negative=p.negative,R.red=p.red}if(i.prototype._move=function(p){l(p,this)},i.prototype.clone=function(){var p=new i(null);return this.copy(p),p},i.prototype._expand=function(p){for(;this.length<p;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=d}catch{i.prototype.inspect=d}else i.prototype.inspect=d;function d(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(p,g){p=p||10,g=g|0||1;var w;if(p===16||p==="hex"){w="";for(var _=0,C=0,L=0;L<this.length;L++){var z=this.words[L],q=((z<<_|C)&16777215).toString(16);C=z>>>24-_&16777215,_+=2,_>=26&&(_-=26,L--),C!==0||L!==this.length-1?w=h[6-q.length]+q+w:w=q+w}for(C!==0&&(w=C.toString(16)+w);w.length%g!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}if(p===(p|0)&&p>=2&&p<=36){var b=f[p],E=y[p];w="";var j=this.clone();for(j.negative=0;!j.isZero();){var K=j.modrn(E).toString(p);j=j.idivn(E),j.isZero()?w=K+w:w=h[b-K.length]+K+w}for(this.isZero()&&(w="0"+w);w.length%g!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var p=this.words[0];return this.length===2?p+=this.words[1]*67108864:this.length===3&&this.words[2]===1?p+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-p:p},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(p,g){return this.toArrayLike(o,p,g)}),i.prototype.toArray=function(p,g){return this.toArrayLike(Array,p,g)};var m=function(p,g){return p.allocUnsafe?p.allocUnsafe(g):new p(g)};i.prototype.toArrayLike=function(p,g,w){this._strip();var _=this.byteLength(),C=w||Math.max(1,_);r(_<=C,"byte array longer than desired length"),r(C>0,"Requested array length <= 0");var L=m(p,C),z=g==="le"?"LE":"BE";return this["_toArrayLike"+z](L,_),L},i.prototype._toArrayLikeLE=function(p,g){for(var w=0,_=0,C=0,L=0;C<this.length;C++){var z=this.words[C]<<L|_;p[w++]=z&255,w<p.length&&(p[w++]=z>>8&255),w<p.length&&(p[w++]=z>>16&255),L===6?(w<p.length&&(p[w++]=z>>24&255),_=0,L=0):(_=z>>>24,L+=2)}if(w<p.length)for(p[w++]=_;w<p.length;)p[w++]=0},i.prototype._toArrayLikeBE=function(p,g){for(var w=p.length-1,_=0,C=0,L=0;C<this.length;C++){var z=this.words[C]<<L|_;p[w--]=z&255,w>=0&&(p[w--]=z>>8&255),w>=0&&(p[w--]=z>>16&255),L===6?(w>=0&&(p[w--]=z>>24&255),_=0,L=0):(_=z>>>24,L+=2)}if(w>=0)for(p[w--]=_;w>=0;)p[w--]=0},Math.clz32?i.prototype._countBits=function(p){return 32-Math.clz32(p)}:i.prototype._countBits=function(p){var g=p,w=0;return g>=4096&&(w+=13,g>>>=13),g>=64&&(w+=7,g>>>=7),g>=8&&(w+=4,g>>>=4),g>=2&&(w+=2,g>>>=2),w+g},i.prototype._zeroBits=function(p){if(p===0)return 26;var g=p,w=0;return(g&8191)===0&&(w+=13,g>>>=13),(g&127)===0&&(w+=7,g>>>=7),(g&15)===0&&(w+=4,g>>>=4),(g&3)===0&&(w+=2,g>>>=2),(g&1)===0&&w++,w},i.prototype.bitLength=function(){var p=this.words[this.length-1],g=this._countBits(p);return(this.length-1)*26+g};function v(R){for(var p=new Array(R.bitLength()),g=0;g<p.length;g++){var w=g/26|0,_=g%26;p[g]=R.words[w]>>>_&1}return p}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var p=0,g=0;g<this.length;g++){var w=this._zeroBits(this.words[g]);if(p+=w,w!==26)break}return p},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(p){return this.negative!==0?this.abs().inotn(p).iaddn(1):this.clone()},i.prototype.fromTwos=function(p){return this.testn(p-1)?this.notn(p).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(p){for(;this.length<p.length;)this.words[this.length++]=0;for(var g=0;g<p.length;g++)this.words[g]=this.words[g]|p.words[g];return this._strip()},i.prototype.ior=function(p){return r((this.negative|p.negative)===0),this.iuor(p)},i.prototype.or=function(p){return this.length>p.length?this.clone().ior(p):p.clone().ior(this)},i.prototype.uor=function(p){return this.length>p.length?this.clone().iuor(p):p.clone().iuor(this)},i.prototype.iuand=function(p){var g;this.length>p.length?g=p:g=this;for(var w=0;w<g.length;w++)this.words[w]=this.words[w]&p.words[w];return this.length=g.length,this._strip()},i.prototype.iand=function(p){return r((this.negative|p.negative)===0),this.iuand(p)},i.prototype.and=function(p){return this.length>p.length?this.clone().iand(p):p.clone().iand(this)},i.prototype.uand=function(p){return this.length>p.length?this.clone().iuand(p):p.clone().iuand(this)},i.prototype.iuxor=function(p){var g,w;this.length>p.length?(g=this,w=p):(g=p,w=this);for(var _=0;_<w.length;_++)this.words[_]=g.words[_]^w.words[_];if(this!==g)for(;_<g.length;_++)this.words[_]=g.words[_];return this.length=g.length,this._strip()},i.prototype.ixor=function(p){return r((this.negative|p.negative)===0),this.iuxor(p)},i.prototype.xor=function(p){return this.length>p.length?this.clone().ixor(p):p.clone().ixor(this)},i.prototype.uxor=function(p){return this.length>p.length?this.clone().iuxor(p):p.clone().iuxor(this)},i.prototype.inotn=function(p){r(typeof p=="number"&&p>=0);var g=Math.ceil(p/26)|0,w=p%26;this._expand(g),w>0&&g--;for(var _=0;_<g;_++)this.words[_]=~this.words[_]&67108863;return w>0&&(this.words[_]=~this.words[_]&67108863>>26-w),this._strip()},i.prototype.notn=function(p){return this.clone().inotn(p)},i.prototype.setn=function(p,g){r(typeof p=="number"&&p>=0);var w=p/26|0,_=p%26;return this._expand(w+1),g?this.words[w]=this.words[w]|1<<_:this.words[w]=this.words[w]&~(1<<_),this._strip()},i.prototype.iadd=function(p){var g;if(this.negative!==0&&p.negative===0)return this.negative=0,g=this.isub(p),this.negative^=1,this._normSign();if(this.negative===0&&p.negative!==0)return p.negative=0,g=this.isub(p),p.negative=1,g._normSign();var w,_;this.length>p.length?(w=this,_=p):(w=p,_=this);for(var C=0,L=0;L<_.length;L++)g=(w.words[L]|0)+(_.words[L]|0)+C,this.words[L]=g&67108863,C=g>>>26;for(;C!==0&&L<w.length;L++)g=(w.words[L]|0)+C,this.words[L]=g&67108863,C=g>>>26;if(this.length=w.length,C!==0)this.words[this.length]=C,this.length++;else if(w!==this)for(;L<w.length;L++)this.words[L]=w.words[L];return this},i.prototype.add=function(p){var g;return p.negative!==0&&this.negative===0?(p.negative=0,g=this.sub(p),p.negative^=1,g):p.negative===0&&this.negative!==0?(this.negative=0,g=p.sub(this),this.negative=1,g):this.length>p.length?this.clone().iadd(p):p.clone().iadd(this)},i.prototype.isub=function(p){if(p.negative!==0){p.negative=0;var g=this.iadd(p);return p.negative=1,g._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(p),this.negative=1,this._normSign();var w=this.cmp(p);if(w===0)return this.negative=0,this.length=1,this.words[0]=0,this;var _,C;w>0?(_=this,C=p):(_=p,C=this);for(var L=0,z=0;z<C.length;z++)g=(_.words[z]|0)-(C.words[z]|0)+L,L=g>>26,this.words[z]=g&67108863;for(;L!==0&&z<_.length;z++)g=(_.words[z]|0)+L,L=g>>26,this.words[z]=g&67108863;if(L===0&&z<_.length&&_!==this)for(;z<_.length;z++)this.words[z]=_.words[z];return this.length=Math.max(this.length,z),_!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(p){return this.clone().isub(p)};function T(R,p,g){g.negative=p.negative^R.negative;var w=R.length+p.length|0;g.length=w,w=w-1|0;var _=R.words[0]|0,C=p.words[0]|0,L=_*C,z=L&67108863,q=L/67108864|0;g.words[0]=z;for(var b=1;b<w;b++){for(var E=q>>>26,j=q&67108863,K=Math.min(b,p.length-1),X=Math.max(0,b-R.length+1);X<=K;X++){var re=b-X|0;_=R.words[re]|0,C=p.words[X]|0,L=_*C+j,E+=L/67108864|0,j=L&67108863}g.words[b]=j|0,q=E|0}return q!==0?g.words[b]=q|0:g.length--,g._strip()}var O=function(p,g,w){var _=p.words,C=g.words,L=w.words,z=0,q,b,E,j=_[0]|0,K=j&8191,X=j>>>13,re=_[1]|0,de=re&8191,he=re>>>13,Oe=_[2]|0,Re=Oe&8191,Ve=Oe>>>13,kt=_[3]|0,dt=kt&8191,ht=kt>>>13,nr=_[4]|0,Ut=nr&8191,Xt=nr>>>13,ro=_[5]|0,Ft=ro&8191,Wt=ro>>>13,Qt=_[6]|0,lt=Qt&8191,Ot=Qt>>>13,Mn=_[7]|0,Mt=Mn&8191,Kt=Mn>>>13,Er=_[8]|0,Bt=Er&8191,H=Er>>>13,S=_[9]|0,$=S&8191,Z=S>>>13,ee=C[0]|0,se=ee&8191,ue=ee>>>13,at=C[1]|0,tt=at&8191,nt=at>>>13,Gt=C[2]|0,Ze=Gt&8191,rn=Gt>>>13,gs=C[3]|0,un=gs&8191,yn=gs>>>13,ti=C[4]|0,wn=ti&8191,G=ti>>>13,x=C[5]|0,U=x&8191,J=x>>>13,te=C[6]|0,ie=te&8191,le=te>>>13,ft=C[7]|0,ot=ft&8191,st=ft>>>13,sn=C[8]|0,et=sn&8191,Rn=sn>>>13,sE=C[9]|0,Pn=sE&8191,kn=sE>>>13;w.negative=p.negative^g.negative,w.length=19,q=Math.imul(K,se),b=Math.imul(K,ue),b=b+Math.imul(X,se)|0,E=Math.imul(X,ue);var Rg=(z+q|0)+((b&8191)<<13)|0;z=(E+(b>>>13)|0)+(Rg>>>26)|0,Rg&=67108863,q=Math.imul(de,se),b=Math.imul(de,ue),b=b+Math.imul(he,se)|0,E=Math.imul(he,ue),q=q+Math.imul(K,tt)|0,b=b+Math.imul(K,nt)|0,b=b+Math.imul(X,tt)|0,E=E+Math.imul(X,nt)|0;var Pg=(z+q|0)+((b&8191)<<13)|0;z=(E+(b>>>13)|0)+(Pg>>>26)|0,Pg&=67108863,q=Math.imul(Re,se),b=Math.imul(Re,ue),b=b+Math.imul(Ve,se)|0,E=Math.imul(Ve,ue),q=q+Math.imul(de,tt)|0,b=b+Math.imul(de,nt)|0,b=b+Math.imul(he,tt)|0,E=E+Math.imul(he,nt)|0,q=q+Math.imul(K,Ze)|0,b=b+Math.imul(K,rn)|0,b=b+Math.imul(X,Ze)|0,E=E+Math.imul(X,rn)|0;var kg=(z+q|0)+((b&8191)<<13)|0;z=(E+(b>>>13)|0)+(kg>>>26)|0,kg&=67108863,q=Math.imul(dt,se),b=Math.imul(dt,ue),b=b+Math.imul(ht,se)|0,E=Math.imul(ht,ue),q=q+Math.imul(Re,tt)|0,b=b+Math.imul(Re,nt)|0,b=b+Math.imul(Ve,tt)|0,E=E+Math.imul(Ve,nt)|0,q=q+Math.imul(de,Ze)|0,b=b+Math.imul(de,rn)|0,b=b+Math.imul(he,Ze)|0,E=E+Math.imul(he,rn)|0,q=q+Math.imul(K,un)|0,b=b+Math.imul(K,yn)|0,b=b+Math.imul(X,un)|0,E=E+Math.imul(X,yn)|0;var Og=(z+q|0)+((b&8191)<<13)|0;z=(E+(b>>>13)|0)+(Og>>>26)|0,Og&=67108863,q=Math.imul(Ut,se),b=Math.imul(Ut,ue),b=b+Math.imul(Xt,se)|0,E=Math.imul(Xt,ue),q=q+Math.imul(dt,tt)|0,b=b+Math.imul(dt,nt)|0,b=b+Math.imul(ht,tt)|0,E=E+Math.imul(ht,nt)|0,q=q+Math.imul(Re,Ze)|0,b=b+Math.imul(Re,rn)|0,b=b+Math.imul(Ve,Ze)|0,E=E+Math.imul(Ve,rn)|0,q=q+Math.imul(de,un)|0,b=b+Math.imul(de,yn)|0,b=b+Math.imul(he,un)|0,E=E+Math.imul(he,yn)|0,q=q+Math.imul(K,wn)|0,b=b+Math.imul(K,G)|0,b=b+Math.imul(X,wn)|0,E=E+Math.imul(X,G)|0;var Bg=(z+q|0)+((b&8191)<<13)|0;z=(E+(b>>>13)|0)+(Bg>>>26)|0,Bg&=67108863,q=Math.imul(Ft,se),b=Math.imul(Ft,ue),b=b+Math.imul(Wt,se)|0,E=Math.imul(Wt,ue),q=q+Math.imul(Ut,tt)|0,b=b+Math.imul(Ut,nt)|0,b=b+Math.imul(Xt,tt)|0,E=E+Math.imul(Xt,nt)|0,q=q+Math.imul(dt,Ze)|0,b=b+Math.imul(dt,rn)|0,b=b+Math.imul(ht,Ze)|0,E=E+Math.imul(ht,rn)|0,q=q+Math.imul(Re,un)|0,b=b+Math.imul(Re,yn)|0,b=b+Math.imul(Ve,un)|0,E=E+Math.imul(Ve,yn)|0,q=q+Math.imul(de,wn)|0,b=b+Math.imul(de,G)|0,b=b+Math.imul(he,wn)|0,E=E+Math.imul(he,G)|0,q=q+Math.imul(K,U)|0,b=b+Math.imul(K,J)|0,b=b+Math.imul(X,U)|0,E=E+Math.imul(X,J)|0;var $g=(z+q|0)+((b&8191)<<13)|0;z=(E+(b>>>13)|0)+($g>>>26)|0,$g&=67108863,q=Math.imul(lt,se),b=Math.imul(lt,ue),b=b+Math.imul(Ot,se)|0,E=Math.imul(Ot,ue),q=q+Math.imul(Ft,tt)|0,b=b+Math.imul(Ft,nt)|0,b=b+Math.imul(Wt,tt)|0,E=E+Math.imul(Wt,nt)|0,q=q+Math.imul(Ut,Ze)|0,b=b+Math.imul(Ut,rn)|0,b=b+Math.imul(Xt,Ze)|0,E=E+Math.imul(Xt,rn)|0,q=q+Math.imul(dt,un)|0,b=b+Math.imul(dt,yn)|0,b=b+Math.imul(ht,un)|0,E=E+Math.imul(ht,yn)|0,q=q+Math.imul(Re,wn)|0,b=b+Math.imul(Re,G)|0,b=b+Math.imul(Ve,wn)|0,E=E+Math.imul(Ve,G)|0,q=q+Math.imul(de,U)|0,b=b+Math.imul(de,J)|0,b=b+Math.imul(he,U)|0,E=E+Math.imul(he,J)|0,q=q+Math.imul(K,ie)|0,b=b+Math.imul(K,le)|0,b=b+Math.imul(X,ie)|0,E=E+Math.imul(X,le)|0;var Dg=(z+q|0)+((b&8191)<<13)|0;z=(E+(b>>>13)|0)+(Dg>>>26)|0,Dg&=67108863,q=Math.imul(Mt,se),b=Math.imul(Mt,ue),b=b+Math.imul(Kt,se)|0,E=Math.imul(Kt,ue),q=q+Math.imul(lt,tt)|0,b=b+Math.imul(lt,nt)|0,b=b+Math.imul(Ot,tt)|0,E=E+Math.imul(Ot,nt)|0,q=q+Math.imul(Ft,Ze)|0,b=b+Math.imul(Ft,rn)|0,b=b+Math.imul(Wt,Ze)|0,E=E+Math.imul(Wt,rn)|0,q=q+Math.imul(Ut,un)|0,b=b+Math.imul(Ut,yn)|0,b=b+Math.imul(Xt,un)|0,E=E+Math.imul(Xt,yn)|0,q=q+Math.imul(dt,wn)|0,b=b+Math.imul(dt,G)|0,b=b+Math.imul(ht,wn)|0,E=E+Math.imul(ht,G)|0,q=q+Math.imul(Re,U)|0,b=b+Math.imul(Re,J)|0,b=b+Math.imul(Ve,U)|0,E=E+Math.imul(Ve,J)|0,q=q+Math.imul(de,ie)|0,b=b+Math.imul(de,le)|0,b=b+Math.imul(he,ie)|0,E=E+Math.imul(he,le)|0,q=q+Math.imul(K,ot)|0,b=b+Math.imul(K,st)|0,b=b+Math.imul(X,ot)|0,E=E+Math.imul(X,st)|0;var Ug=(z+q|0)+((b&8191)<<13)|0;z=(E+(b>>>13)|0)+(Ug>>>26)|0,Ug&=67108863,q=Math.imul(Bt,se),b=Math.imul(Bt,ue),b=b+Math.imul(H,se)|0,E=Math.imul(H,ue),q=q+Math.imul(Mt,tt)|0,b=b+Math.imul(Mt,nt)|0,b=b+Math.imul(Kt,tt)|0,E=E+Math.imul(Kt,nt)|0,q=q+Math.imul(lt,Ze)|0,b=b+Math.imul(lt,rn)|0,b=b+Math.imul(Ot,Ze)|0,E=E+Math.imul(Ot,rn)|0,q=q+Math.imul(Ft,un)|0,b=b+Math.imul(Ft,yn)|0,b=b+Math.imul(Wt,un)|0,E=E+Math.imul(Wt,yn)|0,q=q+Math.imul(Ut,wn)|0,b=b+Math.imul(Ut,G)|0,b=b+Math.imul(Xt,wn)|0,E=E+Math.imul(Xt,G)|0,q=q+Math.imul(dt,U)|0,b=b+Math.imul(dt,J)|0,b=b+Math.imul(ht,U)|0,E=E+Math.imul(ht,J)|0,q=q+Math.imul(Re,ie)|0,b=b+Math.imul(Re,le)|0,b=b+Math.imul(Ve,ie)|0,E=E+Math.imul(Ve,le)|0,q=q+Math.imul(de,ot)|0,b=b+Math.imul(de,st)|0,b=b+Math.imul(he,ot)|0,E=E+Math.imul(he,st)|0,q=q+Math.imul(K,et)|0,b=b+Math.imul(K,Rn)|0,b=b+Math.imul(X,et)|0,E=E+Math.imul(X,Rn)|0;var Mg=(z+q|0)+((b&8191)<<13)|0;z=(E+(b>>>13)|0)+(Mg>>>26)|0,Mg&=67108863,q=Math.imul($,se),b=Math.imul($,ue),b=b+Math.imul(Z,se)|0,E=Math.imul(Z,ue),q=q+Math.imul(Bt,tt)|0,b=b+Math.imul(Bt,nt)|0,b=b+Math.imul(H,tt)|0,E=E+Math.imul(H,nt)|0,q=q+Math.imul(Mt,Ze)|0,b=b+Math.imul(Mt,rn)|0,b=b+Math.imul(Kt,Ze)|0,E=E+Math.imul(Kt,rn)|0,q=q+Math.imul(lt,un)|0,b=b+Math.imul(lt,yn)|0,b=b+Math.imul(Ot,un)|0,E=E+Math.imul(Ot,yn)|0,q=q+Math.imul(Ft,wn)|0,b=b+Math.imul(Ft,G)|0,b=b+Math.imul(Wt,wn)|0,E=E+Math.imul(Wt,G)|0,q=q+Math.imul(Ut,U)|0,b=b+Math.imul(Ut,J)|0,b=b+Math.imul(Xt,U)|0,E=E+Math.imul(Xt,J)|0,q=q+Math.imul(dt,ie)|0,b=b+Math.imul(dt,le)|0,b=b+Math.imul(ht,ie)|0,E=E+Math.imul(ht,le)|0,q=q+Math.imul(Re,ot)|0,b=b+Math.imul(Re,st)|0,b=b+Math.imul(Ve,ot)|0,E=E+Math.imul(Ve,st)|0,q=q+Math.imul(de,et)|0,b=b+Math.imul(de,Rn)|0,b=b+Math.imul(he,et)|0,E=E+Math.imul(he,Rn)|0,q=q+Math.imul(K,Pn)|0,b=b+Math.imul(K,kn)|0,b=b+Math.imul(X,Pn)|0,E=E+Math.imul(X,kn)|0;var Lg=(z+q|0)+((b&8191)<<13)|0;z=(E+(b>>>13)|0)+(Lg>>>26)|0,Lg&=67108863,q=Math.imul($,tt),b=Math.imul($,nt),b=b+Math.imul(Z,tt)|0,E=Math.imul(Z,nt),q=q+Math.imul(Bt,Ze)|0,b=b+Math.imul(Bt,rn)|0,b=b+Math.imul(H,Ze)|0,E=E+Math.imul(H,rn)|0,q=q+Math.imul(Mt,un)|0,b=b+Math.imul(Mt,yn)|0,b=b+Math.imul(Kt,un)|0,E=E+Math.imul(Kt,yn)|0,q=q+Math.imul(lt,wn)|0,b=b+Math.imul(lt,G)|0,b=b+Math.imul(Ot,wn)|0,E=E+Math.imul(Ot,G)|0,q=q+Math.imul(Ft,U)|0,b=b+Math.imul(Ft,J)|0,b=b+Math.imul(Wt,U)|0,E=E+Math.imul(Wt,J)|0,q=q+Math.imul(Ut,ie)|0,b=b+Math.imul(Ut,le)|0,b=b+Math.imul(Xt,ie)|0,E=E+Math.imul(Xt,le)|0,q=q+Math.imul(dt,ot)|0,b=b+Math.imul(dt,st)|0,b=b+Math.imul(ht,ot)|0,E=E+Math.imul(ht,st)|0,q=q+Math.imul(Re,et)|0,b=b+Math.imul(Re,Rn)|0,b=b+Math.imul(Ve,et)|0,E=E+Math.imul(Ve,Rn)|0,q=q+Math.imul(de,Pn)|0,b=b+Math.imul(de,kn)|0,b=b+Math.imul(he,Pn)|0,E=E+Math.imul(he,kn)|0;var Fg=(z+q|0)+((b&8191)<<13)|0;z=(E+(b>>>13)|0)+(Fg>>>26)|0,Fg&=67108863,q=Math.imul($,Ze),b=Math.imul($,rn),b=b+Math.imul(Z,Ze)|0,E=Math.imul(Z,rn),q=q+Math.imul(Bt,un)|0,b=b+Math.imul(Bt,yn)|0,b=b+Math.imul(H,un)|0,E=E+Math.imul(H,yn)|0,q=q+Math.imul(Mt,wn)|0,b=b+Math.imul(Mt,G)|0,b=b+Math.imul(Kt,wn)|0,E=E+Math.imul(Kt,G)|0,q=q+Math.imul(lt,U)|0,b=b+Math.imul(lt,J)|0,b=b+Math.imul(Ot,U)|0,E=E+Math.imul(Ot,J)|0,q=q+Math.imul(Ft,ie)|0,b=b+Math.imul(Ft,le)|0,b=b+Math.imul(Wt,ie)|0,E=E+Math.imul(Wt,le)|0,q=q+Math.imul(Ut,ot)|0,b=b+Math.imul(Ut,st)|0,b=b+Math.imul(Xt,ot)|0,E=E+Math.imul(Xt,st)|0,q=q+Math.imul(dt,et)|0,b=b+Math.imul(dt,Rn)|0,b=b+Math.imul(ht,et)|0,E=E+Math.imul(ht,Rn)|0,q=q+Math.imul(Re,Pn)|0,b=b+Math.imul(Re,kn)|0,b=b+Math.imul(Ve,Pn)|0,E=E+Math.imul(Ve,kn)|0;var jg=(z+q|0)+((b&8191)<<13)|0;z=(E+(b>>>13)|0)+(jg>>>26)|0,jg&=67108863,q=Math.imul($,un),b=Math.imul($,yn),b=b+Math.imul(Z,un)|0,E=Math.imul(Z,yn),q=q+Math.imul(Bt,wn)|0,b=b+Math.imul(Bt,G)|0,b=b+Math.imul(H,wn)|0,E=E+Math.imul(H,G)|0,q=q+Math.imul(Mt,U)|0,b=b+Math.imul(Mt,J)|0,b=b+Math.imul(Kt,U)|0,E=E+Math.imul(Kt,J)|0,q=q+Math.imul(lt,ie)|0,b=b+Math.imul(lt,le)|0,b=b+Math.imul(Ot,ie)|0,E=E+Math.imul(Ot,le)|0,q=q+Math.imul(Ft,ot)|0,b=b+Math.imul(Ft,st)|0,b=b+Math.imul(Wt,ot)|0,E=E+Math.imul(Wt,st)|0,q=q+Math.imul(Ut,et)|0,b=b+Math.imul(Ut,Rn)|0,b=b+Math.imul(Xt,et)|0,E=E+Math.imul(Xt,Rn)|0,q=q+Math.imul(dt,Pn)|0,b=b+Math.imul(dt,kn)|0,b=b+Math.imul(ht,Pn)|0,E=E+Math.imul(ht,kn)|0;var qg=(z+q|0)+((b&8191)<<13)|0;z=(E+(b>>>13)|0)+(qg>>>26)|0,qg&=67108863,q=Math.imul($,wn),b=Math.imul($,G),b=b+Math.imul(Z,wn)|0,E=Math.imul(Z,G),q=q+Math.imul(Bt,U)|0,b=b+Math.imul(Bt,J)|0,b=b+Math.imul(H,U)|0,E=E+Math.imul(H,J)|0,q=q+Math.imul(Mt,ie)|0,b=b+Math.imul(Mt,le)|0,b=b+Math.imul(Kt,ie)|0,E=E+Math.imul(Kt,le)|0,q=q+Math.imul(lt,ot)|0,b=b+Math.imul(lt,st)|0,b=b+Math.imul(Ot,ot)|0,E=E+Math.imul(Ot,st)|0,q=q+Math.imul(Ft,et)|0,b=b+Math.imul(Ft,Rn)|0,b=b+Math.imul(Wt,et)|0,E=E+Math.imul(Wt,Rn)|0,q=q+Math.imul(Ut,Pn)|0,b=b+Math.imul(Ut,kn)|0,b=b+Math.imul(Xt,Pn)|0,E=E+Math.imul(Xt,kn)|0;var zg=(z+q|0)+((b&8191)<<13)|0;z=(E+(b>>>13)|0)+(zg>>>26)|0,zg&=67108863,q=Math.imul($,U),b=Math.imul($,J),b=b+Math.imul(Z,U)|0,E=Math.imul(Z,J),q=q+Math.imul(Bt,ie)|0,b=b+Math.imul(Bt,le)|0,b=b+Math.imul(H,ie)|0,E=E+Math.imul(H,le)|0,q=q+Math.imul(Mt,ot)|0,b=b+Math.imul(Mt,st)|0,b=b+Math.imul(Kt,ot)|0,E=E+Math.imul(Kt,st)|0,q=q+Math.imul(lt,et)|0,b=b+Math.imul(lt,Rn)|0,b=b+Math.imul(Ot,et)|0,E=E+Math.imul(Ot,Rn)|0,q=q+Math.imul(Ft,Pn)|0,b=b+Math.imul(Ft,kn)|0,b=b+Math.imul(Wt,Pn)|0,E=E+Math.imul(Wt,kn)|0;var Wg=(z+q|0)+((b&8191)<<13)|0;z=(E+(b>>>13)|0)+(Wg>>>26)|0,Wg&=67108863,q=Math.imul($,ie),b=Math.imul($,le),b=b+Math.imul(Z,ie)|0,E=Math.imul(Z,le),q=q+Math.imul(Bt,ot)|0,b=b+Math.imul(Bt,st)|0,b=b+Math.imul(H,ot)|0,E=E+Math.imul(H,st)|0,q=q+Math.imul(Mt,et)|0,b=b+Math.imul(Mt,Rn)|0,b=b+Math.imul(Kt,et)|0,E=E+Math.imul(Kt,Rn)|0,q=q+Math.imul(lt,Pn)|0,b=b+Math.imul(lt,kn)|0,b=b+Math.imul(Ot,Pn)|0,E=E+Math.imul(Ot,kn)|0;var Hg=(z+q|0)+((b&8191)<<13)|0;z=(E+(b>>>13)|0)+(Hg>>>26)|0,Hg&=67108863,q=Math.imul($,ot),b=Math.imul($,st),b=b+Math.imul(Z,ot)|0,E=Math.imul(Z,st),q=q+Math.imul(Bt,et)|0,b=b+Math.imul(Bt,Rn)|0,b=b+Math.imul(H,et)|0,E=E+Math.imul(H,Rn)|0,q=q+Math.imul(Mt,Pn)|0,b=b+Math.imul(Mt,kn)|0,b=b+Math.imul(Kt,Pn)|0,E=E+Math.imul(Kt,kn)|0;var Vg=(z+q|0)+((b&8191)<<13)|0;z=(E+(b>>>13)|0)+(Vg>>>26)|0,Vg&=67108863,q=Math.imul($,et),b=Math.imul($,Rn),b=b+Math.imul(Z,et)|0,E=Math.imul(Z,Rn),q=q+Math.imul(Bt,Pn)|0,b=b+Math.imul(Bt,kn)|0,b=b+Math.imul(H,Pn)|0,E=E+Math.imul(H,kn)|0;var Kg=(z+q|0)+((b&8191)<<13)|0;z=(E+(b>>>13)|0)+(Kg>>>26)|0,Kg&=67108863,q=Math.imul($,Pn),b=Math.imul($,kn),b=b+Math.imul(Z,Pn)|0,E=Math.imul(Z,kn);var Gg=(z+q|0)+((b&8191)<<13)|0;return z=(E+(b>>>13)|0)+(Gg>>>26)|0,Gg&=67108863,L[0]=Rg,L[1]=Pg,L[2]=kg,L[3]=Og,L[4]=Bg,L[5]=$g,L[6]=Dg,L[7]=Ug,L[8]=Mg,L[9]=Lg,L[10]=Fg,L[11]=jg,L[12]=qg,L[13]=zg,L[14]=Wg,L[15]=Hg,L[16]=Vg,L[17]=Kg,L[18]=Gg,z!==0&&(L[19]=z,w.length++),w};Math.imul||(O=T);function A(R,p,g){g.negative=p.negative^R.negative,g.length=R.length+p.length;for(var w=0,_=0,C=0;C<g.length-1;C++){var L=_;_=0;for(var z=w&67108863,q=Math.min(C,p.length-1),b=Math.max(0,C-R.length+1);b<=q;b++){var E=C-b,j=R.words[E]|0,K=p.words[b]|0,X=j*K,re=X&67108863;L=L+(X/67108864|0)|0,re=re+z|0,z=re&67108863,L=L+(re>>>26)|0,_+=L>>>26,L&=67108863}g.words[C]=z,w=L,L=_}return w!==0?g.words[C]=w:g.length--,g._strip()}function M(R,p,g){return A(R,p,g)}i.prototype.mulTo=function(p,g){var w,_=this.length+p.length;return this.length===10&&p.length===10?w=O(this,p,g):_<63?w=T(this,p,g):_<1024?w=A(this,p,g):w=M(this,p,g),w},i.prototype.mul=function(p){var g=new i(null);return g.words=new Array(this.length+p.length),this.mulTo(p,g)},i.prototype.mulf=function(p){var g=new i(null);return g.words=new Array(this.length+p.length),M(this,p,g)},i.prototype.imul=function(p){return this.clone().mulTo(p,this)},i.prototype.imuln=function(p){var g=p<0;g&&(p=-p),r(typeof p=="number"),r(p<67108864);for(var w=0,_=0;_<this.length;_++){var C=(this.words[_]|0)*p,L=(C&67108863)+(w&67108863);w>>=26,w+=C/67108864|0,w+=L>>>26,this.words[_]=L&67108863}return w!==0&&(this.words[_]=w,this.length++),this.length=p===0?1:this.length,g?this.ineg():this},i.prototype.muln=function(p){return this.clone().imuln(p)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(p){var g=v(p);if(g.length===0)return new i(1);for(var w=this,_=0;_<g.length&&g[_]===0;_++,w=w.sqr());if(++_<g.length)for(var C=w.sqr();_<g.length;_++,C=C.sqr())g[_]!==0&&(w=w.mul(C));return w},i.prototype.iushln=function(p){r(typeof p=="number"&&p>=0);var g=p%26,w=(p-g)/26,_=67108863>>>26-g<<26-g,C;if(g!==0){var L=0;for(C=0;C<this.length;C++){var z=this.words[C]&_,q=(this.words[C]|0)-z<<g;this.words[C]=q|L,L=z>>>26-g}L&&(this.words[C]=L,this.length++)}if(w!==0){for(C=this.length-1;C>=0;C--)this.words[C+w]=this.words[C];for(C=0;C<w;C++)this.words[C]=0;this.length+=w}return this._strip()},i.prototype.ishln=function(p){return r(this.negative===0),this.iushln(p)},i.prototype.iushrn=function(p,g,w){r(typeof p=="number"&&p>=0);var _;g?_=(g-g%26)/26:_=0;var C=p%26,L=Math.min((p-C)/26,this.length),z=67108863^67108863>>>C<<C,q=w;if(_-=L,_=Math.max(0,_),q){for(var b=0;b<L;b++)q.words[b]=this.words[b];q.length=L}if(L!==0)if(this.length>L)for(this.length-=L,b=0;b<this.length;b++)this.words[b]=this.words[b+L];else this.words[0]=0,this.length=1;var E=0;for(b=this.length-1;b>=0&&(E!==0||b>=_);b--){var j=this.words[b]|0;this.words[b]=E<<26-C|j>>>C,E=j&z}return q&&E!==0&&(q.words[q.length++]=E),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(p,g,w){return r(this.negative===0),this.iushrn(p,g,w)},i.prototype.shln=function(p){return this.clone().ishln(p)},i.prototype.ushln=function(p){return this.clone().iushln(p)},i.prototype.shrn=function(p){return this.clone().ishrn(p)},i.prototype.ushrn=function(p){return this.clone().iushrn(p)},i.prototype.testn=function(p){r(typeof p=="number"&&p>=0);var g=p%26,w=(p-g)/26,_=1<<g;if(this.length<=w)return!1;var C=this.words[w];return!!(C&_)},i.prototype.imaskn=function(p){r(typeof p=="number"&&p>=0);var g=p%26,w=(p-g)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=w)return this;if(g!==0&&w++,this.length=Math.min(w,this.length),g!==0){var _=67108863^67108863>>>g<<g;this.words[this.length-1]&=_}return this._strip()},i.prototype.maskn=function(p){return this.clone().imaskn(p)},i.prototype.iaddn=function(p){return r(typeof p=="number"),r(p<67108864),p<0?this.isubn(-p):this.negative!==0?this.length===1&&(this.words[0]|0)<=p?(this.words[0]=p-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(p),this.negative=1,this):this._iaddn(p)},i.prototype._iaddn=function(p){this.words[0]+=p;for(var g=0;g<this.length&&this.words[g]>=67108864;g++)this.words[g]-=67108864,g===this.length-1?this.words[g+1]=1:this.words[g+1]++;return this.length=Math.max(this.length,g+1),this},i.prototype.isubn=function(p){if(r(typeof p=="number"),r(p<67108864),p<0)return this.iaddn(-p);if(this.negative!==0)return this.negative=0,this.iaddn(p),this.negative=1,this;if(this.words[0]-=p,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var g=0;g<this.length&&this.words[g]<0;g++)this.words[g]+=67108864,this.words[g+1]-=1;return this._strip()},i.prototype.addn=function(p){return this.clone().iaddn(p)},i.prototype.subn=function(p){return this.clone().isubn(p)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(p,g,w){var _=p.length+w,C;this._expand(_);var L,z=0;for(C=0;C<p.length;C++){L=(this.words[C+w]|0)+z;var q=(p.words[C]|0)*g;L-=q&67108863,z=(L>>26)-(q/67108864|0),this.words[C+w]=L&67108863}for(;C<this.length-w;C++)L=(this.words[C+w]|0)+z,z=L>>26,this.words[C+w]=L&67108863;if(z===0)return this._strip();for(r(z===-1),z=0,C=0;C<this.length;C++)L=-(this.words[C]|0)+z,z=L>>26,this.words[C]=L&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(p,g){var w=this.length-p.length,_=this.clone(),C=p,L=C.words[C.length-1]|0,z=this._countBits(L);w=26-z,w!==0&&(C=C.ushln(w),_.iushln(w),L=C.words[C.length-1]|0);var q=_.length-C.length,b;if(g!=="mod"){b=new i(null),b.length=q+1,b.words=new Array(b.length);for(var E=0;E<b.length;E++)b.words[E]=0}var j=_.clone()._ishlnsubmul(C,1,q);j.negative===0&&(_=j,b&&(b.words[q]=1));for(var K=q-1;K>=0;K--){var X=(_.words[C.length+K]|0)*67108864+(_.words[C.length+K-1]|0);for(X=Math.min(X/L|0,67108863),_._ishlnsubmul(C,X,K);_.negative!==0;)X--,_.negative=0,_._ishlnsubmul(C,1,K),_.isZero()||(_.negative^=1);b&&(b.words[K]=X)}return b&&b._strip(),_._strip(),g!=="div"&&w!==0&&_.iushrn(w),{div:b||null,mod:_}},i.prototype.divmod=function(p,g,w){if(r(!p.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var _,C,L;return this.negative!==0&&p.negative===0?(L=this.neg().divmod(p,g),g!=="mod"&&(_=L.div.neg()),g!=="div"&&(C=L.mod.neg(),w&&C.negative!==0&&C.iadd(p)),{div:_,mod:C}):this.negative===0&&p.negative!==0?(L=this.divmod(p.neg(),g),g!=="mod"&&(_=L.div.neg()),{div:_,mod:L.mod}):(this.negative&p.negative)!==0?(L=this.neg().divmod(p.neg(),g),g!=="div"&&(C=L.mod.neg(),w&&C.negative!==0&&C.isub(p)),{div:L.div,mod:C}):p.length>this.length||this.cmp(p)<0?{div:new i(0),mod:this}:p.length===1?g==="div"?{div:this.divn(p.words[0]),mod:null}:g==="mod"?{div:null,mod:new i(this.modrn(p.words[0]))}:{div:this.divn(p.words[0]),mod:new i(this.modrn(p.words[0]))}:this._wordDiv(p,g)},i.prototype.div=function(p){return this.divmod(p,"div",!1).div},i.prototype.mod=function(p){return this.divmod(p,"mod",!1).mod},i.prototype.umod=function(p){return this.divmod(p,"mod",!0).mod},i.prototype.divRound=function(p){var g=this.divmod(p);if(g.mod.isZero())return g.div;var w=g.div.negative!==0?g.mod.isub(p):g.mod,_=p.ushrn(1),C=p.andln(1),L=w.cmp(_);return L<0||C===1&&L===0?g.div:g.div.negative!==0?g.div.isubn(1):g.div.iaddn(1)},i.prototype.modrn=function(p){var g=p<0;g&&(p=-p),r(p<=67108863);for(var w=(1<<26)%p,_=0,C=this.length-1;C>=0;C--)_=(w*_+(this.words[C]|0))%p;return g?-_:_},i.prototype.modn=function(p){return this.modrn(p)},i.prototype.idivn=function(p){var g=p<0;g&&(p=-p),r(p<=67108863);for(var w=0,_=this.length-1;_>=0;_--){var C=(this.words[_]|0)+w*67108864;this.words[_]=C/p|0,w=C%p}return this._strip(),g?this.ineg():this},i.prototype.divn=function(p){return this.clone().idivn(p)},i.prototype.egcd=function(p){r(p.negative===0),r(!p.isZero());var g=this,w=p.clone();g.negative!==0?g=g.umod(p):g=g.clone();for(var _=new i(1),C=new i(0),L=new i(0),z=new i(1),q=0;g.isEven()&&w.isEven();)g.iushrn(1),w.iushrn(1),++q;for(var b=w.clone(),E=g.clone();!g.isZero();){for(var j=0,K=1;(g.words[0]&K)===0&&j<26;++j,K<<=1);if(j>0)for(g.iushrn(j);j-- >0;)(_.isOdd()||C.isOdd())&&(_.iadd(b),C.isub(E)),_.iushrn(1),C.iushrn(1);for(var X=0,re=1;(w.words[0]&re)===0&&X<26;++X,re<<=1);if(X>0)for(w.iushrn(X);X-- >0;)(L.isOdd()||z.isOdd())&&(L.iadd(b),z.isub(E)),L.iushrn(1),z.iushrn(1);g.cmp(w)>=0?(g.isub(w),_.isub(L),C.isub(z)):(w.isub(g),L.isub(_),z.isub(C))}return{a:L,b:z,gcd:w.iushln(q)}},i.prototype._invmp=function(p){r(p.negative===0),r(!p.isZero());var g=this,w=p.clone();g.negative!==0?g=g.umod(p):g=g.clone();for(var _=new i(1),C=new i(0),L=w.clone();g.cmpn(1)>0&&w.cmpn(1)>0;){for(var z=0,q=1;(g.words[0]&q)===0&&z<26;++z,q<<=1);if(z>0)for(g.iushrn(z);z-- >0;)_.isOdd()&&_.iadd(L),_.iushrn(1);for(var b=0,E=1;(w.words[0]&E)===0&&b<26;++b,E<<=1);if(b>0)for(w.iushrn(b);b-- >0;)C.isOdd()&&C.iadd(L),C.iushrn(1);g.cmp(w)>=0?(g.isub(w),_.isub(C)):(w.isub(g),C.isub(_))}var j;return g.cmpn(1)===0?j=_:j=C,j.cmpn(0)<0&&j.iadd(p),j},i.prototype.gcd=function(p){if(this.isZero())return p.abs();if(p.isZero())return this.abs();var g=this.clone(),w=p.clone();g.negative=0,w.negative=0;for(var _=0;g.isEven()&&w.isEven();_++)g.iushrn(1),w.iushrn(1);do{for(;g.isEven();)g.iushrn(1);for(;w.isEven();)w.iushrn(1);var C=g.cmp(w);if(C<0){var L=g;g=w,w=L}else if(C===0||w.cmpn(1)===0)break;g.isub(w)}while(!0);return w.iushln(_)},i.prototype.invm=function(p){return this.egcd(p).a.umod(p)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(p){return this.words[0]&p},i.prototype.bincn=function(p){r(typeof p=="number");var g=p%26,w=(p-g)/26,_=1<<g;if(this.length<=w)return this._expand(w+1),this.words[w]|=_,this;for(var C=_,L=w;C!==0&&L<this.length;L++){var z=this.words[L]|0;z+=C,C=z>>>26,z&=67108863,this.words[L]=z}return C!==0&&(this.words[L]=C,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(p){var g=p<0;if(this.negative!==0&&!g)return-1;if(this.negative===0&&g)return 1;this._strip();var w;if(this.length>1)w=1;else{g&&(p=-p),r(p<=67108863,"Number is too big");var _=this.words[0]|0;w=_===p?0:_<p?-1:1}return this.negative!==0?-w|0:w},i.prototype.cmp=function(p){if(this.negative!==0&&p.negative===0)return-1;if(this.negative===0&&p.negative!==0)return 1;var g=this.ucmp(p);return this.negative!==0?-g|0:g},i.prototype.ucmp=function(p){if(this.length>p.length)return 1;if(this.length<p.length)return-1;for(var g=0,w=this.length-1;w>=0;w--){var _=this.words[w]|0,C=p.words[w]|0;if(_!==C){_<C?g=-1:_>C&&(g=1);break}}return g},i.prototype.gtn=function(p){return this.cmpn(p)===1},i.prototype.gt=function(p){return this.cmp(p)===1},i.prototype.gten=function(p){return this.cmpn(p)>=0},i.prototype.gte=function(p){return this.cmp(p)>=0},i.prototype.ltn=function(p){return this.cmpn(p)===-1},i.prototype.lt=function(p){return this.cmp(p)===-1},i.prototype.lten=function(p){return this.cmpn(p)<=0},i.prototype.lte=function(p){return this.cmp(p)<=0},i.prototype.eqn=function(p){return this.cmpn(p)===0},i.prototype.eq=function(p){return this.cmp(p)===0},i.red=function(p){return new B(p)},i.prototype.toRed=function(p){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),p.convertTo(this)._forceRed(p)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(p){return this.red=p,this},i.prototype.forceRed=function(p){return r(!this.red,"Already a number in reduction context"),this._forceRed(p)},i.prototype.redAdd=function(p){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,p)},i.prototype.redIAdd=function(p){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,p)},i.prototype.redSub=function(p){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,p)},i.prototype.redISub=function(p){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,p)},i.prototype.redShl=function(p){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,p)},i.prototype.redMul=function(p){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,p),this.red.mul(this,p)},i.prototype.redIMul=function(p){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,p),this.red.imul(this,p)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(p){return r(this.red&&!p.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,p)};var P={k256:null,p224:null,p192:null,p25519:null};function I(R,p){this.name=R,this.p=new i(p,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}I.prototype._tmp=function(){var p=new i(null);return p.words=new Array(Math.ceil(this.n/13)),p},I.prototype.ireduce=function(p){var g=p,w;do this.split(g,this.tmp),g=this.imulK(g),g=g.iadd(this.tmp),w=g.bitLength();while(w>this.n);var _=w<this.n?-1:g.ucmp(this.p);return _===0?(g.words[0]=0,g.length=1):_>0?g.isub(this.p):g.strip!==void 0?g.strip():g._strip(),g},I.prototype.split=function(p,g){p.iushrn(this.n,0,g)},I.prototype.imulK=function(p){return p.imul(this.k)};function F(){I.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(F,I),F.prototype.split=function(p,g){for(var w=4194303,_=Math.min(p.length,9),C=0;C<_;C++)g.words[C]=p.words[C];if(g.length=_,p.length<=9){p.words[0]=0,p.length=1;return}var L=p.words[9];for(g.words[g.length++]=L&w,C=10;C<p.length;C++){var z=p.words[C]|0;p.words[C-10]=(z&w)<<4|L>>>22,L=z}L>>>=22,p.words[C-10]=L,L===0&&p.length>10?p.length-=10:p.length-=9},F.prototype.imulK=function(p){p.words[p.length]=0,p.words[p.length+1]=0,p.length+=2;for(var g=0,w=0;w<p.length;w++){var _=p.words[w]|0;g+=_*977,p.words[w]=g&67108863,g=_*64+(g/67108864|0)}return p.words[p.length-1]===0&&(p.length--,p.words[p.length-1]===0&&p.length--),p};function W(){I.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(W,I);function D(){I.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(D,I);function k(){I.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(k,I),k.prototype.imulK=function(p){for(var g=0,w=0;w<p.length;w++){var _=(p.words[w]|0)*19+g,C=_&67108863;_>>>=26,p.words[w]=C,g=_}return g!==0&&(p.words[p.length++]=g),p},i._prime=function(p){if(P[p])return P[p];var g;if(p==="k256")g=new F;else if(p==="p224")g=new W;else if(p==="p192")g=new D;else if(p==="p25519")g=new k;else throw new Error("Unknown prime "+p);return P[p]=g,g};function B(R){if(typeof R=="string"){var p=i._prime(R);this.m=p.p,this.prime=p}else r(R.gtn(1),"modulus must be greater than 1"),this.m=R,this.prime=null}B.prototype._verify1=function(p){r(p.negative===0,"red works only with positives"),r(p.red,"red works only with red numbers")},B.prototype._verify2=function(p,g){r((p.negative|g.negative)===0,"red works only with positives"),r(p.red&&p.red===g.red,"red works only with red numbers")},B.prototype.imod=function(p){return this.prime?this.prime.ireduce(p)._forceRed(this):(l(p,p.umod(this.m)._forceRed(this)),p)},B.prototype.neg=function(p){return p.isZero()?p.clone():this.m.sub(p)._forceRed(this)},B.prototype.add=function(p,g){this._verify2(p,g);var w=p.add(g);return w.cmp(this.m)>=0&&w.isub(this.m),w._forceRed(this)},B.prototype.iadd=function(p,g){this._verify2(p,g);var w=p.iadd(g);return w.cmp(this.m)>=0&&w.isub(this.m),w},B.prototype.sub=function(p,g){this._verify2(p,g);var w=p.sub(g);return w.cmpn(0)<0&&w.iadd(this.m),w._forceRed(this)},B.prototype.isub=function(p,g){this._verify2(p,g);var w=p.isub(g);return w.cmpn(0)<0&&w.iadd(this.m),w},B.prototype.shl=function(p,g){return this._verify1(p),this.imod(p.ushln(g))},B.prototype.imul=function(p,g){return this._verify2(p,g),this.imod(p.imul(g))},B.prototype.mul=function(p,g){return this._verify2(p,g),this.imod(p.mul(g))},B.prototype.isqr=function(p){return this.imul(p,p.clone())},B.prototype.sqr=function(p){return this.mul(p,p)},B.prototype.sqrt=function(p){if(p.isZero())return p.clone();var g=this.m.andln(3);if(r(g%2===1),g===3){var w=this.m.add(new i(1)).iushrn(2);return this.pow(p,w)}for(var _=this.m.subn(1),C=0;!_.isZero()&&_.andln(1)===0;)C++,_.iushrn(1);r(!_.isZero());var L=new i(1).toRed(this),z=L.redNeg(),q=this.m.subn(1).iushrn(1),b=this.m.bitLength();for(b=new i(2*b*b).toRed(this);this.pow(b,q).cmp(z)!==0;)b.redIAdd(z);for(var E=this.pow(b,_),j=this.pow(p,_.addn(1).iushrn(1)),K=this.pow(p,_),X=C;K.cmp(L)!==0;){for(var re=K,de=0;re.cmp(L)!==0;de++)re=re.redSqr();r(de<X);var he=this.pow(E,new i(1).iushln(X-de-1));j=j.redMul(he),E=he.redSqr(),K=K.redMul(E),X=de}return j},B.prototype.invm=function(p){var g=p._invmp(this.m);return g.negative!==0?(g.negative=0,this.imod(g).redNeg()):this.imod(g)},B.prototype.pow=function(p,g){if(g.isZero())return new i(1).toRed(this);if(g.cmpn(1)===0)return p.clone();var w=4,_=new Array(1<<w);_[0]=new i(1).toRed(this),_[1]=p;for(var C=2;C<_.length;C++)_[C]=this.mul(_[C-1],p);var L=_[0],z=0,q=0,b=g.bitLength()%26;for(b===0&&(b=26),C=g.length-1;C>=0;C--){for(var E=g.words[C],j=b-1;j>=0;j--){var K=E>>j&1;if(L!==_[0]&&(L=this.sqr(L)),K===0&&z===0){q=0;continue}z<<=1,z|=K,q++,!(q!==w&&(C!==0||j!==0))&&(L=this.mul(L,_[z]),q=0,z=0)}b=26}return L},B.prototype.convertTo=function(p){var g=p.umod(this.m);return g===p?g.clone():g},B.prototype.convertFrom=function(p){var g=p.clone();return g.red=null,g},i.mont=function(p){return new N(p)};function N(R){B.call(this,R),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(N,B),N.prototype.convertTo=function(p){return this.imod(p.ushln(this.shift))},N.prototype.convertFrom=function(p){var g=this.imod(p.mul(this.rinv));return g.red=null,g},N.prototype.imul=function(p,g){if(p.isZero()||g.isZero())return p.words[0]=0,p.length=1,p;var w=p.imul(g),_=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),C=w.isub(_).iushrn(this.shift),L=C;return C.cmp(this.m)>=0?L=C.isub(this.m):C.cmpn(0)<0&&(L=C.iadd(this.m)),L._forceRed(this)},N.prototype.mul=function(p,g){if(p.isZero()||g.isZero())return new i(0)._forceRed(this);var w=p.mul(g),_=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),C=w.isub(_).iushrn(this.shift),L=C;return C.cmp(this.m)>=0?L=C.isub(this.m):C.cmpn(0)<0&&(L=C.iadd(this.m)),L._forceRed(this)},N.prototype.invm=function(p){var g=this.imod(p._invmp(this.m).mul(this.r2));return g._forceRed(this)}})(t,Jne)}(mp)),mp.exports}var Xne=t3();const XA=Ii(Xne);var qf={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var QA;function n3(){return QA||(QA=1,function(t,e){var n=zv(),r=n.Buffer;function s(o,a){for(var c in o)a[c]=o[c]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(s(n,e),e.Buffer=i);function i(o,a,c){return r(o,a,c)}i.prototype=Object.create(r.prototype),s(r,i),i.from=function(o,a,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,a,c)},i.alloc=function(o,a,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var u=r(o);return a!==void 0?typeof c=="string"?u.fill(a,c):u.fill(a):u.fill(0),u},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}}(qf,qf.exports)),qf.exports}var xy,eI;function Qne(){if(eI)return xy;eI=1;var t=n3().Buffer;function e(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var i=0;i<n.length;i++){var o=n.charAt(i),a=o.charCodeAt(0);if(r[a]!==255)throw new TypeError(o+" is ambiguous");r[a]=i}var c=n.length,u=n.charAt(0),l=Math.log(c)/Math.log(256),d=Math.log(256)/Math.log(c);function h(m){if((Array.isArray(m)||m instanceof Uint8Array)&&(m=t.from(m)),!t.isBuffer(m))throw new TypeError("Expected Buffer");if(m.length===0)return"";for(var v=0,T=0,O=0,A=m.length;O!==A&&m[O]===0;)O++,v++;for(var M=(A-O)*d+1>>>0,P=new Uint8Array(M);O!==A;){for(var I=m[O],F=0,W=M-1;(I!==0||F<T)&&W!==-1;W--,F++)I+=256*P[W]>>>0,P[W]=I%c>>>0,I=I/c>>>0;if(I!==0)throw new Error("Non-zero carry");T=F,O++}for(var D=M-T;D!==M&&P[D]===0;)D++;for(var k=u.repeat(v);D<M;++D)k+=n.charAt(P[D]);return k}function f(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return t.alloc(0);for(var v=0,T=0,O=0;m[v]===u;)T++,v++;for(var A=(m.length-v)*l+1>>>0,M=new Uint8Array(A);v<m.length;){var P=m.charCodeAt(v);if(P>255)return;var I=r[P];if(I===255)return;for(var F=0,W=A-1;(I!==0||F<O)&&W!==-1;W--,F++)I+=c*M[W]>>>0,M[W]=I%256>>>0,I=I/256>>>0;if(I!==0)throw new Error("Non-zero carry");O=F,v++}for(var D=A-O;D!==A&&M[D]===0;)D++;var k=t.allocUnsafe(T+(A-D));k.fill(0,0,T);for(var B=T;D!==A;)k[B++]=M[D++];return k}function y(m){var v=f(m);if(v)return v;throw new Error("Non-base"+c+" character")}return{encode:h,decodeUnsafe:f,decode:y}}return xy=e,xy}var Ty,tI;function ere(){if(tI)return Ty;tI=1;var t=Qne(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return Ty=t(e),Ty}var tre=ere();const hr=Ii(tre);var qt={},Ny,nI;function nre(){if(nI)return Ny;nI=1;var t=n3().Buffer;function e(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var i=0;i<n.length;i++){var o=n.charAt(i),a=o.charCodeAt(0);if(r[a]!==255)throw new TypeError(o+" is ambiguous");r[a]=i}var c=n.length,u=n.charAt(0),l=Math.log(c)/Math.log(256),d=Math.log(256)/Math.log(c);function h(m){if((Array.isArray(m)||m instanceof Uint8Array)&&(m=t.from(m)),!t.isBuffer(m))throw new TypeError("Expected Buffer");if(m.length===0)return"";for(var v=0,T=0,O=0,A=m.length;O!==A&&m[O]===0;)O++,v++;for(var M=(A-O)*d+1>>>0,P=new Uint8Array(M);O!==A;){for(var I=m[O],F=0,W=M-1;(I!==0||F<T)&&W!==-1;W--,F++)I+=256*P[W]>>>0,P[W]=I%c>>>0,I=I/c>>>0;if(I!==0)throw new Error("Non-zero carry");T=F,O++}for(var D=M-T;D!==M&&P[D]===0;)D++;for(var k=u.repeat(v);D<M;++D)k+=n.charAt(P[D]);return k}function f(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return t.alloc(0);for(var v=0,T=0,O=0;m[v]===u;)T++,v++;for(var A=(m.length-v)*l+1>>>0,M=new Uint8Array(A);v<m.length;){var P=m.charCodeAt(v);if(P>255)return;var I=r[P];if(I===255)return;for(var F=0,W=A-1;(I!==0||F<O)&&W!==-1;W--,F++)I+=c*M[W]>>>0,M[W]=I%256>>>0,I=I/256>>>0;if(I!==0)throw new Error("Non-zero carry");O=F,v++}for(var D=A-O;D!==A&&M[D]===0;)D++;var k=t.allocUnsafe(T+(A-D));k.fill(0,0,T);for(var B=T;D!==A;)k[B++]=M[D++];return k}function y(m){var v=f(m);if(v)return v;throw new Error("Non-base"+c+" character")}return{encode:h,decodeUnsafe:f,decode:y}}return Ny=e,Ny}var Ry,rI;function rre(){if(rI)return Ry;rI=1;var t=nre(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return Ry=t(e),Ry}function Ao(t,e,n){return e<=t&&t<=n}function wg(t){if(t===void 0)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function sre(t){for(var e=String(t),n=e.length,r=0,s=[];r<n;){var i=e.charCodeAt(r);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(r===n-1)s.push(65533);else{var o=t.charCodeAt(r+1);if(56320<=o&&o<=57343){var a=i&1023,c=o&1023;s.push(65536+(a<<10)+c),r+=1}else s.push(65533)}r+=1}return s}function ire(t){for(var e="",n=0;n<t.length;++n){var r=t[n];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return e}var a0=-1;function Wv(t){this.tokens=[].slice.call(t)}Wv.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():a0},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var ll=-1;function Py(t,e){if(t)throw TypeError("Decoder error");return e||65533}var c0="utf-8";function u0(t,e){if(!(this instanceof u0))return new u0(t,e);if(t=t!==void 0?String(t).toLowerCase():c0,t!==c0)throw new Error("Encoding not supported. Only utf-8 is supported");e=wg(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}u0.prototype={decode:function(e,n){var r;typeof e=="object"&&e instanceof ArrayBuffer?r=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):r=new Uint8Array(0),n=wg(n),this._streaming||(this._decoder=new ore({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!n.stream;for(var s=new Wv(r),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==ll);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===ll)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),ire(i)}};function l0(t,e){if(!(this instanceof l0))return new l0(t,e);if(t=t!==void 0?String(t).toLowerCase():c0,t!==c0)throw new Error("Encoding not supported. Only utf-8 is supported");e=wg(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}l0.prototype={encode:function(e,n){e=e?String(e):"",n=wg(n),this._streaming||(this._encoder=new are(this._options)),this._streaming=!!n.stream;for(var r=[],s=new Wv(sre(e)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==ll);)Array.isArray(i)?r.push.apply(r,i):r.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==ll;)Array.isArray(i)?r.push.apply(r,i):r.push(i);this._encoder=null}return new Uint8Array(r)}};function ore(t){var e=t.fatal,n=0,r=0,s=0,i=128,o=191;this.handler=function(a,c){if(c===a0&&s!==0)return s=0,Py(e);if(c===a0)return ll;if(s===0){if(Ao(c,0,127))return c;if(Ao(c,194,223))s=1,n=c-192;else if(Ao(c,224,239))c===224&&(i=160),c===237&&(o=159),s=2,n=c-224;else if(Ao(c,240,244))c===240&&(i=144),c===244&&(o=143),s=3,n=c-240;else return Py(e);return n=n<<6*s,null}if(!Ao(c,i,o))return n=s=r=0,i=128,o=191,a.prepend(c),Py(e);if(i=128,o=191,r+=1,n+=c-128<<6*(s-r),r!==s)return null;var u=n;return n=s=r=0,u}}function are(t){t.fatal,this.handler=function(e,n){if(n===a0)return ll;if(Ao(n,0,127))return n;var r,s;Ao(n,128,2047)?(r=1,s=192):Ao(n,2048,65535)?(r=2,s=224):Ao(n,65536,1114111)&&(r=3,s=240);for(var i=[(n>>6*r)+s];r>0;){var o=n>>6*(r-1);i.push(128|o&63),r-=1}return i}}const cre=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:u0,TextEncoder:l0},Symbol.toStringTag,{value:"Module"})),ure=b0(cre);var sI;function lre(){if(sI)return qt;sI=1;var t=qt&&qt.__createBinding||(Object.create?function(D,k,B,N){N===void 0&&(N=B),Object.defineProperty(D,N,{enumerable:!0,get:function(){return k[B]}})}:function(D,k,B,N){N===void 0&&(N=B),D[N]=k[B]}),e=qt&&qt.__setModuleDefault||(Object.create?function(D,k){Object.defineProperty(D,"default",{enumerable:!0,value:k})}:function(D,k){D.default=k}),n=qt&&qt.__decorate||function(D,k,B,N){var R=arguments.length,p=R<3?k:N===null?N=Object.getOwnPropertyDescriptor(k,B):N,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(D,k,B,N);else for(var w=D.length-1;w>=0;w--)(g=D[w])&&(p=(R<3?g(p):R>3?g(k,B,p):g(k,B))||p);return R>3&&p&&Object.defineProperty(k,B,p),p},r=qt&&qt.__importStar||function(D){if(D&&D.__esModule)return D;var k={};if(D!=null)for(var B in D)B!=="default"&&Object.hasOwnProperty.call(D,B)&&t(k,D,B);return e(k,D),k},s=qt&&qt.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};Object.defineProperty(qt,"__esModule",{value:!0}),qt.deserializeUnchecked=qt.deserialize=qt.serialize=qt.BinaryReader=qt.BinaryWriter=qt.BorshError=qt.baseDecode=qt.baseEncode=void 0;const i=s(t3()),o=s(rre()),a=r(ure),c=typeof TextDecoder!="function"?a.TextDecoder:TextDecoder,u=new c("utf-8",{fatal:!0});function l(D){return typeof D=="string"&&(D=Le.from(D,"utf8")),o.default.encode(Le.from(D))}qt.baseEncode=l;function d(D){return Le.from(o.default.decode(D))}qt.baseDecode=d;const h=1024;class f extends Error{constructor(k){super(k),this.fieldPath=[],this.originalMessage=k}addToFieldPath(k){this.fieldPath.splice(0,0,k),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}qt.BorshError=f;class y{constructor(){this.buf=Le.alloc(h),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Le.concat([this.buf,Le.alloc(h)]))}writeU8(k){this.maybeResize(),this.buf.writeUInt8(k,this.length),this.length+=1}writeU16(k){this.maybeResize(),this.buf.writeUInt16LE(k,this.length),this.length+=2}writeU32(k){this.maybeResize(),this.buf.writeUInt32LE(k,this.length),this.length+=4}writeU64(k){this.maybeResize(),this.writeBuffer(Le.from(new i.default(k).toArray("le",8)))}writeU128(k){this.maybeResize(),this.writeBuffer(Le.from(new i.default(k).toArray("le",16)))}writeU256(k){this.maybeResize(),this.writeBuffer(Le.from(new i.default(k).toArray("le",32)))}writeU512(k){this.maybeResize(),this.writeBuffer(Le.from(new i.default(k).toArray("le",64)))}writeBuffer(k){this.buf=Le.concat([Le.from(this.buf.subarray(0,this.length)),k,Le.alloc(h)]),this.length+=k.length}writeString(k){this.maybeResize();const B=Le.from(k,"utf8");this.writeU32(B.length),this.writeBuffer(B)}writeFixedArray(k){this.writeBuffer(Le.from(k))}writeArray(k,B){this.maybeResize(),this.writeU32(k.length);for(const N of k)this.maybeResize(),B(N)}toArray(){return this.buf.subarray(0,this.length)}}qt.BinaryWriter=y;function m(D,k,B){const N=B.value;B.value=function(...R){try{return N.apply(this,R)}catch(p){if(p instanceof RangeError){const g=p.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(g)>=0)throw new f("Reached the end of buffer when deserializing")}throw p}}}class v{constructor(k){this.buf=k,this.offset=0}readU8(){const k=this.buf.readUInt8(this.offset);return this.offset+=1,k}readU16(){const k=this.buf.readUInt16LE(this.offset);return this.offset+=2,k}readU32(){const k=this.buf.readUInt32LE(this.offset);return this.offset+=4,k}readU64(){const k=this.readBuffer(8);return new i.default(k,"le")}readU128(){const k=this.readBuffer(16);return new i.default(k,"le")}readU256(){const k=this.readBuffer(32);return new i.default(k,"le")}readU512(){const k=this.readBuffer(64);return new i.default(k,"le")}readBuffer(k){if(this.offset+k>this.buf.length)throw new f(`Expected buffer length ${k} isn't within bounds`);const B=this.buf.slice(this.offset,this.offset+k);return this.offset+=k,B}readString(){const k=this.readU32(),B=this.readBuffer(k);try{return u.decode(B)}catch(N){throw new f(`Error decoding UTF-8 string: ${N}`)}}readFixedArray(k){return new Uint8Array(this.readBuffer(k))}readArray(k){const B=this.readU32(),N=Array();for(let R=0;R<B;++R)N.push(k());return N}}n([m],v.prototype,"readU8",null),n([m],v.prototype,"readU16",null),n([m],v.prototype,"readU32",null),n([m],v.prototype,"readU64",null),n([m],v.prototype,"readU128",null),n([m],v.prototype,"readU256",null),n([m],v.prototype,"readU512",null),n([m],v.prototype,"readString",null),n([m],v.prototype,"readFixedArray",null),n([m],v.prototype,"readArray",null),qt.BinaryReader=v;function T(D){return D.charAt(0).toUpperCase()+D.slice(1)}function O(D,k,B,N,R){try{if(typeof N=="string")R[`write${T(N)}`](B);else if(N instanceof Array)if(typeof N[0]=="number"){if(B.length!==N[0])throw new f(`Expecting byte array of length ${N[0]}, but got ${B.length} bytes`);R.writeFixedArray(B)}else if(N.length===2&&typeof N[1]=="number"){if(B.length!==N[1])throw new f(`Expecting byte array of length ${N[1]}, but got ${B.length} bytes`);for(let p=0;p<N[1];p++)O(D,null,B[p],N[0],R)}else R.writeArray(B,p=>{O(D,k,p,N[0],R)});else if(N.kind!==void 0)switch(N.kind){case"option":{B==null?R.writeU8(0):(R.writeU8(1),O(D,k,B,N.type,R));break}case"map":{R.writeU32(B.size),B.forEach((p,g)=>{O(D,k,g,N.key,R),O(D,k,p,N.value,R)});break}default:throw new f(`FieldType ${N} unrecognized`)}else A(D,B,R)}catch(p){throw p instanceof f&&p.addToFieldPath(k),p}}function A(D,k,B){if(typeof k.borshSerialize=="function"){k.borshSerialize(B);return}const N=D.get(k.constructor);if(!N)throw new f(`Class ${k.constructor.name} is missing in schema`);if(N.kind==="struct")N.fields.map(([R,p])=>{O(D,R,k[R],p,B)});else if(N.kind==="enum"){const R=k[N.field];for(let p=0;p<N.values.length;++p){const[g,w]=N.values[p];if(g===R){B.writeU8(p),O(D,g,k[g],w,B);break}}}else throw new f(`Unexpected schema kind: ${N.kind} for ${k.constructor.name}`)}function M(D,k,B=y){const N=new B;return A(D,k,N),N.toArray()}qt.serialize=M;function P(D,k,B,N){try{if(typeof B=="string")return N[`read${T(B)}`]();if(B instanceof Array){if(typeof B[0]=="number")return N.readFixedArray(B[0]);if(typeof B[1]=="number"){const R=[];for(let p=0;p<B[1];p++)R.push(P(D,null,B[0],N));return R}else return N.readArray(()=>P(D,k,B[0],N))}if(B.kind==="option")return N.readU8()?P(D,k,B.type,N):void 0;if(B.kind==="map"){let R=new Map;const p=N.readU32();for(let g=0;g<p;g++){const w=P(D,k,B.key,N),_=P(D,k,B.value,N);R.set(w,_)}return R}return I(D,B,N)}catch(R){throw R instanceof f&&R.addToFieldPath(k),R}}function I(D,k,B){if(typeof k.borshDeserialize=="function")return k.borshDeserialize(B);const N=D.get(k);if(!N)throw new f(`Class ${k.name} is missing in schema`);if(N.kind==="struct"){const R={};for(const[p,g]of D.get(k).fields)R[p]=P(D,p,g,B);return new k(R)}if(N.kind==="enum"){const R=B.readU8();if(R>=N.values.length)throw new f(`Enum index: ${R} is out of range`);const[p,g]=N.values[R],w=P(D,p,g,B);return new k({[p]:w})}throw new f(`Unexpected schema kind: ${N.kind} for ${k.constructor.name}`)}function F(D,k,B,N=v){const R=new N(B),p=I(D,k,R);if(R.offset<B.length)throw new f(`Unexpected ${B.length-R.offset} bytes after deserialized data`);return p}qt.deserialize=F;function W(D,k,B,N=v){const R=new N(B);return I(D,k,R)}return qt.deserializeUnchecked=W,qt}var ky=lre(),ce={},iI;function dre(){if(iI)return ce;iI=1,Object.defineProperty(ce,"__esModule",{value:!0}),ce.s16=ce.s8=ce.nu64be=ce.u48be=ce.u40be=ce.u32be=ce.u24be=ce.u16be=ce.nu64=ce.u48=ce.u40=ce.u32=ce.u24=ce.u16=ce.u8=ce.offset=ce.greedy=ce.Constant=ce.UTF8=ce.CString=ce.Blob=ce.Boolean=ce.BitField=ce.BitStructure=ce.VariantLayout=ce.Union=ce.UnionLayoutDiscriminator=ce.UnionDiscriminator=ce.Structure=ce.Sequence=ce.DoubleBE=ce.Double=ce.FloatBE=ce.Float=ce.NearInt64BE=ce.NearInt64=ce.NearUInt64BE=ce.NearUInt64=ce.IntBE=ce.Int=ce.UIntBE=ce.UInt=ce.OffsetLayout=ce.GreedyCount=ce.ExternalLayout=ce.bindConstructorLayout=ce.nameWithProperty=ce.Layout=ce.uint8ArrayToBuffer=ce.checkUint8Array=void 0,ce.constant=ce.utf8=ce.cstr=ce.blob=ce.unionLayoutDiscriminator=ce.union=ce.seq=ce.bits=ce.struct=ce.f64be=ce.f64=ce.f32be=ce.f32=ce.ns64be=ce.s48be=ce.s40be=ce.s32be=ce.s24be=ce.s16be=ce.ns64=ce.s48=ce.s40=ce.s32=ce.s24=void 0;const t=zv();function e(b){if(!(b instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}ce.checkUint8Array=e;function n(b){return e(b),t.Buffer.from(b.buffer,b.byteOffset,b.length)}ce.uint8ArrayToBuffer=n;let r=class{constructor(E,j){if(!Number.isInteger(E))throw new TypeError("span must be an integer");this.span=E,this.property=j}makeDestinationObject(){return{}}getSpan(E,j){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(E){const j=Object.create(this.constructor.prototype);return Object.assign(j,this),j.property=E,j}fromArray(E){}};ce.Layout=r;function s(b,E){return E.property?b+"["+E.property+"]":b}ce.nameWithProperty=s;function i(b,E){if(typeof b!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(b,"layout_"))throw new Error("Class is already bound to a layout");if(!(E&&E instanceof r))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(E,"boundConstructor_"))throw new Error("layout is already bound to a constructor");b.layout_=E,E.boundConstructor_=b,E.makeDestinationObject=()=>new b,Object.defineProperty(b.prototype,"encode",{value(j,K){return E.encode(this,j,K)},writable:!0}),Object.defineProperty(b,"decode",{value(j,K){return E.decode(j,K)},writable:!0})}ce.bindConstructorLayout=i;class o extends r{isCount(){throw new Error("ExternalLayout is abstract")}}ce.ExternalLayout=o;class a extends o{constructor(E=1,j){if(!Number.isInteger(E)||0>=E)throw new TypeError("elementSpan must be a (positive) integer");super(-1,j),this.elementSpan=E}isCount(){return!0}decode(E,j=0){e(E);const K=E.length-j;return Math.floor(K/this.elementSpan)}encode(E,j,K){return 0}}ce.GreedyCount=a;class c extends o{constructor(E,j=0,K){if(!(E instanceof r))throw new TypeError("layout must be a Layout");if(!Number.isInteger(j))throw new TypeError("offset must be integer or undefined");super(E.span,K||E.property),this.layout=E,this.offset=j}isCount(){return this.layout instanceof u||this.layout instanceof l}decode(E,j=0){return this.layout.decode(E,j+this.offset)}encode(E,j,K=0){return this.layout.encode(E,j,K+this.offset)}}ce.OffsetLayout=c;class u extends r{constructor(E,j){if(super(E,j),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(E,j=0){return n(E).readUIntLE(j,this.span)}encode(E,j,K=0){return n(j).writeUIntLE(E,K,this.span),this.span}}ce.UInt=u;class l extends r{constructor(E,j){if(super(E,j),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(E,j=0){return n(E).readUIntBE(j,this.span)}encode(E,j,K=0){return n(j).writeUIntBE(E,K,this.span),this.span}}ce.UIntBE=l;class d extends r{constructor(E,j){if(super(E,j),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(E,j=0){return n(E).readIntLE(j,this.span)}encode(E,j,K=0){return n(j).writeIntLE(E,K,this.span),this.span}}ce.Int=d;class h extends r{constructor(E,j){if(super(E,j),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(E,j=0){return n(E).readIntBE(j,this.span)}encode(E,j,K=0){return n(j).writeIntBE(E,K,this.span),this.span}}ce.IntBE=h;const f=Math.pow(2,32);function y(b){const E=Math.floor(b/f),j=b-E*f;return{hi32:E,lo32:j}}function m(b,E){return b*f+E}class v extends r{constructor(E){super(8,E)}decode(E,j=0){const K=n(E),X=K.readUInt32LE(j),re=K.readUInt32LE(j+4);return m(re,X)}encode(E,j,K=0){const X=y(E),re=n(j);return re.writeUInt32LE(X.lo32,K),re.writeUInt32LE(X.hi32,K+4),8}}ce.NearUInt64=v;class T extends r{constructor(E){super(8,E)}decode(E,j=0){const K=n(E),X=K.readUInt32BE(j),re=K.readUInt32BE(j+4);return m(X,re)}encode(E,j,K=0){const X=y(E),re=n(j);return re.writeUInt32BE(X.hi32,K),re.writeUInt32BE(X.lo32,K+4),8}}ce.NearUInt64BE=T;class O extends r{constructor(E){super(8,E)}decode(E,j=0){const K=n(E),X=K.readUInt32LE(j),re=K.readInt32LE(j+4);return m(re,X)}encode(E,j,K=0){const X=y(E),re=n(j);return re.writeUInt32LE(X.lo32,K),re.writeInt32LE(X.hi32,K+4),8}}ce.NearInt64=O;class A extends r{constructor(E){super(8,E)}decode(E,j=0){const K=n(E),X=K.readInt32BE(j),re=K.readUInt32BE(j+4);return m(X,re)}encode(E,j,K=0){const X=y(E),re=n(j);return re.writeInt32BE(X.hi32,K),re.writeUInt32BE(X.lo32,K+4),8}}ce.NearInt64BE=A;class M extends r{constructor(E){super(4,E)}decode(E,j=0){return n(E).readFloatLE(j)}encode(E,j,K=0){return n(j).writeFloatLE(E,K),4}}ce.Float=M;class P extends r{constructor(E){super(4,E)}decode(E,j=0){return n(E).readFloatBE(j)}encode(E,j,K=0){return n(j).writeFloatBE(E,K),4}}ce.FloatBE=P;class I extends r{constructor(E){super(8,E)}decode(E,j=0){return n(E).readDoubleLE(j)}encode(E,j,K=0){return n(j).writeDoubleLE(E,K),8}}ce.Double=I;class F extends r{constructor(E){super(8,E)}decode(E,j=0){return n(E).readDoubleBE(j)}encode(E,j,K=0){return n(j).writeDoubleBE(E,K),8}}ce.DoubleBE=F;class W extends r{constructor(E,j,K){if(!(E instanceof r))throw new TypeError("elementLayout must be a Layout");if(!(j instanceof o&&j.isCount()||Number.isInteger(j)&&0<=j))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let X=-1;!(j instanceof o)&&0<E.span&&(X=j*E.span),super(X,K),this.elementLayout=E,this.count=j}getSpan(E,j=0){if(0<=this.span)return this.span;let K=0,X=this.count;if(X instanceof o&&(X=X.decode(E,j)),0<this.elementLayout.span)K=X*this.elementLayout.span;else{let re=0;for(;re<X;)K+=this.elementLayout.getSpan(E,j+K),++re}return K}decode(E,j=0){const K=[];let X=0,re=this.count;for(re instanceof o&&(re=re.decode(E,j));X<re;)K.push(this.elementLayout.decode(E,j)),j+=this.elementLayout.getSpan(E,j),X+=1;return K}encode(E,j,K=0){const X=this.elementLayout,re=E.reduce((de,he)=>de+X.encode(he,j,K+de),0);return this.count instanceof o&&this.count.encode(E.length,j,K),re}}ce.Sequence=W;class D extends r{constructor(E,j,K){if(!(Array.isArray(E)&&E.reduce((re,de)=>re&&de instanceof r,!0)))throw new TypeError("fields must be array of Layout instances");typeof j=="boolean"&&K===void 0&&(K=j,j=void 0);for(const re of E)if(0>re.span&&re.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let X=-1;try{X=E.reduce((re,de)=>re+de.getSpan(),0)}catch{}super(X,j),this.fields=E,this.decodePrefixes=!!K}getSpan(E,j=0){if(0<=this.span)return this.span;let K=0;try{K=this.fields.reduce((X,re)=>{const de=re.getSpan(E,j);return j+=de,X+de},0)}catch{throw new RangeError("indeterminate span")}return K}decode(E,j=0){e(E);const K=this.makeDestinationObject();for(const X of this.fields)if(X.property!==void 0&&(K[X.property]=X.decode(E,j)),j+=X.getSpan(E,j),this.decodePrefixes&&E.length===j)break;return K}encode(E,j,K=0){const X=K;let re=0,de=0;for(const he of this.fields){let Oe=he.span;if(de=0<Oe?Oe:0,he.property!==void 0){const Re=E[he.property];Re!==void 0&&(de=he.encode(Re,j,K),0>Oe&&(Oe=he.getSpan(j,K)))}re=K,K+=Oe}return re+de-X}fromArray(E){const j=this.makeDestinationObject();for(const K of this.fields)K.property!==void 0&&0<E.length&&(j[K.property]=E.shift());return j}layoutFor(E){if(typeof E!="string")throw new TypeError("property must be string");for(const j of this.fields)if(j.property===E)return j}offsetOf(E){if(typeof E!="string")throw new TypeError("property must be string");let j=0;for(const K of this.fields){if(K.property===E)return j;0>K.span?j=-1:0<=j&&(j+=K.span)}}}ce.Structure=D;class k{constructor(E){this.property=E}decode(E,j){throw new Error("UnionDiscriminator is abstract")}encode(E,j,K){throw new Error("UnionDiscriminator is abstract")}}ce.UnionDiscriminator=k;class B extends k{constructor(E,j){if(!(E instanceof o&&E.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(j||E.property||"variant"),this.layout=E}decode(E,j){return this.layout.decode(E,j)}encode(E,j,K){return this.layout.encode(E,j,K)}}ce.UnionLayoutDiscriminator=B;class N extends r{constructor(E,j,K){let X;if(E instanceof u||E instanceof l)X=new B(new c(E));else if(E instanceof o&&E.isCount())X=new B(E);else if(E instanceof k)X=E;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(j===void 0&&(j=null),!(j===null||j instanceof r))throw new TypeError("defaultLayout must be null or a Layout");if(j!==null){if(0>j.span)throw new Error("defaultLayout must have constant span");j.property===void 0&&(j=j.replicate("content"))}let re=-1;j&&(re=j.span,0<=re&&(E instanceof u||E instanceof l)&&(re+=X.layout.span)),super(re,K),this.discriminator=X,this.usesPrefixDiscriminator=E instanceof u||E instanceof l,this.defaultLayout=j,this.registry={};let de=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(he){return de(he)},this.configGetSourceVariant=function(he){de=he.bind(this)}}getSpan(E,j=0){if(0<=this.span)return this.span;const K=this.getVariant(E,j);if(!K)throw new Error("unable to determine span for unrecognized variant");return K.getSpan(E,j)}defaultGetSourceVariant(E){if(Object.prototype.hasOwnProperty.call(E,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(E,this.defaultLayout.property))return;const j=this.registry[E[this.discriminator.property]];if(j&&(!j.layout||j.property&&Object.prototype.hasOwnProperty.call(E,j.property)))return j}else for(const j in this.registry){const K=this.registry[j];if(K.property&&Object.prototype.hasOwnProperty.call(E,K.property))return K}throw new Error("unable to infer src variant")}decode(E,j=0){let K;const X=this.discriminator,re=X.decode(E,j),de=this.registry[re];if(de===void 0){const he=this.defaultLayout;let Oe=0;this.usesPrefixDiscriminator&&(Oe=X.layout.span),K=this.makeDestinationObject(),K[X.property]=re,K[he.property]=he.decode(E,j+Oe)}else K=de.decode(E,j);return K}encode(E,j,K=0){const X=this.getSourceVariant(E);if(X===void 0){const re=this.discriminator,de=this.defaultLayout;let he=0;return this.usesPrefixDiscriminator&&(he=re.layout.span),re.encode(E[re.property],j,K),he+de.encode(E[de.property],j,K+he)}return X.encode(E,j,K)}addVariant(E,j,K){const X=new R(this,E,j,K);return this.registry[E]=X,X}getVariant(E,j=0){let K;return E instanceof Uint8Array?K=this.discriminator.decode(E,j):K=E,this.registry[K]}}ce.Union=N;class R extends r{constructor(E,j,K,X){if(!(E instanceof N))throw new TypeError("union must be a Union");if(!Number.isInteger(j)||0>j)throw new TypeError("variant must be a (non-negative) integer");if(typeof K=="string"&&X===void 0&&(X=K,K=null),K){if(!(K instanceof r))throw new TypeError("layout must be a Layout");if(E.defaultLayout!==null&&0<=K.span&&K.span>E.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof X!="string")throw new TypeError("variant must have a String property")}let re=E.span;0>E.span&&(re=K?K.span:0,0<=re&&E.usesPrefixDiscriminator&&(re+=E.discriminator.layout.span)),super(re,X),this.union=E,this.variant=j,this.layout=K||null}getSpan(E,j=0){if(0<=this.span)return this.span;let K=0;this.union.usesPrefixDiscriminator&&(K=this.union.discriminator.layout.span);let X=0;return this.layout&&(X=this.layout.getSpan(E,j+K)),K+X}decode(E,j=0){const K=this.makeDestinationObject();if(this!==this.union.getVariant(E,j))throw new Error("variant mismatch");let X=0;return this.union.usesPrefixDiscriminator&&(X=this.union.discriminator.layout.span),this.layout?K[this.property]=this.layout.decode(E,j+X):this.property?K[this.property]=!0:this.union.usesPrefixDiscriminator&&(K[this.union.discriminator.property]=this.variant),K}encode(E,j,K=0){let X=0;if(this.union.usesPrefixDiscriminator&&(X=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(E,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,j,K);let re=X;if(this.layout&&(this.layout.encode(E[this.property],j,K+X),re+=this.layout.getSpan(j,K+X),0<=this.union.span&&re>this.union.span))throw new Error("encoded variant overruns containing union");return re}fromArray(E){if(this.layout)return this.layout.fromArray(E)}}ce.VariantLayout=R;function p(b){return 0>b&&(b+=4294967296),b}class g extends r{constructor(E,j,K){if(!(E instanceof u||E instanceof l))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof j=="string"&&K===void 0&&(K=j,j=!1),4<E.span)throw new RangeError("word cannot exceed 32 bits");super(E.span,K),this.word=E,this.msb=!!j,this.fields=[];let X=0;this._packedSetValue=function(re){return X=p(re),this},this._packedGetValue=function(){return X}}decode(E,j=0){const K=this.makeDestinationObject(),X=this.word.decode(E,j);this._packedSetValue(X);for(const re of this.fields)re.property!==void 0&&(K[re.property]=re.decode(E));return K}encode(E,j,K=0){const X=this.word.decode(j,K);this._packedSetValue(X);for(const re of this.fields)if(re.property!==void 0){const de=E[re.property];de!==void 0&&re.encode(de)}return this.word.encode(this._packedGetValue(),j,K)}addField(E,j){const K=new w(this,E,j);return this.fields.push(K),K}addBoolean(E){const j=new _(this,E);return this.fields.push(j),j}fieldFor(E){if(typeof E!="string")throw new TypeError("property must be string");for(const j of this.fields)if(j.property===E)return j}}ce.BitStructure=g;class w{constructor(E,j,K){if(!(E instanceof g))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(j)||0>=j)throw new TypeError("bits must be positive integer");const X=8*E.span,re=E.fields.reduce((de,he)=>de+he.bits,0);if(j+re>X)throw new Error("bits too long for span remainder ("+(X-re)+" of "+X+" remain)");this.container=E,this.bits=j,this.valueMask=(1<<j)-1,j===32&&(this.valueMask=4294967295),this.start=re,this.container.msb&&(this.start=X-re-j),this.wordMask=p(this.valueMask<<this.start),this.property=K}decode(E,j){const K=this.container._packedGetValue();return p(K&this.wordMask)>>>this.start}encode(E){if(typeof E!="number"||!Number.isInteger(E)||E!==p(E&this.valueMask))throw new TypeError(s("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const j=this.container._packedGetValue(),K=p(E<<this.start);this.container._packedSetValue(p(j&~this.wordMask)|K)}}ce.BitField=w;class _ extends w{constructor(E,j){super(E,1,j)}decode(E,j){return!!super.decode(E,j)}encode(E){typeof E=="boolean"&&(E=+E),super.encode(E)}}ce.Boolean=_;class C extends r{constructor(E,j){if(!(E instanceof o&&E.isCount()||Number.isInteger(E)&&0<=E))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let K=-1;E instanceof o||(K=E),super(K,j),this.length=E}getSpan(E,j){let K=this.span;return 0>K&&(K=this.length.decode(E,j)),K}decode(E,j=0){let K=this.span;return 0>K&&(K=this.length.decode(E,j)),n(E).slice(j,j+K)}encode(E,j,K){let X=this.length;if(this.length instanceof o&&(X=E.length),!(E instanceof Uint8Array&&X===E.length))throw new TypeError(s("Blob.encode",this)+" requires (length "+X+") Uint8Array as src");if(K+X>j.length)throw new RangeError("encoding overruns Uint8Array");const re=n(E);return n(j).write(re.toString("hex"),K,X,"hex"),this.length instanceof o&&this.length.encode(X,j,K),X}}ce.Blob=C;class L extends r{constructor(E){super(-1,E)}getSpan(E,j=0){e(E);let K=j;for(;K<E.length&&E[K]!==0;)K+=1;return 1+K-j}decode(E,j=0){const K=this.getSpan(E,j);return n(E).slice(j,j+K-1).toString("utf-8")}encode(E,j,K=0){typeof E!="string"&&(E=String(E));const X=t.Buffer.from(E,"utf8"),re=X.length;if(K+re>j.length)throw new RangeError("encoding overruns Buffer");const de=n(j);return X.copy(de,K),de[K+re]=0,re+1}}ce.CString=L;class z extends r{constructor(E,j){if(typeof E=="string"&&j===void 0&&(j=E,E=void 0),E===void 0)E=-1;else if(!Number.isInteger(E))throw new TypeError("maxSpan must be an integer");super(-1,j),this.maxSpan=E}getSpan(E,j=0){return e(E),E.length-j}decode(E,j=0){const K=this.getSpan(E,j);if(0<=this.maxSpan&&this.maxSpan<K)throw new RangeError("text length exceeds maxSpan");return n(E).slice(j,j+K).toString("utf-8")}encode(E,j,K=0){typeof E!="string"&&(E=String(E));const X=t.Buffer.from(E,"utf8"),re=X.length;if(0<=this.maxSpan&&this.maxSpan<re)throw new RangeError("text length exceeds maxSpan");if(K+re>j.length)throw new RangeError("encoding overruns Buffer");return X.copy(n(j),K),re}}ce.UTF8=z;class q extends r{constructor(E,j){super(0,j),this.value=E}decode(E,j){return this.value}encode(E,j,K){return 0}}return ce.Constant=q,ce.greedy=(b,E)=>new a(b,E),ce.offset=(b,E,j)=>new c(b,E,j),ce.u8=b=>new u(1,b),ce.u16=b=>new u(2,b),ce.u24=b=>new u(3,b),ce.u32=b=>new u(4,b),ce.u40=b=>new u(5,b),ce.u48=b=>new u(6,b),ce.nu64=b=>new v(b),ce.u16be=b=>new l(2,b),ce.u24be=b=>new l(3,b),ce.u32be=b=>new l(4,b),ce.u40be=b=>new l(5,b),ce.u48be=b=>new l(6,b),ce.nu64be=b=>new T(b),ce.s8=b=>new d(1,b),ce.s16=b=>new d(2,b),ce.s24=b=>new d(3,b),ce.s32=b=>new d(4,b),ce.s40=b=>new d(5,b),ce.s48=b=>new d(6,b),ce.ns64=b=>new O(b),ce.s16be=b=>new h(2,b),ce.s24be=b=>new h(3,b),ce.s32be=b=>new h(4,b),ce.s40be=b=>new h(5,b),ce.s48be=b=>new h(6,b),ce.ns64be=b=>new A(b),ce.f32=b=>new M(b),ce.f32be=b=>new P(b),ce.f64=b=>new I(b),ce.f64be=b=>new F(b),ce.struct=(b,E,j)=>new D(b,E,j),ce.bits=(b,E,j)=>new g(b,E,j),ce.seq=(b,E,j)=>new W(b,E,j),ce.union=(b,E,j)=>new N(b,E,j),ce.unionLayoutDiscriminator=(b,E)=>new B(b,E),ce.blob=(b,E)=>new C(b,E),ce.cstr=b=>new L(b),ce.utf8=(b,E)=>new z(b,E),ce.constant=(b,E)=>new q(b,E),ce}var Q=dre(),hre=8078e3,fre=8078001,pre=8078004,gre=8078005,mre=8078006,yre=8078011;function r3(t){return Array.isArray(t)?"%5B"+t.map(r3).join("%2C%20")+"%5D":typeof t=="bigint"?`${t}n`:encodeURIComponent(String(t!=null&&Object.getPrototypeOf(t)===null?{...t}:t))}function wre([t,e]){return`${t}=${r3(e)}`}function bre(t){const e=Object.entries(t).map(wre).join("&");return btoa(e)}function vre(t,e={}){{let n=`Solana error #${t}; Decode this error by running \`npx @solana/errors decode -- ${t}`;return Object.keys(e).length&&(n+=` '${bre(e)}'`),`${n}\``}}var Vu=class extends Error{cause=this.cause;context;constructor(...[t,e]){let n,r;if(e){const{cause:i,...o}=e;i&&(r={cause:i}),Object.keys(o).length>0&&(n=o)}const s=vre(t,n);super(s,r),this.context={__code:t,...n},this.name="SolanaError"}};function Ere(t,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(t)}function _re(t){return Object.freeze({...t,encode:e=>{const n=new Uint8Array(Ere(e,t));return t.write(e,n,0),n}})}function Cre(t){return Object.freeze({...t,decode:(e,n=0)=>t.read(e,n)[0]})}function _u(t){return"fixedSize"in t&&typeof t.fixedSize=="number"}function Are(t,e){if(_u(t)!==_u(e))throw new Vu(pre);if(_u(t)&&_u(e)&&t.fixedSize!==e.fixedSize)throw new Vu(gre,{decoderFixedSize:e.fixedSize,encoderFixedSize:t.fixedSize});if(!_u(t)&&!_u(e)&&t.maxSize!==e.maxSize)throw new Vu(mre,{decoderMaxSize:e.maxSize,encoderMaxSize:t.maxSize});return{...e,...t,decode:e.decode,encode:t.encode,read:e.read,write:t.write}}function Ire(t,e,n=0){if(e.length-n<=0)throw new Vu(hre,{codecDescription:t})}function Sre(t,e,n,r=0){const s=n.length-r;if(s<e)throw new Vu(fre,{bytesLength:s,codecDescription:t,expected:e})}function xre(t,e,n,r){if(r<e||r>n)throw new Vu(yre,{codecDescription:t,max:n,min:e,value:r})}function s3(t){return t?.endian!==1}function Tre(t){return _re({fixedSize:t.size,write(e,n,r){t.range&&xre(t.name,t.range[0],t.range[1],e);const s=new ArrayBuffer(t.size);return t.set(new DataView(s),e,s3(t.config)),n.set(new Uint8Array(s),r),r+t.size}})}function Nre(t){return Cre({fixedSize:t.size,read(e,n=0){Ire(t.name,e,n),Sre(t.name,t.size,e,n);const r=new DataView(Rre(e,n,t.size));return[t.get(r,s3(t.config)),n+t.size]}})}function Rre(t,e,n){const r=t.byteOffset+(e??0),s=n??t.byteLength;return t.buffer.slice(r,r+s)}var Pre=(t={})=>Tre({config:t,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,n,r)=>e.setBigUint64(0,BigInt(n),r),size:8}),kre=(t={})=>Nre({config:t,get:(e,n)=>e.getBigUint64(0,n),name:"u64",size:8}),Ore=(t={})=>Are(Pre(t),kre(t));class Bre extends TypeError{constructor(e,n){let r;const{message:s,explanation:i,...o}=e,{path:a}=e,c=a.length===0?s:`At path: ${a.join(".")} -- ${s}`;super(i??c),i!=null&&(this.cause=c),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...n()])}}function $re(t){return af(t)&&typeof t[Symbol.iterator]=="function"}function af(t){return typeof t=="object"&&t!=null}function d0(t){return af(t)&&!Array.isArray(t)}function Ai(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function Dre(t){const{done:e,value:n}=t.next();return e?void 0:n}function Ure(t,e,n,r){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:s,branch:i}=e,{type:o}=n,{refinement:a,message:c=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${Ai(r)}\``}=t;return{value:r,type:o,refinement:a,key:s[s.length-1],path:s,branch:i,...t,message:c}}function*oI(t,e,n,r){$re(t)||(t=[t]);for(const s of t){const i=Ure(s,e,n,r);i&&(yield i)}}function*Hv(t,e,n={}){const{path:r=[],branch:s=[t],coerce:i=!1,mask:o=!1}=n,a={path:r,branch:s,mask:o};i&&(t=e.coercer(t,a));let c="valid";for(const u of e.validator(t,a))u.explanation=n.message,c="not_valid",yield[u,void 0];for(let[u,l,d]of e.entries(t,a)){const h=Hv(l,d,{path:u===void 0?r:[...r,u],branch:u===void 0?s:[...s,l],coerce:i,mask:o,message:n.message});for(const f of h)f[0]?(c=f[0].refinement!=null?"not_refined":"not_valid",yield[f[0],void 0]):i&&(l=f[1],u===void 0?t=l:t instanceof Map?t.set(u,l):t instanceof Set?t.add(l):af(t)&&(l!==void 0||u in t)&&(t[u]=l))}if(c!=="not_valid")for(const u of e.refiner(t,a))u.explanation=n.message,c="not_refined",yield[u,void 0];c==="valid"&&(yield[void 0,t])}let no=class{constructor(e){const{type:n,schema:r,validator:s,refiner:i,coercer:o=c=>c,entries:a=function*(){}}=e;this.type=n,this.schema=r,this.entries=a,this.coercer=o,s?this.validator=(c,u)=>{const l=s(c,u);return oI(l,u,this,c)}:this.validator=()=>[],i?this.refiner=(c,u)=>{const l=i(c,u);return oI(l,u,this,c)}:this.refiner=()=>[]}assert(e,n){return Mre(e,this,n)}create(e,n){return Ce(e,this,n)}is(e){return i3(e,this)}mask(e,n){return Lre(e,this,n)}validate(e,n={}){return cf(e,this,n)}};function Mre(t,e,n){const r=cf(t,e,{message:n});if(r[0])throw r[0]}function Ce(t,e,n){const r=cf(t,e,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function Lre(t,e,n){const r=cf(t,e,{coerce:!0,mask:!0,message:n});if(r[0])throw r[0];return r[1]}function i3(t,e){return!cf(t,e)[0]}function cf(t,e,n={}){const r=Hv(t,e,n),s=Dre(r);return s[0]?[new Bre(s[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function Gc(t,e){return new no({type:t,schema:null,validator:e})}function Fre(){return Gc("any",()=>!0)}function Ie(t){return new no({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[n,r]of e.entries())yield[n,r,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${Ai(e)}`}})}function to(){return Gc("boolean",t=>typeof t=="boolean")}function Vv(t){return Gc("instance",e=>e instanceof t||`Expected a \`${t.name}\` instance, but received: ${Ai(e)}`)}function gn(t){const e=Ai(t),n=typeof t;return new no({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?t:null,validator(r){return r===t||`Expected the literal \`${e}\`, but received: ${Ai(r)}`}})}function jre(){return Gc("never",()=>!1)}function xe(t){return new no({...t,validator:(e,n)=>e===null||t.validator(e,n),refiner:(e,n)=>e===null||t.refiner(e,n)})}function oe(){return Gc("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${Ai(t)}`)}function Ye(t){return new no({...t,validator:(e,n)=>e===void 0||t.validator(e,n),refiner:(e,n)=>e===void 0||t.refiner(e,n)})}function o3(t,e){return new no({type:"record",schema:null,*entries(n){if(af(n))for(const r in n){const s=n[r];yield[r,r,t],yield[r,s,e]}},validator(n){return d0(n)||`Expected an object, but received: ${Ai(n)}`},coercer(n){return d0(n)?{...n}:n}})}function be(){return Gc("string",t=>typeof t=="string"||`Expected a string, but received: ${Ai(t)}`)}function Kv(t){const e=jre();return new no({type:"tuple",schema:null,*entries(n){if(Array.isArray(n)){const r=Math.max(t.length,n.length);for(let s=0;s<r;s++)yield[s,n[s],t[s]||e]}},validator(n){return Array.isArray(n)||`Expected an array, but received: ${Ai(n)}`},coercer(n){return Array.isArray(n)?n.slice():n}})}function ge(t){const e=Object.keys(t);return new no({type:"type",schema:t,*entries(n){if(af(n))for(const r of e)yield[r,n[r],t[r]]},validator(n){return d0(n)||`Expected an object, but received: ${Ai(n)}`},coercer(n){return d0(n)?{...n}:n}})}function Hr(t){const e=t.map(n=>n.type).join(" | ");return new no({type:"union",schema:null,coercer(n,r){for(const s of t){const[i,o]=s.validate(n,{coerce:!0,mask:r.mask});if(!i)return o}return n},validator(n,r){const s=[];for(const i of t){const[...o]=Hv(n,i,r),[a]=o;if(a[0])for(const[c]of o)c&&s.push(c);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${Ai(n)}`,...s]}})}function xl(){return Gc("unknown",()=>!0)}function uf(t,e,n){return new no({...t,coercer:(r,s)=>i3(r,e)?t.coercer(n(r,s),s):t.coercer(r,s)})}var zf,qre=new Uint8Array(16);function a3(){if(!zf&&(zf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!zf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return zf(qre)}const zre=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function bg(t){return typeof t=="string"&&zre.test(t)}var or=[];for(var Oy=0;Oy<256;++Oy)or.push((Oy+256).toString(16).substr(1));function vg(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(or[t[e+0]]+or[t[e+1]]+or[t[e+2]]+or[t[e+3]]+"-"+or[t[e+4]]+or[t[e+5]]+"-"+or[t[e+6]]+or[t[e+7]]+"-"+or[t[e+8]]+or[t[e+9]]+"-"+or[t[e+10]]+or[t[e+11]]+or[t[e+12]]+or[t[e+13]]+or[t[e+14]]+or[t[e+15]]).toLowerCase();if(!bg(n))throw TypeError("Stringified UUID is invalid");return n}var aI,By,$y=0,Dy=0;function Wre(t,e,n){var r=e&&n||0,s=e||new Array(16);t=t||{};var i=t.node||aI,o=t.clockseq!==void 0?t.clockseq:By;if(i==null||o==null){var a=t.random||(t.rng||a3)();i==null&&(i=aI=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=By=(a[6]<<8|a[7])&16383)}var c=t.msecs!==void 0?t.msecs:Date.now(),u=t.nsecs!==void 0?t.nsecs:Dy+1,l=c-$y+(u-Dy)/1e4;if(l<0&&t.clockseq===void 0&&(o=o+1&16383),(l<0||c>$y)&&t.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");$y=c,Dy=u,By=o,c+=122192928e5;var d=((c&268435455)*1e4+u)%4294967296;s[r++]=d>>>24&255,s[r++]=d>>>16&255,s[r++]=d>>>8&255,s[r++]=d&255;var h=c/4294967296*1e4&268435455;s[r++]=h>>>8&255,s[r++]=h&255,s[r++]=h>>>24&15|16,s[r++]=h>>>16&255,s[r++]=o>>>8|128,s[r++]=o&255;for(var f=0;f<6;++f)s[r+f]=i[f];return e||vg(s)}function c3(t){if(!bg(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}function Hre(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}var Vre="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Kre="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function u3(t,e,n){function r(s,i,o,a){if(typeof s=="string"&&(s=Hre(s)),typeof i=="string"&&(i=c3(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+s.length);if(c.set(i),c.set(s,i.length),c=n(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,o){a=a||0;for(var u=0;u<16;++u)o[a+u]=c[u];return o}return vg(c)}try{r.name=t}catch{}return r.DNS=Vre,r.URL=Kre,r}function Gre(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return Yre(Zre(Jre(t),t.length*8))}function Yre(t){for(var e=[],n=t.length*32,r="0123456789abcdef",s=0;s<n;s+=8){var i=t[s>>5]>>>s%32&255,o=parseInt(r.charAt(i>>>4&15)+r.charAt(i&15),16);e.push(o)}return e}function l3(t){return(t+64>>>9<<4)+14+1}function Zre(t,e){t[e>>5]|=128<<e%32,t[l3(e)-1]=e;for(var n=1732584193,r=-271733879,s=-1732584194,i=271733878,o=0;o<t.length;o+=16){var a=n,c=r,u=s,l=i;n=Tr(n,r,s,i,t[o],7,-680876936),i=Tr(i,n,r,s,t[o+1],12,-389564586),s=Tr(s,i,n,r,t[o+2],17,606105819),r=Tr(r,s,i,n,t[o+3],22,-1044525330),n=Tr(n,r,s,i,t[o+4],7,-176418897),i=Tr(i,n,r,s,t[o+5],12,1200080426),s=Tr(s,i,n,r,t[o+6],17,-1473231341),r=Tr(r,s,i,n,t[o+7],22,-45705983),n=Tr(n,r,s,i,t[o+8],7,1770035416),i=Tr(i,n,r,s,t[o+9],12,-1958414417),s=Tr(s,i,n,r,t[o+10],17,-42063),r=Tr(r,s,i,n,t[o+11],22,-1990404162),n=Tr(n,r,s,i,t[o+12],7,1804603682),i=Tr(i,n,r,s,t[o+13],12,-40341101),s=Tr(s,i,n,r,t[o+14],17,-1502002290),r=Tr(r,s,i,n,t[o+15],22,1236535329),n=Nr(n,r,s,i,t[o+1],5,-165796510),i=Nr(i,n,r,s,t[o+6],9,-1069501632),s=Nr(s,i,n,r,t[o+11],14,643717713),r=Nr(r,s,i,n,t[o],20,-373897302),n=Nr(n,r,s,i,t[o+5],5,-701558691),i=Nr(i,n,r,s,t[o+10],9,38016083),s=Nr(s,i,n,r,t[o+15],14,-660478335),r=Nr(r,s,i,n,t[o+4],20,-405537848),n=Nr(n,r,s,i,t[o+9],5,568446438),i=Nr(i,n,r,s,t[o+14],9,-1019803690),s=Nr(s,i,n,r,t[o+3],14,-187363961),r=Nr(r,s,i,n,t[o+8],20,1163531501),n=Nr(n,r,s,i,t[o+13],5,-1444681467),i=Nr(i,n,r,s,t[o+2],9,-51403784),s=Nr(s,i,n,r,t[o+7],14,1735328473),r=Nr(r,s,i,n,t[o+12],20,-1926607734),n=Rr(n,r,s,i,t[o+5],4,-378558),i=Rr(i,n,r,s,t[o+8],11,-2022574463),s=Rr(s,i,n,r,t[o+11],16,1839030562),r=Rr(r,s,i,n,t[o+14],23,-35309556),n=Rr(n,r,s,i,t[o+1],4,-1530992060),i=Rr(i,n,r,s,t[o+4],11,1272893353),s=Rr(s,i,n,r,t[o+7],16,-155497632),r=Rr(r,s,i,n,t[o+10],23,-1094730640),n=Rr(n,r,s,i,t[o+13],4,681279174),i=Rr(i,n,r,s,t[o],11,-358537222),s=Rr(s,i,n,r,t[o+3],16,-722521979),r=Rr(r,s,i,n,t[o+6],23,76029189),n=Rr(n,r,s,i,t[o+9],4,-640364487),i=Rr(i,n,r,s,t[o+12],11,-421815835),s=Rr(s,i,n,r,t[o+15],16,530742520),r=Rr(r,s,i,n,t[o+2],23,-995338651),n=Pr(n,r,s,i,t[o],6,-198630844),i=Pr(i,n,r,s,t[o+7],10,1126891415),s=Pr(s,i,n,r,t[o+14],15,-1416354905),r=Pr(r,s,i,n,t[o+5],21,-57434055),n=Pr(n,r,s,i,t[o+12],6,1700485571),i=Pr(i,n,r,s,t[o+3],10,-1894986606),s=Pr(s,i,n,r,t[o+10],15,-1051523),r=Pr(r,s,i,n,t[o+1],21,-2054922799),n=Pr(n,r,s,i,t[o+8],6,1873313359),i=Pr(i,n,r,s,t[o+15],10,-30611744),s=Pr(s,i,n,r,t[o+6],15,-1560198380),r=Pr(r,s,i,n,t[o+13],21,1309151649),n=Pr(n,r,s,i,t[o+4],6,-145523070),i=Pr(i,n,r,s,t[o+11],10,-1120210379),s=Pr(s,i,n,r,t[o+2],15,718787259),r=Pr(r,s,i,n,t[o+9],21,-343485551),n=Ia(n,a),r=Ia(r,c),s=Ia(s,u),i=Ia(i,l)}return[n,r,s,i]}function Jre(t){if(t.length===0)return[];for(var e=t.length*8,n=new Uint32Array(l3(e)),r=0;r<e;r+=8)n[r>>5]|=(t[r/8]&255)<<r%32;return n}function Ia(t,e){var n=(t&65535)+(e&65535),r=(t>>16)+(e>>16)+(n>>16);return r<<16|n&65535}function Xre(t,e){return t<<e|t>>>32-e}function Eg(t,e,n,r,s,i){return Ia(Xre(Ia(Ia(e,t),Ia(r,i)),s),n)}function Tr(t,e,n,r,s,i,o){return Eg(e&n|~e&r,t,e,s,i,o)}function Nr(t,e,n,r,s,i,o){return Eg(e&r|n&~r,t,e,s,i,o)}function Rr(t,e,n,r,s,i,o){return Eg(e^n^r,t,e,s,i,o)}function Pr(t,e,n,r,s,i,o){return Eg(n^(e|~r),t,e,s,i,o)}var Qre=u3("v3",48,Gre);function ese(t,e,n){t=t||{};var r=t.random||(t.rng||a3)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var s=0;s<16;++s)e[n+s]=r[s];return e}return vg(r)}function tse(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:return e^n^r;case 2:return e&n^e&r^n&r;case 3:return e^n^r}}function Uy(t,e){return t<<e|t>>>32-e}function nse(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var r=unescape(encodeURIComponent(t));t=[];for(var s=0;s<r.length;++s)t.push(r.charCodeAt(s))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var i=t.length/4+2,o=Math.ceil(i/16),a=new Array(o),c=0;c<o;++c){for(var u=new Uint32Array(16),l=0;l<16;++l)u[l]=t[c*64+l*4]<<24|t[c*64+l*4+1]<<16|t[c*64+l*4+2]<<8|t[c*64+l*4+3];a[c]=u}a[o-1][14]=(t.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(t.length-1)*8&4294967295;for(var d=0;d<o;++d){for(var h=new Uint32Array(80),f=0;f<16;++f)h[f]=a[d][f];for(var y=16;y<80;++y)h[y]=Uy(h[y-3]^h[y-8]^h[y-14]^h[y-16],1);for(var m=n[0],v=n[1],T=n[2],O=n[3],A=n[4],M=0;M<80;++M){var P=Math.floor(M/20),I=Uy(m,5)+tse(P,v,T,O)+A+e[P]+h[M]>>>0;A=O,O=T,T=Uy(v,30)>>>0,v=m,m=I}n[0]=n[0]+m>>>0,n[1]=n[1]+v>>>0,n[2]=n[2]+T>>>0,n[3]=n[3]+O>>>0,n[4]=n[4]+A>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var rse=u3("v5",80,nse);const sse="00000000-0000-0000-0000-000000000000";function ise(t){if(!bg(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const ose=Object.freeze(Object.defineProperty({__proto__:null,NIL:sse,parse:c3,stringify:vg,v1:Wre,v3:Qre,v4:ese,v5:rse,validate:bg,version:ise},Symbol.toStringTag,{value:"Module"})),d3=b0(ose);var My,cI;function ase(){if(cI)return My;cI=1;const t=d3.v4;return My=function(n,r,s,i){if(typeof n!="string")throw new TypeError(n+" must be a string");i=i||{};const o=typeof i.version=="number"?i.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const a={method:n};if(o===2&&(a.jsonrpc="2.0"),r){if(typeof r!="object"&&!Array.isArray(r))throw new TypeError(r+" must be an object, array or omitted");a.params=r}if(typeof s>"u"){const c=typeof i.generator=="function"?i.generator:function(){return t()};a.id=c(a,i)}else o===2&&s===null?i.notificationIdNull&&(a.id=null):a.id=s;return a},My}var Ly,uI;function cse(){if(uI)return Ly;uI=1;const t=d3.v4,e=ase(),n=function(r,s){if(!(this instanceof n))return new n(r,s);s||(s={}),this.options={reviver:typeof s.reviver<"u"?s.reviver:null,replacer:typeof s.replacer<"u"?s.replacer:null,generator:typeof s.generator<"u"?s.generator:function(){return t()},version:typeof s.version<"u"?s.version:2,notificationIdNull:typeof s.notificationIdNull=="boolean"?s.notificationIdNull:!1},this.callServer=r};return Ly=n,n.prototype.request=function(r,s,i,o){const a=this;let c=null;const u=Array.isArray(r)&&typeof s=="function";if(this.options.version===1&&u)throw new TypeError("JSON-RPC 1.0 does not support batching");if(u||!u&&r&&typeof r=="object"&&typeof s=="function")o=s,c=r;else{typeof i=="function"&&(o=i,i=void 0);const h=typeof o=="function";try{c=e(r,s,i,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(f){if(h)return o(f);throw f}if(!h)return c}let d;try{d=JSON.stringify(c,this.options.replacer)}catch(h){return o(h)}return this.callServer(d,function(h,f){a._parseResponse(h,f,o)}),c},n.prototype._parseResponse=function(r,s,i){if(r){i(r);return}if(!s)return i();let o;try{o=JSON.parse(s,this.options.reviver)}catch(a){return i(a)}if(i.length===3)if(Array.isArray(o)){const a=function(u){return typeof u.error<"u"},c=function(u){return!a(u)};return i(null,o.filter(a),o.filter(c))}else return i(null,o.error,o.result);i(null,o)},Ly}var use=cse();const lse=Ii(use);var Fy={exports:{}},lI;function dse(){return lI||(lI=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,u,l){this.fn=c,this.context=u,this.once=l||!1}function i(c,u,l,d,h){if(typeof l!="function")throw new TypeError("The listener must be a function");var f=new s(l,d||c,h),y=n?n+u:u;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],f]:c._events[y].push(f):(c._events[y]=f,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],l,d;if(this._eventsCount===0)return u;for(d in l=this._events)e.call(l,d)&&u.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(l)):u},a.prototype.listeners=function(u){var l=n?n+u:u,d=this._events[l];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,y=new Array(f);h<f;h++)y[h]=d[h].fn;return y},a.prototype.listenerCount=function(u){var l=n?n+u:u,d=this._events[l];return d?d.fn?1:d.length:0},a.prototype.emit=function(u,l,d,h,f,y){var m=n?n+u:u;if(!this._events[m])return!1;var v=this._events[m],T=arguments.length,O,A;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),T){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,l),!0;case 3:return v.fn.call(v.context,l,d),!0;case 4:return v.fn.call(v.context,l,d,h),!0;case 5:return v.fn.call(v.context,l,d,h,f),!0;case 6:return v.fn.call(v.context,l,d,h,f,y),!0}for(A=1,O=new Array(T-1);A<T;A++)O[A-1]=arguments[A];v.fn.apply(v.context,O)}else{var M=v.length,P;for(A=0;A<M;A++)switch(v[A].once&&this.removeListener(u,v[A].fn,void 0,!0),T){case 1:v[A].fn.call(v[A].context);break;case 2:v[A].fn.call(v[A].context,l);break;case 3:v[A].fn.call(v[A].context,l,d);break;case 4:v[A].fn.call(v[A].context,l,d,h);break;default:if(!O)for(P=1,O=new Array(T-1);P<T;P++)O[P-1]=arguments[P];v[A].fn.apply(v[A].context,O)}}return!0},a.prototype.on=function(u,l,d){return i(this,u,l,d,!1)},a.prototype.once=function(u,l,d){return i(this,u,l,d,!0)},a.prototype.removeListener=function(u,l,d,h){var f=n?n+u:u;if(!this._events[f])return this;if(!l)return o(this,f),this;var y=this._events[f];if(y.fn)y.fn===l&&(!h||y.once)&&(!d||y.context===d)&&o(this,f);else{for(var m=0,v=[],T=y.length;m<T;m++)(y[m].fn!==l||h&&!y[m].once||d&&y[m].context!==d)&&v.push(y[m]);v.length?this._events[f]=v.length===1?v[0]:v:o(this,f)}return this},a.prototype.removeAllListeners=function(u){var l;return u?(l=n?n+u:u,this._events[l]&&o(this,l)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a}(Fy)),Fy.exports}var hse=dse();const Gv=Ii(hse);var fse=class extends Gv{socket;constructor(t,e,n){super(),this.socket=new window.WebSocket(t,n),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=r=>this.emit("message",r.data),this.socket.onerror=r=>this.emit("error",r),this.socket.onclose=r=>{this.emit("close",r.code,r.reason)}}send(t,e,n){const r=n||e;try{this.socket.send(t),r()}catch(s){r(s)}}close(t,e){this.socket.close(t,e)}addEventListener(t,e,n){this.socket.addEventListener(t,e,n)}};function pse(t,e){return new fse(t,e)}var gse=class{encode(t){return JSON.stringify(t)}decode(t){return JSON.parse(t)}},mse=class extends Gv{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(t,e="ws://localhost:8080",{autoconnect:n=!0,reconnect:r=!0,reconnect_interval:s=1e3,max_reconnects:i=5,...o}={},a,c){super(),this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=n,this.ready=!1,this.reconnect=r,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=i,this.rest_options=o,this.current_reconnects=0,this.generate_request_id=a||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),c?this.dataPack=c:this.dataPack=new gse,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,e,n,r){return!r&&typeof n=="object"&&(r=n,n=null),new Promise((s,i)=>{if(!this.ready)return i(new Error("socket not ready"));const o=this.generate_request_id(t,e),a={jsonrpc:"2.0",method:t,params:e||void 0,id:o};this.socket.send(this.dataPack.encode(a),r,c=>{if(c)return i(c);this.queue[o]={promise:[s,i]},n&&(this.queue[o].timeout=setTimeout(()=>{delete this.queue[o],i(new Error("reply timeout"))},n))})})}async login(t){const e=await this.call("rpc.login",t);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(t,e){return new Promise((n,r)=>{if(!this.ready)return r(new Error("socket not ready"));const s={jsonrpc:"2.0",method:t,params:e};this.socket.send(this.dataPack.encode(s),i=>{if(i)return r(i);n()})})}async subscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.on",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed subscribing to an event '"+t+"' with: "+e[t]);return e}async unsubscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.off",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(t,e){this.socket.close(t||1e3,e)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}_connect(t,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:n})=>{n instanceof ArrayBuffer&&(n=mt.from(n).toString());try{n=this.dataPack.decode(n)}catch{return}if(n.notification&&this.listeners(n.notification).length){if(!Object.keys(n.params).length)return this.emit(n.notification);const r=[n.notification];if(n.params.constructor===Object)r.push(n.params);else for(let s=0;s<n.params.length;s++)r.push(n.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,r)})}if(!this.queue[n.id])return n.method?Promise.resolve().then(()=>{this.emit(n.method,n?.params)}):void 0;"error"in n=="result"in n&&this.queue[n.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[n.id].timeout&&clearTimeout(this.queue[n.id].timeout),n.error?this.queue[n.id].promise[1](n.error):this.queue[n.id].promise[0](n.result),delete this.queue[n.id]}),this.socket.addEventListener("error",n=>this.emit("error",n)),this.socket.addEventListener("close",({code:n,reason:r})=>{this.ready&&setTimeout(()=>this.emit("close",n,r),0),this.ready=!1,this.socket=void 0,n!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(t,e),this.reconnect_interval)))})}};/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const dI=(t,e)=>(t+(t>=0?e:-e)/h3)/e;function yse(t,e,n){const[[r,s],[i,o]]=e,a=dI(o*t,n),c=dI(-s*t,n);let u=t-a*r-c*i,l=-a*s-c*o;const d=u<No,h=l<No;d&&(u=-u),h&&(l=-l);const f=rf(Math.ceil(LN(n)/2))+Ku;if(u<No||u>=f||l<No||l>=f)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:d,k1:u,k2neg:h,k2:l}}function hI(t){t.lowS!==void 0&&Dc("lowS",t.lowS),t.prehash!==void 0&&Dc("prehash",t.prehash)}class wse extends Error{constructor(e=""){super(e)}}const _o={Err:wse,_tlv:{encode:(t,e)=>{const{Err:n}=_o;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=jf(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?jf(s.length/2|128):"";return jf(t)+i+s+e},decode(t,e){const{Err:n}=_o;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const u=e.subarray(r,r+c);if(u.length!==c)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const l of u)o=o<<8|l;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=_o;if(t<No)throw new e("integer: negative integers are not allowed");let n=jf(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=_o;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return gg(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=_o,s=_n("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:u,l}=r.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(u)}},hexFromSig(t){const{_tlv:e,_int:n}=_o,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},No=BigInt(0),Ku=BigInt(1),h3=BigInt(2),Wf=BigInt(3),bse=BigInt(4);function vse(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function Tu(t,e){const{BYTES:n}=t;let r;if(typeof e=="bigint")r=e;else{let s=_n("private key",e);try{r=t.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof e}`)}}if(!t.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function Ese(t,e={}){const{Fp:n,Fn:r}=e3("weierstrass",t,e),{h:s,n:i}=t;sf(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||!Array.isArray(o.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(D,k,B){const{x:N,y:R}=k.toAffine(),p=n.toBytes(N);if(Dc("isCompressed",B),B){a();const g=!n.isOdd(R);return Wi(f3(g),p)}else return Wi(Uint8Array.of(4),p,n.toBytes(R))}function u(D){zr(D);const k=n.BYTES,B=k+1,N=2*k+1,R=D.length,p=D[0],g=D.subarray(1);if(R===B&&(p===2||p===3)){const w=n.fromBytes(g);if(!n.isValid(w))throw new Error("bad point: is not on curve, wrong x");const _=h(w);let C;try{C=n.sqrt(_)}catch(q){const b=q instanceof Error?": "+q.message:"";throw new Error("bad point: is not on curve, sqrt error"+b)}a();const L=n.isOdd(C);return(p&1)===1!==L&&(C=n.neg(C)),{x:w,y:C}}else if(R===N&&p===4){const w=n.fromBytes(g.subarray(k*0,k*1)),_=n.fromBytes(g.subarray(k*1,k*2));if(!f(w,_))throw new Error("bad point: is not on curve");return{x:w,y:_}}else throw new Error(`bad point: got length ${R}, expected compressed=${B} or uncompressed=${N}`)}const l=e.toBytes||c,d=e.fromBytes||u,h=vse(n,t.a,t.b);function f(D,k){const B=n.sqr(k),N=h(D);return n.eql(B,N)}if(!f(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const y=n.mul(n.pow(t.a,Wf),bse),m=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(y,m)))throw new Error("bad curve params: a or b");function v(D,k,B=!1){if(!n.isValid(k)||B&&n.is0(k))throw new Error(`bad point coordinate ${D}`);return k}function T(D){if(!(D instanceof I))throw new Error("ProjectivePoint expected")}function O(D){if(!o||!o.basises)throw new Error("no endo");return yse(D,o.basises,r.ORDER)}const A=i0((D,k)=>{const{X:B,Y:N,Z:R}=D;if(n.eql(R,n.ONE))return{x:B,y:N};const p=D.is0();k==null&&(k=p?n.ONE:n.inv(R));const g=n.mul(B,k),w=n.mul(N,k),_=n.mul(R,k);if(p)return{x:n.ZERO,y:n.ZERO};if(!n.eql(_,n.ONE))throw new Error("invZ was invalid");return{x:g,y:w}}),M=i0(D=>{if(D.is0()){if(e.allowInfinityPoint&&!n.is0(D.Y))return;throw new Error("bad point: ZERO")}const{x:k,y:B}=D.toAffine();if(!n.isValid(k)||!n.isValid(B))throw new Error("bad point: x or y not field elements");if(!f(k,B))throw new Error("bad point: equation left != right");if(!D.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function P(D,k,B,N,R){return B=new I(n.mul(B.X,D),B.Y,B.Z),k=o0(N,k),B=o0(R,B),k.add(B)}class I{constructor(k,B,N){this.X=v("x",k),this.Y=v("y",B,!0),this.Z=v("z",N),Object.freeze(this)}static fromAffine(k){const{x:B,y:N}=k||{};if(!k||!n.isValid(B)||!n.isValid(N))throw new Error("invalid affine point");if(k instanceof I)throw new Error("projective point not allowed");return n.is0(B)&&n.is0(N)?I.ZERO:new I(B,N,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}static normalizeZ(k){return hc(I,k)}static fromBytes(k){return zr(k),I.fromHex(k)}static fromHex(k){const B=I.fromAffine(d(_n("pointHex",k)));return B.assertValidity(),B}static fromPrivateKey(k){return I.BASE.multiply(Tu(r,k))}static msm(k,B){return QN(I,r,k,B)}_setWindowSize(k){this.precompute(k)}precompute(k=8,B=!0){return W.createCache(this,k),B||this.multiply(Wf),this}assertValidity(){M(this)}hasEvenY(){const{y:k}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(k)}equals(k){T(k);const{X:B,Y:N,Z:R}=this,{X:p,Y:g,Z:w}=k,_=n.eql(n.mul(B,w),n.mul(p,R)),C=n.eql(n.mul(N,w),n.mul(g,R));return _&&C}negate(){return new I(this.X,n.neg(this.Y),this.Z)}double(){const{a:k,b:B}=t,N=n.mul(B,Wf),{X:R,Y:p,Z:g}=this;let w=n.ZERO,_=n.ZERO,C=n.ZERO,L=n.mul(R,R),z=n.mul(p,p),q=n.mul(g,g),b=n.mul(R,p);return b=n.add(b,b),C=n.mul(R,g),C=n.add(C,C),w=n.mul(k,C),_=n.mul(N,q),_=n.add(w,_),w=n.sub(z,_),_=n.add(z,_),_=n.mul(w,_),w=n.mul(b,w),C=n.mul(N,C),q=n.mul(k,q),b=n.sub(L,q),b=n.mul(k,b),b=n.add(b,C),C=n.add(L,L),L=n.add(C,L),L=n.add(L,q),L=n.mul(L,b),_=n.add(_,L),q=n.mul(p,g),q=n.add(q,q),L=n.mul(q,b),w=n.sub(w,L),C=n.mul(q,z),C=n.add(C,C),C=n.add(C,C),new I(w,_,C)}add(k){T(k);const{X:B,Y:N,Z:R}=this,{X:p,Y:g,Z:w}=k;let _=n.ZERO,C=n.ZERO,L=n.ZERO;const z=t.a,q=n.mul(t.b,Wf);let b=n.mul(B,p),E=n.mul(N,g),j=n.mul(R,w),K=n.add(B,N),X=n.add(p,g);K=n.mul(K,X),X=n.add(b,E),K=n.sub(K,X),X=n.add(B,R);let re=n.add(p,w);return X=n.mul(X,re),re=n.add(b,j),X=n.sub(X,re),re=n.add(N,R),_=n.add(g,w),re=n.mul(re,_),_=n.add(E,j),re=n.sub(re,_),L=n.mul(z,X),_=n.mul(q,j),L=n.add(_,L),_=n.sub(E,L),L=n.add(E,L),C=n.mul(_,L),E=n.add(b,b),E=n.add(E,b),j=n.mul(z,j),X=n.mul(q,X),E=n.add(E,j),j=n.sub(b,j),j=n.mul(z,j),X=n.add(X,j),b=n.mul(E,X),C=n.add(C,b),b=n.mul(re,X),_=n.mul(K,_),_=n.sub(_,b),b=n.mul(K,E),L=n.mul(re,L),L=n.add(L,b),new I(_,C,L)}subtract(k){return this.add(k.negate())}is0(){return this.equals(I.ZERO)}multiply(k){const{endo:B}=e;if(!r.isValidNot0(k))throw new Error("invalid scalar: out of range");let N,R;const p=g=>W.cached(this,g,w=>hc(I,w));if(B){const{k1neg:g,k1:w,k2neg:_,k2:C}=O(k),{p:L,f:z}=p(w),{p:q,f:b}=p(C);R=z.add(b),N=P(B.beta,L,q,g,_)}else{const{p:g,f:w}=p(k);N=g,R=w}return hc(I,[N,R])[0]}multiplyUnsafe(k){const{endo:B}=e,N=this;if(!r.isValid(k))throw new Error("invalid scalar: out of range");if(k===No||N.is0())return I.ZERO;if(k===Ku)return N;if(W.hasCache(this))return this.multiply(k);if(B){const{k1neg:R,k1:p,k2neg:g,k2:w}=O(k),{p1:_,p2:C}=$ne(I,N,p,w);return P(B.beta,_,C,R,g)}else return W.unsafe(N,k)}multiplyAndAddUnsafe(k,B,N){const R=this.multiplyUnsafe(B).add(k.multiplyUnsafe(N));return R.is0()?void 0:R}toAffine(k){return A(this,k)}isTorsionFree(){const{isTorsionFree:k}=e;return s===Ku?!0:k?k(I,this):W.unsafe(this,i).is0()}clearCofactor(){const{clearCofactor:k}=e;return s===Ku?this:k?k(I,this):this.multiplyUnsafe(s)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}toBytes(k=!0){return Dc("isCompressed",k),this.assertValidity(),l(I,this,k)}toRawBytes(k=!0){return this.toBytes(k)}toHex(k=!0){return pc(this.toBytes(k))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}I.BASE=new I(t.Gx,t.Gy,n.ONE),I.ZERO=new I(n.ZERO,n.ONE,n.ZERO),I.Fp=n,I.Fn=r;const F=r.BITS,W=new XN(I,e.endo?Math.ceil(F/2):F);return I}function f3(t){return Uint8Array.of(t?2:3)}function _se(t,e,n={}){jS(e),sf(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=n.randomBytes||c1,s=n.hmac||((w,..._)=>K1(e,w,Wi(..._))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o,u=YN(a),l={secret:o.BYTES,public:1+i.BYTES,publicUncompressed:1+2*i.BYTES,signature:2*o.BYTES,seed:u};function d(w){const _=a>>Ku;return w>_}function h(w){return d(w)?o.neg(w):w}function f(w,_){if(!o.isValidNot0(_))throw new Error(`invalid signature ${w}: out of range 1..CURVE.n`)}class y{constructor(_,C,L){f("r",_),f("s",C),this.r=_,this.s=C,L!=null&&(this.recovery=L),Object.freeze(this)}static fromBytes(_,C="compact"){if(C==="compact"){const L=o.BYTES;zr(_,L*2);const z=_.subarray(0,L),q=_.subarray(L,L*2);return new y(o.fromBytes(z),o.fromBytes(q))}if(C==="der"){zr(_);const{r:L,s:z}=_o.toSig(_);return new y(L,z)}throw new Error("invalid format")}static fromHex(_,C){return this.fromBytes(Sp(_),C)}addRecoveryBit(_){return new y(this.r,this.s,_)}recoverPublicKey(_){const C=i.ORDER,{r:L,s:z,recovery:q}=this;if(q==null||![0,1,2,3].includes(q))throw new Error("recovery id invalid");if(a*h3<C&&q>1)throw new Error("recovery id is ambiguous for h>1 curve");const E=q===2||q===3?L+a:L;if(!i.isValid(E))throw new Error("recovery id 2 or 3 invalid");const j=i.toBytes(E),K=t.fromHex(Wi(f3((q&1)===0),j)),X=o.inv(E),re=F(_n("msgHash",_)),de=o.create(-re*X),he=o.create(z*X),Oe=t.BASE.multiplyUnsafe(de).add(K.multiplyUnsafe(he));if(Oe.is0())throw new Error("point at infinify");return Oe.assertValidity(),Oe}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,o.neg(this.s),this.recovery):this}toBytes(_="compact"){if(_==="compact")return Wi(o.toBytes(this.r),o.toBytes(this.s));if(_==="der")return Sp(_o.hexFromSig(this));throw new Error("invalid format")}toHex(_){return pc(this.toBytes(_))}assertValidity(){}static fromCompact(_){return y.fromBytes(_n("sig",_),"compact")}static fromDER(_){return y.fromBytes(_n("sig",_),"der")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return pc(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return pc(this.toBytes("compact"))}}function m(w){try{return!!Tu(o,w)}catch{return!1}}function v(w,_){try{const C=w.length;return _===!0&&C!==l.public||_===!1&&C!==l.publicUncompressed?!1:!!t.fromBytes(w)}catch{return!1}}function T(w=r(u)){return kne(w,a)}const O={isValidSecretKey:m,isValidPublicKey:v,randomSecretKey:T,isValidPrivateKey:m,randomPrivateKey:T,normPrivateKeyToScalar:w=>Tu(o,w),precompute(w=8,_=t.BASE){return _.precompute(w,!1)}};function A(w,_=!0){return t.BASE.multiply(Tu(o,w)).toBytes(_)}function M(w){if(typeof w=="bigint")return!1;if(w instanceof t)return!0;if(o.allowedLengths||l.secret===l.public)return;const _=_n("key",w).length;return _===l.public||_===l.publicUncompressed}function P(w,_,C=!0){if(M(w)===!0)throw new Error("first arg must be private key");if(M(_)===!1)throw new Error("second arg must be public key");const L=Tu(o,w);return t.fromHex(_).multiply(L).toBytes(C)}const I=n.bits2int||function(w){if(w.length>8192)throw new Error("input is too large");const _=gg(w),C=w.length*8-c;return C>0?_>>BigInt(C):_},F=n.bits2int_modN||function(w){return o.create(I(w))},W=rf(c);function D(w){return Bu("num < 2^"+c,w,No,W),o.toBytes(w)}function k(w,_,C=B){if(["recovered","canonical"].some(de=>de in C))throw new Error("sign() legacy options not supported");let{lowS:L,prehash:z,extraEntropy:q}=C;L==null&&(L=!0),w=_n("msgHash",w),hI(C),z&&(w=_n("prehashed msgHash",e(w)));const b=F(w),E=Tu(o,_),j=[D(E),D(b)];if(q!=null&&q!==!1){const de=q===!0?r(l.secret):q;j.push(_n("extraEntropy",de))}const K=Wi(...j),X=b;function re(de){const he=I(de);if(!o.isValidNot0(he))return;const Oe=o.inv(he),Re=t.BASE.multiply(he).toAffine(),Ve=o.create(Re.x);if(Ve===No)return;const kt=o.create(Oe*o.create(X+Ve*E));if(kt===No)return;let dt=(Re.x===Ve?0:2)|Number(Re.y&Ku),ht=kt;return L&&d(kt)&&(ht=h(kt),dt^=1),new y(Ve,ht,dt)}return{seed:K,k2sig:re}}const B={lowS:n.lowS,prehash:!1},N={lowS:n.lowS,prehash:!1};function R(w,_,C=B){const{seed:L,k2sig:z}=k(w,_,C);return Ene(e.outputLen,o.BYTES,s)(L,z)}t.BASE.precompute(8);function p(w,_,C,L=N){const z=w;_=_n("msgHash",_),C=_n("publicKey",C),hI(L);const{lowS:q,prehash:b,format:E}=L;if("strict"in L)throw new Error("options.strict was renamed to lowS");let j,K;if(E===void 0){const X=typeof z=="string"||Ip(z),re=!X&&z!==null&&typeof z=="object"&&typeof z.r=="bigint"&&typeof z.s=="bigint";if(!X&&!re)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(re)j=new y(z.r,z.s);else if(X){try{j=y.fromDER(z)}catch(de){if(!(de instanceof _o.Err))throw de}if(!j)try{j=y.fromCompact(z)}catch{return!1}}}else if(E==="compact"||E==="der"){if(typeof z!="string"&&!Ip(z))throw new Error('"der" / "compact" format expects Uint8Array signature');j=y.fromBytes(_n("sig",z),E)}else if(E==="js"){if(!(z instanceof y))throw new Error('"js" format expects Signature instance');j=z}else throw new Error('format must be "compact", "der" or "js"');if(!j)return!1;try{if(K=t.fromHex(C),q&&j.hasHighS())return!1;b&&(_=e(_));const{r:X,s:re}=j,de=F(_),he=o.inv(re),Oe=o.create(de*he),Re=o.create(X*he),Ve=t.BASE.multiplyUnsafe(Oe).add(K.multiplyUnsafe(Re));return Ve.is0()?!1:o.create(Ve.x)===X}catch{return!1}}function g(w){const _=O.randomSecretKey(w);return{secretKey:_,publicKey:A(_)}}return Object.freeze({keygen:g,getPublicKey:A,sign:R,verify:p,getSharedSecret:P,utils:O,Point:t,Signature:y,info:{type:"weierstrass",lengths:l,publicKeyHasPrefix:!0}})}function Cse(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp;let r=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const s=Kc(e.n,{BITS:t.nBitLength,allowedLengths:r,modOnDecode:t.wrapPrivateKey}),i={Fp:n,Fn:s,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:i}}function Ase(t){const{CURVE:e,curveOpts:n}=Cse(t),r={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,hash:t.hash,ecdsaOpts:r}}function Ise(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function Sse(t){const{CURVE:e,curveOpts:n,hash:r,ecdsaOpts:s}=Ase(t),i=Ese(e,n),o=_se(i,r,s);return Ise(t,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function xse(t,e){const n=r=>Sse({...t,hash:r});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Yv={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},Tse={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},fI=BigInt(2);function Nse(t){const e=Yv.p,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=t*t*t%e,l=u*u*t%e,d=En(l,n,e)*l%e,h=En(d,n,e)*l%e,f=En(h,fI,e)*u%e,y=En(f,s,e)*f%e,m=En(y,i,e)*y%e,v=En(m,a,e)*m%e,T=En(v,c,e)*v%e,O=En(T,a,e)*m%e,A=En(O,n,e)*l%e,M=En(A,o,e)*y%e,P=En(M,r,e)*u%e,I=En(P,fI,e);if(!jb.eql(jb.sqr(I),t))throw new Error("Cannot find square root");return I}const jb=Kc(Yv.p,void 0,void 0,{sqrt:Nse}),Rse=xse({...Yv,Fp:jb,lowS:!0,endo:Tse},A1);of.utils.randomPrivateKey;of.getPublicKey;function pI(t){try{return of.ExtendedPoint.fromHex(t),!0}catch{return!1}}const p3=(t,e)=>of.sign(t,e.slice(0,32)),Pse=of.verify,cr=t=>mt.isBuffer(t)?t:t instanceof Uint8Array?mt.from(t.buffer,t.byteOffset,t.byteLength):mt.from(t);class kse{constructor(e){Object.assign(this,e)}encode(){return mt.from(ky.serialize(yp,this))}static decode(e){return ky.deserialize(yp,this,e)}static decodeUnchecked(e){return ky.deserializeUnchecked(yp,this,e)}}const yp=new Map;var g3;const Ose=32,Pa=32;function Bse(t){return t._bn!==void 0}let gI=1;class Ne extends kse{constructor(e){if(super({}),this._bn=void 0,Bse(e))this._bn=e._bn;else{if(typeof e=="string"){const n=hr.decode(e);if(n.length!=Pa)throw new Error("Invalid public key input");this._bn=new XA(n)}else this._bn=new XA(e);if(this._bn.byteLength()>Pa)throw new Error("Invalid public key input")}}static unique(){const e=new Ne(gI);return gI+=1,new Ne(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return hr.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(mt);if(e.length===Pa)return e;const n=mt.alloc(32);return e.copy(n,32-e.length),n}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,n,r){const s=mt.concat([e.toBuffer(),mt.from(n),r.toBuffer()]),i=Ew(s);return new Ne(i)}static createProgramAddressSync(e,n){let r=mt.alloc(0);e.forEach(function(i){if(i.length>Ose)throw new TypeError("Max seed length exceeded");r=mt.concat([r,cr(i)])}),r=mt.concat([r,n.toBuffer(),mt.from("ProgramDerivedAddress")]);const s=Ew(r);if(pI(s))throw new Error("Invalid seeds, address must fall off the curve");return new Ne(s)}static async createProgramAddress(e,n){return this.createProgramAddressSync(e,n)}static findProgramAddressSync(e,n){let r=255,s;for(;r!=0;){try{const i=e.concat(mt.from([r]));s=this.createProgramAddressSync(i,n)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[s,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,n){return this.findProgramAddressSync(e,n)}static isOnCurve(e){const n=new Ne(e);return pI(n.toBytes())}}g3=Ne;Ne.default=new g3("11111111111111111111111111111111");yp.set(Ne,{kind:"struct",fields:[["_bn","u256"]]});new Ne("BPFLoader1111111111111111111111111111111111");const Gu=1232,Zv=127,h0=64;class m3 extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(m3.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class y3 extends Error{constructor(e,n){super(`Transaction was not confirmed in ${n.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(y3.prototype,"name",{value:"TransactionExpiredTimeoutError"});class ld extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(ld.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class f0{constructor(e,n){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=n}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const n of this.keySegments()){if(e<n.length)return n[e];e-=n.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((i,o)=>{r.set(i.toBase58(),o)});const s=i=>{const o=r.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const wt=(t="publicKey")=>Q.blob(32,t),$se=(t="signature")=>Q.blob(64,t),$u=(t="string")=>{const e=Q.struct([Q.u32("length"),Q.u32("lengthPadding"),Q.blob(Q.offset(Q.u32(),-8),"chars")],t),n=e.decode.bind(e),r=e.encode.bind(e),s=e;return s.decode=(i,o)=>n(i,o).chars.toString(),s.encode=(i,o,a)=>{const c={chars:mt.from(i,"utf8")};return r(c,o,a)},s.alloc=i=>Q.u32().span+Q.u32().span+mt.from(i,"utf8").length,s},Dse=(t="authorized")=>Q.struct([wt("staker"),wt("withdrawer")],t),Use=(t="lockup")=>Q.struct([Q.ns64("unixTimestamp"),Q.ns64("epoch"),wt("custodian")],t),Mse=(t="voteInit")=>Q.struct([wt("nodePubkey"),wt("authorizedVoter"),wt("authorizedWithdrawer"),Q.u8("commission")],t),Lse=(t="voteAuthorizeWithSeedArgs")=>Q.struct([Q.u32("voteAuthorizationType"),wt("currentAuthorityDerivedKeyOwnerPubkey"),$u("currentAuthorityDerivedKeySeed"),wt("newAuthorized")],t);function w3(t,e){const n=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(e[s.property]);if("count"in s&&"elementLayout"in s){const i=e[s.property];if(Array.isArray(i))return i.length*n(s.elementLayout)}else if("fields"in s)return w3({layout:s},e[s.property]);return 0};let r=0;return t.layout.fields.forEach(s=>{r+=n(s)}),r}function vs(t){let e=0,n=0;for(;;){let r=t.shift();if(e|=(r&127)<<n*7,n+=1,(r&128)===0)break}return e}function Es(t,e){let n=e;for(;;){let r=n&127;if(n>>=7,n==0){t.push(r);break}else r|=128,t.push(r)}}function fn(t,e){if(!t)throw new Error(e||"Assertion failed")}class _g{constructor(e,n){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=n}static compile(e,n){const r=new Map,s=o=>{const a=o.toBase58();let c=r.get(a);return c===void 0&&(c={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(a,c)),c},i=s(n);i.isSigner=!0,i.isWritable=!0;for(const o of e){s(o.programId).isInvoked=!0;for(const a of o.keys){const c=s(a.pubkey);c.isSigner||=a.isSigner,c.isWritable||=a.isWritable}}return new _g(n,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];fn(e.length<=256,"Max static account keys length exceeded");const n=e.filter(([,c])=>c.isSigner&&c.isWritable),r=e.filter(([,c])=>c.isSigner&&!c.isWritable),s=e.filter(([,c])=>!c.isSigner&&c.isWritable),i=e.filter(([,c])=>!c.isSigner&&!c.isWritable),o={numRequiredSignatures:n.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{fn(n.length>0,"Expected at least one writable signer key");const[c]=n[0];fn(c===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...n.map(([c])=>new Ne(c)),...r.map(([c])=>new Ne(c)),...s.map(([c])=>new Ne(c)),...i.map(([c])=>new Ne(c))];return[o,a]}extractTableLookup(e){const[n,r]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(n.length===0&&s.length===0))return[{accountKey:e.key,writableIndexes:n,readonlyIndexes:s},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(e,n){const r=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(n(o)){const a=new Ne(i),c=e.findIndex(u=>u.equals(a));c>=0&&(fn(c<256,"Max lookup table index exceeded"),r.push(c),s.push(a),this.keyMetaMap.delete(i))}return[r,s]}}const b3="Reached end of buffer unexpectedly";function Io(t){if(t.length===0)throw new Error(b3);return t.shift()}function _s(t,...e){const[n]=e;if(e.length===2?n+(e[1]??0)>t.length:n>=t.length)throw new Error(b3);return t.splice(...e)}class Wo{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(n=>new Ne(n)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(n=>this.indexToProgramIds.set(n.programIdIndex,this.accountKeys[n.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:hr.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new f0(this.staticAccountKeys)}static compile(e){const n=_g.compile(e.instructions,e.payerKey),[r,s]=n.getMessageComponents(),o=new f0(s).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:hr.encode(a.data)}));return new Wo({header:r,accountKeys:s,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const r=e-n,i=this.accountKeys.length-n-this.header.numReadonlyUnsignedAccounts;return r<i}else{const r=n-this.header.numReadonlySignedAccounts;return e<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,n)=>!this.isProgramId(n))}serialize(){const e=this.accountKeys.length;let n=[];Es(n,e);const r=this.instructions.map(d=>{const{accounts:h,programIdIndex:f}=d,y=Array.from(hr.decode(d.data));let m=[];Es(m,h.length);let v=[];return Es(v,y.length),{programIdIndex:f,keyIndicesCount:mt.from(m),keyIndices:h,dataLength:mt.from(v),data:y}});let s=[];Es(s,r.length);let i=mt.alloc(Gu);mt.from(s).copy(i);let o=s.length;r.forEach(d=>{const f=Q.struct([Q.u8("programIdIndex"),Q.blob(d.keyIndicesCount.length,"keyIndicesCount"),Q.seq(Q.u8("keyIndex"),d.keyIndices.length,"keyIndices"),Q.blob(d.dataLength.length,"dataLength"),Q.seq(Q.u8("userdatum"),d.data.length,"data")]).encode(d,i,o);o+=f}),i=i.slice(0,o);const a=Q.struct([Q.blob(1,"numRequiredSignatures"),Q.blob(1,"numReadonlySignedAccounts"),Q.blob(1,"numReadonlyUnsignedAccounts"),Q.blob(n.length,"keyCount"),Q.seq(wt("key"),e,"keys"),wt("recentBlockhash")]),c={numRequiredSignatures:mt.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:mt.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:mt.from([this.header.numReadonlyUnsignedAccounts]),keyCount:mt.from(n),keys:this.accountKeys.map(d=>cr(d.toBytes())),recentBlockhash:hr.decode(this.recentBlockhash)};let u=mt.alloc(2048);const l=a.encode(c,u);return i.copy(u,l),u.slice(0,l+i.length)}static from(e){let n=[...e];const r=Io(n);if(r!==(r&Zv))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=Io(n),i=Io(n),o=vs(n);let a=[];for(let h=0;h<o;h++){const f=_s(n,0,Pa);a.push(new Ne(mt.from(f)))}const c=_s(n,0,Pa),u=vs(n);let l=[];for(let h=0;h<u;h++){const f=Io(n),y=vs(n),m=_s(n,0,y),v=vs(n),T=_s(n,0,v),O=hr.encode(mt.from(T));l.push({programIdIndex:f,accounts:m,data:O})}const d={header:{numRequiredSignatures:r,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:hr.encode(mt.from(c)),accountKeys:a,instructions:l};return new Wo(d)}}class _h{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const n of this.addressTableLookups)e+=n.readonlyIndexes.length+n.writableIndexes.length;return e}getAccountKeys(e){let n;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");n=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)n=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new f0(this.staticAccountKeys,n)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r){const s=e-r,i=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return s<i}else if(e>=this.header.numRequiredSignatures){const s=e-n,o=r-n-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=n-this.header.numReadonlySignedAccounts;return e<s}}resolveAddressTableLookups(e){const n={writable:[],readonly:[]};for(const r of this.addressTableLookups){const s=e.find(i=>i.key.equals(r.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const i of r.writableIndexes)if(i<s.state.addresses.length)n.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`);for(const i of r.readonlyIndexes)if(i<s.state.addresses.length)n.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`)}return n}static compile(e){const n=_g.compile(e.instructions,e.payerKey),r=new Array,s={writable:new Array,readonly:new Array},i=e.addressLookupTableAccounts||[];for(const l of i){const d=n.extractTableLookup(l);if(d!==void 0){const[h,{writable:f,readonly:y}]=d;r.push(h),s.writable.push(...f),s.readonly.push(...y)}}const[o,a]=n.getMessageComponents(),u=new f0(a,s).compileInstructions(e.instructions);return new _h({header:o,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:u,addressTableLookups:r})}serialize(){const e=Array();Es(e,this.staticAccountKeys.length);const n=this.serializeInstructions(),r=Array();Es(r,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();Es(i,this.addressTableLookups.length);const o=Q.struct([Q.u8("prefix"),Q.struct([Q.u8("numRequiredSignatures"),Q.u8("numReadonlySignedAccounts"),Q.u8("numReadonlyUnsignedAccounts")],"header"),Q.blob(e.length,"staticAccountKeysLength"),Q.seq(wt(),this.staticAccountKeys.length,"staticAccountKeys"),wt("recentBlockhash"),Q.blob(r.length,"instructionsLength"),Q.blob(n.length,"serializedInstructions"),Q.blob(i.length,"addressTableLookupsLength"),Q.blob(s.length,"serializedAddressTableLookups")]),a=new Uint8Array(Gu),u=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(l=>l.toBytes()),recentBlockhash:hr.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:n,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},a);return a.slice(0,u)}serializeInstructions(){let e=0;const n=new Uint8Array(Gu);for(const r of this.compiledInstructions){const s=Array();Es(s,r.accountKeyIndexes.length);const i=Array();Es(i,r.data.length);const o=Q.struct([Q.u8("programIdIndex"),Q.blob(s.length,"encodedAccountKeyIndexesLength"),Q.seq(Q.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),Q.blob(i.length,"encodedDataLength"),Q.blob(r.data.length,"data")]);e+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},n,e)}return n.slice(0,e)}serializeAddressTableLookups(){let e=0;const n=new Uint8Array(Gu);for(const r of this.addressTableLookups){const s=Array();Es(s,r.writableIndexes.length);const i=Array();Es(i,r.readonlyIndexes.length);const o=Q.struct([wt("accountKey"),Q.blob(s.length,"encodedWritableIndexesLength"),Q.seq(Q.u8(),r.writableIndexes.length,"writableIndexes"),Q.blob(i.length,"encodedReadonlyIndexesLength"),Q.seq(Q.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},n,e)}return n.slice(0,e)}static deserialize(e){let n=[...e];const r=Io(n),s=r&Zv;fn(r!==s,"Expected versioned message but received legacy message");const i=s;fn(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:Io(n),numReadonlySignedAccounts:Io(n),numReadonlyUnsignedAccounts:Io(n)},a=[],c=vs(n);for(let y=0;y<c;y++)a.push(new Ne(_s(n,0,Pa)));const u=hr.encode(_s(n,0,Pa)),l=vs(n),d=[];for(let y=0;y<l;y++){const m=Io(n),v=vs(n),T=_s(n,0,v),O=vs(n),A=new Uint8Array(_s(n,0,O));d.push({programIdIndex:m,accountKeyIndexes:T,data:A})}const h=vs(n),f=[];for(let y=0;y<h;y++){const m=new Ne(_s(n,0,Pa)),v=vs(n),T=_s(n,0,v),O=vs(n),A=_s(n,0,O);f.push({accountKey:m,writableIndexes:T,readonlyIndexes:A})}return new _h({header:o,staticAccountKeys:a,recentBlockhash:u,compiledInstructions:d,addressTableLookups:f})}}const v3={deserializeMessageVersion(t){const e=t[0],n=e&Zv;return n===e?"legacy":n},deserialize:t=>{const e=v3.deserializeMessageVersion(t);if(e==="legacy")return Wo.from(t);if(e===0)return _h.deserialize(t);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let da=function(t){return t[t.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",t[t.PROCESSED=1]="PROCESSED",t[t.TIMED_OUT=2]="TIMED_OUT",t[t.NONCE_INVALID=3]="NONCE_INVALID",t}({});const Fse=mt.alloc(h0).fill(0);class lr{constructor(e){this.keys=void 0,this.programId=void 0,this.data=mt.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:n,isWritable:r})=>({pubkey:e.toJSON(),isSigner:n,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class fr{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:n,nonceInfo:r}=e;this.minNonceContextSlot=n,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:n,lastValidBlockHeight:r}=e;this.recentBlockhash=n,this.lastValidBlockHeight=r}else{const{recentBlockhash:n,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=n}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(n=>{"instructions"in n?this.instructions=this.instructions.concat(n.instructions):"data"in n&&"programId"in n&&"keys"in n?this.instructions.push(n):this.instructions.push(new lr(n))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,n;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?n=[this.nonceInfo.nonceInstruction,...this.instructions]:n=this.instructions):(e=this.recentBlockhash,n=this.instructions),!e)throw new Error("Transaction recentBlockhash required");n.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let m=0;m<n.length;m++)if(n[m].programId===void 0)throw new Error(`Transaction instruction index ${m} has undefined program id`);const s=[],i=[];n.forEach(m=>{m.keys.forEach(T=>{i.push({...T})});const v=m.programId.toString();s.includes(v)||s.push(v)}),s.forEach(m=>{i.push({pubkey:new Ne(m),isSigner:!1,isWritable:!1})});const o=[];i.forEach(m=>{const v=m.pubkey.toString(),T=o.findIndex(O=>O.pubkey.toString()===v);T>-1?(o[T].isWritable=o[T].isWritable||m.isWritable,o[T].isSigner=o[T].isSigner||m.isSigner):o.push(m)}),o.sort(function(m,v){if(m.isSigner!==v.isSigner)return m.isSigner?-1:1;if(m.isWritable!==v.isWritable)return m.isWritable?-1:1;const T={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return m.pubkey.toBase58().localeCompare(v.pubkey.toBase58(),"en",T)});const a=o.findIndex(m=>m.pubkey.equals(r));if(a>-1){const[m]=o.splice(a,1);m.isSigner=!0,m.isWritable=!0,o.unshift(m)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const m of this.signatures){const v=o.findIndex(T=>T.pubkey.equals(m.publicKey));if(v>-1)o[v].isSigner||(o[v].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${m.publicKey.toString()}`)}let c=0,u=0,l=0;const d=[],h=[];o.forEach(({pubkey:m,isSigner:v,isWritable:T})=>{v?(d.push(m.toString()),c+=1,T||(u+=1)):(h.push(m.toString()),T||(l+=1))});const f=d.concat(h),y=n.map(m=>{const{data:v,programId:T}=m;return{programIdIndex:f.indexOf(T.toString()),accounts:m.keys.map(O=>f.indexOf(O.pubkey.toString())),data:hr.encode(v)}});return y.forEach(m=>{fn(m.programIdIndex>=0),m.accounts.forEach(v=>fn(v>=0))}),new Wo({header:{numRequiredSignatures:c,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:l},accountKeys:f,recentBlockhash:e,instructions:y})}_compile(){const e=this.compileMessage(),n=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===n.length&&this.signatures.every((s,i)=>n[i].equals(s.publicKey))||(this.signatures=n.map(r=>({signature:null,publicKey:r}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const n=new Set;this.signatures=e.filter(r=>{const s=r.toString();return n.has(s)?!1:(n.add(s),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,r=[];for(const i of e){const o=i.publicKey.toString();n.has(o)||(n.add(o),r.push(i))}this.signatures=r.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...r)}partialSign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,r=[];for(const i of e){const o=i.publicKey.toString();n.has(o)||(n.add(o),r.push(i))}const s=this._compile();this._partialSign(s,...r)}_partialSign(e,...n){const r=e.serialize();n.forEach(s=>{const i=p3(r,s.secretKey);this._addSignature(s.publicKey,cr(i))})}addSignature(e,n){this._compile(),this._addSignature(e,n)}_addSignature(e,n){fn(n.length===64);const r=this.signatures.findIndex(s=>e.equals(s.publicKey));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=mt.from(n)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,n){const r={};for(const{signature:s,publicKey:i}of this.signatures)s===null?n&&(r.missing||=[]).push(i):Pse(s,e,i.toBytes())||(r.invalid||=[]).push(i);return r.invalid||r.missing?r:void 0}serialize(e){const{requireAllSignatures:n,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),s=this.serializeMessage();if(r){const i=this._getMessageSignednessErrors(s,n);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(e){const{signatures:n}=this,r=[];Es(r,n.length);const s=r.length+n.length*64+e.length,i=mt.alloc(s);return fn(n.length<256),mt.from(r).copy(i,0),n.forEach(({signature:o},a)=>{o!==null&&(fn(o.length===64,"signature has invalid length"),mt.from(o).copy(i,r.length+a*64))}),e.copy(i,r.length+n.length*64),fn(i.length<=Gu,`Transaction too large: ${i.length} > ${Gu}`),i}get keys(){return fn(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return fn(this.instructions.length===1),this.instructions[0].programId}get data(){return fn(this.instructions.length===1),this.instructions[0].data}static from(e){let n=[...e];const r=vs(n);let s=[];for(let i=0;i<r;i++){const o=_s(n,0,h0);s.push(hr.encode(mt.from(o)))}return fr.populate(Wo.from(n),s)}static populate(e,n=[]){const r=new fr;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),n.forEach((s,i)=>{const o={signature:s==hr.encode(Fse)?null:hr.decode(s),publicKey:e.accountKeys[i]};r.signatures.push(o)}),e.instructions.forEach(s=>{const i=s.accounts.map(o=>{const a=e.accountKeys[o];return{pubkey:a,isSigner:r.signatures.some(c=>c.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});r.instructions.push(new lr({keys:i,programId:e.accountKeys[s.programIdIndex],data:hr.decode(s.data)}))}),r._message=e,r._json=r.toJSON(),r}}class La{get version(){return this.message.version}constructor(e,n){if(this.signatures=void 0,this.message=void 0,n!==void 0)fn(n.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=n;else{const r=[];for(let s=0;s<e.header.numRequiredSignatures;s++)r.push(new Uint8Array(h0));this.signatures=r}this.message=e}serialize(){const e=this.message.serialize(),n=Array();Es(n,this.signatures.length);const r=Q.struct([Q.blob(n.length,"encodedSignaturesLength"),Q.seq($se(),this.signatures.length,"signatures"),Q.blob(e.length,"serializedMessage")]),s=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(n),signatures:this.signatures,serializedMessage:e},s);return s.slice(0,i)}static deserialize(e){let n=[...e];const r=[],s=vs(n);for(let o=0;o<s;o++)r.push(new Uint8Array(_s(n,0,h0)));const i=v3.deserialize(new Uint8Array(n));return new La(i,r)}sign(e){const n=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of e){const i=r.findIndex(o=>o.equals(s.publicKey));fn(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=p3(n,s.secretKey)}}addSignature(e,n){fn(n.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(e));fn(s>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=n}}const jse=160,qse=64,zse=jse/qse,Wse=1e3/zse;new Ne("SysvarC1ock11111111111111111111111111111111");new Ne("SysvarEpochSchedu1e111111111111111111111111");new Ne("Sysvar1nstructions1111111111111111111111111");const jy=new Ne("SysvarRecentB1ockHashes11111111111111111111"),mI=new Ne("SysvarRent111111111111111111111111111111111");new Ne("SysvarRewards111111111111111111111111111111");new Ne("SysvarS1otHashes111111111111111111111111111");new Ne("SysvarS1otHistory11111111111111111111111111");new Ne("SysvarStakeHistory1111111111111111111111111");class yI extends Error{constructor({action:e,signature:n,transactionMessage:r,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(e){case"send":a=`Transaction ${n} resulted in an error. 
${r}. `+i+o;break;case"simulate":a=`Simulation failed. 
Message: ${r}. 
`+i+o;break;default:a=`Unknown action '${(c=>c)(e)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=n,this.transactionMessage=r,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((n,r)=>{e.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,n(i)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}class ze extends Error{constructor({code:e,message:n,data:r},s){super(s!=null?`${s}: ${n}`:n),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}function Nu(t){return new Promise(e=>setTimeout(e,t))}function kr(t,e){const n=t.layout.span>=0?t.layout.span:w3(t,e),r=mt.alloc(n),s=Object.assign({instruction:t.index},e);return t.layout.encode(s,r),r}const Hse=Q.nu64("lamportsPerSignature"),E3=Q.struct([Q.u32("version"),Q.u32("state"),wt("authorizedPubkey"),wt("nonce"),Q.struct([Hse],"feeCalculator")]),wI=E3.span;class Jv{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const n=E3.decode(cr(e),0);return new Jv({authorizedPubkey:new Ne(n.authorizedPubkey),nonce:new Ne(n.nonce).toString(),feeCalculator:n.feeCalculator})}}function dl(t){const e=Q.blob(8,t),n=e.decode.bind(e),r=e.encode.bind(e),s=e,i=Ore();return s.decode=(o,a)=>{const c=n(o,a);return i.decode(c)},s.encode=(o,a,c)=>{const u=i.encode(o);return r(u,a,c)},s}const Bs=Object.freeze({Create:{index:0,layout:Q.struct([Q.u32("instruction"),Q.ns64("lamports"),Q.ns64("space"),wt("programId")])},Assign:{index:1,layout:Q.struct([Q.u32("instruction"),wt("programId")])},Transfer:{index:2,layout:Q.struct([Q.u32("instruction"),dl("lamports")])},CreateWithSeed:{index:3,layout:Q.struct([Q.u32("instruction"),wt("base"),$u("seed"),Q.ns64("lamports"),Q.ns64("space"),wt("programId")])},AdvanceNonceAccount:{index:4,layout:Q.struct([Q.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:Q.struct([Q.u32("instruction"),Q.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:Q.struct([Q.u32("instruction"),wt("authorized")])},AuthorizeNonceAccount:{index:7,layout:Q.struct([Q.u32("instruction"),wt("authorized")])},Allocate:{index:8,layout:Q.struct([Q.u32("instruction"),Q.ns64("space")])},AllocateWithSeed:{index:9,layout:Q.struct([Q.u32("instruction"),wt("base"),$u("seed"),Q.ns64("space"),wt("programId")])},AssignWithSeed:{index:10,layout:Q.struct([Q.u32("instruction"),wt("base"),$u("seed"),wt("programId")])},TransferWithSeed:{index:11,layout:Q.struct([Q.u32("instruction"),dl("lamports"),$u("seed"),wt("programId")])},UpgradeNonceAccount:{index:12,layout:Q.struct([Q.u32("instruction")])}});class hl{constructor(){}static createAccount(e){const n=Bs.Create,r=kr(n,{lamports:e.lamports,space:e.space,programId:cr(e.programId.toBuffer())});return new lr({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(e){let n,r;if("basePubkey"in e){const s=Bs.TransferWithSeed;n=kr(s,{lamports:BigInt(e.lamports),seed:e.seed,programId:cr(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=Bs.Transfer;n=kr(s,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new lr({keys:r,programId:this.programId,data:n})}static assign(e){let n,r;if("basePubkey"in e){const s=Bs.AssignWithSeed;n=kr(s,{base:cr(e.basePubkey.toBuffer()),seed:e.seed,programId:cr(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Bs.Assign;n=kr(s,{programId:cr(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new lr({keys:r,programId:this.programId,data:n})}static createAccountWithSeed(e){const n=Bs.CreateWithSeed,r=kr(n,{base:cr(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:cr(e.programId.toBuffer())});let s=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||s.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new lr({keys:s,programId:this.programId,data:r})}static createNonceAccount(e){const n=new fr;"basePubkey"in e&&"seed"in e?n.add(hl.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:wI,programId:this.programId})):n.add(hl.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:wI,programId:this.programId}));const r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return n.add(this.nonceInitialize(r)),n}static nonceInitialize(e){const n=Bs.InitializeNonceAccount,r=kr(n,{authorized:cr(e.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:jy,isSigner:!1,isWritable:!1},{pubkey:mI,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new lr(s)}static nonceAdvance(e){const n=Bs.AdvanceNonceAccount,r=kr(n),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:jy,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new lr(s)}static nonceWithdraw(e){const n=Bs.WithdrawNonceAccount,r=kr(n,{lamports:e.lamports});return new lr({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:jy,isSigner:!1,isWritable:!1},{pubkey:mI,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(e){const n=Bs.AuthorizeNonceAccount,r=kr(n,{authorized:cr(e.newAuthorizedPubkey.toBuffer())});return new lr({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(e){let n,r;if("basePubkey"in e){const s=Bs.AllocateWithSeed;n=kr(s,{base:cr(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:cr(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Bs.Allocate;n=kr(s,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new lr({keys:r,programId:this.programId,data:n})}}hl.programId=new Ne("11111111111111111111111111111111");new Ne("BPFLoader2111111111111111111111111111111111");function Vse(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var qy,bI;function Kse(){if(bI)return qy;bI=1;var t=Object.prototype.toString,e=Object.keys||function(r){var s=[];for(var i in r)s.push(i);return s};function n(r,s){var i,o,a,c,u,l,d;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return n(r.toJSON(),s);if(d=t.call(r),d==="[object Array]"){for(a="[",o=r.length-1,i=0;i<o;i++)a+=n(r[i],!0)+",";return o>-1&&(a+=n(r[i],!0)),a+"]"}else if(d==="[object Object]"){for(c=e(r).sort(),o=c.length,a="",i=0;i<o;)u=c[i],l=n(r[u],!1),l!==void 0&&(a&&(a+=","),a+=JSON.stringify(u)+":"+l),i++;return"{"+a+"}"}else return JSON.stringify(r);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return qy=function(r){var s=n(r,!1);if(s!==void 0)return""+s},qy}var Gse=Kse(),vI=Vse(Gse);const Jl=32;function zy(t){let e=0;for(;t>1;)t/=2,e++;return e}function Yse(t){return t===0?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t|=t>>32,t+1)}class Zse{constructor(e,n,r,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=n,this.warmup=r,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const n=zy(Yse(e+Jl+1))-zy(Jl)-1,r=this.getSlotsInEpoch(n),s=e-(r-Jl);return[n,s]}else{const n=e-this.firstNormalSlot,r=Math.floor(n/this.slotsPerEpoch),s=this.firstNormalEpoch+r,i=n%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*Jl:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+zy(Jl)):this.slotsPerEpoch}}var Jse=globalThis.fetch;class Xse extends mse{constructor(e,n,r){const s=i=>{const o=pse(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...n});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,e,n,r),this.underlyingSocket=void 0}call(...e){const n=this.underlyingSocket?.readyState;return n===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}notify(...e){const n=this.underlyingSocket?.readyState;return n===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}}function Qse(t,e){let n;try{n=t.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(n.typeIndex!==t.index)throw new Error(`invalid account data; account type mismatch ${n.typeIndex} != ${t.index}`);return n}const EI=56;class _I{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const n=Qse(eie,e),r=e.length-EI;fn(r>=0,"lookup table is invalid"),fn(r%32===0,"lookup table is invalid");const s=r/32,{addresses:i}=Q.struct([Q.seq(wt(),s,"addresses")]).decode(e.slice(EI));return{deactivationSlot:n.deactivationSlot,lastExtendedSlot:n.lastExtendedSlot,lastExtendedSlotStartIndex:n.lastExtendedStartIndex,authority:n.authority.length!==0?new Ne(n.authority[0]):void 0,addresses:i.map(o=>new Ne(o))}}}const eie={index:1,layout:Q.struct([Q.u32("typeIndex"),dl("deactivationSlot"),Q.nu64("lastExtendedSlot"),Q.u8("lastExtendedStartIndex"),Q.u8(),Q.seq(wt(),Q.offset(Q.u8(),-1),"authority")])},tie=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function nie(t){const e=t.match(tie);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${t}\``);const[n,r,s,i]=e,o=t.startsWith("https:")?"wss:":"ws:",a=s==null?null:parseInt(s.slice(1),10),c=a==null?"":`:${a+1}`;return`${o}//${r}${c}${i}`}const mn=uf(Vv(Ne),be(),t=>new Ne(t)),_3=Kv([be(),gn("base64")]),Xv=uf(Vv(mt),_3,t=>mt.from(t[0],"base64")),rie=30*1e3;function sie(t){if(/^https?:/.test(t)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return t}function tn(t){let e,n;if(typeof t=="string")e=t;else if(t){const{commitment:r,...s}=t;e=r,n=s}return{commitment:e,config:n}}function CI(t){return t.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function C3(t){return Hr([ge({jsonrpc:gn("2.0"),id:be(),result:t}),ge({jsonrpc:gn("2.0"),id:be(),error:ge({code:xl(),message:be(),data:Ye(Fre())})})])}const iie=C3(xl());function gt(t){return uf(C3(t),iie,e=>"error"in e?e:{...e,result:Ce(e.result,t)})}function Sn(t){return gt(ge({context:ge({slot:oe()}),value:t}))}function Cg(t){return ge({context:ge({slot:oe()}),value:t})}function Wy(t,e){return t===0?new _h({header:e.header,staticAccountKeys:e.accountKeys.map(n=>new Ne(n)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(n=>({programIdIndex:n.programIdIndex,accountKeyIndexes:n.accounts,data:hr.decode(n.data)})),addressTableLookups:e.addressTableLookups}):new Wo(e)}const oie=ge({foundation:oe(),foundationTerm:oe(),initial:oe(),taper:oe(),terminal:oe()}),aie=gt(Ie(xe(ge({epoch:oe(),effectiveSlot:oe(),amount:oe(),postBalance:oe(),commission:Ye(xe(oe()))})))),cie=Ie(ge({slot:oe(),prioritizationFee:oe()})),uie=ge({total:oe(),validator:oe(),foundation:oe(),epoch:oe()}),lie=ge({epoch:oe(),slotIndex:oe(),slotsInEpoch:oe(),absoluteSlot:oe(),blockHeight:Ye(oe()),transactionCount:Ye(oe())}),die=ge({slotsPerEpoch:oe(),leaderScheduleSlotOffset:oe(),warmup:to(),firstNormalEpoch:oe(),firstNormalSlot:oe()}),hie=o3(be(),Ie(oe())),Yc=xe(Hr([ge({}),be()])),fie=ge({err:Yc}),pie=gn("receivedSignature"),gie=ge({"solana-core":be(),"feature-set":Ye(oe())}),mie=ge({program:be(),programId:mn,parsed:xl()}),yie=ge({programId:mn,accounts:Ie(mn),data:be()}),AI=Sn(ge({err:xe(Hr([ge({}),be()])),logs:xe(Ie(be())),accounts:Ye(xe(Ie(xe(ge({executable:to(),owner:be(),lamports:oe(),data:Ie(be()),rentEpoch:Ye(oe())}))))),unitsConsumed:Ye(oe()),returnData:Ye(xe(ge({programId:be(),data:Kv([be(),gn("base64")])}))),innerInstructions:Ye(xe(Ie(ge({index:oe(),instructions:Ie(Hr([mie,yie]))}))))})),wie=Sn(ge({byIdentity:o3(be(),Ie(oe())),range:ge({firstSlot:oe(),lastSlot:oe()})}));function bie(t,e,n,r,s,i){const o=n||Jse;let a;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let c;return r&&(c=async(l,d)=>{const h=await new Promise((f,y)=>{try{r(l,d,(m,v)=>f([m,v]))}catch(m){y(m)}});return await o(...h)}),new lse(async(l,d)=>{const h={method:"POST",body:l,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},boe)};try{let f=5,y,m=500;for(;c?y=await c(t,h):y=await o(t,h),!(y.status!==429||s===!0||(f-=1,f===0));)console.error(`Server responded with ${y.status} ${y.statusText}.  Retrying after ${m}ms delay...`),await Nu(m),m*=2;const v=await y.text();y.ok?d(null,v):d(new Error(`${y.status} ${y.statusText}: ${v}`))}catch(f){f instanceof Error&&d(f)}},{})}function vie(t){return(e,n)=>new Promise((r,s)=>{t.request(e,n,(i,o)=>{if(i){s(i);return}r(o)})})}function Eie(t){return e=>new Promise((n,r)=>{e.length===0&&n([]);const s=e.map(i=>t.request(i.methodName,i.args));t.request(s,(i,o)=>{if(i){r(i);return}n(o)})})}const _ie=gt(oie),Cie=gt(uie),Aie=gt(cie),Iie=gt(lie),Sie=gt(die),xie=gt(hie),Tie=gt(oe()),Nie=Sn(ge({total:oe(),circulating:oe(),nonCirculating:oe(),nonCirculatingAccounts:Ie(mn)})),qb=ge({amount:be(),uiAmount:xe(oe()),decimals:oe(),uiAmountString:Ye(be())}),Rie=Sn(Ie(ge({address:mn,amount:be(),uiAmount:xe(oe()),decimals:oe(),uiAmountString:Ye(be())}))),Pie=Sn(Ie(ge({pubkey:mn,account:ge({executable:to(),owner:mn,lamports:oe(),data:Xv,rentEpoch:oe()})}))),zb=ge({program:be(),parsed:xl(),space:oe()}),kie=Sn(Ie(ge({pubkey:mn,account:ge({executable:to(),owner:mn,lamports:oe(),data:zb,rentEpoch:oe()})}))),Oie=Sn(Ie(ge({lamports:oe(),address:mn}))),Ch=ge({executable:to(),owner:mn,lamports:oe(),data:Xv,rentEpoch:oe()}),Bie=ge({pubkey:mn,account:Ch}),$ie=uf(Hr([Vv(mt),zb]),Hr([_3,zb]),t=>Array.isArray(t)?Ce(t,Xv):t),Wb=ge({executable:to(),owner:mn,lamports:oe(),data:$ie,rentEpoch:oe()}),Die=ge({pubkey:mn,account:Wb}),Uie=ge({state:Hr([gn("active"),gn("inactive"),gn("activating"),gn("deactivating")]),active:oe(),inactive:oe()}),Mie=gt(Ie(ge({signature:be(),slot:oe(),err:Yc,memo:xe(be()),blockTime:Ye(xe(oe()))}))),Lie=gt(Ie(ge({signature:be(),slot:oe(),err:Yc,memo:xe(be()),blockTime:Ye(xe(oe()))}))),Fie=ge({subscription:oe(),result:Cg(Ch)}),jie=ge({pubkey:mn,account:Ch}),qie=ge({subscription:oe(),result:Cg(jie)}),zie=ge({parent:oe(),slot:oe(),root:oe()}),Wie=ge({subscription:oe(),result:zie}),Hie=Hr([ge({type:Hr([gn("firstShredReceived"),gn("completed"),gn("optimisticConfirmation"),gn("root")]),slot:oe(),timestamp:oe()}),ge({type:gn("createdBank"),parent:oe(),slot:oe(),timestamp:oe()}),ge({type:gn("frozen"),slot:oe(),timestamp:oe(),stats:ge({numTransactionEntries:oe(),numSuccessfulTransactions:oe(),numFailedTransactions:oe(),maxTransactionsPerEntry:oe()})}),ge({type:gn("dead"),slot:oe(),timestamp:oe(),err:be()})]),Vie=ge({subscription:oe(),result:Hie}),Kie=ge({subscription:oe(),result:Cg(Hr([fie,pie]))}),Gie=ge({subscription:oe(),result:oe()}),Yie=ge({pubkey:be(),gossip:xe(be()),tpu:xe(be()),rpc:xe(be()),version:xe(be())}),II=ge({votePubkey:be(),nodePubkey:be(),activatedStake:oe(),epochVoteAccount:to(),epochCredits:Ie(Kv([oe(),oe(),oe()])),commission:oe(),lastVote:oe(),rootSlot:xe(oe())}),Zie=gt(ge({current:Ie(II),delinquent:Ie(II)})),Jie=Hr([gn("processed"),gn("confirmed"),gn("finalized")]),Xie=ge({slot:oe(),confirmations:xe(oe()),err:Yc,confirmationStatus:Ye(Jie)}),Qie=Sn(Ie(xe(Xie))),eoe=gt(oe()),A3=ge({accountKey:mn,writableIndexes:Ie(oe()),readonlyIndexes:Ie(oe())}),Qv=ge({signatures:Ie(be()),message:ge({accountKeys:Ie(be()),header:ge({numRequiredSignatures:oe(),numReadonlySignedAccounts:oe(),numReadonlyUnsignedAccounts:oe()}),instructions:Ie(ge({accounts:Ie(oe()),data:be(),programIdIndex:oe()})),recentBlockhash:be(),addressTableLookups:Ye(Ie(A3))})}),I3=ge({pubkey:mn,signer:to(),writable:to(),source:Ye(Hr([gn("transaction"),gn("lookupTable")]))}),S3=ge({accountKeys:Ie(I3),signatures:Ie(be())}),x3=ge({parsed:xl(),program:be(),programId:mn}),T3=ge({accounts:Ie(mn),data:be(),programId:mn}),toe=Hr([T3,x3]),noe=Hr([ge({parsed:xl(),program:be(),programId:be()}),ge({accounts:Ie(be()),data:be(),programId:be()})]),N3=uf(toe,noe,t=>"accounts"in t?Ce(t,T3):Ce(t,x3)),R3=ge({signatures:Ie(be()),message:ge({accountKeys:Ie(I3),instructions:Ie(N3),recentBlockhash:be(),addressTableLookups:Ye(xe(Ie(A3)))})}),p0=ge({accountIndex:oe(),mint:be(),owner:Ye(be()),programId:Ye(be()),uiTokenAmount:qb}),P3=ge({writable:Ie(mn),readonly:Ie(mn)}),Ag=ge({err:Yc,fee:oe(),innerInstructions:Ye(xe(Ie(ge({index:oe(),instructions:Ie(ge({accounts:Ie(oe()),data:be(),programIdIndex:oe()}))})))),preBalances:Ie(oe()),postBalances:Ie(oe()),logMessages:Ye(xe(Ie(be()))),preTokenBalances:Ye(xe(Ie(p0))),postTokenBalances:Ye(xe(Ie(p0))),loadedAddresses:Ye(P3),computeUnitsConsumed:Ye(oe())}),eE=ge({err:Yc,fee:oe(),innerInstructions:Ye(xe(Ie(ge({index:oe(),instructions:Ie(N3)})))),preBalances:Ie(oe()),postBalances:Ie(oe()),logMessages:Ye(xe(Ie(be()))),preTokenBalances:Ye(xe(Ie(p0))),postTokenBalances:Ye(xe(Ie(p0))),loadedAddresses:Ye(P3),computeUnitsConsumed:Ye(oe())}),Tl=Hr([gn(0),gn("legacy")]),Zc=ge({pubkey:be(),lamports:oe(),postBalance:xe(oe()),rewardType:xe(be()),commission:Ye(xe(oe()))}),roe=gt(xe(ge({blockhash:be(),previousBlockhash:be(),parentSlot:oe(),transactions:Ie(ge({transaction:Qv,meta:xe(Ag),version:Ye(Tl)})),rewards:Ye(Ie(Zc)),blockTime:xe(oe()),blockHeight:xe(oe())}))),soe=gt(xe(ge({blockhash:be(),previousBlockhash:be(),parentSlot:oe(),rewards:Ye(Ie(Zc)),blockTime:xe(oe()),blockHeight:xe(oe())}))),ioe=gt(xe(ge({blockhash:be(),previousBlockhash:be(),parentSlot:oe(),transactions:Ie(ge({transaction:S3,meta:xe(Ag),version:Ye(Tl)})),rewards:Ye(Ie(Zc)),blockTime:xe(oe()),blockHeight:xe(oe())}))),ooe=gt(xe(ge({blockhash:be(),previousBlockhash:be(),parentSlot:oe(),transactions:Ie(ge({transaction:R3,meta:xe(eE),version:Ye(Tl)})),rewards:Ye(Ie(Zc)),blockTime:xe(oe()),blockHeight:xe(oe())}))),aoe=gt(xe(ge({blockhash:be(),previousBlockhash:be(),parentSlot:oe(),transactions:Ie(ge({transaction:S3,meta:xe(eE),version:Ye(Tl)})),rewards:Ye(Ie(Zc)),blockTime:xe(oe()),blockHeight:xe(oe())}))),coe=gt(xe(ge({blockhash:be(),previousBlockhash:be(),parentSlot:oe(),rewards:Ye(Ie(Zc)),blockTime:xe(oe()),blockHeight:xe(oe())}))),uoe=gt(xe(ge({blockhash:be(),previousBlockhash:be(),parentSlot:oe(),transactions:Ie(ge({transaction:Qv,meta:xe(Ag)})),rewards:Ye(Ie(Zc)),blockTime:xe(oe())}))),SI=gt(xe(ge({blockhash:be(),previousBlockhash:be(),parentSlot:oe(),signatures:Ie(be()),blockTime:xe(oe())}))),Hy=gt(xe(ge({slot:oe(),meta:xe(Ag),blockTime:Ye(xe(oe())),transaction:Qv,version:Ye(Tl)}))),Hf=gt(xe(ge({slot:oe(),transaction:R3,meta:xe(eE),blockTime:Ye(xe(oe())),version:Ye(Tl)}))),loe=Sn(ge({blockhash:be(),lastValidBlockHeight:oe()})),doe=Sn(to()),hoe=ge({slot:oe(),numTransactions:oe(),numSlots:oe(),samplePeriodSecs:oe()}),foe=gt(Ie(hoe)),poe=Sn(xe(ge({feeCalculator:ge({lamportsPerSignature:oe()})}))),goe=gt(be()),moe=gt(be()),yoe=ge({err:Yc,logs:Ie(be()),signature:be()}),woe=ge({result:Cg(yoe),subscription:oe()}),boe={"solana-client":"js/1.0.0-maintenance"};class Xl{constructor(e,n){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const u={};return async l=>{const{commitment:d,config:h}=tn(l),f=this._buildArgs([],d,void 0,h),y=vI(f);return u[y]=u[y]??(async()=>{try{const m=await this._rpcRequest("getBlockHeight",f),v=Ce(m,gt(oe()));if("error"in v)throw new ze(v.error,"failed to get block height information");return v.result}finally{delete u[y]}})(),await u[y]}})();let r,s,i,o,a,c;n&&typeof n=="string"?this._commitment=n:n&&(this._commitment=n.commitment,this._confirmTransactionInitialTimeout=n.confirmTransactionInitialTimeout,r=n.wsEndpoint,s=n.httpHeaders,i=n.fetch,o=n.fetchMiddleware,a=n.disableRetryOnRateLimit,c=n.httpAgent),this._rpcEndpoint=sie(e),this._rpcWsEndpoint=r||nie(e),this._rpcClient=bie(e,s,i,o,a,c),this._rpcRequest=vie(this._rpcClient),this._rpcBatchRequest=Eie(this._rpcClient),this._rpcWebSocket=new Xse(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,n){const{commitment:r,config:s}=tn(n),i=this._buildArgs([e.toBase58()],r,void 0,s),o=await this._rpcRequest("getBalance",i),a=Ce(o,Sn(oe()));if("error"in a)throw new ze(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,n){return await this.getBalanceAndContext(e,n).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+r)})}async getBlockTime(e){const n=await this._rpcRequest("getBlockTime",[e]),r=Ce(n,gt(xe(oe())));if("error"in r)throw new ze(r.error,`failed to get block time for slot ${e}`);return r.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),n=Ce(e,gt(oe()));if("error"in n)throw new ze(n.error,"failed to get minimum ledger slot");return n.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),n=Ce(e,Tie);if("error"in n)throw new ze(n.error,"failed to get first available block");return n.result}async getSupply(e){let n={};typeof e=="string"?n={commitment:e}:e?n={...e,commitment:e&&e.commitment||this.commitment}:n={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[n]),s=Ce(r,Nie);if("error"in s)throw new ze(s.error,"failed to get supply");return s.result}async getTokenSupply(e,n){const r=this._buildArgs([e.toBase58()],n),s=await this._rpcRequest("getTokenSupply",r),i=Ce(s,Sn(qb));if("error"in i)throw new ze(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(e,n){const r=this._buildArgs([e.toBase58()],n),s=await this._rpcRequest("getTokenAccountBalance",r),i=Ce(s,Sn(qb));if("error"in i)throw new ze(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(e,n,r){const{commitment:s,config:i}=tn(r);let o=[e.toBase58()];"mint"in n?o.push({mint:n.mint.toBase58()}):o.push({programId:n.programId.toBase58()});const a=this._buildArgs(o,s,"base64",i),c=await this._rpcRequest("getTokenAccountsByOwner",a),u=Ce(c,Pie);if("error"in u)throw new ze(u.error,`failed to get token accounts owned by account ${e.toBase58()}`);return u.result}async getParsedTokenAccountsByOwner(e,n,r){let s=[e.toBase58()];"mint"in n?s.push({mint:n.mint.toBase58()}):s.push({programId:n.programId.toBase58()});const i=this._buildArgs(s,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),a=Ce(o,kie);if("error"in a)throw new ze(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){const n={...e,commitment:e&&e.commitment||this.commitment},r=n.filter||n.commitment?[n]:[],s=await this._rpcRequest("getLargestAccounts",r),i=Ce(s,Oie);if("error"in i)throw new ze(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(e,n){const r=this._buildArgs([e.toBase58()],n),s=await this._rpcRequest("getTokenLargestAccounts",r),i=Ce(s,Rie);if("error"in i)throw new ze(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(e,n){const{commitment:r,config:s}=tn(n),i=this._buildArgs([e.toBase58()],r,"base64",s),o=await this._rpcRequest("getAccountInfo",i),a=Ce(o,Sn(xe(Ch)));if("error"in a)throw new ze(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,n){const{commitment:r,config:s}=tn(n),i=this._buildArgs([e.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),a=Ce(o,Sn(xe(Wb)));if("error"in a)throw new ze(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,n){try{return(await this.getAccountInfoAndContext(e,n)).value}catch(r){throw new Error("failed to get info about account "+e.toBase58()+": "+r)}}async getMultipleParsedAccounts(e,n){const{commitment:r,config:s}=tn(n),i=e.map(u=>u.toBase58()),o=this._buildArgs([i],r,"jsonParsed",s),a=await this._rpcRequest("getMultipleAccounts",o),c=Ce(a,Sn(Ie(xe(Wb))));if("error"in c)throw new ze(c.error,`failed to get info for accounts ${i}`);return c.result}async getMultipleAccountsInfoAndContext(e,n){const{commitment:r,config:s}=tn(n),i=e.map(u=>u.toBase58()),o=this._buildArgs([i],r,"base64",s),a=await this._rpcRequest("getMultipleAccounts",o),c=Ce(a,Sn(Ie(xe(Ch))));if("error"in c)throw new ze(c.error,`failed to get info for accounts ${i}`);return c.result}async getMultipleAccountsInfo(e,n){return(await this.getMultipleAccountsInfoAndContext(e,n)).value}async getStakeActivation(e,n,r){const{commitment:s,config:i}=tn(n),o=this._buildArgs([e.toBase58()],s,void 0,{...i,epoch:r??i?.epoch}),a=await this._rpcRequest("getStakeActivation",o),c=Ce(a,gt(Uie));if("error"in c)throw new ze(c.error,`failed to get Stake Activation ${e.toBase58()}`);return c.result}async getProgramAccounts(e,n){const{commitment:r,config:s}=tn(n),{encoding:i,...o}=s||{},a=this._buildArgs([e.toBase58()],r,i||"base64",{...o,...o.filters?{filters:CI(o.filters)}:null}),c=await this._rpcRequest("getProgramAccounts",a),u=Ie(Bie),l=o.withContext===!0?Ce(c,Sn(u)):Ce(c,gt(u));if("error"in l)throw new ze(l.error,`failed to get accounts owned by program ${e.toBase58()}`);return l.result}async getParsedProgramAccounts(e,n){const{commitment:r,config:s}=tn(n),i=this._buildArgs([e.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),a=Ce(o,gt(Ie(Die)));if("error"in a)throw new ze(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,n){let r;if(typeof e=="string")r=e;else{const i=e;if(i.abortSignal?.aborted)return Promise.reject(i.abortSignal.reason);r=i.signature}let s;try{s=hr.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return fn(s.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:n||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:n||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:n||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((n,r)=>{e!=null&&(e.aborted?r(e.reason):e.addEventListener("abort",()=>{r(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:n}){let r,s,i=!1;const o=new Promise((c,u)=>{try{r=this.onSignature(n,(d,h)=>{r=void 0;const f={context:h,value:d};c({__type:da.PROCESSED,response:f})},e);const l=new Promise(d=>{r==null?d():s=this._onSubscriptionStateChange(r,h=>{h==="subscribed"&&d()})});(async()=>{if(await l,i)return;const d=await this.getSignatureStatus(n);if(i||d==null)return;const{context:h,value:f}=d;if(f!=null)if(f?.err)u(f.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(f.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(f.confirmationStatus==="processed"||f.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,c({__type:da.PROCESSED,response:{context:h,value:f}})}})()}catch(l){u(l)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:n,lastValidBlockHeight:r,signature:s}}){let i=!1;const o=new Promise(d=>{const h=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let f=await h();if(!i){for(;f<=r;)if(await Nu(1e3),i||(f=await h(),i))return;d({__type:da.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:e,signature:s}),u=this.getCancellationPromise(n);let l;try{const d=await Promise.race([u,c,o]);if(d.__type===da.PROCESSED)l=d.response;else throw new m3(s)}finally{i=!0,a()}return l}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:n,minContextSlot:r,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let a=!1;const c=new Promise(f=>{let y=i,m=null;const v=async()=>{try{const{context:T,value:O}=await this.getNonceAndContext(s,{commitment:e,minContextSlot:r});return m=T.slot,O?.nonce}catch{return y}};(async()=>{if(y=await v(),!a)for(;;){if(i!==y){f({__type:da.NONCE_INVALID,slotInWhichNonceDidAdvance:m});return}if(await Nu(2e3),a||(y=await v(),a))return}})()}),{abortConfirmation:u,confirmationPromise:l}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),d=this.getCancellationPromise(n);let h;try{const f=await Promise.race([d,l,c]);if(f.__type===da.PROCESSED)h=f.response;else{let y;for(;;){const m=await this.getSignatureStatus(o);if(m==null)break;if(m.context.slot<(f.slotInWhichNonceDidAdvance??r)){await Nu(400);continue}y=m;break}if(y?.value){const m=e||"finalized",{confirmationStatus:v}=y.value;switch(m){case"processed":case"recent":if(v!=="processed"&&v!=="confirmed"&&v!=="finalized")throw new ld(o);break;case"confirmed":case"single":case"singleGossip":if(v!=="confirmed"&&v!=="finalized")throw new ld(o);break;case"finalized":case"max":case"root":if(v!=="finalized")throw new ld(o);break;default:}h={context:y.context,value:{err:y.value.err}}}else throw new ld(o)}}finally{a=!0,u()}return h}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:n}){let r;const s=new Promise(c=>{let u=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{u=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>c({__type:da.TIMED_OUT,timeoutMs:u}),u)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:n});let a;try{const c=await Promise.race([o,s]);if(c.__type===da.PROCESSED)a=c.response;else throw new y3(n,c.timeoutMs/1e3)}finally{clearTimeout(r),i()}return a}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),n=Ce(e,gt(Ie(Yie)));if("error"in n)throw new ze(n.error,"failed to get cluster nodes");return n.result}async getVoteAccounts(e){const n=this._buildArgs([],e),r=await this._rpcRequest("getVoteAccounts",n),s=Ce(r,Zie);if("error"in s)throw new ze(s.error,"failed to get vote accounts");return s.result}async getSlot(e){const{commitment:n,config:r}=tn(e),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getSlot",s),o=Ce(i,gt(oe()));if("error"in o)throw new ze(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:n,config:r}=tn(e),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getSlotLeader",s),o=Ce(i,gt(be()));if("error"in o)throw new ze(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,n){const r=[e,n],s=await this._rpcRequest("getSlotLeaders",r),i=Ce(s,gt(Ie(mn)));if("error"in i)throw new ze(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(e,n){const{context:r,value:s}=await this.getSignatureStatuses([e],n);fn(s.length===1);const i=s[0];return{context:r,value:i}}async getSignatureStatuses(e,n){const r=[e];n&&r.push(n);const s=await this._rpcRequest("getSignatureStatuses",r),i=Ce(s,Qie);if("error"in i)throw new ze(i.error,"failed to get signature status");return i.result}async getTransactionCount(e){const{commitment:n,config:r}=tn(e),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getTransactionCount",s),o=Ce(i,gt(oe()));if("error"in o)throw new ze(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const n=this._buildArgs([],e),r=await this._rpcRequest("getInflationGovernor",n),s=Ce(r,_ie);if("error"in s)throw new ze(s.error,"failed to get inflation");return s.result}async getInflationReward(e,n,r){const{commitment:s,config:i}=tn(r),o=this._buildArgs([e.map(u=>u.toBase58())],s,void 0,{...i,epoch:n??i?.epoch}),a=await this._rpcRequest("getInflationReward",o),c=Ce(a,aie);if("error"in c)throw new ze(c.error,"failed to get inflation reward");return c.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),n=Ce(e,Cie);if("error"in n)throw new ze(n.error,"failed to get inflation rate");return n.result}async getEpochInfo(e){const{commitment:n,config:r}=tn(e),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getEpochInfo",s),o=Ce(i,Iie);if("error"in o)throw new ze(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),n=Ce(e,Sie);if("error"in n)throw new ze(n.error,"failed to get epoch schedule");const r=n.result;return new Zse(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),n=Ce(e,xie);if("error"in n)throw new ze(n.error,"failed to get leader schedule");return n.result}async getMinimumBalanceForRentExemption(e,n){const r=this._buildArgs([e],n),s=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=Ce(s,eoe);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(e){const{context:n,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(e);return{context:n,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const n=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),r=Ce(n,foe);if("error"in r)throw new ze(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(e,n){const r=this._buildArgs([e],n),s=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=Ce(s,poe);if("error"in i)throw new ze(i.error,"failed to get fee calculator");const{context:o,value:a}=i.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,n){const r=cr(e.serialize()).toString("base64"),s=this._buildArgs([r],n),i=await this._rpcRequest("getFeeForMessage",s),o=Ce(i,Sn(xe(oe())));if("error"in o)throw new ze(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){const n=e?.lockedWritableAccounts?.map(o=>o.toBase58()),r=n?.length?[n]:[],s=await this._rpcRequest("getRecentPrioritizationFees",r),i=Ce(s,Aie);if("error"in i)throw new ze(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhashAndContext(e){const{commitment:n,config:r}=tn(e),s=this._buildArgs([],n,void 0,r),i=await this._rpcRequest("getLatestBlockhash",s),o=Ce(i,loe);if("error"in o)throw new ze(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,n){const{commitment:r,config:s}=tn(n),i=this._buildArgs([e],r,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),a=Ce(o,doe);if("error"in a)throw new ze(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),n=Ce(e,gt(gie));if("error"in n)throw new ze(n.error,"failed to get version");return n.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),n=Ce(e,gt(be()));if("error"in n)throw new ze(n.error,"failed to get genesis hash");return n.result}async getBlock(e,n){const{commitment:r,config:s}=tn(n),i=this._buildArgsAtLeastConfirmed([e],r,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const a=Ce(o,ioe);if("error"in a)throw a.error;return a.result}case"none":{const a=Ce(o,soe);if("error"in a)throw a.error;return a.result}default:{const a=Ce(o,roe);if("error"in a)throw a.error;const{result:c}=a;return c?{...c,transactions:c.transactions.map(({transaction:u,meta:l,version:d})=>({meta:l,transaction:{...u,message:Wy(d,u.message)},version:d}))}:null}}}catch(a){throw new ze(a,"failed to get confirmed block")}}async getParsedBlock(e,n){const{commitment:r,config:s}=tn(n),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const a=Ce(o,aoe);if("error"in a)throw a.error;return a.result}case"none":{const a=Ce(o,coe);if("error"in a)throw a.error;return a.result}default:{const a=Ce(o,ooe);if("error"in a)throw a.error;return a.result}}}catch(a){throw new ze(a,"failed to get block")}}async getBlockProduction(e){let n,r;if(typeof e=="string")r=e;else if(e){const{commitment:a,...c}=e;r=a,n=c}const s=this._buildArgs([],r,"base64",n),i=await this._rpcRequest("getBlockProduction",s),o=Ce(i,wie);if("error"in o)throw new ze(o.error,"failed to get block production information");return o.result}async getTransaction(e,n){const{commitment:r,config:s}=tn(n),i=this._buildArgsAtLeastConfirmed([e],r,void 0,s),o=await this._rpcRequest("getTransaction",i),a=Ce(o,Hy);if("error"in a)throw new ze(a.error,"failed to get transaction");const c=a.result;return c&&{...c,transaction:{...c.transaction,message:Wy(c.version,c.transaction.message)}}}async getParsedTransaction(e,n){const{commitment:r,config:s}=tn(n),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),a=Ce(o,Hf);if("error"in a)throw new ze(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,n){const{commitment:r,config:s}=tn(n),i=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],r,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(c=>{const u=Ce(c,Hf);if("error"in u)throw new ze(u.error,"failed to get transactions");return u.result})}async getTransactions(e,n){const{commitment:r,config:s}=tn(n),i=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],r,void 0,s)}));return(await this._rpcBatchRequest(i)).map(c=>{const u=Ce(c,Hy);if("error"in u)throw new ze(u.error,"failed to get transactions");const l=u.result;return l&&{...l,transaction:{...l.transaction,message:Wy(l.version,l.transaction.message)}}})}async getConfirmedBlock(e,n){const r=this._buildArgsAtLeastConfirmed([e],n),s=await this._rpcRequest("getBlock",r),i=Ce(s,uoe);if("error"in i)throw new ze(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");const a={...o,transactions:o.transactions.map(({transaction:c,meta:u})=>{const l=new Wo(c.message);return{meta:u,transaction:{...c,message:l}}})};return{...a,transactions:a.transactions.map(({transaction:c,meta:u})=>({meta:u,transaction:fr.populate(c.message,c.signatures)}))}}async getBlocks(e,n,r){const s=this._buildArgsAtLeastConfirmed(n!==void 0?[e,n]:[e],r),i=await this._rpcRequest("getBlocks",s),o=Ce(i,gt(Ie(oe())));if("error"in o)throw new ze(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=Ce(s,SI);if("error"in i)throw new ze(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=Ce(s,SI);if("error"in i)throw new ze(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,n){const r=this._buildArgsAtLeastConfirmed([e],n),s=await this._rpcRequest("getTransaction",r),i=Ce(s,Hy);if("error"in i)throw new ze(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const a=new Wo(o.transaction.message),c=o.transaction.signatures;return{...o,transaction:fr.populate(a,c)}}async getParsedConfirmedTransaction(e,n){const r=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed"),s=await this._rpcRequest("getTransaction",r),i=Ce(s,Hf);if("error"in i)throw new ze(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(e,n){const r=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],n,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{const a=Ce(o,Hf);if("error"in a)throw new ze(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,n,r){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(n--,!(n<=0||n<i));)try{const c=await this.getConfirmedBlockSignatures(n,"finalized");c.signatures.length>0&&(s.until=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}let o=await this.getSlot("finalized");for(;!("before"in s)&&(r++,!(r>o));)try{const c=await this.getConfirmedBlockSignatures(r);c.signatures.length>0&&(s.before=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}return(await this.getConfirmedSignaturesForAddress2(e,s)).map(c=>c.signature)}async getConfirmedSignaturesForAddress2(e,n,r){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,n),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=Ce(i,Mie);if("error"in o)throw new ze(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,n,r){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,n),i=await this._rpcRequest("getSignaturesForAddress",s),o=Ce(i,Lie);if("error"in o)throw new ze(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,n){const{context:r,value:s}=await this.getAccountInfoAndContext(e,n);let i=null;return s!==null&&(i=new _I({key:e,state:_I.deserialize(s.data)})),{context:r,value:i}}async getNonceAndContext(e,n){const{context:r,value:s}=await this.getAccountInfoAndContext(e,n);let i=null;return s!==null&&(i=Jv.fromAccountData(s.data)),{context:r,value:i}}async getNonce(e,n){return await this.getNonceAndContext(e,n).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+r)})}async requestAirdrop(e,n){const r=await this._rpcRequest("requestAirdrop",[e.toBase58(),n]),s=Ce(r,goe);if("error"in s)throw new ze(s.error,`airdrop to ${e.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await Nu(100);const r=Date.now()-this._blockhashInfo.lastFetch>=rie;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),n=this._blockhashInfo.latestBlockhash,r=n?n.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(r!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await Nu(Wse/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:n,config:r}=tn(e),s=this._buildArgs([],n,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=Ce(i,Sn(oe()));if("error"in o)throw new ze(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,n,r){if("message"in e){const m=e.serialize(),v=mt.from(m).toString("base64");if(Array.isArray(n)||r!==void 0)throw new Error("Invalid arguments");const T=n||{};T.encoding="base64","commitment"in T||(T.commitment=this.commitment),n&&typeof n=="object"&&"innerInstructions"in n&&(T.innerInstructions=n.innerInstructions);const O=[v,T],A=await this._rpcRequest("simulateTransaction",O),M=Ce(A,AI);if("error"in M)throw new Error("failed to simulate transaction: "+M.error.message);return M.result}let s;if(e instanceof fr){let y=e;s=new fr,s.feePayer=y.feePayer,s.instructions=e.instructions,s.nonceInfo=y.nonceInfo,s.signatures=y.signatures}else s=fr.populate(e),s._message=s._json=void 0;if(n!==void 0&&!Array.isArray(n))throw new Error("Invalid arguments");const i=n;if(s.nonceInfo&&i)s.sign(...i);else{let y=this._disableBlockhashCaching;for(;;){const m=await this._blockhashWithExpiryBlockHeight(y);if(s.lastValidBlockHeight=m.lastValidBlockHeight,s.recentBlockhash=m.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const v=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(v)&&!this._blockhashInfo.transactionSignatures.includes(v)){this._blockhashInfo.simulatedSignatures.push(v);break}else y=!0}}const o=s._compile(),a=o.serialize(),u=s._serialize(a).toString("base64"),l={encoding:"base64",commitment:this.commitment};if(r){const y=(Array.isArray(r)?r:o.nonProgramIds()).map(m=>m.toBase58());l.accounts={encoding:"base64",addresses:y}}i&&(l.sigVerify=!0),n&&typeof n=="object"&&"innerInstructions"in n&&(l.innerInstructions=n.innerInstructions);const d=[u,l],h=await this._rpcRequest("simulateTransaction",d),f=Ce(h,AI);if("error"in f){let y;if("data"in f.error&&(y=f.error.data.logs,y&&Array.isArray(y))){const m=`
    `,v=m+y.join(m);console.error(f.error.message,v)}throw new yI({action:"simulate",signature:"",transactionMessage:f.error.message,logs:y})}return f.result}async sendTransaction(e,n,r){if("version"in e){if(n&&Array.isArray(n))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,n)}if(n===void 0||!Array.isArray(n))throw new Error("Invalid arguments");const s=n;if(e.nonceInfo)e.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...s),!e.signature)throw new Error("!signature");const c=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(c))o=!0;else{this._blockhashInfo.transactionSignatures.push(c);break}}}const i=e.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(e,n){const r=cr(e).toString("base64");return await this.sendEncodedTransaction(r,n)}async sendEncodedTransaction(e,n){const r={encoding:"base64"},s=n&&n.skipPreflight,i=s===!0?"processed":n&&n.preflightCommitment||this.commitment;n&&n.maxRetries!=null&&(r.maxRetries=n.maxRetries),n&&n.minContextSlot!=null&&(r.minContextSlot=n.minContextSlot),s&&(r.skipPreflight=s),i&&(r.preflightCommitment=i);const o=[e,r],a=await this._rpcRequest("sendTransaction",o),c=Ce(a,moe);if("error"in c){let u;throw"data"in c.error&&(u=c.error.data.logs),new yI({action:s?"send":"simulate",signature:"",transactionMessage:c.error.message,logs:u})}return c.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([n,r])=>{this._setSubscription(n,{...r,state:"pending"})})}_setSubscription(e,n){const r=this._subscriptionsByHash[e]?.state;if(this._subscriptionsByHash[e]=n,r!==n.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(i=>{try{i(n.state)}catch{}})}}_onSubscriptionStateChange(e,n){const r=this._subscriptionHashByClientSubscriptionId[e];if(r==null)return()=>{};const s=this._subscriptionStateChangeCallbacksByHash[r]||=new Set;return s.add(n),()=>{s.delete(n),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,n=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const s=this._subscriptionsByHash[r];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[r],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(r,{...s,state:"subscribing"});const a=await this._rpcWebSocket.call(o,i);this._setSubscription(r,{...s,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=s.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:i,error:a}),!n())return;this._setSubscription(r,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(r,{...s,state:"unsubscribing"}),this._setSubscription(r,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!n())return;this._setSubscription(r,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,n){const r=this._subscriptionCallbacksByServerSubscriptionId[e];r!==void 0&&r.forEach(s=>{try{s(...n)}catch(i){console.error(i)}})}_wsOnAccountNotification(e){const{result:n,subscription:r}=Ce(e,Fie);this._handleServerNotification(r,[n.value,n.context])}_makeSubscription(e,n){const r=this._nextClientSubscriptionId++,s=vI([e.method,n]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...e,args:n,callbacks:new Set([e.callback]),state:"pending"}:i.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const o=this._subscriptionsByHash[s];fn(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,n,r){const{commitment:s,config:i}=tn(r),o=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:n,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:n,subscription:r}=Ce(e,qie);this._handleServerNotification(r,[{accountId:n.value.pubkey,accountInfo:n.value.account},n.context])}onProgramAccountChange(e,n,r,s){const{commitment:i,config:o}=tn(r),a=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:CI(s)}:void 0));return this._makeSubscription({callback:n,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,n,r){const s=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:n,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:n,subscription:r}=Ce(e,woe);this._handleServerNotification(r,[n.value,n.context])}_wsOnSlotNotification(e){const{result:n,subscription:r}=Ce(e,Wie);this._handleServerNotification(r,[n])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:n,subscription:r}=Ce(e,Vie);this._handleServerNotification(r,[n])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,n){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${n}' events could not be found.`)}_buildArgs(e,n,r,s){const i=n||this._commitment;if(i||r||s){let o={};r&&(o.encoding=r),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,n,r,s){const i=n||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,n,r,s)}_wsOnSignatureNotification(e){const{result:n,subscription:r}=Ce(e,Kie);n.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,n.value==="receivedSignature"?[{type:"received"},n.context]:[{type:"status",result:n.value},n.context])}onSignature(e,n,r){const s=this._buildArgs([e],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){n(o.result,a);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(e,n,r){const{commitment:s,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([e],s,void 0,i),a=this._makeSubscription({callback:(c,u)=>{n(c,u);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:n,subscription:r}=Ce(e,Gie);this._handleServerNotification(r,[n])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:Q.struct([Q.u32("instruction"),dl("recentSlot"),Q.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:Q.struct([Q.u32("instruction")])},ExtendLookupTable:{index:2,layout:Q.struct([Q.u32("instruction"),dl(),Q.seq(wt(),Q.offset(Q.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:Q.struct([Q.u32("instruction")])},CloseLookupTable:{index:4,layout:Q.struct([Q.u32("instruction")])}});new Ne("AddressLookupTab1e1111111111111111111111111");const Vf=Object.freeze({RequestUnits:{index:0,layout:Q.struct([Q.u8("instruction"),Q.u32("units"),Q.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:Q.struct([Q.u8("instruction"),Q.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:Q.struct([Q.u8("instruction"),Q.u32("units")])},SetComputeUnitPrice:{index:3,layout:Q.struct([Q.u8("instruction"),dl("microLamports")])}});class Ah{constructor(){}static requestUnits(e){const n=Vf.RequestUnits,r=kr(n,e);return new lr({keys:[],programId:this.programId,data:r})}static requestHeapFrame(e){const n=Vf.RequestHeapFrame,r=kr(n,e);return new lr({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(e){const n=Vf.SetComputeUnitLimit,r=kr(n,e);return new lr({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(e){const n=Vf.SetComputeUnitPrice,r=kr(n,{microLamports:BigInt(e.microLamports)});return new lr({keys:[],programId:this.programId,data:r})}}Ah.programId=new Ne("ComputeBudget111111111111111111111111111111");Q.struct([Q.u8("numSignatures"),Q.u8("padding"),Q.u16("signatureOffset"),Q.u16("signatureInstructionIndex"),Q.u16("publicKeyOffset"),Q.u16("publicKeyInstructionIndex"),Q.u16("messageDataOffset"),Q.u16("messageDataSize"),Q.u16("messageInstructionIndex")]);new Ne("Ed25519SigVerify111111111111111111111111111");Rse.utils.isValidPrivateKey;Q.struct([Q.u8("numSignatures"),Q.u16("signatureOffset"),Q.u8("signatureInstructionIndex"),Q.u16("ethAddressOffset"),Q.u8("ethAddressInstructionIndex"),Q.u16("messageDataOffset"),Q.u16("messageDataSize"),Q.u8("messageInstructionIndex"),Q.blob(20,"ethAddress"),Q.blob(64,"signature"),Q.u8("recoveryId")]);new Ne("KeccakSecp256k11111111111111111111111111111");var k3;new Ne("StakeConfig11111111111111111111111111111111");class O3{constructor(e,n,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=n,this.custodian=r}}k3=O3;O3.default=new k3(0,0,Ne.default);Object.freeze({Initialize:{index:0,layout:Q.struct([Q.u32("instruction"),Dse(),Use()])},Authorize:{index:1,layout:Q.struct([Q.u32("instruction"),wt("newAuthorized"),Q.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:Q.struct([Q.u32("instruction")])},Split:{index:3,layout:Q.struct([Q.u32("instruction"),Q.ns64("lamports")])},Withdraw:{index:4,layout:Q.struct([Q.u32("instruction"),Q.ns64("lamports")])},Deactivate:{index:5,layout:Q.struct([Q.u32("instruction")])},Merge:{index:7,layout:Q.struct([Q.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:Q.struct([Q.u32("instruction"),wt("newAuthorized"),Q.u32("stakeAuthorizationType"),$u("authoritySeed"),wt("authorityOwner")])}});new Ne("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:Q.struct([Q.u32("instruction"),Mse()])},Authorize:{index:1,layout:Q.struct([Q.u32("instruction"),wt("newAuthorized"),Q.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:Q.struct([Q.u32("instruction"),Q.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:Q.struct([Q.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:Q.struct([Q.u32("instruction"),Lse()])}});new Ne("Vote111111111111111111111111111111111111111");new Ne("Va1idator1nfo111111111111111111111111111111");ge({name:be(),website:Ye(be()),details:Ye(be()),iconUrl:Ye(be()),keybaseUsername:Ye(be())});new Ne("Vote111111111111111111111111111111111111111");Q.struct([wt("nodePubkey"),wt("authorizedWithdrawer"),Q.u8("commission"),Q.nu64(),Q.seq(Q.struct([Q.nu64("slot"),Q.u32("confirmationCount")]),Q.offset(Q.u32(),-8),"votes"),Q.u8("rootSlotValid"),Q.nu64("rootSlot"),Q.nu64(),Q.seq(Q.struct([Q.nu64("epoch"),wt("authorizedVoter")]),Q.offset(Q.u32(),-8),"authorizedVoters"),Q.struct([Q.seq(Q.struct([wt("authorizedPubkey"),Q.nu64("epochOfLastAuthorizedSwitch"),Q.nu64("targetEpoch")]),32,"buf"),Q.nu64("idx"),Q.u8("isEmpty")],"priorVoters"),Q.nu64(),Q.seq(Q.struct([Q.nu64("epoch"),Q.nu64("credits"),Q.nu64("prevCredits")]),Q.offset(Q.u32(),-8),"epochCredits"),Q.struct([Q.nu64("slot"),Q.nu64("timestamp")],"lastTimestamp")]);const voe=1e9,ci={UNIVERSAL_PROVIDER_RELAY_URL:"wss://relay.walletconnect.org",HASH_PREFIX:"SPL Name Service",ROOT_DOMAIN_ACCOUNT:new Ne("58PwtjSDuFHuUkYjH9BYnnQKHfwo9reZhC2zMJv9JPkx"),NAME_PROGRAM_ID:new Ne("namesLPneVptA9Z5rqUDD9tMTWEJwofgaYwp8cawRkX"),REVERSE_LOOKUP_CLASS:new Ne("33m47vH6Eav6jr5Ry86XjhRft2jRBLDnDgPSHoquXi2Z"),DEFAULT_CHAIN:{id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",chainNamespace:ne.CHAIN.SOLANA,nativeCurrency:{name:"Solana",decimals:9,symbol:"SOL"},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},rpcUrls:{default:{http:[`${ne.BLOCKCHAIN_API_RPC_URL}/v1`]}}},CHAIN_IDS:{Mainnet:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",Devnet:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",Testnet:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",Deprecated_Mainnet:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ",Deprecated_Devnet:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"},LAMPORTS_PER_SOL:1e9},Vy={UNIT_PRICE_MICRO_LAMPORTS:2e7,UNIT_LIMIT_TRANSFER_ONLY:3e5,UNIT_LIMIT_WITH_ATA_CREATION:4e5};class Ig extends Error{constructor(e,n){super(e),this.error=n}}class Eoe extends Ig{constructor(){super(...arguments),this.name="WalletAccountError"}}class _oe extends Ig{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class xI extends Ig{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class Coe extends Ig{constructor(){super(...arguments),this.name="WalletSignMessageError"}}function bc(t){return"version"in t}const B3="solana:signAndSendTransaction",Aoe="solana:signMessage",Hb="solana:signTransaction",$3="standard:connect",Ioe="standard:disconnect",D3="standard:events";function Soe(t){return $3 in t.features&&D3 in t.features&&(B3 in t.features||Hb in t.features)}function xoe(t){if(typeof t=="string")return`solana:${t}`}class Sg{constructor(){this.listeners={accountsChanged:[],chainChanged:[],connect:[],disconnect:[],pendingTransaction:[],auth_rpcRequest:[],auth_rpcSuccess:[],auth_rpcError:[]}}on(e,n){this.listeners[e].push(n)}removeListener(e,n){this.listeners[e]=this.listeners[e].filter(r=>r!==n)}emit(e,n){this.listeners[e].forEach(r=>r(n))}}class Toe extends Sg{constructor(e){super(),this.id=ne.CONNECTOR_ID.AUTH,this.name=ne.CONNECTOR_NAMES.AUTH,this.type="AUTH",this.chain=ne.CHAIN.SOLANA,this.provider=e.w3mFrameProvider,this.requestedChains=e.chains,this.getActiveChain=e.getActiveChain}get publicKey(){const e=Y.state.chains.get(ne.CHAIN.SOLANA)?.accountState?.address;return e?new Ne(e):void 0}get chains(){const e=this.provider.getAvailableChainIds();return this.requestedChains.filter(n=>e.includes(n.caipNetworkId))}async connect(e={}){const n=e.chainId||this.getActiveChain()?.id,r=gr("solana");if(await os.authConnectorAuthenticate({authConnector:this.provider,chainId:xoe(n),socialUri:e.socialUri,preferredAccountType:r,chainNamespace:ne.CHAIN.SOLANA}),!this.publicKey)throw new Error("Failed to connect to the wallet");return this.emit("connect",this.publicKey),this.publicKey.toBase58()}async disconnect(){await this.provider.disconnect(),this.emit("disconnect",void 0)}async signMessage(e){if(!this.publicKey)throw new Error("Wallet not connected");const n=await this.provider.request({method:"solana_signMessage",params:{message:Qn.encode(e),pubkey:this.publicKey.toBase58()},chainNamespace:this.chain});return Qn.decode(n.signature)}async signTransaction(e){const n=await this.provider.request({method:"solana_signTransaction",params:{transaction:this.serializeTransaction(e)},chainNamespace:this.chain}),r=Qn.decode(n.transaction);return bc(e)?La.deserialize(r):fr.from(r)}async signAndSendTransaction(e,n){const r=this.serializeTransaction(e);return(await this.provider.request({method:"solana_signAndSendTransaction",params:{transaction:r,options:n},chainNamespace:this.chain})).signature}async sendTransaction(e,n,r){const s=await this.signTransaction(e);return await n.sendRawTransaction(s.serialize(),r)}async signAllTransactions(e){return(await this.provider.request({method:"solana_signAllTransactions",params:{transactions:e.map(r=>this.serializeTransaction(r))},chainNamespace:this.chain})).transactions.map((r,s)=>{const i=e[s];if(!i)throw new Error("Invalid solana_signAllTransactions response");const o=Qn.decode(r);return bc(i)?La.deserialize(o):fr.from(o)})}async request(e){return this.provider.request({method:e.method,params:e.params,chainNamespace:this.chain})}async getAccounts(){return this.publicKey?Promise.resolve([{namespace:this.chain,address:this.publicKey.toBase58(),type:"eoa"}]):Promise.resolve([])}serializeTransaction(e){return Qn.encode(new Uint8Array(e.serialize({verifySignatures:!1})))}}class Noe extends Sg{constructor(e){super(),this.name="Coinbase Wallet",this.id=Zn.ConnectorExplorerIds[ne.CONNECTOR_ID.COINBASE_SDK],this.explorerId=Zn.ConnectorExplorerIds[ne.CONNECTOR_ID.COINBASE_SDK],this.type="ANNOUNCED",this.imageUrl="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8Y2lyY2xlIGN4PSI1MTIiIGN5PSI1MTIiIHI9IjUxMiIgZmlsbD0iIzAwNTJGRiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE1MiA1MTJDMTUyIDcxMC44MjMgMzEzLjE3NyA4NzIgNTEyIDg3MkM3MTAuODIzIDg3MiA4NzIgNzEwLjgyMyA4NzIgNTEyQzg3MiAzMTMuMTc3IDcxMC44MjMgMTUyIDUxMiAxNTJDMzEzLjE3NyAxNTIgMTUyIDMxMy4xNzcgMTUyIDUxMlpNNDIwIDM5NkM0MDYuNzQ1IDM5NiAzOTYgNDA2Ljc0NSAzOTYgNDIwVjYwNEMzOTYgNjE3LjI1NSA0MDYuNzQ1IDYyOCA0MjAgNjI4SDYwNEM2MTcuMjU1IDYyOCA2MjggNjE3LjI1NSA2MjggNjA0VjQyMEM2MjggNDA2Ljc0NSA2MTcuMjU1IDM5NiA2MDQgMzk2SDQyMFoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=",this.chain=ne.CHAIN.SOLANA,this.provider=this,this.coinbase=e.provider,this.requestedChains=e.chains}get chains(){return this.requestedChains.filter(e=>e.id===s0.id)}get publicKey(){return this.coinbase.publicKey}get imageId(){return Zn.ConnectorImageIds[ne.CONNECTOR_ID.COINBASE]}async connect(){try{await this.coinbase.connect();const e=this.getAccount(!0);return this.coinbase.emit("connect",this.coinbase.publicKey),this.emit("connect",e),e.toBase58()}catch(e){throw this.coinbase.emit("error",e),e}}async disconnect(){await this.coinbase.disconnect(),this.coinbase.emit("disconnect",void 0),this.emit("disconnect",void 0)}async signMessage(e){return(await this.coinbase.signMessage(e)).signature}async signTransaction(e){return this.coinbase.signTransaction(e)}async signAndSendTransaction(e,n){return(await this.coinbase.signAndSendTransaction(e,n)).signature}async sendTransaction(e,n,r){const s=await this.signTransaction(e);return await n.sendRawTransaction(s.serialize(),r)}async signAllTransactions(e){return await this.coinbase.signAllTransactions(e)}async request(e){return Promise.reject(new Error('The "request" method is not supported on Coinbase Wallet'))}async getAccounts(){const e=this.getAccount();return e?Promise.resolve([{namespace:this.chain,address:e.toBase58(),type:"eoa"}]):Promise.resolve([])}getAccount(e){const n=this.coinbase.publicKey;if(e&&!n)throw new Error("Not connected");return n}}class TI extends Error{constructor(e){super(`The wallet does not support the "${e}" feature`)}}class NI extends Error{constructor(e){super(`The method "${e}" is not supported by the wallet`)}}var Roe=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Vb;class RI extends pg{constructor({provider:e,chains:n,getActiveChain:r}){super({caipNetworks:n,namespace:"solana",provider:e}),this.eventEmitter=new Sg,this.emit=this.eventEmitter.emit.bind(this.eventEmitter),this.on=this.eventEmitter.on.bind(this.eventEmitter),this.removeListener=this.eventEmitter.removeListener.bind(this.eventEmitter),Vb.set(this,"1.0.0"),this.getActiveChain=r}get session(){return this.provider.session}get chains(){return this.sessionChains.map(e=>{let n=e;return n===ci.CHAIN_IDS.Deprecated_Mainnet?n=ci.CHAIN_IDS.Mainnet:n===ci.CHAIN_IDS.Deprecated_Devnet&&(n=ci.CHAIN_IDS.Devnet),this.caipNetworks.find(r=>r.caipNetworkId===n)}).filter(Boolean)}get icon(){return js.state.connectorImages[this.id]}get version(){return Roe(this,Vb,"f")}get publicKey(){const e=this.getAccount(!1);if(e)return new Ne(e.publicKey)}async connect(){await super.connectWalletConnect();const e=this.getAccount(!0);return this.emit("connect",new Ne(e.publicKey)),e.address}async disconnect(){await super.disconnect(),this.emit("disconnect",void 0)}async signMessage(e){this.checkIfMethodIsSupported("solana_signMessage");const n=await this.internalRequest("solana_signMessage",{message:Qn.encode(e),pubkey:this.getAccount(!0).address});return Qn.decode(n.signature)}async signTransaction(e){this.checkIfMethodIsSupported("solana_signTransaction");const n=this.serializeTransaction(e),r=await this.internalRequest("solana_signTransaction",{transaction:n,pubkey:this.getAccount(!0).address,...this.getRawRPCParams(e)});if("signature"in r){const i=Qn.decode(r.signature);return e.addSignature(new Ne(this.getAccount(!0).publicKey),Le.from(i)),e}const s=Le.from(r.transaction,"base64");return bc(e)?La.deserialize(new Uint8Array(s)):fr.from(s)}async signAndSendTransaction(e,n){this.checkIfMethodIsSupported("solana_signAndSendTransaction");const r=this.serializeTransaction(e),s=await this.internalRequest("solana_signAndSendTransaction",{transaction:r,pubkey:this.getAccount(!0).address,sendOptions:n});return this.emit("pendingTransaction",void 0),s.signature}async sendTransaction(e,n,r){const s=await this.signTransaction(e),i=await n.sendRawTransaction(s.serialize(),r);return this.emit("pendingTransaction",void 0),i}async signAllTransactions(e){try{return this.checkIfMethodIsSupported("solana_signAllTransactions"),(await this.internalRequest("solana_signAllTransactions",{transactions:e.map(r=>this.serializeTransaction(r))})).transactions.map((r,s)=>{const i=e[s];if(!i)throw new Error("Invalid transactions response");const o=Le.from(r,"base64");return bc(i)?La.deserialize(new Uint8Array(o)):(this.emit("pendingTransaction",void 0),fr.from(o))})}catch(n){if(n instanceof NI){const r=[];for(const s of e)r.push(await this.signTransaction(s));return r}throw n}}request(e){return this.internalRequest(e.method,e.params)}async getAccounts(){const e=this.session?.namespaces.solana?.accounts||[];return Promise.resolve(e.map(n=>({namespace:this.chain,address:Mr.parseCaipAddress(n).address,type:"eoa"})))}internalRequest(e,n){let s=this.chains.find(i=>this.getActiveChain()?.id===i.id)?.caipNetworkId;switch(s){case ci.CHAIN_IDS.Mainnet:this.sessionChains.includes(ci.CHAIN_IDS.Mainnet)||(s=ci.CHAIN_IDS.Deprecated_Mainnet);break;case ci.CHAIN_IDS.Devnet:this.sessionChains.includes(ci.CHAIN_IDS.Devnet)||(s=ci.CHAIN_IDS.Deprecated_Devnet);break}return this.provider?.request({method:e,params:n},s)}get sessionChains(){return zs.getChainsFromNamespaces(this.session?.namespaces)}serializeTransaction(e){return Le.from(new Uint8Array(e.serialize({verifySignatures:!1}))).toString("base64")}getAccount(e){const n=this.session?.namespaces.solana?.accounts[0];if(!n){if(e)throw new Error("Account not found");return}const r=n.split(":")[2];if(!r){if(e)throw new Error("Address not found");return}return{address:r,publicKey:Qn.decode(r)}}getRawRPCParams(e){return bc(e)?{}:{feePayer:e.feePayer?.toBase58()??"",instructions:e.instructions.map(n=>({data:Qn.encode(new Uint8Array(n.data)),keys:n.keys.map(r=>({isWritable:r.isWritable,isSigner:r.isSigner,pubkey:r.pubkey.toBase58()})),programId:n.programId.toBase58()})),recentBlockhash:e.recentBlockhash??""}}checkIfMethodIsSupported(e){if(!this.session?.namespaces.solana?.methods.includes(e))throw new NI(e)}}Vb=new WeakMap;const Yo=new Ne("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new Ne("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb");const tE=new Ne("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new Ne("So11111111111111111111111111111111111111112");new Ne("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");const nE=t=>{const e=t.decode.bind(t),n=t.encode.bind(t);return{decode:e,encode:n}};var Ga={},PI;function Poe(){if(PI)return Ga;PI=1,Object.defineProperty(Ga,"__esModule",{value:!0});function t(s){{const i=Le.from(s);i.reverse();const o=i.toString("hex");return o.length===0?BigInt(0):BigInt(`0x${o}`)}}Ga.toBigIntLE=t;function e(s){{const i=s.toString("hex");return i.length===0?BigInt(0):BigInt(`0x${i}`)}}Ga.toBigIntBE=e;function n(s,i){{const o=s.toString(16),a=Le.from(o.padStart(i*2,"0").slice(0,i*2),"hex");return a.reverse(),a}}Ga.toBufferLE=n;function r(s,i){{const o=s.toString(16);return Le.from(o.padStart(i*2,"0").slice(0,i*2),"hex")}}return Ga.toBufferBE=r,Ga}var kI=Poe();const koe=t=>e=>{const n=Q.blob(t,e),{encode:r,decode:s}=nE(n),i=n;return i.decode=(o,a)=>{const c=s(o,a);return kI.toBigIntLE(Le.from(c))},i.encode=(o,a,c)=>{const u=kI.toBufferLE(o,t);return r(u,a,c)},i},Id=koe(8),U3=t=>{const e=Q.u8(t),{encode:n,decode:r}=nE(e),s=e;return s.decode=(i,o)=>!!r(i,o),s.encode=(i,o,a)=>{const c=Number(i);return n(c,o,a)},s},ur=t=>{const e=Q.blob(32,t),{encode:n,decode:r}=nE(e),s=e;return s.decode=(i,o)=>{const a=r(i,o);return new Ne(a)},s.encode=(i,o,a)=>{const c=i.toBuffer();return n(c,o,a)},s};class Nl extends Error{constructor(e){super(e)}}class g0 extends Nl{constructor(){super(...arguments),this.name="TokenAccountNotFoundError"}}class Ooe extends Nl{constructor(){super(...arguments),this.name="TokenInvalidAccountError"}}class M3 extends Nl{constructor(){super(...arguments),this.name="TokenInvalidAccountOwnerError"}}class Sd extends Nl{constructor(){super(...arguments),this.name="TokenInvalidAccountSizeError"}}class Boe extends Nl{constructor(){super(...arguments),this.name="TokenInvalidMintError"}}class $oe extends Nl{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}var Kb;(function(t){t[t.InitializeMint=0]="InitializeMint",t[t.InitializeAccount=1]="InitializeAccount",t[t.InitializeMultisig=2]="InitializeMultisig",t[t.Transfer=3]="Transfer",t[t.Approve=4]="Approve",t[t.Revoke=5]="Revoke",t[t.SetAuthority=6]="SetAuthority",t[t.MintTo=7]="MintTo",t[t.Burn=8]="Burn",t[t.CloseAccount=9]="CloseAccount",t[t.FreezeAccount=10]="FreezeAccount",t[t.ThawAccount=11]="ThawAccount",t[t.TransferChecked=12]="TransferChecked",t[t.ApproveChecked=13]="ApproveChecked",t[t.MintToChecked=14]="MintToChecked",t[t.BurnChecked=15]="BurnChecked",t[t.InitializeAccount2=16]="InitializeAccount2",t[t.SyncNative=17]="SyncNative",t[t.InitializeAccount3=18]="InitializeAccount3",t[t.InitializeMultisig2=19]="InitializeMultisig2",t[t.InitializeMint2=20]="InitializeMint2",t[t.GetAccountDataSize=21]="GetAccountDataSize",t[t.InitializeImmutableOwner=22]="InitializeImmutableOwner",t[t.AmountToUiAmount=23]="AmountToUiAmount",t[t.UiAmountToAmount=24]="UiAmountToAmount",t[t.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",t[t.TransferFeeExtension=26]="TransferFeeExtension",t[t.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",t[t.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",t[t.Reallocate=29]="Reallocate",t[t.MemoTransferExtension=30]="MemoTransferExtension",t[t.CreateNativeMint=31]="CreateNativeMint",t[t.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",t[t.InterestBearingMintExtension=33]="InterestBearingMintExtension",t[t.CpiGuardExtension=34]="CpiGuardExtension",t[t.InitializePermanentDelegate=35]="InitializePermanentDelegate",t[t.TransferHookExtension=36]="TransferHookExtension",t[t.MetadataPointerExtension=39]="MetadataPointerExtension",t[t.GroupPointerExtension=40]="GroupPointerExtension",t[t.GroupMemberPointerExtension=41]="GroupMemberPointerExtension",t[t.ScaledUiAmountExtension=43]="ScaledUiAmountExtension",t[t.PausableExtension=44]="PausableExtension"})(Kb||(Kb={}));var m0;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Mint=1]="Mint",t[t.Account=2]="Account"})(m0||(m0={}));const L3=1,Doe=Q.struct([Q.u8("m"),Q.u8("n"),U3("isInitialized"),ur("signer1"),ur("signer2"),ur("signer3"),ur("signer4"),ur("signer5"),ur("signer6"),ur("signer7"),ur("signer8"),ur("signer9"),ur("signer10"),ur("signer11")]),F3=Doe.span;var y0;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initialized=1]="Initialized",t[t.Frozen=2]="Frozen"})(y0||(y0={}));const j3=Q.struct([ur("mint"),ur("owner"),Id("amount"),Q.u32("delegateOption"),ur("delegate"),Q.u8("state"),Q.u32("isNativeOption"),Id("isNative"),Id("delegatedAmount"),Q.u32("closeAuthorityOption"),ur("closeAuthority")]),_a=j3.span;async function OI(t,e,n,r=Yo){const s=await t.getAccountInfo(e,n);return Uoe(e,s,r)}function Uoe(t,e,n=Yo){if(!e)throw new g0;if(!e.owner.equals(n))throw new M3;if(e.data.length<_a)throw new Sd;const r=j3.decode(e.data.slice(0,_a));let s=Le.alloc(0);if(e.data.length>_a){if(e.data.length===F3)throw new Sd;if(e.data[_a]!=m0.Account)throw new Ooe;s=e.data.slice(_a+L3)}return{address:t,mint:r.mint,owner:r.owner,amount:r.amount,delegate:r.delegateOption?r.delegate:null,delegatedAmount:r.delegatedAmount,isInitialized:r.state!==y0.Uninitialized,isFrozen:r.state===y0.Frozen,isNative:!!r.isNativeOption,rentExemptReserve:r.isNativeOption?r.isNative:null,closeAuthority:r.closeAuthorityOption?r.closeAuthority:null,tlvData:s}}function Moe(t,e,n){if(n.length){t.push({pubkey:e,isSigner:!1,isWritable:!1});for(const r of n)t.push({pubkey:r instanceof Ne?r:r.publicKey,isSigner:!0,isWritable:!1})}else t.push({pubkey:e,isSigner:!0,isWritable:!1});return t}const q3=Q.struct([Q.u32("mintAuthorityOption"),ur("mintAuthority"),Id("supply"),Q.u8("decimals"),U3("isInitialized"),Q.u32("freezeAuthorityOption"),ur("freezeAuthority")]),Ky=q3.span;async function Loe(t,e,n,r=Yo){const s=await t.getAccountInfo(e,n);return Foe(e,s,r)}function Foe(t,e,n=Yo){if(!e)throw new g0;if(!e.owner.equals(n))throw new M3;if(e.data.length<Ky)throw new Sd;const r=q3.decode(e.data.slice(0,Ky));let s=Le.alloc(0);if(e.data.length>Ky){if(e.data.length<=_a)throw new Sd;if(e.data.length===F3)throw new Sd;if(e.data[_a]!=m0.Mint)throw new Boe;s=e.data.slice(_a+L3)}return{address:t,mintAuthority:r.mintAuthorityOption?r.mintAuthority:null,supply:r.supply,decimals:r.decimals,isInitialized:r.isInitialized,freezeAuthority:r.freezeAuthorityOption?r.freezeAuthority:null,tlvData:s}}function BI(t,e,n=!1,r=Yo,s=tE){if(!n&&!Ne.isOnCurve(e.toBuffer()))throw new $oe;const[i]=Ne.findProgramAddressSync([e.toBuffer(),r.toBuffer(),t.toBuffer()],s);return i}function joe(t,e,n,r,s=Yo,i=tE){return qoe(t,e,n,r,Le.alloc(0),s,i)}function qoe(t,e,n,r,s,i=Yo,o=tE){const a=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:hl.programId,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1}];return new lr({keys:a,programId:o,data:s})}const $I=Q.struct([Q.u8("instruction"),Id("amount")]);function zoe(t,e,n,r,s=[],i=Yo){const o=Moe([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0}],n,s),a=Le.alloc($I.span);return $I.encode({instruction:Kb.Transfer,amount:BigInt(r)},a),new lr({keys:o,programId:i,data:a})}async function Woe({provider:t,to:e,amount:n,tokenMint:r,connection:s}){if(!t.publicKey)throw new Error("No public key found");if(n<=0)throw new Error("Amount must be greater than 0");try{const i=t.publicKey,o=new Ne(e),a=new Ne(r),u=(await Loe(s,a)).decimals;if(u<0)throw new Error("Invalid token decimals");const l=Math.floor(n*10**u),d=BI(a,i),h=BI(a,o);try{if((await OI(s,d)).amount<BigInt(l))throw new Error("Insufficient token balance")}catch(O){throw O instanceof g0?new Error("Sender does not have a token account for this mint"):O}let f=!1;try{await OI(s,h)}catch(O){if(O instanceof g0)f=!0;else throw O}const y=[],m=f?Vy.UNIT_LIMIT_WITH_ATA_CREATION:Vy.UNIT_LIMIT_TRANSFER_ONLY;y.push(Ah.setComputeUnitPrice({microLamports:Vy.UNIT_PRICE_MICRO_LAMPORTS}),Ah.setComputeUnitLimit({units:m})),f&&y.push(joe(i,h,o,a)),y.push(zoe(d,h,i,l,[],Yo));const{blockhash:v,lastValidBlockHeight:T}=await s.getLatestBlockhash();return new fr({feePayer:i,blockhash:v,lastValidBlockHeight:T}).add(...y)}catch(i){throw new Error(`Failed to create SPL token transaction: ${i instanceof Error?i.message:"Unknown error"}`)}}const DI={UNIT_PRICE_MICRO_LAMPORTS:2e7,UNIT_LIMIT:500};async function UI({provider:t,to:e,value:n,connection:r}){if(!t.publicKey)throw Error("No public key found");const s=new Ne(e),i=Math.floor(n*voe),{blockhash:o,lastValidBlockHeight:a}=await r.getLatestBlockhash(),c=[Ah.setComputeUnitPrice({microLamports:DI.UNIT_PRICE_MICRO_LAMPORTS}),Ah.setComputeUnitLimit({units:DI.UNIT_LIMIT}),hl.transfer({fromPubkey:t.publicKey,toPubkey:s,lamports:i})];return new fr({feePayer:t.publicKey,blockhash:o,lastValidBlockHeight:a}).add(...c)}var Hoe=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Voe=function(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n},wp;let Ql;const xg=new Set;function Koe(t){xd=void 0,xg.add(t)}function Goe(t){xd=void 0,xg.delete(t)}const Du={};function Yoe(){if(Ql||(Ql=Object.freeze({register:MI,get:Zoe,on:Joe}),typeof window>"u"))return Ql;const t=Object.freeze({register:MI});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(t))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new Xoe(t))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return Ql}function MI(...t){return t=t.filter(e=>!xg.has(e)),t.length?(t.forEach(e=>Koe(e)),Du.register?.forEach(e=>LI(()=>e(...t))),function(){t.forEach(n=>Goe(n)),Du.unregister?.forEach(n=>LI(()=>n(...t)))}):()=>{}}let xd;function Zoe(){return xd||(xd=[...xg]),xd}function Joe(t,e){return Du[t]?.push(e)||(Du[t]=[e]),function(){Du[t]=Du[t]?.filter(r=>e!==r)}}function LI(t){try{t()}catch(e){console.error(e)}}class Xoe extends Event{get detail(){return Hoe(this,wp,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),wp.set(this,void 0),Voe(this,wp,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}wp=new WeakMap;function Qoe(t){switch(t){case"processed":case"confirmed":case"finalized":case void 0:return t;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}const FI={"solana:mainnet":s0,"solana:testnet":dne,"solana:devnet":Lb};class eae extends Sg{constructor({wallet:e,getActiveChain:n,requestedChains:r}){super(),this.chain=ne.CHAIN.SOLANA,this.provider=this,this.wallet=e,this.getActiveChain=n,this.requestedChains=r,this.bindEvents()}get id(){const e=this.name;return Zn.ConnectorExplorerIds[e]||e}get name(){return this.wallet.name==="Trust"?"Trust Wallet":this.wallet.name}get type(){return"ANNOUNCED"}get explorerId(){return Zn.ConnectorExplorerIds[this.name]}get publicKey(){const e=this.getAccount(!1);if(e)return new Ne(e.publicKey)}get imageUrl(){return this.wallet.icon}get chains(){return this.wallet.chains.map(e=>this.requestedChains.find(n=>n.id===e||n.id===FI[e]?.id)).filter(Boolean)}async connect(){await this.getWalletFeature($3).connect();const n=this.getAccount(!0),r=new Ne(n.publicKey);return this.emit("connect",r),n.address}async disconnect(){await this.getWalletFeature(Ioe).disconnect(),this.emit("disconnect",void 0)}async signMessage(e){const n=this.getWalletFeature(Aoe),r=this.getAccount(!0),[s]=await n.signMessage({message:e,account:r});if(!s)throw new Coe("Empty result");return s.signature}async signTransaction(e){const n=this.getWalletFeature(Hb),r=this.getAccount(!0),s=this.serializeTransaction(e),[i]=await n.signTransaction({account:r,transaction:new Uint8Array(s),chain:this.getActiveChainName()});if(!i)throw new xI("Empty result");return this.emit("pendingTransaction",void 0),bc(e)?La.deserialize(i.signedTransaction):fr.from(i.signedTransaction)}async signAndSendTransaction(e,n){const r=this.getWalletFeature(B3),s=this.getAccount(!0),[i]=await r.signAndSendTransaction({account:s,transaction:new Uint8Array(this.serializeTransaction(e)),options:{...n,preflightCommitment:Qoe(n?.preflightCommitment)},chain:this.getActiveChainName()});if(!i)throw new _oe("Empty result");return this.emit("pendingTransaction",void 0),Qn.encode(i.signature)}async sendTransaction(e,n,r){const s=await this.signTransaction(e);return await n.sendRawTransaction(s.serialize(),r)}async signAllTransactions(e){const n=this.getWalletFeature(Hb),r=this.getAccount(!0),s=this.getActiveChainName();return(await n.signTransaction(...e.map(o=>({transaction:new Uint8Array(this.serializeTransaction(o)),account:r,chain:s})))).map(({signedTransaction:o},a)=>{const c=e[a];if(!c)throw new xI("Invalid transaction signature response");return this.emit("pendingTransaction",void 0),bc(c)?La.deserialize(o):fr.from(o)})}async request(e){return Promise.reject(new TI("request"))}async getAccounts(){return Promise.resolve(this.wallet.accounts.map(e=>({namespace:this.chain,address:e.address,type:"eoa"})))}serializeTransaction(e){return e.serialize({verifySignatures:!1})}getAccount(e){const n=this.wallet.accounts[0];if(e&&!n)throw new Eoe;return n}getWalletFeature(e){if(!(e in this.wallet.features))throw new TI(e);return this.wallet.features[e]}getActiveChainName(){const e=Object.entries(FI).find(([,n])=>n.id===this.getActiveChain()?.id);if(!e)throw new Error("Invalid chain id");return e[0]}bindEvents(){this.getWalletFeature(D3).on("change",n=>{if(n.accounts){const r=n.accounts[0];r&&this.emit("accountsChanged",new Ne(r.publicKey))}})}}const{get:tae,on:jI}=Yoe();let ha=[];function nae(t,e,n){const r=[jI("register",(...s)=>{ha=[...ha,...qI(s,t,e)],n(...ha)}),jI("unregister",(...s)=>{ha=ha.filter(i=>s.some(o=>o.name===i.wallet.name)),n(...ha)})];return ha=qI(tae(),t,e),n(...ha),()=>r.forEach(s=>s())}function qI(t,e,n){return t.filter(r=>r.name!=="WalletConnect"&&Soe(r)).map(r=>new eae({wallet:r,requestedChains:e,getActiveChain:n}))}const rae=[ne.CONNECTOR_ID.AUTH,ne.CONNECTOR_ID.WALLET_CONNECT];class Zue extends Lv{constructor(e={}){super({adapterType:ne.ADAPTER_TYPES.SOLANA,namespace:ne.CHAIN.SOLANA}),this.balancePromises={},this.connectionSettings=e.connectionSettings||"confirmed",this.wallets=e.wallets,this.registerWalletStandard=e.registerWalletStandard}construct(e){super.construct(e);const n=ye.getActiveCaipNetworkId(),s=(e.networks?.find(i=>i.caipNetworkId===n)||e.networks?.[0])?.rpcUrls.default.http[0];s&&Eu.setConnection(new Xl(s,this.connectionSettings))}setAuthProvider(e){this.addConnector(new Toe({w3mFrameProvider:e,getActiveChain:()=>Y.getCaipNetworkByNamespace(this.namespace),chains:this.getCaipNetworks()}))}syncConnectors(e,n){e.projectId||Jt.open(hn.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");const r=()=>n.getCaipNetwork(this.namespace);ke.isClient()&&"coinbaseSolana"in window&&this.addConnector(new Noe({provider:window.coinbaseSolana,chains:this.getCaipNetworks(),getActiveChain:r})),nae(this.getCaipNetworks(),r,this.addConnector.bind(this))}async writeContract(){return Promise.resolve({hash:""})}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async walletGetAssets(e){return Promise.resolve({})}async getAccounts(e){const n=this.connectors.find(r=>r.id===e.id);return n?{accounts:await n.getAccounts()}:{accounts:[]}}async signMessage(e){const n=e.provider;if(!n)throw new Error("connectionControllerClient:signMessage - provider is undefined");const r=await n.signMessage(new TextEncoder().encode(e.message));return{signature:Qn.encode(r)}}async estimateGas(e){const n=Eu.state.connection;if(!n||!e.provider)throw new Error("Connection is not set");const s=await(await UI({provider:e.provider,connection:n,to:"11111111111111111111111111111111",value:1})).getEstimatedFee(n);return{gas:BigInt(s||0)}}async sendTransaction(e){const n=Eu.state.connection;if(!n||!e.provider)throw new Error("Connection is not set");const r=e.provider,s=e.tokenMint?await Woe({provider:r,connection:n,to:e.to,amount:Number(e.value),tokenMint:e.tokenMint}):await UI({provider:r,connection:n,to:e.to,value:Number.isNaN(Number(e.value))?0:Number(e.value)}),i=await r.sendTransaction(s,n);return await new Promise(o=>{const a=setInterval(async()=>{(await n.getSignatureStatus(i))?.value&&(clearInterval(a),o())},1e3)}),{hash:i}}parseUnits(){return 0n}formatUnits(){return""}async connect(e){const n=this.connectors.find(u=>u.id===e.id);if(!n)throw new Error("Provider not found");const r={...n,...e.id===ne.CONNECTOR_ID.AUTH?{provider:n}:{}},s=e.rpcUrl||this.getCaipNetworks()?.find(u=>u.id===e.chainId)?.rpcUrls.default.http[0];if(!s)throw new Error(`RPC URL not found for chainId: ${e.chainId}`);const i=this.connectionManager?.getConnection({address:e.address,connectorId:n.id,connections:this.connections,connectors:this.connectors});if(i?.account)return this.emit("accountChanged",{address:i.account.address,chainId:i.caipNetwork?.id,connector:r}),{id:n.id,address:i.account.address,chainId:e.chainId,provider:n,type:n.type};const o=await n.connect({chainId:e.chainId,socialUri:e.socialUri});Eu.setConnection(new Xl(s,this.connectionSettings)),this.emit("accountChanged",{address:o,chainId:e.chainId,connector:r});const a=n.id===ne.CONNECTOR_ID.AUTH,c=this.getCaipNetworks()?.find(u=>u.id===e.chainId);return this.addConnection({connectorId:n.id,accounts:[{address:o}],caipNetwork:c,auth:a?{name:ye.getConnectedSocialProvider(),username:ye.getConnectedSocialUsername()}:void 0}),n.id!==ne.CONNECTOR_ID.WALLET_CONNECT&&this.listenSolanaProviderEvents(n.id,n.provider),{id:n.id,address:o,chainId:e.chainId,provider:n,type:n.type}}async getBalance(e){const n=e.address,r=this.getCaipNetworks()?.find(c=>c.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"SOL"});const s=new Xl(r?.rpcUrls?.default?.http?.[0],this.connectionSettings),i=`${r?.caipNetworkId}:${e.address}`,o=this.balancePromises[i];if(o)return o;const a=ye.getNativeBalanceCacheForCaipAddress(i);return a?{balance:a.balance,symbol:a.symbol}:(this.balancePromises[i]=new Promise(async c=>{try{const l=(await s.getBalance(new Ne(n))/ci.LAMPORTS_PER_SOL).toString();if(ye.updateNativeBalanceCache({caipAddress:i,balance:l,symbol:e.caipNetwork?.nativeCurrency.symbol||"SOL",timestamp:Date.now()}),!e.caipNetwork)throw new Error("caipNetwork is required");c({balance:l,symbol:e.caipNetwork?.nativeCurrency.symbol})}catch{c({balance:"0.00",symbol:"SOL"})}}).finally(()=>{delete this.balancePromises[i]}),this.balancePromises[i]||{balance:"0.00",symbol:"SOL"})}async switchNetwork(e){await super.switchNetwork(e);const{caipNetwork:n}=e;n?.rpcUrls?.default?.http?.[0]&&Eu.setConnection(new Xl(n.rpcUrls.default.http[0],this.connectionSettings))}listenProviderEvents(){}listenSolanaProviderEvents(e,n){if(rae.includes(e))return;const r=i=>{this.onAccountsChanged([i.toBase58()],e,!1)},s=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",s),n.on("accountsChanged",r),n.on("connect",r),this.providerHandlers[e]={provider:n,disconnect:s,accountsChanged:r,chainChanged:()=>{}})}async setUniversalProvider(e){this.universalProvider=e;const n=ne.CONNECTOR_ID.WALLET_CONNECT;zs.listenWcProvider({universalProvider:e,namespace:ne.CHAIN.SOLANA,onConnect:s=>this.onConnect(s,n),onDisconnect:()=>this.onDisconnect(n),onAccountsChanged:s=>this.onAccountsChanged(s,n,!1)});const r=new RI({provider:e,chains:this.getCaipNetworks(),getActiveChain:()=>Y.getCaipNetworkByNamespace(this.namespace)});if(this.registerWalletStandard){const{SolanaWalletConnectStandardWallet:s}=await Or(async()=>{const{SolanaWalletConnectStandardWallet:i}=await import("./wallet-standard-C4sVwx6N.js");return{SolanaWalletConnectStandardWallet:i}},__vite__mapDeps([42,12,13]));s.register(e)}return this.addConnector(r),Promise.resolve()}async connectWalletConnect(e){const n=await super.connectWalletConnect(e),r=this.getCaipNetworks()?.find(i=>i.id===e)?.rpcUrls.default.http[0],s=new Xl(r,this.connectionSettings);return Eu.setConnection(s),n}async disconnect(e){if(e.id){const n=this.connectors.find(s=>s.id===e.id);if(!n)throw new Error("Provider not found");const r=this.connections.find(s=>Dn.isLowerCaseMatch(s.connectorId,e.id));return await n.provider.disconnect(),this.deleteConnection(n.id),this.connections.length===0?this.emit("disconnect"):this.emitFirstAvailableConnection(),{connections:r?[r]:[]}}return this.disconnectAll()}async syncConnection(e){return this.connect({...e,type:""})}async syncConnections({connectToFirstConnector:e,caipNetwork:n,getConnectorStorageInfo:r}){await this.connectionManager?.syncConnections({connectors:this.connectors,caipNetwork:n,caipNetworks:this.getCaipNetworks(),universalProvider:this.universalProvider,onConnection:this.addConnection.bind(this),onListenProvider:this.listenSolanaProviderEvents.bind(this),getConnectionStatusInfo:r}),e&&this.emitFirstAvailableConnection()}getWalletConnectProvider(e){return new RI({provider:e.provider,chains:e.caipNetworks,getActiveChain:()=>Y.getCaipNetworkByNamespace(this.namespace)})}async disconnectAll(){return{connections:await Promise.all(this.connections.map(async n=>{const r=this.connectors.find(s=>Dn.isLowerCaseMatch(s.id,n.connectorId));if(!r)throw new Error("Connector not found");return await this.disconnect({id:r.id}),n}))}}}function Ws(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const bp="2.18.0",sae=()=>`@wagmi/core@${bp}`;var z3=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},w0,W3;let Zo=class Gb extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return sae()}constructor(e,n={}){super(),w0.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof Gb?n.cause.details:n.cause?.message?n.cause.message:n.details,s=n.cause instanceof Gb&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return z3(this,w0,"m",W3).call(this,this,e)}};w0=new WeakSet,W3=function t(e,n){return n?.(e)?e:e.cause?z3(this,w0,"m",t).call(this,e.cause,n):e};class Ih extends Zo{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class iae extends Zo{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class oae extends Zo{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class aae extends Zo{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class cae extends Zo{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class uae extends Zo{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function Gy(t,e){let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new iae;try{t.setState(a=>({...a,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:r,...s}=e,i=await n.connect(s),o=i.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await t.storage?.setItem("recentConnectorId",n.id),t.setState(a=>({...a,connections:new Map(a.connections).set(n.uid,{accounts:o,chainId:i.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:o,chainId:i.chainId}}catch(r){throw t.setState(s=>({...s,status:s.current?"connected":"disconnected"})),r}}async function Tg(t,e={}){let n;if(e.connector){const{connector:u}=e;if(t.state.status==="reconnecting"&&!u.getAccounts&&!u.getChainId)throw new uae({connector:u});const[l,d]=await Promise.all([u.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),u.getChainId()]);n={accounts:l,chainId:d,connector:u}}else n=t.state.connections.get(t.state.current);if(!n)throw new oae;const r=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new cae({connectionChainId:n.chainId,connectorChainId:s});const i=n.connector;if(i.getClient)return i.getClient({chainId:r});const o=yr(e.account??n.accounts[0]);if(o&&(o.address=To(o.address)),e.account&&!n.accounts.some(u=>u.toLowerCase()===o.address.toLowerCase()))throw new aae({address:o.address,connector:i});const a=t.chains.find(u=>u.id===r),c=await n.connector.getProvider({chainId:r});return U1({account:o,chain:a,name:"Connector Client",transport:u=>WD(c)({...u,retryCount:0})})}async function zI(t,e={}){let n;if(e.connector)n=e.connector;else{const{connections:s,current:i}=t.state;n=s.get(i)?.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(s=>{if(r.size===0)return{...s,connections:new Map,current:null,status:"disconnected"};const i=r.values().next().value;return{...s,connections:new Map(r),current:i.connector.uid}});{const s=t.state.current;if(!s)return;const i=t.state.connections.get(s)?.connector;if(!i)return;await t.storage?.setItem("recentConnectorId",i.id)}}async function lae(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await Tg(t,{account:e.account,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return Ws(o,B0,"estimateGas")({...s,account:i})}function H3(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(jk[t])}function Td(t){const e=t.state.current,n=t.state.connections.get(e),r=n?.accounts,s=r?.[0],i=t.chains.find(a=>a.id===n?.chainId),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n?.chainId,connector:n?.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n?.chainId,connector:n?.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n?.chainId,connector:n?.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function dae(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return Ws(o,L6,"multicall")({allowFailure:n,contracts:s,...i})}function V3(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return Ws(s,Ks,"readContract")(r)}async function hae(t,e){const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const a={};for(const[d,h]of o.entries()){const f=h.chainId??t.state.chainId;a[f]||(a[f]=[]),a[f]?.push({contract:h,index:d})}const c=()=>Object.entries(a).map(([d,h])=>dae(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(d),contracts:h.map(({contract:f})=>f)})),u=(await Promise.all(c())).flat(),l=Object.values(a).flatMap(d=>d.map(({index:h})=>h));return u.reduce((d,h,f)=>(d&&(d[l[f]]=h),d),[])}catch(a){if(a instanceof m1)throw a;const c=()=>o.map(u=>V3(t,{...u,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(c())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(c())}}async function fae(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await WI(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const f=await WI(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),y=LS(Ki(f.symbol,{dir:"right"}));return{...f,symbol:y}}throw h}const c=t.getClient({chainId:i}),l=await Ws(c,S1,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(h=>h.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:gl(l,H3(a)),symbol:d.nativeCurrency.symbol,value:l}}async function WI(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,u,l]=await hae(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=gl(c??"0",H3(o??u));return{decimals:u,formatted:d,symbol:l,value:c}}function HI(t){return t.state.chainId}function Sh(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Sh(t[r],e[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!Sh(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}let Kf=[];function bo(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||Sh(Kf,e)?Kf:(Kf=e,e)}async function pae(t,e){const{account:n,chainId:r,...s}=e,i=n??Td(t).address,o=t.getClient({chainId:r});return Ws(o,O0,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let Yy=!1;async function Yb(t,e={}){if(Yy)return[];Yy=!0,t.setState(u=>({...u,status:u.current?"reconnecting":"connecting"}));const n=[];if(e.connectors?.length)for(const u of e.connectors){let l;typeof u=="function"?l=t._internal.connectors.setup(u):l=u,n.push(l)}else n.push(...t.connectors);let r;try{r=await t.storage?.getItem("recentConnectorId")}catch{}const s={};for(const[,u]of t.state.connections)s[u.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((u,l)=>(s[u.id]??10)-(s[l.id]??10)):n;let o=!1;const a=[],c=[];for(const u of i){const l=await u.getProvider().catch(()=>{});if(!l||c.some(f=>f===l)||!await u.isAuthorized())continue;const h=await u.connect({isReconnecting:!0}).catch(()=>null);h&&(u.emitter.off("connect",t._internal.events.connect),u.emitter.on("change",t._internal.events.change),u.emitter.on("disconnect",t._internal.events.disconnect),t.setState(f=>{const y=new Map(o?f.connections:new Map).set(u.uid,{accounts:h.accounts,chainId:h.chainId,connector:u});return{...f,current:o?f.current:u.uid,connections:y}}),a.push({accounts:h.accounts,chainId:h.chainId,connector:u}),c.push(l),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(u=>({...u,status:"connected"})):t.setState(u=>({...u,connections:new Map,current:null,status:"disconnected"}))),Yy=!1,a}async function gae(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&n?.type==="local"?o=t.getClient({chainId:r}):o=await Tg(t,{account:n??void 0,chainId:r,connector:s}),await Ws(o,Z5,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function mae(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await Tg(t,{account:n,connector:r}),Ws(i,zD,"signMessage")({...s,...n?{account:n}:{}})}class wa extends Zo{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class yae extends Zo{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function VI(t,e){const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(e.connector?.uid??t.state.current);if(s){const o=s.connector;if(!o.switchChain)throw new yae({connector:o});return await o.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(o=>o.id===r);if(!i)throw new Ih;return t.setState(o=>({...o,chainId:r})),i}function wae(t,e){const{onChange:n}=e;return t.subscribe(()=>Td(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return Sh(o,c)&&i?.id===a?.id&&i?.uid===a?.uid}})}function bae(t,e){const{onChange:n}=e;return t.subscribe(r=>r.chainId,n)}function vae(t,e){const{onChange:n}=e;return t.subscribe(()=>bo(t),n,{equalityFn:Sh})}function Eae(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function _ae(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const u=t.getClient({chainId:c});return s=Ws(u,V6,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o?.(),a?.()}}async function Cae(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await Ws(i,H6,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const u=await Ws(i,q0,"getTransaction")({hash:a.transactionHash}),d=await Ws(i,bl,"call")({...u,data:u.input,gasPrice:u.type!=="eip1559"?u.gasPrice:void 0,maxFeePerGas:u.type==="eip1559"?u.maxFeePerGas:void 0,maxPriorityFeePerGas:u.type==="eip1559"?u.maxPriorityFeePerGas:void 0}),h=d?.data?LS(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}async function Aae(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&n?.type==="local"?o=t.getClient({chainId:r}):o=await Tg(t,{account:n??void 0,chainId:r,connector:s}),await Ws(o,D4,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function Jue(t){return t}Ng.type="injected";function Ng(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const u=c();if(u)return u}return typeof c=="object"?c:typeof c=="string"?{...Iae[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(u){return u?.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:Ng.type,async setup(){const u=await this.getProvider();u?.on&&t.target&&(o||(o=this.onConnect.bind(this),u.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),u.on("accountsChanged",s)))},async connect({chainId:u,isReconnecting:l}={}){const d=await this.getProvider();if(!d)throw new wa;let h=[];if(l)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0]?.caveats?.[0]?.value?.map(y=>To(y)),h.length>0&&(h=await this.getAccounts())}catch(f){const y=f;if(y.code===zn.code)throw new zn(y);if(y.code===xa.code)throw y}try{!h?.length&&!l&&(h=(await d.request({method:"eth_requestAccounts"})).map(m=>To(m))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let f=await this.getChainId();return u&&f!==u&&(f=(await this.switchChain({chainId:u}).catch(m=>{if(m.code===zn.code)throw m;return{id:f}}))?.id??f),e&&await c.storage?.removeItem(`${this.id}.disconnected`),t.target||await c.storage?.setItem("injected.connected",!0),{accounts:h,chainId:f}}catch(f){const y=f;throw y.code===zn.code?new zn(y):y.code===xa.code?new xa(y):y}},async disconnect(){const u=await this.getProvider();if(!u)throw new wa;i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o));try{await d6(()=>u.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await c.storage?.setItem(`${this.id}.disconnected`,!0),t.target||await c.storage?.removeItem("injected.connected")},async getAccounts(){const u=await this.getProvider();if(!u)throw new wa;return(await u.request({method:"eth_accounts"})).map(d=>To(d))},async getChainId(){const u=await this.getProvider();if(!u)throw new wa;const l=await u.request({method:"eth_chainId"});return Number(l)},async getProvider(){if(typeof window>"u")return;let u;const l=r();return typeof l.provider=="function"?u=l.provider(window):typeof l.provider=="string"?u=vp(window,l.provider):u=l.provider,u&&!u.removeListener&&("off"in u&&typeof u.off=="function"?u.removeListener=u.off:u.removeListener=()=>{}),u},async isAuthorized(){try{if(e&&await c.storage?.getItem(`${this.id}.disconnected`)||!t.target&&!await c.storage?.getItem("injected.connected"))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const h=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",h),!!await this.getProvider()),f=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(m=>window.addEventListener("ethereum#initialized",()=>m(h()),{once:!0}))]:[],new Promise(m=>setTimeout(()=>m(h()),f))]))return!0}throw new wa}return!!(await Xd(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:u,chainId:l}){const d=await this.getProvider();if(!d)throw new wa;const h=c.chains.find(y=>y.id===l);if(!h)throw new Ji(new Ih);const f=new Promise(y=>{const m=v=>{"chainId"in v&&v.chainId===l&&(c.emitter.off("change",m),y())};c.emitter.on("change",m)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:je(l)}]}).then(async()=>{await this.getChainId()===l&&c.emitter.emit("change",{chainId:l})}),f]),h}catch(y){const m=y;if(m.code===4902||m?.data?.originalError?.code===4902)try{const{default:v,...T}=h.blockExplorers??{};let O;u?.blockExplorerUrls?O=u.blockExplorerUrls:v&&(O=[v.url,...Object.values(T).map(P=>P.url)]);let A;u?.rpcUrls?.length?A=u.rpcUrls:A=[h.rpcUrls.default?.http[0]??""];const M={blockExplorerUrls:O,chainId:je(l),chainName:u?.chainName??h.name,iconUrls:u?.iconUrls,nativeCurrency:u?.nativeCurrency??h.nativeCurrency,rpcUrls:A};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[M]}).then(async()=>{if(await this.getChainId()===l)c.emitter.emit("change",{chainId:l});else throw new zn(new Error("User rejected switch after adding network."))}),f]),h}catch(v){throw new zn(v)}throw m.code===zn.code?new zn(m):new Ji(m)}},async onAccountsChanged(u){if(u.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const l=(await this.getChainId()).toString();this.onConnect({chainId:l}),e&&await c.storage?.removeItem(`${this.id}.disconnected`)}else c.emitter.emit("change",{accounts:u.map(l=>To(l))})},onChainChanged(u){const l=Number(u);c.emitter.emit("change",{chainId:l})},async onConnect(u){const l=await this.getAccounts();if(l.length===0)return;const d=Number(u.chainId);c.emitter.emit("connect",{accounts:l,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(u){const l=await this.getProvider();u&&u.code===1013&&l&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),l&&(i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o))))}})}const Iae={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t?.coinbaseWalletExtension?t.coinbaseWalletExtension:vp(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return vp(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){return t?.phantom?.ethereum?t.phantom?.ethereum:vp(t,"isPhantom")}}};function vp(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r?.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function Sae(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function xae(){const t=new Set;let e=[];const n=()=>Sae(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r?.()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r?.(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const Tae=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let u=o;if(a){const l=c?.equalityFn||Object.is;let d=o(r.getState());u=h=>{const f=o(h);if(!l(d,f)){const y=d;a(d=f,y)}},c?.fireImmediately&&a(d,d)}return s(u)},t(e,n,r)},Nae=Tae;function Rae(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const Zb=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Zb(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Zb(r)(n)}}}},Pae=(t,e)=>(n,r,s)=>{let i={storage:Rae(()=>localStorage),partialize:m=>m,version:0,merge:(m,v)=>({...v,...m}),...e},o=!1;const a=new Set,c=new Set;let u=i.storage;if(!u)return t((...m)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...m)},r,s);const l=()=>{const m=i.partialize({...r()});return u.setItem(i.name,{state:m,version:i.version})},d=s.setState;s.setState=(m,v)=>{d(m,v),l()};const h=t((...m)=>{n(...m),l()},r,s);s.getInitialState=()=>h;let f;const y=()=>{var m,v;if(!u)return;o=!1,a.forEach(O=>{var A;return O((A=r())!=null?A:h)});const T=((v=i.onRehydrateStorage)==null?void 0:v.call(i,(m=r())!=null?m:h))||void 0;return Zb(u.getItem.bind(u))(i.name).then(O=>{if(O)if(typeof O.version=="number"&&O.version!==i.version){if(i.migrate)return[!0,i.migrate(O.state,O.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,O.state];return[!1,void 0]}).then(O=>{var A;const[M,P]=O;if(f=i.merge(P,(A=r())!=null?A:h),n(f,!0),M)return l()}).then(()=>{T?.(f,void 0),f=r(),o=!0,c.forEach(O=>O(f))}).catch(O=>{T?.(void 0,O)})};return s.persist={setOptions:m=>{i={...i,...m},m.storage&&(u=m.storage)},clearStorage:()=>{u?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>y(),hasHydrated:()=>o,onHydrate:m=>(a.add(m),()=>{a.delete(m)}),onFinishHydration:m=>(c.add(m),()=>{c.delete(m)})},i.skipHydration||y(),f||h},kae=Pae,KI=t=>{let e;const n=new Set,r=(u,l)=>{const d=typeof u=="function"?u(e):u;if(!Object.is(d,e)){const h=e;e=l??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u))},c=e=t(r,s,a);return a},Zy=t=>t?KI(t):KI;class Oae{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new Gv})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function Bae(t){return new Oae(t)}function $ae(t,e){return JSON.parse(t,(n,r)=>{let s=r;return s?.__type==="bigint"&&(s=BigInt(s.value)),s?.__type==="Map"&&(s=new Map(s.value)),e?.(n,s)??s})}function GI(t,e){return t.slice(0,e).join(".")||"."}function YI(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function Dae(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const u=YI(s,this);u===0?s[s.length]=this:(s.splice(u),i.splice(u)),i[i.length]=a;const l=YI(s,c);if(l!==0)return r?e.call(this,a,c,GI(i,l)):`[ref=${GI(i,l)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function Uae(t,e,n,r){return JSON.stringify(t,Dae((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),e?.(s,o)??o},r),n??void 0)}function Mae(t){const{deserialize:e=$ae,key:n="wagmi",serialize:r=Uae,storage:s=K3}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),u=await i(c);return u?e(u)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const K3={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function Lae(){const t=typeof window<"u"&&window.localStorage?window.localStorage:K3;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const Jb=256;let Gf=Jb,Yf;function Fae(t=11){if(!Yf||Gf+t>Jb*2){Yf="",Gf=0;for(let e=0;e<Jb;e++)Yf+=(256+Math.random()*256|0).toString(16).substring(1)}return Yf.substring(Gf,Gf+++t)}function jae(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=Mae({storage:Lae()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?xae():void 0,a=Zy(()=>i.chains),c=Zy(()=>{const P=[],I=new Set;for(const F of i.connectors??[]){const W=u(F);if(P.push(W),!s&&W.rdns){const D=typeof W.rdns=="string"?[W.rdns]:W.rdns;for(const k of D)I.add(k)}}if(!s&&o){const F=o.getProviders();for(const W of F)I.has(W.info.rdns)||P.push(u(l(W)))}return P});function u(P){const I=Bae(Fae()),F={...P({emitter:I,chains:a.getState(),storage:n,transports:i.transports}),emitter:I,uid:I.uid};return I.on("connect",A),F.setup?.(),F}function l(P){const{info:I}=P,F=P.provider;return Ng({target:{...I,id:I.rdns,provider:F}})}const d=new Map;function h(P={}){const I=P.chainId??v.getState().chainId,F=a.getState().find(D=>D.id===I);if(P.chainId&&!F)throw new Ih;{const D=d.get(v.getState().chainId);if(D&&!F)return D;if(!F)throw new Ih}{const D=d.get(I);if(D)return D}let W;if(i.client)W=i.client({chain:F});else{const D=F.id,k=a.getState().map(R=>R.id),B={},N=Object.entries(i);for(const[R,p]of N)if(!(R==="chains"||R==="client"||R==="connectors"||R==="transports"))if(typeof p=="object")if(D in p)B[R]=p[D];else{if(k.some(w=>w in p))continue;B[R]=p}else B[R]=p;W=U1({...B,chain:F,batch:B.batch??{multicall:!0},transport:R=>i.transports[D]({...R,connectors:c})})}return d.set(I,W),W}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let y;const m="0.0.0-canary-";bp.startsWith(m)?y=Number.parseInt(bp.replace(m,"")):y=Number.parseInt(bp.split(".")[0]??"0");const v=Zy(Nae(n?kae(f,{migrate(P,I){if(I===y)return P;const F=f(),W=T(P,F.chainId);return{...F,chainId:W}},name:"store",partialize(P){return{connections:{__type:"Map",value:Array.from(P.connections.entries()).map(([I,F])=>{const{id:W,name:D,type:k,uid:B}=F.connector;return[I,{...F,connector:{id:W,name:D,type:k,uid:B}}]})},chainId:P.chainId,current:P.current}},merge(P,I){typeof P=="object"&&P&&"status"in P&&delete P.status;const F=T(P,I.chainId);return{...I,...P,chainId:F}},skipHydration:s,storage:n,version:y}):f));v.setState(f());function T(P,I){return P&&typeof P=="object"&&"chainId"in P&&typeof P.chainId=="number"&&a.getState().some(F=>F.id===P.chainId)?P.chainId:I}r&&v.subscribe(({connections:P,current:I})=>I?P.get(I)?.chainId:void 0,P=>{if(a.getState().some(F=>F.id===P))return v.setState(F=>({...F,chainId:P??F.chainId}))}),o?.subscribe(P=>{const I=new Set,F=new Set;for(const D of c.getState())if(I.add(D.id),D.rdns){const k=typeof D.rdns=="string"?[D.rdns]:D.rdns;for(const B of k)F.add(B)}const W=[];for(const D of P){if(F.has(D.info.rdns))continue;const k=u(l(D));I.has(k.id)||W.push(k)}n&&!v.persist.hasHydrated()||c.setState(D=>[...D,...W],!0)});function O(P){v.setState(I=>{const F=I.connections.get(P.uid);return F?{...I,connections:new Map(I.connections).set(P.uid,{accounts:P.accounts??F.accounts,chainId:P.chainId??F.chainId,connector:F.connector})}:I})}function A(P){v.getState().status==="connecting"||v.getState().status==="reconnecting"||v.setState(I=>{const F=c.getState().find(W=>W.uid===P.uid);return F?(F.emitter.listenerCount("connect")&&F.emitter.off("connect",O),F.emitter.listenerCount("change")||F.emitter.on("change",O),F.emitter.listenerCount("disconnect")||F.emitter.on("disconnect",M),{...I,connections:new Map(I.connections).set(P.uid,{accounts:P.accounts,chainId:P.chainId,connector:F}),current:P.uid,status:"connected"}):I})}function M(P){v.setState(I=>{const F=I.connections.get(P.uid);if(F){const D=F.connector;D.emitter.listenerCount("change")&&F.connector.emitter.off("change",O),D.emitter.listenerCount("disconnect")&&F.connector.emitter.off("disconnect",M),D.emitter.listenerCount("connect")||F.connector.emitter.on("connect",A)}if(I.connections.delete(P.uid),I.connections.size===0)return{...I,connections:new Map,current:null,status:"disconnected"};const W=I.connections.values().next().value;return{...I,connections:new Map(I.connections),current:W.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return v.getState()},setState(P){let I;typeof P=="function"?I=P(v.getState()):I=P;const F=f();typeof I!="object"&&(I=F),Object.keys(F).some(D=>!(D in I))&&(I=F),v.setState(I,!0)},subscribe(P,I,F){return v.subscribe(P,I,F?{...F,fireImmediately:F.emitImmediately}:void 0)},_internal:{mipd:o,store:v,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(P){const I=typeof P=="function"?P(a.getState()):P;if(I.length!==0)return a.setState(I,!0)},subscribe(P){return a.subscribe(P)}},connectors:{providerDetailToConnector:l,setup:u,setState(P){return c.setState(typeof P=="function"?P(c.getState()):P,!0)},subscribe(P){return c.subscribe(P)}},events:{change:O,connect:A,disconnect:M}}}}function qae(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(s=>s.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{const i=new Set;for(const c of s??[])if(c.rdns){const u=Array.isArray(c.rdns)?c.rdns:[c.rdns];for(const l of u)i.add(l)}const o=[],a=t._internal.mipd?.getProviders()??[];for(const c of a){if(i.has(c.info.rdns))continue;const u=t._internal.connectors.providerDetailToConnector(c),l=t._internal.connectors.setup(u);o.push(l)}return[...s,...o]})),r?Yb(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}function zae(t){const{children:e,config:n,initialState:r,reconnectOnMount:s=!0}=t,{onMount:i}=qae(n,{initialState:r,reconnectOnMount:s});n._internal.ssr||i();const o=Br.useRef(!0);return Br.useEffect(()=>{if(o.current&&n._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const G3=Br.createContext(void 0);function Xue(t){const{children:e,config:n}=t,r={value:n};return Br.createElement(zae,t,Br.createElement(G3.Provider,r,e))}const Wae="2.16.0",Hae=()=>`wagmi@${Wae}`;class Vae extends Zo{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return Hae()}}class Kae extends Vae{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function Y3(t={}){const e=t.config??Br.useContext(G3);if(!e)throw new Kae;return e}function Gae(t,e){return Z3(t,e)}function Yae(t){return JSON.stringify(t,(e,n)=>Zae(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):typeof n=="bigint"?n.toString():n)}function Zae(t){if(!ZI(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!ZI(n)||!n.hasOwnProperty("isPrototypeOf"))}function ZI(t){return Object.prototype.toString.call(t)==="[object Object]"}function Jae(t){const{_defaulted:e,behavior:n,gcTime:r,initialData:s,initialDataUpdatedAt:i,maxPages:o,meta:a,networkMode:c,queryFn:u,queryHash:l,queryKey:d,queryKeyHashFn:h,retry:f,retryDelay:y,structuralSharing:m,getPreviousPageParam:v,getNextPageParam:T,initialPageParam:O,_optimisticResults:A,enabled:M,notifyOnChangeProps:P,placeholderData:I,refetchInterval:F,refetchIntervalInBackground:W,refetchOnMount:D,refetchOnReconnect:k,refetchOnWindowFocus:B,retryOnMount:N,select:R,staleTime:p,suspense:g,throwOnError:w,config:_,connector:C,query:L,...z}=t;return z}function Xae(t,e={}){return{async queryFn({queryKey:n}){const r=e.abi;if(!r)throw new Error("abi is required");const{functionName:s,scopeKey:i,...o}=n[1],a=(()=>{const c=n[1];if(c.address)return{address:c.address};if(c.code)return{code:c.code};throw new Error("address or code is required")})();if(!s)throw new Error("functionName is required");return V3(t,{abi:r,functionName:s,args:o.args,...a,...o})},queryKey:Qae(e)}}function Qae(t={}){const{abi:e,...n}=t;return["readContract",Jae(n)]}function ece(t){const e=J3({...t,queryKeyHashFn:Yae});return e.queryKey=t.queryKey,e}function tce(t={}){const e=Y3(t);return Br.useSyncExternalStore(n=>bae(e,{onChange:n}),()=>HI(e),()=>HI(e))}function Que(t={}){const{abi:e,address:n,functionName:r,query:s={}}=t,i=t.code,o=Y3(t),a=tce({config:o}),c=Xae(o,{...t,chainId:t.chainId??a}),u=!!((n||i)&&e&&r&&(s.enabled??!0));return ece({...s,...c,enabled:u,structuralSharing:s.structuralSharing??Gae})}function nce(t){let e=[],n,r;function s(a){return Rd.parseEvmChainId(a)||1}function i(){return n||(n=wc.getInstance({projectId:t.options.projectId,chainId:Y.getActiveCaipNetwork()?.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:a=>{a==="iframe_load_failed"?Jt.open(hn.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):a==="iframe_request_timeout"?Jt.open(hn.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):a==="unverified_domain"&&Jt.open(hn.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:hn.EmbeddedWalletAbortController,getActiveCaipNetwork:a=>Y.getActiveCaipNetwork(a)})),n}async function o(a={}){const c=i();let u=a.chainId;if(a.isReconnecting){const m=Rd.parseEvmChainId(c.getLastUsedChainId()||""),v=t.chains?.[0].id;if(u=m||v,!u)throw new Error("ChainId not found in provider")}const l=gr("eip155"),{address:d,chainId:h,accounts:f}=await os.authConnectorAuthenticate({authConnector:c,chainId:u,preferredAccountType:l,socialUri:a.socialUri,chainNamespace:ne.CHAIN.EVM});e=f?.map(m=>m.address)||[d];const y=s(h);return{accounts:e,account:d,chainId:y,chain:{id:y,unsuported:!1}}}return a=>({id:ne.CONNECTOR_ID.AUTH,name:ne.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:ne.CHAIN.EVM,async connect(c={}){if(r)return r;r||(r=new Promise(l=>{l(o(c))}));const u=await r;return r=void 0,u},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e?.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){return this.provider||(this.provider=wc.getInstance({projectId:t.options.projectId,chainId:Y.getActiveCaipNetwork()?.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:hn.EmbeddedWalletAbortController,onTimeout:c=>{c==="iframe_load_failed"?Jt.open(hn.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?Jt.open(hn.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&Jt.open(hn.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:c=>Y.getActiveCaipNetwork(c)})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:u}=await c.getChainId();return s(u)},async isAuthorized(){const u=Y.state.activeChain===ne.CHAIN.EVM;if(ne.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(h=>ve.getConnectorId(h)===ne.CONNECTOR_ID.AUTH)&&!u)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){try{const u=a.chains.find(f=>f.id===c);if(!u)throw new Ji(new Error("chain not found on connector."));const l=await this.getProvider(),d=gr("eip155"),h=await l.connect({chainId:c,preferredAccountType:d});return e=h?.accounts?.map(f=>f.address)||[h.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),u}catch(u){throw u instanceof Error?new Ji(u):u}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(To)})},onChainChanged(c){const u=Number(c);a.emitter.emit("change",{chainId:u})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}rE.type="walletConnect";function rE(t,e){const n=t.isNewChainsStale??!0;let r,s,i,o,a,c,u;return l=>({id:"walletConnect",name:"WalletConnect",type:rE.type,async setup(){const d=await this.getProvider().catch(()=>null);d&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),c||(c=this.onSessionDelete.bind(this),d.on("session_delete",c)))},async connect({...d}={}){try{const h=Y.getCaipNetworks(),f=await this.getProvider();if(!f)throw new wa;a||(a=this.onDisplayUri,f.on("display_uri",a));const y=await this.isChainsStale();f.session&&y&&await f.disconnect();const m=pe.state.universalProviderConfigOverride;if(!f.session||y){const I=zs.createNamespaces(h,m);await f.connect({optionalNamespaces:I,..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(h.map(F=>Number(F.id)))}const v=await this.getAccounts(),T=await this.getChainId(),O=f.session?.namespaces?.eip155?.chains,A=O?.some(I=>Number(I.split(":")[1])===T);let M=1;A?M=T:O?.[0]&&(M=Number(O[0].split(":")[1])),a&&(f.removeListener("display_uri",a),a=void 0),o&&(f.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),f.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),f.on("chainChanged",i)),u||(u=this.onDisconnect.bind(this),f.on("disconnect",u)),c||(c=this.onSessionDelete.bind(this),f.on("session_delete",c));const P=m?.defaultChain;return f.setDefaultChain(P??`eip155:${M}`),{accounts:v,chainId:M}}catch(h){throw/(user rejected|connection request reset)/i.test(h?.message)?new zn(h):h}},async disconnect(){const d=await this.getProvider();try{await d?.disconnect()}catch(h){if(!/No matching key/i.test(h.message))throw h}finally{i&&(d?.removeListener("chainChanged",i),i=void 0),u&&(d?.removeListener("disconnect",u),u=void 0),o||(o=this.onConnect.bind(this),d?.on("connect",o)),s&&(d?.removeListener("accountsChanged",s),s=void 0),c&&(d?.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){const d=await this.getProvider();if(!d?.session?.namespaces)return[];const f=d?.session?.namespaces[ne.CHAIN.EVM]?.accounts?.map(v=>v.split(":")[2])??[],y=new Set;return f.filter(v=>{const T=v?.toLowerCase();return y.has(T)?!1:(y.add(T),!0)})},async getProvider({chainId:d}={}){r||(r=await e.getUniversalProvider(),r?.events.setMaxListeners(Number.POSITIVE_INFINITY));const h=ye.getActiveNamespace(),f=e.getCaipNetwork()?.id;if(d&&f!==d&&h){const y=ye.getStoredActiveCaipNetworkId(),v=(h?e.getCaipNetworks(h):[])?.find(T=>T.id===y);v&&v.chainNamespace===ne.CHAIN.EVM&&await this.switchChain?.({chainId:Number(v.id)})}return r},async getChainId(){const d=e.getCaipNetwork(ne.CHAIN.EVM)?.id;if(d)return d;const f=(await this.getProvider()).session?.namespaces[ne.CHAIN.EVM]?.chains?.[0];return Y.getCaipNetworks().find(m=>m.id===f)?.id},async isAuthorized(){try{const[d,h]=await Promise.all([this.getAccounts(),this.getProvider()]);return d.length?await this.isChainsStale()&&h.session?(await h.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:h}){const f=await this.getProvider();if(!f)throw new wa;const y=Y.getCaipNetworks().find(m=>m.id===h);if(!y)throw new Ji(new Ih);try{await f.request({method:"wallet_switchEthereumChain",params:[{chainId:je(h)}]}),y?.caipNetworkId&&f.setDefaultChain(y?.caipNetworkId),l.emitter.emit("change",{chainId:Number(h)});const m=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...m,h]),{...y,id:y.id}}catch(m){const v=m;if(/(?:user rejected)/iu.test(v.message))throw new zn(v);try{let T;d?.blockExplorerUrls?T=d.blockExplorerUrls:T=y.blockExplorers?.default.url?[y.blockExplorers?.default.url]:[];const O=y.rpcUrls?.chainDefault?.http||[],A={blockExplorerUrls:T,chainId:je(h),chainName:y.name,iconUrls:d?.iconUrls,nativeCurrency:y.nativeCurrency,rpcUrls:O};await f.request({method:"wallet_addEthereumChain",params:[A]});const M=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...M,h]),{...y,id:y.id}}catch(T){throw new zn(T)}}},onAccountsChanged(d){d.length===0?this.onDisconnect():l.emitter.emit("change",{accounts:d.map(h=>To(h))})},onChainChanged(d){const h=Number(d);l.emitter.emit("change",{chainId:h})},onConnect(d){this.setRequestedChainsIds(Y.getCaipNetworks().map(h=>Number(h.id)))},async onDisconnect(d){this.setRequestedChainsIds([]),l.emitter.emit("disconnect");const h=await this.getProvider();s&&(h.removeListener("accountsChanged",s),s=void 0),i&&(h.removeListener("chainChanged",i),i=void 0),u&&(h.removeListener("disconnect",u),u=void 0),c&&(h.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),h.on("connect",o))},onDisplayUri(d){l.emitter.emit("message",{type:"display_uri",data:d})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){return r?.session?.namespaces?r?.session?.namespaces[ne.CHAIN.EVM]?.accounts?.map(f=>Number.parseInt(f.split(":")[1]??""))??[]:[]},async getRequestedChainsIds(){const d=await l.storage?.getItem(this.requestedChainsStorageKey)??[];return[...new Set(d)]},async isChainsStale(){if(!n)return!1;const d=l.chains.map(y=>y.id),h=this.getNamespaceChainsIds();if(h.length&&!h.some(y=>d.includes(y)))return!1;const f=await this.getRequestedChainsIds();return!d.every(y=>f.includes(Number(y)))},async setRequestedChainsIds(d){await l.storage?.setItem(this.requestedChainsStorageKey,d)},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const ed=Dt({pendingTransactions:0}),JI={state:ed,subscribeKey(t,e){return Nn(ed,t,e)},increase(t){ed[t]+=1},decrease(t){ed[t]-=1},reset(t){ed[t]=0}};function rce(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}async function sce(t){if(ke.isSafeApp()){const{safe:e}=await Or(async()=>{const{safe:n}=await import("./index-C-4Cg_QM.js");return{safe:n}},__vite__mapDeps([43,12,13]));if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function ice(t){try{const{coinbaseWallet:e}=await Or(async()=>{const{coinbaseWallet:n}=await import("./index-C-4Cg_QM.js");return{coinbaseWallet:n}},__vite__mapDeps([43,12,13]));if(e&&!t.some(n=>n.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const oce={enable:!1,pollingInterval:3e4};class ele extends Lv{constructor(e){const n=zi.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=ne.CHAIN.EVM,this.adapterType=ne.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...oce,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===ne.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!i?.user)return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>ke.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=Td(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>ke.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=Td(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===ne.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{const i=e.transports?.[s.id],o=zi.getCaipNetworkId(s);i?n[s.id]=zi.extendWagmiTransports(s,e.projectId,i):n[s.id]=zi.getViemTransport(s,e.projectId,e.customRpcUrls?.[o])}),this.wagmiConfig=jae({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=_ae(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),JI.increase("pendingTransactions")}});const e=JI.subscribeKey("pendingTransactions",n=>{n>=ne.LIMITS.PENDING_TRANSACTIONS&&(this.unwatchPendingTransactions?.(),e())})}setupWatchers(){wae(this.wagmiConfig,{onChange:(e,n)=>{if(e.status==="disconnected"&&n.address&&this.emit("disconnect"),e?.chainId&&e?.chainId!==n?.chainId&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"){const r=e.address!==n?.address,s=e.connector.id!==n.connector?.id,i=n.status!=="connected";(r||s||i)&&(this.setupWatchPendingTransactions(),this.handleAccountChanged({address:e.address,chainId:e.chainId,connector:e.connector}))}}}),vae(this.wagmiConfig,{onChange:e=>{this.clearConnections(),this.addConnection(...e.map(n=>{const r=this.getCaipNetworks().find(i=>i.id===n.chainId),s=n.connector.id===ne.CONNECTOR_ID.AUTH;return{accounts:n.accounts.map(i=>({address:i})),caipNetwork:r,connectorId:n.connector.id,auth:s?{name:ye.getConnectedSocialProvider(),username:ye.getConnectedSocialUsername()}:void 0}}))}})}async addThirdPartyConnectors(e){const n=[];if(e.enableCoinbase!==!1){const s=await ice(this.wagmiConfig.connectors);s&&n.push(s)}const r=await sce(this.wagmiConfig.connectors);r&&n.push(r),await Promise.all(n.map(s=>{const i=this.wagmiConfig._internal.connectors.setup(s);return this.wagmiConfig._internal.connectors.setState(o=>[...o,i]),this.addWagmiConnector(i,e)}))}addWagmiConnectors(e,n){const r=[];e.enableWalletConnect!==!1&&r.push(rE(e,n)),e.enableEIP6963!==!1&&r.push(Ng({shimDisconnect:!0}));const s=n?.remoteFeatures?.email??!0,i=Array.isArray(n?.remoteFeatures?.socials)&&n?.remoteFeatures?.socials?.length>0;(s||i)&&r.push(nce({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(o=>{const a=this.wagmiConfig._internal.connectors.setup(o);this.wagmiConfig._internal.connectors.setState(c=>[...c,a])})}async handleAccountChanged({address:e,chainId:n,connector:r}){if(!this.namespace)throw new Error("WagmiAdapter:handleAccountChanged - namespace is required");const s=await r.getProvider().catch(()=>{});this.emit("accountChanged",{address:e,chainId:n,connector:{id:r.id,name:Zn.ConnectorNamesMap[r.id]??r.name,imageId:Zn.ConnectorImageIds[r.id],type:Zn.ConnectorTypesMap[r.type]??"EXTERNAL",info:r.id===ne.CONNECTOR_ID.INJECTED?void 0:{rdns:r.id},provider:s,chain:this.namespace,chains:[]}})}async signMessage(e){try{return{signature:await mae(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=Td(this.wagmiConfig),s={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:n,type:"legacy",parameters:["nonce"]};await pae(this.wagmiConfig,s);const i=await gae(this.wagmiConfig,s);return await Cae(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){const{caipNetwork:n,...r}=e,s=Number(Rd.caipNetworkIdToNumber(n.caipNetworkId));return{hash:await Aae(this.wagmiConfig,{chain:this.wagmiChains?.[s],chainId:s,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await lae(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return cD(e.value,e.decimals)}formatUnits(e){return gl(e.value,e.decimals)}async addWagmiConnector(e,n){if(!this.namespace)throw new Error("WagmiAdapter:addWagmiConnector - namespace is required");if(e.type===ne.CONNECTOR_ID.INJECTED&&n.enableEIP6963===!1||e.id===ne.CONNECTOR_ID.AUTH||e.id===ne.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:Zn.ConnectorExplorerIds[e.id],imageUrl:n?.connectorImages?.[e.id]??e.icon,name:Zn.ConnectorNamesMap[e.id]??e.name,imageId:Zn.ConnectorImageIds[e.id],type:Zn.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===ne.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,n){Eae(this.wagmiConfig,{onChange:r=>{r.forEach(s=>this.addWagmiConnector(s,e))}}),this.addWagmiConnectors(e,n),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnections(){return Promise.resolve()}async syncConnection(e){const{id:n,chainId:r}=e,i=bo(this.wagmiConfig).find(u=>u.connector.id===n),a=await this.getWagmiConnector(n)?.getProvider();if(ke.isSafeApp()&&n===ne.CONNECTOR_ID.SAFE&&!i?.accounts.length){const u=this.getWagmiConnector("safe");if(u){const l=await Gy(this.wagmiConfig,{connector:u,chainId:Number(r)}),d=await u.getProvider();return{chainId:Number(r),address:l.accounts[0],provider:d,type:i?.connector.type?.toUpperCase(),id:i?.connector.id}}}return{chainId:Number(i?.chainId),address:i?.accounts[0],provider:a,type:i?.connector.type?.toUpperCase(),id:i?.connector.id}}async connectWalletConnect(e){const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await Gy(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await VI(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}async connect(e){const{id:n,address:r,provider:s,type:i,info:o,chainId:a,socialUri:c}=e,u=this.getWagmiConnector(n);if(!u)throw new Error("connectionControllerClient:connectExternal - connector is undefined");s&&o&&u.id===ne.CONNECTOR_ID.EIP6963&&u.setEip6963Wallet?.({provider:s,info:o});const l=this.wagmiConfig.state?.connections?.get(u.uid);if(l){await this.wagmiConfig.storage?.setItem("recentConnectorId",u.id);const h=[...l.accounts].sort((f,y)=>Dn.isLowerCaseMatch(f,r)?-1:Dn.isLowerCaseMatch(y,r)?1:0);return this.wagmiConfig?.setState(f=>({...f,connections:new Map(f.connections).set(u.uid,{accounts:h,chainId:l.chainId,connector:l.connector}),current:u.uid,status:"connected"})),{address:h[0],chainId:l.chainId,provider:s,type:i,id:n}}const d=await Gy(this.wagmiConfig,{connector:u,chainId:a?Number(a):void 0,socialUri:c});return{address:d.accounts[0],chainId:d.chainId,provider:s,type:i,id:n}}get connections(){return Array.from(this.wagmiConfig.state.connections.values()).map(e=>({accounts:e.accounts.map(n=>({address:n})),connectorId:e.connector.id}))}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await Yb(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=ye.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{try{const c=Number(e.chainId),u=await fae(this.wagmiConfig,{address:e.address,chainId:c,token:e.tokens?.[r.caipNetworkId]?.address});ye.updateNativeBalanceCache({caipAddress:s,balance:u.formatted,symbol:u.symbol,timestamp:Date.now()}),a({balance:u.formatted,symbol:u.symbol})}catch(c){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",c),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){return this.getWagmiConnector("walletConnect")?.provider}async disconnect(e){if(e.id){const n=this.getWagmiConnector(e.id),s=bo(this.wagmiConfig).find(i=>Dn.isLowerCaseMatch(i.connector.id,e.id));return await zI(this.wagmiConfig,{connector:n}),pe.state.enableReconnect===!1&&this.deleteConnection(e.id),s?{connections:[{accounts:s.accounts.map(i=>({address:i})),connectorId:s.connector.id}]}:{connections:[]}}return this.disconnectAll()}async disconnectAll(){const e=bo(this.wagmiConfig),n=await Promise.allSettled(e.map(async r=>{const s=this.getWagmiConnector(r.connector.id);return s&&await zI(this.wagmiConfig,{connector:s}),r}));return this.wagmiConfig.state.connections.clear(),{connections:n.filter(r=>r.status==="fulfilled").map(({value:r})=>({accounts:r.accounts.map(s=>({address:s})),connectorId:r.connector.id}))}}async switchNetwork(e){const{caipNetwork:n}=e,r=this.wagmiConfig.chains.find(s=>s.id.toString()===n.id.toString());await VI(this.wagmiConfig,{chainId:n.id,addEthereumChainParameter:{chainName:r?.name??n.name,nativeCurrency:r?.nativeCurrency??n.nativeCurrency,rpcUrls:[n.rpcUrls?.chainDefault?.http?.[0]??r?.rpcUrls?.default?.http?.[0]??""],blockExplorerUrls:[r?.blockExplorers?.default?.url??n.blockExplorers?.default?.url??""]}}),await super.switchNetwork(e)}async getCapabilities(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=bo(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=i.session?.sessionProperties?.capabilities;if(o){const c=rce(o)[e];if(c)return c}return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=bo(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=bo(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=bo(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setAuthProvider(e){if(!this.namespace)throw new Error("WagmiAdapter:setAuthProvider - namespace is required");this.addConnector({id:ne.CONNECTOR_ID.AUTH,type:"AUTH",name:ne.CONNECTOR_NAMES.AUTH,provider:e,imageId:Zn.ConnectorImageIds[ne.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}async setUniversalProvider(e){return e.on("connect",()=>{const n=bo(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");if(r&&!n.find(s=>s.connector.id===r.id)){if(Y.state.activeChain==="eip155")return;Yb(this.wagmiConfig,{connectors:[r]})}}),this.addConnector(new pg({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"})),Promise.resolve()}}export{Jt as $,Hue as A,Le as B,ve as C,At as D,Lue as E,fd as F,Me as G,Nt as H,gr as I,An as J,vn as K,voe as L,Et as M,lce as N,Fue as O,Ne as P,Cs as Q,Fe as R,Zue as S,fr as T,FA as U,La as V,Xue as W,pe as X,cn as Y,Ute as Z,Or as _,ele as a,F0 as a$,Uce as a0,Mte as a1,hn as a2,Je as a3,nn as a4,uce as a5,kue as a6,$t as a7,hS as a8,jw as a9,To as aA,Ji as aB,Ih as aC,je as aD,zn as aE,wa as aF,d6 as aG,Ng as aH,vi as aI,Ro as aJ,LB as aK,Go as aL,pr as aM,Nce as aN,kce as aO,He as aP,Tw as aQ,Ks as aR,SS as aS,fe as aT,$h as aU,ls as aV,s5 as aW,Zk as aX,dw as aY,m1 as aZ,Hs as a_,js as aa,Z8 as ab,Dt as ac,Nn as ad,In as ae,hp as af,Cp as ag,Dn as ah,jue as ai,Ke as aj,Ub as ak,zi as al,YD as am,os as an,Dce as ao,Due as ap,Xn as aq,tp as ar,jA as as,fE as at,Rue as au,Mue as av,PN as aw,Mb as ax,al as ay,Jue as az,zue as b,yr as b0,Js as b1,yO as b2,Bce as b3,k0 as b4,v1 as b5,Mo as b6,M4 as b7,Un as b8,Lo as b9,_c as bA,Cn as bB,$ce as bC,Tce as bD,LS as bE,Bh as bF,Sce as bG,wi as bH,yl as bI,t3 as bJ,n3 as bK,dU as bL,zv as bM,dse as bN,vl as ba,U1 as bb,Ew as bc,xse as bd,Kc as be,A1 as bf,Cce as bg,SO as bh,Gv as bi,l6 as bj,Oce as bk,bf as bl,Ss as bm,yi as bn,J6 as bo,aM as bp,cM as bq,B2 as br,h6 as bs,el as bt,bi as bu,xce as bv,fc as bw,Vs as bx,Ki as by,z4 as bz,Eu as c,Que as d,hl as e,gl as f,Ae as g,ke as h,ye as i,ne as j,Y as k,Vt as l,Wue as m,Vue as n,Mr as o,tr as p,Qn as q,ci as r,s0 as s,Wu as t,Pue as u,pp as v,ns as w,$ue as x,xo as y,que as z};
